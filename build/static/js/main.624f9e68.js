/*! For license information please see main.624f9e68.js.LICENSE.txt */
(()=>{var e={6:(e,t,n)=>{"use strict";n.d(t,{Ng:()=>i,sb:()=>a,vq:()=>s});var r=n(5202);function s(e){return e instanceof(0,r.A)(e).Element||e instanceof Element}function a(e){return e instanceof(0,r.A)(e).HTMLElement||e instanceof HTMLElement}function i(e){return"undefined"!==typeof ShadowRoot&&(e instanceof(0,r.A)(e).ShadowRoot||e instanceof ShadowRoot)}},67:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(4410),s=n(3666),a=n(8355);function i(e,t){(0,s.A)(2,arguments);var n=(0,a.A)(t);return(0,r.A)(e,-n)}},129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(8355),s=n(4410),a=n(3666),i=6e4;function o(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.A)(e,n*i)}},234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6819),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.default)(e,12*n)}},238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6260),s=n(8355),a=n(3666),i=n(2239);function o(e,t){var n,o,l,c,u,h,d,p;(0,a.A)(1,arguments);var f=(0,i.q)(),m=(0,s.A)(null!==(n=null!==(o=null!==(l=null!==(c=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==o?o:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,r.default)(e),y=g.getDay(),v=(y<m?7:0)+y-m;return g.setDate(g.getDate()-v),g.setHours(0,0,0,0),g}},246:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r={left:"right",right:"left",bottom:"top",top:"bottom"};function s(e){return e.replace(/left|right|bottom|top/g,(function(e){return r[e]}))}var a=n(3651),i={start:"end",end:"start"};function o(e){return e.replace(/start|end/g,(function(e){return i[e]}))}var l=n(6785),c=n(1594),u=n(5463);const h={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,h=void 0===i||i,d=n.altAxis,p=void 0===d||d,f=n.fallbackPlacements,m=n.padding,g=n.boundary,y=n.rootBoundary,v=n.altBoundary,b=n.flipVariations,w=void 0===b||b,x=n.allowedAutoPlacements,k=t.options.placement,S=(0,a.A)(k),T=f||(S===k||!w?[s(k)]:function(e){if((0,a.A)(e)===u.qZ)return[];var t=s(e);return[o(e),t,o(t)]}(k)),E=[k].concat(T).reduce((function(e,n){return e.concat((0,a.A)(n)===u.qZ?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,h=n.flipVariations,d=n.allowedAutoPlacements,p=void 0===d?u.DD:d,f=(0,c.A)(r),m=f?h?u.Ol:u.Ol.filter((function(e){return(0,c.A)(e)===f})):u.OM,g=m.filter((function(e){return p.indexOf(e)>=0}));0===g.length&&(g=m);var y=g.reduce((function(t,n){return t[n]=(0,l.A)(e,{placement:n,boundary:s,rootBoundary:i,padding:o})[(0,a.A)(n)],t}),{});return Object.keys(y).sort((function(e,t){return y[e]-y[t]}))}(t,{placement:n,boundary:g,rootBoundary:y,padding:m,flipVariations:w,allowedAutoPlacements:x}):n)}),[]),N=t.rects.reference,C=t.rects.popper,I=new Map,_=!0,A=E[0],R=0;R<E.length;R++){var D=E[R],O=(0,a.A)(D),M=(0,c.A)(D)===u.ni,P=[u.Mn,u.sQ].indexOf(O)>=0,L=P?"width":"height",F=(0,l.A)(t,{placement:D,boundary:g,rootBoundary:y,altBoundary:v,padding:m}),$=P?M?u.pG:u.kb:M?u.sQ:u.Mn;N[L]>C[L]&&($=s($));var z=s($),j=[];if(h&&j.push(F[O]<=0),p&&j.push(F[$]<=0,F[z]<=0),j.every((function(e){return e}))){A=D,_=!1;break}I.set(D,j)}if(_)for(var U=function(e){var t=E.find((function(t){var n=I.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},B=w?3:1;B>0;B--){if("break"===U(B))break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}},333:(e,t,n)=>{"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,{A:()=>r})},407:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(5780),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()===a.getTime()}},446:(e,t,n)=>{var r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||i.test(e)?o(e.slice(2),n?2:8):s.test(e)?NaN:+e}e.exports=function(e,t,n){var r,s,a,i,o,l,c=0,u=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,a=s;return r=s=void 0,c=t,i=e.apply(a,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function w(){var e=f();if(b(e))return x(e);o=setTimeout(w,function(e){var n=t-(e-l);return h?p(n,a-(e-c)):n}(e))}function x(e){return o=void 0,y&&r?v(e):(r=s=void 0,i)}function k(){var e=f(),n=b(e);if(r=arguments,s=this,l=e,n){if(void 0===o)return function(e){return c=e,o=setTimeout(w,t),u?v(e):i}(l);if(h)return o=setTimeout(w,t),v(l)}return void 0===o&&(o=setTimeout(w,t)),i}return t=g(t)||0,m(n)&&(u=!!n.leading,a=(h="maxWait"in n)?d(g(n.maxWait)||0,t):a,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=s=o=void 0},k.flush=function(){return void 0===o?i:x(f())},k}},551:()=>{},579:(e,t,n)=>{"use strict";e.exports=n(1153)},775:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2284),s=n(6260),a=n(3666);function i(e){var t,n;if((0,a.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,s.default)(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)})),n||new Date(NaN)}},779:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(2284),s=n(6260),a=n(3778),i=n(8355),o=n(3666);function l(e,t){if((0,o.A)(2,arguments),"object"!==(0,r.A)(t)||null===t)throw new RangeError("values parameter must be an object");var n=(0,s.default)(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=(0,a.default)(n,t.month)),null!=t.date&&n.setDate((0,i.A)(t.date)),null!=t.hours&&n.setHours((0,i.A)(t.hours)),null!=t.minutes&&n.setMinutes((0,i.A)(t.minutes)),null!=t.seconds&&n.setSeconds((0,i.A)(t.seconds)),null!=t.milliseconds&&n.setMilliseconds((0,i.A)(t.milliseconds)),n)}},812:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t);return n.setMinutes(i),n}},1032:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(7461),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.default)(e,-n)}},1049:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6260),s=n(1740),a=n(1104),i=n(3666);var o=6048e5;function l(e){(0,i.A)(1,arguments);var t=(0,r.default)(e),n=(0,s.A)(t).getTime()-function(e){(0,i.A)(1,arguments);var t=(0,a.A)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,s.A)(n)}(t).getTime();return Math.round(n/o)+1}},1104:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6260),s=n(3666),a=n(1740);function i(e){(0,s.A)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var o=(0,a.A)(i),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var c=(0,a.A)(l);return t.getTime()>=o.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}},1153:(e,t,n)=>{"use strict";var r=n(5043),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1210:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getFullYear()}},1234:()=>{},1246:e=>{"use strict";const t=e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=e=>{let{target:{error:{code:t}}}=e;n(Error(`File could not be read! Code=${t}`))},r.readAsArrayBuffer(e)})),n=async e=>{let r=e;if("undefined"===typeof e)return"undefined";if("string"===typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))r=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(e);r=await t.arrayBuffer()}else if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(r=await n(e.src)),"VIDEO"===e.tagName&&(r=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise((n=>{e.toBlob((async e=>{r=await t(e),n()}))}));else if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();r=await t(n)}else(e instanceof File||e instanceof Blob)&&(r=await t(e));return new Uint8Array(r)};e.exports=n},1257:(e,t,n)=>{"use strict";const r=n(1432),s=n(9343),a=n(2163),i=n(7092),o=n(1600),l=n(5783),{setLogging:c}=n(5597);e.exports={languages:i,OEM:o,PSM:l,createScheduler:r,createWorker:s,setLogging:c,...a}},1415:(e,t,n)=>{"use strict";function r(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}n.d(t,{A:()=>r})},1432:function(e,t,n){"use strict";const r=n(5362),{log:s}=n(5597),a=n(1674);let i=0;e.exports=()=>{const e=a("Scheduler",i),t={},n={};let o=[];i+=1;const l=()=>Object.keys(t).length,c=()=>{if(0!==o.length){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)if("undefined"===typeof n[e[r]]){o[0](t[e[r]]);break}}},u=(t,a)=>new Promise(((i,l)=>{const u=r({action:t,payload:a});o.push((async e=>{o.shift(),n[e.id]=u;try{i(await e[t].apply(this,[...a,u.id]))}catch(r){l(r)}finally{delete n[e.id],c()}})),s(`[${e}]: Add ${u.id} to JobQueue`),s(`[${e}]: JobQueue length=${o.length}`),c()}));return{addWorker:n=>(t[n.id]=n,s(`[${e}]: Add ${n.id}`),s(`[${e}]: Number of workers=${l()}`),c(),n.id),addJob:async function(t){if(0===l())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return u(t,r)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),o=[]},getQueueLen:()=>o.length,getNumWorkers:l}}},1497:(e,t,n)=>{"use strict";var r=n(3218);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,a,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return n.PropTypes=n,n}},1555:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(2239),s=n(6260),a=n(8355),i=n(3666);function o(e,t){var n,o,l,c,u,h,d,p;(0,i.A)(1,arguments);var f=(0,r.q)(),m=(0,a.A)(null!==(n=null!==(o=null!==(l=null!==(c=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==o?o:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,s.default)(e),y=g.getDay(),v=6+(y<m?-7:0)-(y-m);return g.setDate(g.getDate()+v),g.setHours(23,59,59,999),g}},1564:(e,t,n)=>{"use strict";n.d(t,{P:()=>a,u:()=>s});var r=n(4473);function s(e,t,n){return(0,r.T9)(e,(0,r.jk)(t,n))}function a(e,t,n){var r=s(e,t,n);return r>n?n:r}},1594:(e,t,n)=>{"use strict";function r(e){return e.split("-")[1]}n.d(t,{A:()=>r})},1600:e=>{"use strict";e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},1627:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getMonth()}},1674:e=>{"use strict";e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},1734:e=>{"use strict";e.exports=e=>{const t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":"object"===typeof document?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},1740:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay(),a=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}},1890:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5463),s=n(6785);function a(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function i(e){return[r.Mn,r.pG,r.sQ,r.kb].some((function(t){return e[t]>=0}))}const o={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,l=t.modifiersData.preventOverflow,c=(0,s.A)(t,{elementContext:"reference"}),u=(0,s.A)(t,{altBoundary:!0}),h=a(c,r),d=a(u,o,l),p=i(h),f=i(d);t.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":f})}}},1899:function(e,t,n){!function(e,t,n,r,s,a,i,o,l,c,u,h,d,p,f,m,g,y,v,b,w,x,k,S,T,E,N,C,I,_,A,R,D,O,M,P,L,F,$,z,j,U,B,V,W,H,G,q,K,Y,X,Q,J,Z,ee,te,ne,re,se,ae,ie,oe,le,ce){"use strict";function ue(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var he=ue(t),de=ue(r),pe=ue(s),fe=ue(a),me=ue(i),ge=ue(o),ye=ue(l),ve=ue(c),be=ue(u),we=ue(h),xe=ue(d),ke=ue(p),Se=ue(f),Te=ue(m),Ee=ue(g),Ne=ue(y),Ce=ue(v),Ie=ue(b),_e=ue(w),Ae=ue(x),Re=ue(k),De=ue(S),Oe=ue(T),Me=ue(E),Pe=ue(N),Le=ue(C),Fe=ue(I),$e=ue(_),ze=ue(A),je=ue(R),Ue=ue(D),Be=ue(O),Ve=ue(M),We=ue(P),He=ue(L),Ge=ue(F),qe=ue($),Ke=ue(z),Ye=ue(j),Xe=ue(U),Qe=ue(B),Je=ue(V),Ze=ue(W),et=ue(H),tt=ue(q),nt=ue(K),rt=ue(Y),st=ue(X),at=ue(Q),it=ue(J),ot=ue(Z),lt=ue(ee),ct=ue(te),ut=ue(ne),ht=ue(re),dt=ue(se),pt=ue(ae),ft=ue(ie),mt=ue(oe),gt=ue(ce);function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dt(r.key),r)}}function kt(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function St(e,t,n){return(t=Dt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}function Et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var s=Nt(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return It(e)}(this,n)}}function At(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Ot=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Mt=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Pt={p:Mt,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return Ot(e,t);switch(s){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ot(s,t)).replace("{{time}}",Mt(a,t))}},Lt=12,Ft=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function $t(e){var t=e?"string"==typeof e||e instanceof String?pt.default(e):ht.default(e):new Date;return zt(t)?t:null}function zt(e,t){return t=t||new Date("1/1/1000"),fe.default(e)&&!ct.default(e,t)}function jt(e,t,n){if("en"===n)return me.default(e,t,{awareOfUnicodeTokens:!0});var r=tn(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&en()&&tn(en())&&(r=tn(en())),me.default(e,t,{locale:r||null,awareOfUnicodeTokens:!0})}function Ut(e,t){var n=t.dateFormat,r=t.locale;return e&&jt(e,Array.isArray(n)?n[0]:n,r)||""}function Bt(e,t){var n=t.hour,r=void 0===n?0:n,s=t.minute,a=void 0===s?0:s,i=t.second,o=void 0===i?0:i;return je.default(ze.default($e.default(e,o),a),r)}function Vt(e,t,n){var r=tn(t||en());return Xe.default(e,{locale:r,weekStartsOn:n})}function Wt(e){return Qe.default(e)}function Ht(e){return Ze.default(e)}function Gt(e){return Je.default(e)}function qt(){return Ye.default($t())}function Kt(e,t){return e&&t?it.default(e,t):!e&&!t}function Yt(e,t){return e&&t?at.default(e,t):!e&&!t}function Xt(e,t){return e&&t?ot.default(e,t):!e&&!t}function Qt(e,t){return e&&t?st.default(e,t):!e&&!t}function Jt(e,t){return e&&t?rt.default(e,t):!e&&!t}function Zt(e,t,n){var r,s=Ye.default(t),a=et.default(n);try{r=ut.default(e,{start:s,end:a})}catch(e){r=!1}return r}function en(){return("undefined"!=typeof window?window:globalThis).__localeId__}function tn(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function nn(e,t){return jt(Ue.default($t(),e),"LLLL",t)}function rn(e,t){return jt(Ue.default($t(),e),"LLL",t)}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,s=t.excludeDates,a=t.excludeDateIntervals,i=t.includeDates,o=t.includeDateIntervals,l=t.filterDate;return pn(e,{minDate:n,maxDate:r})||s&&s.some((function(t){return Qt(e,t)}))||a&&a.some((function(t){var n=t.start,r=t.end;return ut.default(e,{start:n,end:r})}))||i&&!i.some((function(t){return Qt(e,t)}))||o&&!o.some((function(t){var n=t.start,r=t.end;return ut.default(e,{start:n,end:r})}))||l&&!l($t(e))||!1}function an(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var n=t.start,r=t.end;return ut.default(e,{start:n,end:r})})):n&&n.some((function(t){return Qt(e,t)}))||!1}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,s=t.excludeDates,a=t.includeDates,i=t.filterDate;return pn(e,{minDate:Qe.default(n),maxDate:tt.default(r)})||s&&s.some((function(t){return Yt(e,t)}))||a&&!a.some((function(t){return Yt(e,t)}))||i&&!i($t(e))||!1}function ln(e,t,n,r){var s=Le.default(e),a=Me.default(e),i=Le.default(t),o=Me.default(t),l=Le.default(r);return s===i&&s===l?a<=n&&n<=o:s<i?l===s&&a<=n||l===i&&o>=n||l<i&&l>s:void 0}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,s=t.excludeDates,a=t.includeDates,i=t.filterDate;return pn(e,{minDate:n,maxDate:r})||s&&s.some((function(t){return Xt(e,t)}))||a&&!a.some((function(t){return Xt(e,t)}))||i&&!i($t(e))||!1}function un(e,t,n){if(!fe.default(t)||!fe.default(n))return!1;var r=Le.default(t),s=Le.default(n);return r<=e&&s>=e}function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,s=t.excludeDates,a=t.includeDates,i=t.filterDate,o=new Date(e,0,1);return pn(o,{minDate:Ze.default(n),maxDate:nt.default(r)})||s&&s.some((function(e){return Kt(o,e)}))||a&&!a.some((function(e){return Kt(o,e)}))||i&&!i($t(o))||!1}function dn(e,t,n,r){var s=Le.default(e),a=Pe.default(e),i=Le.default(t),o=Pe.default(t),l=Le.default(r);return s===i&&s===l?a<=n&&n<=o:s<i?l===s&&a<=n||l===i&&o>=n||l<i&&l>s:void 0}function pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&Ge.default(e,n)<0||r&&Ge.default(e,r)>0}function fn(e,t){return t.some((function(t){return Ae.default(t)===Ae.default(e)&&_e.default(t)===_e.default(e)}))}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,s=t.filterTime;return n&&fn(e,n)||r&&!fn(e,r)||s&&!s(e)||!1}function gn(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s,a=$t(),i=je.default(ze.default(a,_e.default(e)),Ae.default(e)),o=je.default(ze.default(a,_e.default(n)),Ae.default(n)),l=je.default(ze.default(a,_e.default(r)),Ae.default(r));try{s=!ut.default(i,{start:o,end:l})}catch(e){s=!1}return s}function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,s=Ee.default(e,1);return n&&qe.default(n,s)>0||r&&r.every((function(e){return qe.default(e,s)>0}))||!1}function vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,s=we.default(e,1);return n&&qe.default(s,n)>0||r&&r.every((function(e){return qe.default(s,e)>0}))||!1}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,s=Ce.default(e,1);return n&&Ke.default(n,s)>0||r&&r.every((function(e){return Ke.default(e,s)>0}))||!1}function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,s=ke.default(e,1);return n&&Ke.default(s,n)>0||r&&r.every((function(e){return Ke.default(s,e)>0}))||!1}function xn(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ge.default(e,t)>=0}));return We.default(r)}return n?We.default(n):t}function kn(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ge.default(e,t)<=0}));return He.default(r)}return n?He.default(n):t}function Sn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,s=e.length;r<s;r++){var a=e[r];if(pe.default(a)){var i=jt(a,"MM.dd.yyyy"),o=n.get(i)||[];o.includes(t)||(o.push(t),n.set(i,o))}else if("object"===bt(a)){var l=Object.keys(a),c=l[0],u=a[l[0]];if("string"==typeof c&&u.constructor===Array)for(var h=0,d=u.length;h<d;h++){var p=jt(u[h],"MM.dd.yyyy"),f=n.get(p)||[];f.includes(c)||(f.push(c),n.set(p,f))}}}return n}function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--holidays",n=new Map;return e.forEach((function(e){var r=e.date,s=e.holidayName;if(pe.default(r)){var a=jt(r,"MM.dd.yyyy"),i=n.get(a)||{};if(!("className"in i)||i.className!==t||(o=i.holidayNames,l=[s],o.length!==l.length||!o.every((function(e,t){return e===l[t]})))){var o,l;i.className=t;var c=i.holidayNames;i.holidayNames=c?[].concat(At(c),[s]):[s],n.set(a,i)}}})),n}function En(e,t,n,r,s){for(var a=s.length,i=[],o=0;o<a;o++){var l=ge.default(ye.default(e,Ae.default(s[o])),_e.default(s[o])),c=ge.default(e,(n+1)*r);lt.default(l,t)&&ct.default(l,c)&&i.push(s[o])}return i}function Nn(e){return e<10?"0".concat(e):"".concat(e)}function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt,n=Math.ceil(Le.default(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function In(e){var t=e.getSeconds(),n=e.getMilliseconds();return ht.default(e.getTime()-1e3*t-n)}function _n(e,t,n,r){for(var s=[],a=0;a<2*t+1;a++){var i=e+t-a,o=!0;n&&(o=Le.default(n)<=i),r&&o&&(o=Le.default(r)>=i),o&&s.push(i)}return s}var An=function(e){Et(r,e);var n=_t(r);function r(e){var s;wt(this,r),St(It(s=n.call(this,e)),"renderOptions",(function(){var e=s.props.year,t=s.state.yearsList.map((function(t){return he.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:s.onChange.bind(It(s),t),"aria-selected":e===t?"true":void 0},e===t?he.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),n=s.props.minDate?Le.default(s.props.minDate):null,r=s.props.maxDate?Le.default(s.props.maxDate):null;return r&&s.state.yearsList.find((function(e){return e===r}))||t.unshift(he.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:s.incrementYears},he.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&s.state.yearsList.find((function(e){return e===n}))||t.push(he.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:s.decrementYears},he.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),St(It(s),"onChange",(function(e){s.props.onChange(e)})),St(It(s),"handleClickOutside",(function(){s.props.onCancel()})),St(It(s),"shiftYears",(function(e){var t=s.state.yearsList.map((function(t){return t+e}));s.setState({yearsList:t})})),St(It(s),"incrementYears",(function(){return s.shiftYears(1)})),St(It(s),"decrementYears",(function(){return s.shiftYears(-1)}));var a=e.yearDropdownItemNumber,i=e.scrollableYearDropdown,o=a||(i?10:5);return s.state={yearsList:_n(s.props.year,o,s.props.minDate,s.props.maxDate)},s.dropdownRef=t.createRef(),s}return kt(r,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=n?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=de.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return he.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}]),r}(he.default.Component),Rn=ft.default(An),Dn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"state",{dropdownVisible:!1}),St(It(e),"renderSelectOptions",(function(){for(var t=e.props.minDate?Le.default(e.props.minDate):1900,n=e.props.maxDate?Le.default(e.props.maxDate):2100,r=[],s=t;s<=n;s++)r.push(he.default.createElement("option",{key:s,value:s},s));return r})),St(It(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),St(It(e),"renderSelectMode",(function(){return he.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),St(It(e),"renderReadView",(function(t){return he.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},he.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),St(It(e),"renderDropdown",(function(){return he.default.createElement(Rn,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),St(It(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),St(It(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),St(It(e),"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),St(It(e),"handleYearChange",(function(t,n){e.onSelect(t,n),e.setOpen()})),St(It(e),"onSelect",(function(t,n){e.props.onSelect&&e.props.onSelect(t,n)})),St(It(e),"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return kt(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return he.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(he.default.Component),On=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"isSelectedMonth",(function(t){return e.props.month===t})),St(It(e),"renderOptions",(function(){return e.props.monthNames.map((function(t,n){return he.default.createElement("div",{className:e.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(It(e),n),"aria-selected":e.isSelectedMonth(n)?"true":void 0},e.isSelectedMonth(n)?he.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),St(It(e),"onChange",(function(t){return e.props.onChange(t)})),St(It(e),"handleClickOutside",(function(){return e.props.onCancel()})),e}return kt(n,[{key:"render",value:function(){return he.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}(he.default.Component),Mn=ft.default(On),Pn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"state",{dropdownVisible:!1}),St(It(e),"renderSelectOptions",(function(e){return e.map((function(e,t){return he.default.createElement("option",{key:t,value:t},e)}))})),St(It(e),"renderSelectMode",(function(t){return he.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),St(It(e),"renderReadView",(function(t,n){return he.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},he.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[e.props.month]))})),St(It(e),"renderDropdown",(function(t){return he.default.createElement(Mn,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),St(It(e),"renderScrollMode",(function(t){var n=e.state.dropdownVisible,r=[e.renderReadView(!n,t)];return n&&r.unshift(e.renderDropdown(t)),r})),St(It(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),St(It(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return kt(n,[{key:"render",value:function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return rn(e,t.props.locale)}:function(e){return nn(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return he.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(he.default.Component);function Ln(e,t){for(var n=[],r=Wt(e),s=Wt(t);!lt.default(r,s);)n.push($t(r)),r=we.default(r,1);return n}var Fn=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),St(It(r=t.call(this,e)),"renderOptions",(function(){return r.state.monthYearsList.map((function(e){var t=Fe.default(e),n=Kt(r.props.date,e)&&Yt(r.props.date,e);return he.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:r.onChange.bind(It(r),t),"aria-selected":n?"true":void 0},n?he.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",jt(e,r.props.dateFormat,r.props.locale))}))})),St(It(r),"onChange",(function(e){return r.props.onChange(e)})),St(It(r),"handleClickOutside",(function(){r.props.onCancel()})),r.state={monthYearsList:Ln(r.props.minDate,r.props.maxDate)},r}return kt(n,[{key:"render",value:function(){var e=de.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return he.default.createElement("div",{className:e},this.renderOptions())}}]),n}(he.default.Component),$n=ft.default(Fn),zn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"state",{dropdownVisible:!1}),St(It(e),"renderSelectOptions",(function(){for(var t=Wt(e.props.minDate),n=Wt(e.props.maxDate),r=[];!lt.default(t,n);){var s=Fe.default(t);r.push(he.default.createElement("option",{key:s,value:s},jt(t,e.props.dateFormat,e.props.locale))),t=we.default(t,1)}return r})),St(It(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),St(It(e),"renderSelectMode",(function(){return he.default.createElement("select",{value:Fe.default(Wt(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),St(It(e),"renderReadView",(function(t){var n=jt(e.props.date,e.props.dateFormat,e.props.locale);return he.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},he.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),St(It(e),"renderDropdown",(function(){return he.default.createElement($n,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),St(It(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),St(It(e),"onChange",(function(t){e.toggleDropdown();var n=$t(parseInt(t));Kt(e.props.date,n)&&Yt(e.props.date,n)||e.props.onChange(n)})),St(It(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return kt(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return he.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(he.default.Component),jn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"dayEl",he.default.createRef()),St(It(e),"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),St(It(e),"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),St(It(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),St(It(e),"isSameDay",(function(t){return Qt(e.props.day,t)})),St(It(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!(e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected))&&(e.isSameDay(e.props.preSelection)||e.isSameWeek(e.props.preSelection))})),St(It(e),"isDisabled",(function(){return sn(e.props.day,e.props)})),St(It(e),"isExcluded",(function(){return an(e.props.day,e.props)})),St(It(e),"isStartOfWeek",(function(){return Qt(e.props.day,Vt(e.props.day,e.props.locale,e.props.calendarStartDay))})),St(It(e),"isSameWeek",(function(t){return e.props.showWeekPicker&&Qt(t,Vt(e.props.day,e.props.locale,e.props.calendarStartDay))})),St(It(e),"getHighLightedClass",(function(){var t=e.props,n=t.day,r=t.highlightDates;if(!r)return!1;var s=jt(n,"MM.dd.yyyy");return r.get(s)})),St(It(e),"getHolidaysClass",(function(){var t=e.props,n=t.day,r=t.holidays;if(!r)return!1;var s=jt(n,"MM.dd.yyyy");return r.has(s)?[r.get(s).className]:void 0})),St(It(e),"isInRange",(function(){var t=e.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Zt(n,r,s)})),St(It(e),"isInSelectingRange",(function(){var t,n=e.props,r=n.day,s=n.selectsStart,a=n.selectsEnd,i=n.selectsRange,o=n.selectsDisabledDaysInRange,l=n.startDate,c=n.endDate,u=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(s||a||i)||!u||!o&&e.isDisabled())&&(s&&c&&(ct.default(u,c)||Jt(u,c))?Zt(r,u,c):(a&&l&&(lt.default(u,l)||Jt(u,l))||!(!i||!l||c||!lt.default(u,l)&&!Jt(u,l)))&&Zt(r,l,u))})),St(It(e),"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,s=n.startDate,a=n.selectsStart,i=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Qt(r,a?i:s)})),St(It(e),"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,s=n.endDate,a=n.selectsEnd,i=n.selectsRange,o=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Qt(r,a||i?o:s)})),St(It(e),"isRangeStart",(function(){var t=e.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Qt(r,n)})),St(It(e),"isRangeEnd",(function(){var t=e.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Qt(s,n)})),St(It(e),"isWeekend",(function(){var t=Re.default(e.props.day);return 0===t||6===t})),St(It(e),"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===Me.default(e.props.day)})),St(It(e),"isBeforeMonth",(function(){return void 0!==e.props.month&&(Me.default(e.props.day)+1)%12===e.props.month})),St(It(e),"isCurrentDay",(function(){return e.isSameDay($t())})),St(It(e),"isSelected",(function(){return e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected)})),St(It(e),"getClassNames",(function(t){var n,r=e.props.dayClassName?e.props.dayClassName(t):void 0;return de.default("react-datepicker__day",r,"react-datepicker__day--"+jt(e.props.day,"ddd",n),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"),e.getHolidaysClass())})),St(It(e),"getAriaLabel",(function(){var t=e.props,n=t.day,r=t.ariaLabelPrefixWhenEnabled,s=void 0===r?"Choose":r,a=t.ariaLabelPrefixWhenDisabled,i=void 0===a?"Not available":a,o=e.isDisabled()||e.isExcluded()?i:s;return"".concat(o," ").concat(jt(n,"PPPP",e.props.locale))})),St(It(e),"getTitle",(function(){var t=e.props,n=t.day,r=t.holidays,s=void 0===r?new Map:r,a=jt(n,"MM.dd.yyyy");return s.has(a)&&s.get(a).holidayNames.length>0?s.get(a).holidayNames.join(", "):""})),St(It(e),"getTabIndex",(function(t,n){var r=t||e.props.selected,s=n||e.props.preSelection;return(!e.props.showWeekPicker||!e.props.showWeekNumber&&e.isStartOfWeek())&&(e.isKeyboardSelected()||e.isSameDay(r)&&Qt(s,r))?0:-1})),St(It(e),"handleFocusDay",(function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;0===e.getTabIndex()&&!n.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(r=!0),e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()&&(r=!1),e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()&&(r=!1)),r&&(null===(t=e.dayEl.current)||void 0===t||t.focus({preventScroll:!0}))})),St(It(e),"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(De.default(e.props.day),e.props.day):De.default(e.props.day)})),St(It(e),"render",(function(){return he.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.handleMouseEnter,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),""!==e.getTitle()&&he.default.createElement("span",{className:"holiday-overlay"},e.getTitle()))})),e}return kt(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}]),n}(he.default.Component),Un=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"weekNumberEl",he.default.createRef()),St(It(e),"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),St(It(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),St(It(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Qt(e.props.date,e.props.selected)&&Qt(e.props.date,e.props.preSelection)})),St(It(e),"getTabIndex",(function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||Qt(e.props.date,e.props.selected)&&Qt(e.props.preSelection,e.props.selected))?0:-1})),St(It(e),"handleFocusWeekNumber",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!t.isInputFocused&&Qt(e.props.date,e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})})),e}return kt(n,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(e){this.handleFocusWeekNumber(e)}},{key:"render",value:function(){var e=this.props,t=e.weekNumber,n=e.ariaLabelPrefix,r=void 0===n?"week ":n,s={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!e.onClick,"react-datepicker__week-number--selected":Qt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return he.default.createElement("div",{ref:this.weekNumberEl,className:de.default(s),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),n}(he.default.Component),Bn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n)})),St(It(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),St(It(e),"handleWeekClick",(function(t,n,r){if("function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,n,r),e.props.showWeekPicker){var s=Vt(t,e.props.locale,e.props.calendarStartDay);e.handleDayClick(s,r)}e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),St(It(e),"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):function(e,t){var n=t&&tn(t)||en()&&tn(en());return Oe.default(e,n?{locale:n}:null)}(t)})),St(It(e),"renderDays",(function(){var t=Vt(e.props.day,e.props.locale,e.props.calendarStartDay),n=[],r=e.formatWeekNumber(t);if(e.props.showWeekNumber){var s=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(It(e),t,r):void 0;n.push(he.default.createElement(Un,{key:"W",weekNumber:r,date:t,onClick:s,selected:e.props.selected,preSelection:e.props.preSelection,ariaLabelPrefix:e.props.ariaLabelPrefix,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var r=ve.default(t,n);return he.default.createElement(jn,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,month:e.props.month,onClick:e.handleDayClick.bind(It(e),r),onMouseEnter:e.handleDayMouseEnter.bind(It(e),r),minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),St(It(e),"startOfWeek",(function(){return Vt(e.props.day,e.props.locale,e.props.calendarStartDay)})),St(It(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Qt(e.startOfWeek(),e.props.selected)&&Qt(e.startOfWeek(),e.props.preSelection)})),e}return kt(n,[{key:"render",value:function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Qt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return he.default.createElement("div",{className:de.default(e)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(he.default.Component),Vn="two_columns",Wn="three_columns",Hn="four_columns",Gn=St(St(St({},Vn,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),Wn,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),Hn,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function qn(e,t){return e?Hn:t?Vn:Wn}var Kn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"MONTH_REFS",At(Array(12)).map((function(){return he.default.createRef()}))),St(It(e),"QUARTER_REFS",At(Array(4)).map((function(){return he.default.createRef()}))),St(It(e),"isDisabled",(function(t){return sn(t,e.props)})),St(It(e),"isExcluded",(function(t){return an(t,e.props)})),St(It(e),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n,e.props.orderInDisplay)})),St(It(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),St(It(e),"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),St(It(e),"isRangeStartMonth",(function(t){var n=e.props,r=n.day,s=n.startDate,a=n.endDate;return!(!s||!a)&&Yt(Ue.default(r,t),s)})),St(It(e),"isRangeStartQuarter",(function(t){var n=e.props,r=n.day,s=n.startDate,a=n.endDate;return!(!s||!a)&&Xt(Be.default(r,t),s)})),St(It(e),"isRangeEndMonth",(function(t){var n=e.props,r=n.day,s=n.startDate,a=n.endDate;return!(!s||!a)&&Yt(Ue.default(r,t),a)})),St(It(e),"isRangeEndQuarter",(function(t){var n=e.props,r=n.day,s=n.startDate,a=n.endDate;return!(!s||!a)&&Xt(Be.default(r,t),a)})),St(It(e),"isInSelectingRangeMonth",(function(t){var n,r=e.props,s=r.day,a=r.selectsStart,i=r.selectsEnd,o=r.selectsRange,l=r.startDate,c=r.endDate,u=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(a||i||o)||!u)&&(a&&c?ln(u,c,t,s):(i&&l||!(!o||!l||c))&&ln(l,u,t,s))})),St(It(e),"isSelectingMonthRangeStart",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,s=r.day,a=r.startDate,i=r.selectsStart,o=Ue.default(s,t),l=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return Yt(o,i?l:a)})),St(It(e),"isSelectingMonthRangeEnd",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,s=r.day,a=r.endDate,i=r.selectsEnd,o=r.selectsRange,l=Ue.default(s,t),c=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return Yt(l,i||o?c:a)})),St(It(e),"isInSelectingRangeQuarter",(function(t){var n,r=e.props,s=r.day,a=r.selectsStart,i=r.selectsEnd,o=r.selectsRange,l=r.startDate,c=r.endDate,u=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(a||i||o)||!u)&&(a&&c?dn(u,c,t,s):(i&&l||!(!o||!l||c))&&dn(l,u,t,s))})),St(It(e),"isWeekInMonth",(function(t){var n=e.props.day,r=ve.default(t,6);return Yt(t,n)||Yt(r,n)})),St(It(e),"isCurrentMonth",(function(e,t){return Le.default(e)===Le.default($t())&&t===Me.default($t())})),St(It(e),"isCurrentQuarter",(function(e,t){return Le.default(e)===Le.default($t())&&t===Pe.default($t())})),St(It(e),"isSelectedMonth",(function(e,t,n){return Me.default(n)===t&&Le.default(e)===Le.default(n)})),St(It(e),"isSelectedQuarter",(function(e,t,n){return Pe.default(e)===t&&Le.default(e)===Le.default(n)})),St(It(e),"renderWeeks",(function(){for(var t=[],n=e.props.fixedHeight,r=0,s=!1,a=Vt(Wt(e.props.day),e.props.locale,e.props.calendarStartDay);t.push(he.default.createElement(Bn,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:r,day:a,month:Me.default(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,showWeekNumber:e.props.showWeekNumbers,showWeekPicker:e.props.showWeekPicker,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!s;){r++,a=be.default(a,1);var i=n&&r>=6,o=!n&&!e.isWeekInMonth(a);if(i||o){if(!e.props.peekNextMonth)break;s=!0}}return t})),St(It(e),"onMonthClick",(function(t,n){e.handleDayClick(Wt(Ue.default(e.props.day,n)),t)})),St(It(e),"onMonthMouseEnter",(function(t){e.handleDayMouseEnter(Wt(Ue.default(e.props.day,t)))})),St(It(e),"handleMonthNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),St(It(e),"onMonthKeyDown",(function(t,n){var r=e.props,s=r.selected,a=r.preSelection,i=r.disabledKeyboardNavigation,o=r.showTwoColumnMonthYearPicker,l=r.showFourColumnMonthYearPicker,c=r.setPreSelection,u=t.key;if("Tab"!==u&&t.preventDefault(),!i){var h=qn(l,o),d=Gn[h].verticalNavigationOffset,p=Gn[h].grid;switch(u){case"Enter":e.onMonthClick(t,n),c(s);break;case"ArrowRight":e.handleMonthNavigation(11===n?0:n+1,we.default(a,1));break;case"ArrowLeft":e.handleMonthNavigation(0===n?11:n-1,Ee.default(a,1));break;case"ArrowUp":e.handleMonthNavigation(p[0].includes(n)?n+12-d:n-d,Ee.default(a,d));break;case"ArrowDown":e.handleMonthNavigation(p[p.length-1].includes(n)?n-12+d:n+d,we.default(a,d))}}})),St(It(e),"onQuarterClick",(function(t,n){e.handleDayClick(Gt(Be.default(e.props.day,n)),t)})),St(It(e),"onQuarterMouseEnter",(function(t){e.handleDayMouseEnter(Gt(Be.default(e.props.day,t)))})),St(It(e),"handleQuarterNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),St(It(e),"onQuarterKeyDown",(function(t,n){var r=t.key;if(!e.props.disabledKeyboardNavigation)switch(r){case"Enter":e.onQuarterClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===n?1:n+1,xe.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===n?4:n-1,Ne.default(e.props.preSelection,1))}})),St(It(e),"getMonthClassNames",(function(t){var n=e.props,r=n.day,s=n.startDate,a=n.endDate,i=n.selected,o=n.minDate,l=n.maxDate,c=n.preSelection,u=n.monthClassName,h=n.excludeDates,d=n.includeDates,p=u?u(Ue.default(r,t)):void 0,f=Ue.default(r,t);return de.default("react-datepicker__month-text","react-datepicker__month-".concat(t),p,{"react-datepicker__month-text--disabled":(o||l||h||d)&&on(f,e.props),"react-datepicker__month-text--selected":e.isSelectedMonth(r,t,i),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&Me.default(c)===t,"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(t),"react-datepicker__month-text--in-range":ln(s,a,t,r),"react-datepicker__month-text--range-start":e.isRangeStartMonth(t),"react-datepicker__month-text--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(t),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(t),"react-datepicker__month-text--today":e.isCurrentMonth(r,t)})})),St(It(e),"getTabIndex",(function(t){var n=Me.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),St(It(e),"getQuarterTabIndex",(function(t){var n=Pe.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),St(It(e),"getAriaLabel",(function(t){var n=e.props,r=n.chooseDayAriaLabelPrefix,s=void 0===r?"Choose":r,a=n.disabledDayAriaLabelPrefix,i=void 0===a?"Not available":a,o=n.day,l=Ue.default(o,t),c=e.isDisabled(l)||e.isExcluded(l)?i:s;return"".concat(c," ").concat(jt(l,"MMMM yyyy"))})),St(It(e),"getQuarterClassNames",(function(t){var n=e.props,r=n.day,s=n.startDate,a=n.endDate,i=n.selected,o=n.minDate,l=n.maxDate,c=n.preSelection,u=n.disabledKeyboardNavigation;return de.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter-text--disabled":(o||l)&&cn(Be.default(r,t),e.props),"react-datepicker__quarter-text--selected":e.isSelectedQuarter(r,t,i),"react-datepicker__quarter-text--keyboard-selected":!u&&Pe.default(c)===t,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(t),"react-datepicker__quarter-text--in-range":dn(s,a,t,r),"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(t)})})),St(It(e),"getMonthContent",(function(t){var n=e.props,r=n.showFullMonthYearPicker,s=n.renderMonthContent,a=n.locale,i=n.day,o=rn(t,a),l=nn(t,a);return s?s(t,o,l,i):r?l:o})),St(It(e),"getQuarterContent",(function(t){var n=e.props,r=n.renderQuarterContent,s=function(e,t){return jt(Be.default($t(),e),"QQQ",t)}(t,n.locale);return r?r(t,s):s})),St(It(e),"renderMonths",(function(){var t=e.props,n=t.showTwoColumnMonthYearPicker,r=t.showFourColumnMonthYearPicker,s=t.day,a=t.selected;return Gn[qn(r,n)].grid.map((function(t,n){return he.default.createElement("div",{className:"react-datepicker__month-wrapper",key:n},t.map((function(t,n){return he.default.createElement("div",{ref:e.MONTH_REFS[t],key:n,onClick:function(n){e.onMonthClick(n,t)},onKeyDown:function(n){e.onMonthKeyDown(n,t)},onMouseEnter:function(){return e.onMonthMouseEnter(t)},tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(s,t)?"date":void 0,"aria-selected":e.isSelectedMonth(s,t,a)},e.getMonthContent(t))})))}))})),St(It(e),"renderQuarters",(function(){var t=e.props,n=t.day,r=t.selected;return he.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,s){return he.default.createElement("div",{key:s,ref:e.QUARTER_REFS[s],role:"option",onClick:function(n){e.onQuarterClick(n,t)},onKeyDown:function(n){e.onQuarterKeyDown(n,t)},onMouseEnter:function(){return e.onQuarterMouseEnter(t)},className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(n,t,r),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(n,t)?"date":void 0},e.getQuarterContent(t))})))})),St(It(e),"getClassNames",(function(){var t=e.props,n=t.selectingDate,r=t.selectsStart,s=t.selectsEnd,a=t.showMonthYearPicker,i=t.showQuarterYearPicker,o=t.showWeekPicker;return de.default("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||s)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":i},{"react-datepicker__weekPicker":o})})),e}return kt(n,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,s=e.ariaLabelPrefix,a=void 0===s?"month ":s;return he.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(a," ").concat(jt(r,"yyyy-MM")),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}]),n}(he.default.Component),Yn=function(e){Et(n,e);var t=_t(n);function n(){var e;wt(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return St(It(e=t.call.apply(t,[this].concat(s))),"state",{height:null}),St(It(e),"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){e.list&&(e.list.scrollTop=e.centerLi&&n.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-e.header.clientHeight:e.list.clientHeight,e.centerLi))}))})),St(It(e),"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&gn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&mn(t,e.props)||e.props.onChange(t)})),St(It(e),"isSelectedTime",(function(t){return e.props.selected&&(n=t,In(e.props.selected).getTime()===In(n).getTime());var n})),St(It(e),"isDisabledTime",(function(t){return(e.props.minTime||e.props.maxTime)&&gn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&mn(t,e.props)})),St(It(e),"liClasses",(function(t){var n=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t):void 0];return e.isSelectedTime(t)&&n.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(t)&&n.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*Ae.default(t)+_e.default(t))%e.props.intervals!=0&&n.push("react-datepicker__time-list-item--injected"),n.join(" ")})),St(It(e),"handleOnKeyDown",(function(t,n){" "===t.key&&(t.preventDefault(),t.key="Enter"),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||!t.target.previousSibling||(t.preventDefault(),t.target.previousSibling.focus()),"ArrowDown"!==t.key&&"ArrowRight"!==t.key||!t.target.nextSibling||(t.preventDefault(),t.target.nextSibling.focus()),"Enter"===t.key&&e.handleClick(n),e.props.handleOnKeyDown(t)})),St(It(e),"renderTimes",(function(){for(var t,n=[],r=e.props.format?e.props.format:"p",s=e.props.intervals,a=e.props.selected||e.props.openToDate||$t(),i=(t=a,Ye.default(t)),o=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),l=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(a),c=l/s,u=0;u<c;u++){var h=ge.default(i,u*s);if(n.push(h),o){var d=En(i,h,u,s,o);n=n.concat(d)}}var p=n.reduce((function(e,t){return t.getTime()<=a.getTime()?t:e}),n[0]);return n.map((function(t,n){return he.default.createElement("li",{key:n,onClick:e.handleClick.bind(It(e),t),className:e.liClasses(t),ref:function(n){t===p&&(e.centerLi=n)},onKeyDown:function(n){e.handleOnKeyDown(n,t)},tabIndex:t===p?0:-1,role:"option","aria-selected":e.isSelectedTime(t)?"true":void 0,"aria-disabled":e.isDisabledTime(t)?"true":void 0},jt(t,r,e.props.locale))}))})),e}return kt(n,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return he.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},he.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},he.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),he.default.createElement("div",{className:"react-datepicker__time"},he.default.createElement("div",{className:"react-datepicker__time-box"},he.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}(he.default.Component);St(Yn,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Xn=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),St(It(r=t.call(this,e)),"YEAR_REFS",At(Array(r.props.yearItemNumber)).map((function(){return he.default.createRef()}))),St(It(r),"isDisabled",(function(e){return sn(e,r.props)})),St(It(r),"isExcluded",(function(e){return an(e,r.props)})),St(It(r),"selectingDate",(function(){var e;return null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection})),St(It(r),"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(It(r));window.requestAnimationFrame(t)})),St(It(r),"handleYearClick",(function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)})),St(It(r),"handleYearNavigation",(function(e,t){var n=r.props,s=n.date,a=n.yearItemNumber,i=Cn(s,a).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(r.props.setPreSelection(t),e-i==-1?r.updateFocusOnPaginate(a-1):e-i===a?r.updateFocusOnPaginate(0):r.YEAR_REFS[e-i].current.focus())})),St(It(r),"isSameDay",(function(e,t){return Qt(e,t)})),St(It(r),"isCurrentYear",(function(e){return e===Le.default($t())})),St(It(r),"isRangeStart",(function(e){return r.props.startDate&&r.props.endDate&&Kt(Ve.default($t(),e),r.props.startDate)})),St(It(r),"isRangeEnd",(function(e){return r.props.startDate&&r.props.endDate&&Kt(Ve.default($t(),e),r.props.endDate)})),St(It(r),"isInRange",(function(e){return un(e,r.props.startDate,r.props.endDate)})),St(It(r),"isInSelectingRange",(function(e){var t=r.props,n=t.selectsStart,s=t.selectsEnd,a=t.selectsRange,i=t.startDate,o=t.endDate;return!(!(n||s||a)||!r.selectingDate())&&(n&&o?un(e,r.selectingDate(),o):(s&&i||!(!a||!i||o))&&un(e,i,r.selectingDate()))})),St(It(r),"isSelectingRangeStart",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.startDate,s=t.selectsStart;return Kt(Ve.default($t(),e),s?r.selectingDate():n)})),St(It(r),"isSelectingRangeEnd",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.endDate,s=t.selectsEnd,a=t.selectsRange;return Kt(Ve.default($t(),e),s||a?r.selectingDate():n)})),St(It(r),"isKeyboardSelected",(function(e){var t=Ht(Ve.default(r.props.date,e));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Qt(t,Ht(r.props.selected))&&Qt(t,Ht(r.props.preSelection))})),St(It(r),"onYearClick",(function(e,t){var n=r.props.date;r.handleYearClick(Ht(Ve.default(n,t)),e)})),St(It(r),"onYearKeyDown",(function(e,t){var n=e.key;if(!r.props.disabledKeyboardNavigation)switch(n){case"Enter":r.onYearClick(e,t),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(t+1,ke.default(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(t-1,Ce.default(r.props.preSelection,1))}})),St(It(r),"getYearClassNames",(function(e){var t=r.props,n=t.minDate,s=t.maxDate,a=t.selected,i=t.excludeDates,o=t.includeDates,l=t.filterDate;return de.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":e===Le.default(a),"react-datepicker__year-text--disabled":(n||s||i||o||l)&&hn(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--range-start":r.isRangeStart(e),"react-datepicker__year-text--range-end":r.isRangeEnd(e),"react-datepicker__year-text--in-range":r.isInRange(e),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})})),St(It(r),"getYearTabIndex",(function(e){return r.props.disabledKeyboardNavigation?"-1":e===Le.default(r.props.preSelection)?"0":"-1"})),St(It(r),"getYearContainerClassNames",(function(){var e=r.props,t=e.selectingDate,n=e.selectsStart,s=e.selectsEnd,a=e.selectsRange;return de.default("react-datepicker__year",{"react-datepicker__year--selecting-range":t&&(n||s||a)})})),St(It(r),"getYearContent",(function(e){return r.props.renderYearContent?r.props.renderYearContent(e):e})),r}return kt(n,[{key:"render",value:function(){for(var e=this,t=[],n=this.props,r=n.date,s=n.yearItemNumber,a=n.onYearMouseEnter,i=n.onYearMouseLeave,o=Cn(r,s),l=o.startPeriod,c=o.endPeriod,u=function(n){t.push(he.default.createElement("div",{ref:e.YEAR_REFS[n-l],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){e.onYearKeyDown(t,n)},tabIndex:e.getYearTabIndex(n),className:e.getYearClassNames(n),onMouseEnter:function(e){return a(e,n)},onMouseLeave:function(e){return i(e,n)},key:n,"aria-current":e.isCurrentYear(n)?"date":void 0},e.getYearContent(n)))},h=l;h<=c;h++)u(h);return he.default.createElement("div",{className:this.getYearContainerClassNames()},he.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},t))}}]),n}(he.default.Component),Qn=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),St(It(r=t.call(this,e)),"onTimeChange",(function(e){r.setState({time:e});var t=r.props.date,n=t instanceof Date&&!isNaN(t)?t:new Date;n.setHours(e.split(":")[0]),n.setMinutes(e.split(":")[1]),r.props.onChange(n)})),St(It(r),"renderTimeInput",(function(){var e=r.state.time,t=r.props,n=t.date,s=t.timeString,a=t.customTimeInput;return a?he.default.cloneElement(a,{date:n,value:e,onChange:r.onTimeChange}):he.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){r.onTimeChange(e.target.value||s)}})})),r.state={time:r.props.timeString},r}return kt(n,[{key:"render",value:function(){return he.default.createElement("div",{className:"react-datepicker__input-time-container"},he.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),he.default.createElement("div",{className:"react-datepicker-time__input-container"},he.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}]),n}(he.default.Component);function Jn(e){var t=e.className,n=e.children,r=e.showPopperArrow,s=e.arrowProps,a=void 0===s?{}:s;return he.default.createElement("div",{className:t},r&&he.default.createElement("div",Tt({className:"react-datepicker__triangle"},a)),n)}var Zn=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],er=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),St(It(r=t.call(this,e)),"handleClickOutside",(function(e){r.props.onClickOutside(e)})),St(It(r),"setClickOutsideRef",(function(){return r.containerRef.current})),St(It(r),"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Zn.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&r.props.onDropdownFocus()})),St(It(r),"getDateInView",(function(){var e=r.props,t=e.preSelection,n=e.selected,s=e.openToDate,a=xn(r.props),i=kn(r.props),o=$t();return s||n||t||(a&&ct.default(o,a)?a:i&&lt.default(o,i)?i:o)})),St(It(r),"increaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:we.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),St(It(r),"decreaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:Ee.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),St(It(r),"handleDayClick",(function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)})),St(It(r),"handleDayMouseEnter",(function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)})),St(It(r),"handleMonthMouseLeave",(function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()})),St(It(r),"handleYearMouseEnter",(function(e,t){r.setState({selectingDate:Ve.default($t(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)})),St(It(r),"handleYearMouseLeave",(function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)})),St(It(r),"handleYearChange",(function(e){r.props.onYearChange&&(r.props.onYearChange(e),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),St(It(r),"handleMonthChange",(function(e){r.handleCustomMonthChange(e),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),St(It(r),"handleCustomMonthChange",(function(e){r.props.onMonthChange&&(r.props.onMonthChange(e),r.setState({isRenderAriaLiveMessage:!0}))})),St(It(r),"handleMonthYearChange",(function(e){r.handleYearChange(e),r.handleMonthChange(e)})),St(It(r),"changeYear",(function(e){r.setState((function(t){var n=t.date;return{date:Ve.default(n,e)}}),(function(){return r.handleYearChange(r.state.date)}))})),St(It(r),"changeMonth",(function(e){r.setState((function(t){var n=t.date;return{date:Ue.default(n,e)}}),(function(){return r.handleMonthChange(r.state.date)}))})),St(It(r),"changeMonthYear",(function(e){r.setState((function(t){var n=t.date;return{date:Ve.default(Ue.default(n,Me.default(e)),Le.default(e))}}),(function(){return r.handleMonthYearChange(r.state.date)}))})),St(It(r),"header",(function(){var e=Vt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),t=[];return r.props.showWeekNumbers&&t.push(he.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var n=ve.default(e,t),s=r.formatWeekday(n,r.props.locale),a=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return he.default.createElement("div",{key:t,className:de.default("react-datepicker__day-name",a)},s)})))})),St(It(r),"formatWeekday",(function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(jt(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return jt(e,"EEE",t)}(e,t):function(e,t){return jt(e,"EEEEEE",t)}(e,t)})),St(It(r),"decreaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Ce.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),St(It(r),"clearSelectingDate",(function(){r.setState({selectingDate:null})})),St(It(r),"renderPreviousButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=bn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,s=void 0===r?Lt:r,a=Cn(Ht(Ce.default(e,s)),s).endPeriod,i=n&&Le.default(n);return i&&i>a||!1}(r.state.date,r.props);break;default:e=yn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.decreaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null);var s=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,a=r.props,i=a.previousMonthButtonLabel,o=a.previousYearButtonLabel,l=r.props,c=l.previousMonthAriaLabel,u=void 0===c?"string"==typeof i?i:"Previous Month":c,h=l.previousYearAriaLabel,d=void 0===h?"string"==typeof o?o:"Previous Year":h;return he.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":s?d:u},he.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},s?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}})),St(It(r),"increaseYear",(function(){r.setState((function(e){var t=e.date;return{date:ke.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),St(It(r),"renderNextButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=wn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,s=void 0===r?Lt:r,a=Cn(ke.default(e,s),s).startPeriod,i=n&&Le.default(n);return i&&i<a||!1}(r.state.date,r.props);break;default:e=vn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.increaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null);var s=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,a=r.props,i=a.nextMonthButtonLabel,o=a.nextYearButtonLabel,l=r.props,c=l.nextMonthAriaLabel,u=void 0===c?"string"==typeof i?i:"Next Month":c,h=l.nextYearAriaLabel,d=void 0===h?"string"==typeof o?o:"Next Year":h;return he.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":s?d:u},he.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},s?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}})),St(It(r),"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),he.default.createElement("div",{className:t.join(" ")},jt(e,r.props.dateFormat,r.props.locale))})),St(It(r),"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showYearDropdown&&!e)return he.default.createElement(Dn,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:Le.default(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),St(It(r),"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthDropdown&&!e)return he.default.createElement(Pn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:Me.default(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})})),St(It(r),"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthYearDropdown&&!e)return he.default.createElement(zn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})})),St(It(r),"handleTodayButtonClick",(function(e){r.props.onSelect(qt(),e),r.props.setPreSelection&&r.props.setPreSelection(qt())})),St(It(r),"renderTodayButton",(function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return he.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return r.handleTodayButtonClick(e)}},r.props.todayButton)})),St(It(r),"renderDefaultHeader",(function(e){var t=e.monthDate,n=e.i;return he.default.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),he.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)),he.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),St(It(r),"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,n=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var s=yn(r.state.date,r.props),a=vn(r.state.date,r.props),i=bn(r.state.date,r.props),o=wn(r.state.date,r.props),l=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return he.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(vt(vt({},r.state),{},{customHeaderCount:n,monthDate:t,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:s,nextMonthButtonDisabled:a,prevYearButtonDisabled:i,nextYearButtonDisabled:o})),l&&he.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),St(It(r),"renderYearHeader",(function(){var e=r.state.date,t=r.props,n=t.showYearPicker,s=Cn(e,t.yearItemNumber),a=s.startPeriod,i=s.endPeriod;return he.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},n?"".concat(a," - ").concat(i):Le.default(e))})),St(It(r),"renderHeader",(function(e){switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(e);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(e);default:return r.renderDefaultHeader(e)}})),St(It(r),"renderMonths",(function(){var e;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var t=[],n=r.props.showPreviousMonths?r.props.monthsShown-1:0,s=Ee.default(r.state.date,n),a=null!==(e=r.props.monthSelectedIn)&&void 0!==e?e:n,i=0;i<r.props.monthsShown;++i){var o=i-a+n,l=we.default(s,o),c="month-".concat(i),u=i<r.props.monthsShown-1,h=i>0;t.push(he.default.createElement("div",{key:c,ref:function(e){r.monthContainer=e},className:"react-datepicker__month-container"},r.renderHeader({monthDate:l,i:i}),he.default.createElement(Kn,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:l,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:i,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:u,monthShowsDuplicateDaysStart:h})))}return t}})),St(It(r),"renderYears",(function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?he.default.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader(),he.default.createElement(Xn,Tt({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0})),St(It(r),"renderTimeSection",(function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return he.default.createElement(Yn,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})})),St(It(r),"renderInputTimeSection",(function(){var e=new Date(r.props.selected),t=zt(e)&&Boolean(r.props.selected)?"".concat(Nn(e.getHours()),":").concat(Nn(e.getMinutes())):"";if(r.props.showTimeInput)return he.default.createElement(Qn,{date:e,timeString:t,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})})),St(It(r),"renderAriaLiveRegion",(function(){var e,t=Cn(r.state.date,r.props.yearItemNumber),n=t.startPeriod,s=t.endPeriod;return e=r.props.showYearPicker?"".concat(n," - ").concat(s):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Le.default(r.state.date):"".concat(nn(Me.default(r.state.date),r.props.locale)," ").concat(Le.default(r.state.date)),he.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&e)})),St(It(r),"renderChildren",(function(){if(r.props.children)return he.default.createElement("div",{className:"react-datepicker__children-container"},r.props.children)})),r.containerRef=he.default.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return kt(n,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.preSelection||Qt(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Qt(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!Yt(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return n&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var e=this.props.container||Jn;return he.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},he.default.createElement(e,{className:de.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Lt}}}]),n}(he.default.Component),tr=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,s=e.onClick,a="react-datepicker__calendar-icon";return he.default.isValidElement(t)?he.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(a," ").concat(r),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof s&&s(e)}}):"string"==typeof t?he.default.createElement("i",{className:"".concat(a," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:s}):he.default.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},he.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},nr=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),(r=t.call(this,e)).el=document.createElement("div"),r}return kt(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return mt.default.createPortal(this.props.children,this.el)}}]),n}(he.default.Component),rr=function(e){return!e.disabled&&-1!==e.tabIndex},sr=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),St(It(r=t.call(this,e)),"getTabChildren",(function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(rr)})),St(It(r),"handleFocusStart",(function(){var e=r.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),St(It(r),"handleFocusEnd",(function(){var e=r.getTabChildren();e&&e.length>1&&e[0].focus()})),r.tabLoopRef=he.default.createRef(),r}return kt(n,[{key:"render",value:function(){return this.props.enableTabLoop?he.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},he.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,he.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(he.default.Component),ar=function(e){Et(n,e);var t=_t(n);function n(){return wt(this,n),t.apply(this,arguments)}return kt(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.wrapperClassName,s=t.hidePopper,a=t.popperComponent,i=t.popperModifiers,o=t.popperPlacement,l=t.popperProps,c=t.targetComponent,u=t.enableTabLoop,h=t.popperOnKeyDown,d=t.portalId,p=t.portalHost;if(!s){var f=de.default("react-datepicker-popper",n);e=he.default.createElement(le.Popper,Tt({modifiers:i,placement:o},l),(function(e){var t=e.ref,n=e.style,r=e.placement,s=e.arrowProps;return he.default.createElement(sr,{enableTabLoop:u},he.default.createElement("div",{ref:t,style:n,className:f,"data-placement":r,onKeyDown:h},he.default.cloneElement(a,{arrowProps:s})))}))}this.props.popperContainer&&(e=he.default.createElement(this.props.popperContainer,{},e)),d&&!s&&(e=he.default.createElement(nr,{portalId:d,portalHost:p},e));var m=de.default("react-datepicker-wrapper",r);return he.default.createElement(le.Manager,{className:"react-datepicker-manager"},he.default.createElement(le.Reference,null,(function(e){var t=e.ref;return he.default.createElement("div",{ref:t,className:m},c)})),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(he.default.Component),ir="react-datepicker-ignore-onclickoutside",or=ft.default(er),lr="Date input not valid.",cr=function(e){Et(n,e);var t=_t(n);function n(e){var r;return wt(this,n),St(It(r=t.call(this,e)),"getPreSelection",(function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:$t()})),St(It(r),"modifyHolidays",(function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var n=new Date(t.date);return fe.default(n)?[].concat(At(e),[vt(vt({},t),{},{date:n})]):e}),[])})),St(It(r),"calcInitialState",(function(){var e,t=r.getPreSelection(),n=xn(r.props),s=kn(r.props),a=n&&ct.default(t,Ye.default(n))?n:s&&lt.default(t,et.default(s))?s:t;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:a,highlightDates:Sn(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),St(It(r),"clearPreventFocusTimeout",(function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)})),St(It(r),"setFocus",(function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})})),St(It(r),"setBlur",(function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()})),St(It(r),"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:hr},(function(){e||r.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&r.setBlur(),r.setState({inputValue:null})}))}))})),St(It(r),"inputOk",(function(){return pe.default(r.state.preSelection)})),St(It(r),"isCalendarOpen",(function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open})),St(It(r),"handleFocus",(function(e){r.state.preventFocus||(r.props.onFocus(e),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})})),St(It(r),"sendFocusBackToInput",(function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},(function(){r.preventFocusTimeout=setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))}))})),St(It(r),"cancelFocusInput",(function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null})),St(It(r),"deferFocusInput",(function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout((function(){return r.setFocus()}),1)})),St(It(r),"handleDropdownFocus",(function(){r.cancelFocusInput()})),St(It(r),"handleBlur",(function(e){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(e),r.setState({focused:!1})})),St(It(r),"handleCalendarClickOutside",(function(e){r.props.inline||r.setOpen(!1),r.props.onClickOutside(e),r.props.withPortal&&e.preventDefault()})),St(It(r),"handleChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=t[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(It(r),t),"function"==typeof s.isDefaultPrevented&&!s.isDefaultPrevented())){r.setState({inputValue:s.target.value,lastPreSelectChange:ur});var a,i,o,l,c,u,h,d,p=(a=s.target.value,i=r.props.dateFormat,o=r.props.locale,l=r.props.strictParsing,c=r.props.minDate,u=null,h=tn(o)||tn(en()),d=!0,Array.isArray(i)?(i.forEach((function(e){var t=dt.default(a,e,new Date,{locale:h});l&&(d=zt(t,c)&&a===jt(t,e,o)),zt(t,c)&&d&&(u=t)})),u):(u=dt.default(a,i,new Date,{locale:h}),l?d=zt(u)&&a===jt(u,i,o):zt(u)||(i=i.match(Ft).map((function(e){var t=e[0];return"p"===t||"P"===t?h?(0,Pt[t])(e,h.formatLong):t:e})).join(""),a.length>0&&(u=dt.default(a,i.slice(0,a.length),new Date)),zt(u)||(u=new Date(a))),zt(u)&&d?u:null));r.props.showTimeSelectOnly&&r.props.selected&&p&&!Qt(p,r.props.selected)&&(p=gt.default(r.props.selected,{hours:Ae.default(p),minutes:_e.default(p),seconds:Ie.default(p)})),!p&&s.target.value||(r.props.showWeekPicker&&(p=Vt(p,r.props.locale,r.props.calendarStartDay)),r.setSelected(p,s,!0))}})),St(It(r),"handleSelect",(function(e,t,n){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.props.showWeekPicker&&(e=Vt(e,r.props.locale,r.props.calendarStartDay)),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(e);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var s=r.props,a=s.startDate,i=s.endDate;!a||i||ct.default(e,a)||r.setOpen(!1)}})),St(It(r),"setSelected",(function(e,t,n,s){var a=e;if(r.props.showYearPicker){if(null!==a&&hn(Le.default(a),r.props))return}else if(r.props.showMonthYearPicker){if(null!==a&&on(a,r.props))return}else if(null!==a&&sn(a,r.props))return;var i=r.props,o=i.onChange,l=i.selectsRange,c=i.startDate,u=i.endDate;if(!Jt(r.props.selected,a)||r.props.allowSameDay||l)if(null!==a&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(a=Bt(a,{hour:Ae.default(r.props.selected),minute:_e.default(r.props.selected),second:Ie.default(r.props.selected)})),r.props.inline||r.setState({preSelection:a}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:s})),l){var h=c&&u;c||u?c&&!u&&(ct.default(a,c)?o([a,null],t):o([c,a],t)):o([a,null],t),h&&o([a,null],t)}else o(a,t);n||(r.props.onSelect(a,t),r.setState({inputValue:null}))})),St(It(r),"setPreSelection",(function(e){var t=void 0!==r.props.minDate,n=void 0!==r.props.maxDate,s=!0;if(e){r.props.showWeekPicker&&(e=Vt(e,r.props.locale,r.props.calendarStartDay));var a=Ye.default(e);if(t&&n)s=Zt(e,r.props.minDate,r.props.maxDate);else if(t){var i=Ye.default(r.props.minDate);s=lt.default(e,i)||Jt(a,i)}else if(n){var o=et.default(r.props.maxDate);s=ct.default(e,o)||Jt(a,o)}}s&&r.setState({preSelection:e})})),St(It(r),"toggleCalendar",(function(){r.setOpen(!r.state.open)})),St(It(r),"handleTimeChange",(function(e){var t=r.props.selected?r.props.selected:r.getPreSelection(),n=r.props.selected?e:Bt(t,{hour:Ae.default(e),minute:_e.default(e)});r.setState({preSelection:n}),r.props.onChange(n),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})})),St(It(r),"onInputClick",(function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()})),St(It(r),"onInputKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',s=r.calendar.componentNode&&r.calendar.componentNode.querySelector(n);return void(s&&s.focus({preventScroll:!0}))}var a=$t(r.state.preSelection);"Enter"===t?(e.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===hr?(r.handleSelect(a,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(a)):r.setOpen(!1)):"Escape"===t?(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):"Tab"===t&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:lr})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||r.onInputClick()})),St(It(r),"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),St(It(r),"onDayKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key,n=$t(r.state.preSelection);if("Enter"===t)e.preventDefault(),r.handleSelect(n,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(n);else if("Escape"===t)e.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:lr});else if(!r.props.disabledKeyboardNavigation){var s;switch(t){case"ArrowLeft":s=r.props.showWeekPicker?Te.default(n,1):Se.default(n,1);break;case"ArrowRight":s=r.props.showWeekPicker?be.default(n,1):ve.default(n,1);break;case"ArrowUp":s=Te.default(n,1);break;case"ArrowDown":s=be.default(n,1);break;case"PageUp":s=Ee.default(n,1);break;case"PageDown":s=we.default(n,1);break;case"Home":s=Ce.default(n,1);break;case"End":s=ke.default(n,1);break;default:s=null}if(!s)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:lr}));if(e.preventDefault(),r.setState({lastPreSelectChange:hr}),r.props.adjustDateOnChange&&r.setSelected(s),r.setPreSelection(s),r.props.inline){var a=Me.default(n),i=Me.default(s),o=Le.default(n),l=Le.default(s);a!==i||o!==l?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}})),St(It(r),"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.sendFocusBackToInput())})),St(It(r),"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],e):r.props.onChange(null,e),r.setState({inputValue:null})})),St(It(r),"clear",(function(){r.onClearClick()})),St(It(r),"onScroll",(function(e){"boolean"==typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"==typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)})),St(It(r),"renderCalendar",(function(){return r.props.inline||r.isCalendarOpen()?he.default.createElement(or,{ref:function(e){r.calendar=e},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:Tn(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:ir,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,showPopperArrow:r.props.showPopperArrow,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection},r.props.children):null})),St(It(r),"renderAriaLiveRegion",(function(){var e,t=r.props,n=t.dateFormat,s=t.locale,a=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return e=r.props.selectsRange?"Selected start date: ".concat(Ut(r.props.startDate,{dateFormat:a,locale:s}),". ").concat(r.props.endDate?"End date: "+Ut(r.props.endDate,{dateFormat:a,locale:s}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Ut(r.props.selected,{dateFormat:n,locale:s})):r.props.showYearPicker?"Selected year: ".concat(Ut(r.props.selected,{dateFormat:"yyyy",locale:s})):r.props.showMonthYearPicker?"Selected month: ".concat(Ut(r.props.selected,{dateFormat:"MMMM yyyy",locale:s})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Ut(r.props.selected,{dateFormat:"yyyy, QQQ",locale:s})):"Selected date: ".concat(Ut(r.props.selected,{dateFormat:a,locale:s})),he.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)})),St(It(r),"renderDateInput",(function(){var e,t=de.default(r.props.className,St({},ir,r.state.open)),n=r.props.customInput||he.default.createElement("input",{type:"text"}),s=r.props.customInputRef||"ref",a="string"==typeof r.props.value?r.props.value:"string"==typeof r.state.inputValue?r.state.inputValue:r.props.selectsRange?function(e,t,n){if(!e)return"";var r=Ut(e,n),s=t?Ut(t,n):"";return"".concat(r," - ").concat(s)}(r.props.startDate,r.props.endDate,r.props):Ut(r.props.selected,r.props);return he.default.cloneElement(n,(St(St(St(St(St(St(St(St(St(St(e={},s,(function(e){r.input=e})),"value",a),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),St(St(St(St(St(St(St(St(St(St(e,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",de.default(n.props.className,t)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),St(St(St(e,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))})),St(It(r),"renderClearButton",(function(){var e=r.props,t=e.isClearable,n=e.disabled,s=e.selected,a=e.startDate,i=e.endDate,o=e.clearButtonTitle,l=e.clearButtonClassName,c=void 0===l?"":l,u=e.ariaLabelClose,h=void 0===u?"Close":u;return!t||null==s&&null==a&&null==i?null:he.default.createElement("button",{type:"button",className:de.default("react-datepicker__close-icon",c,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":h,onClick:r.onClearClick,title:o,tabIndex:-1})})),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return kt(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var n,r;e.inline&&(n=e.selected,r=this.props.selected,n&&r?Me.default(n)!==Me.default(r)||Le.default(n)!==Le.default(r):n!==r)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Sn(this.props.highlightDates)}),t.focused||Jt(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,s=e.toggleCalendarOnIconClick,a=this.state.open;return he.default.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&he.default.createElement(tr,Tt({icon:n,className:"".concat(r," ").concat(a&&"react-datepicker-ignore-onclickoutside")},s?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?he.default.createElement(sr,{enableTabLoop:this.props.enableTabLoop},he.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=he.default.createElement(nr,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),he.default.createElement("div",null,this.renderInputContainer(),t)}return he.default.createElement(ar,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Lt,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),n}(he.default.Component),ur="input",hr="navigate";e.CalendarContainer=Jn,e.default=cr,e.getDefaultLocale=en,e.registerLocale=function(e,t){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(5043),n(5173),n(8139),n(2733),n(5541),n(9993),n(129),n(5891),n(5479),n(2325),n(6819),n(7461),n(234),n(9170),n(5410),n(3498),n(1032),n(7609),n(7872),n(7400),n(4998),n(3275),n(8667),n(7447),n(1627),n(9129),n(1210),n(8150),n(4028),n(812),n(6802),n(3778),n(1949),n(2950),n(775),n(5277),n(6740),n(3764),n(9275),n(5780),n(238),n(2128),n(4122),n(4975),n(8468),n(1555),n(6255),n(3150),n(7583),n(407),n(2431),n(2382),n(5125),n(8349),n(7278),n(9519),n(6260),n(4342),n(5093),n(2547),n(7950),n(5998),n(779))},1949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(8355),s=n(6260),a=n(3778),i=n(3666);function o(e,t){(0,i.A)(2,arguments);var n=(0,s.default)(e),o=(0,r.A)(t)-(Math.floor(n.getMonth()/3)+1);return(0,a.default)(n,n.getMonth()+3*o)}},2026:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>r,_m:()=>a,s0:()=>s});Math.pow(10,8);var r=6e4,s=36e5,a=1e3},2128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},2163:(e,t,n)=>{"use strict";const r=n(9343);e.exports={recognize:async(e,t,n)=>{const s=await r(t,1,n);return s.recognize(e).finally((async()=>{await s.terminate()}))},detect:async(e,t)=>{const n=await r("osd",0,t);return n.detect(e).finally((async()=>{await n.terminate()}))}}},2217:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(6260),s=n(3666),a=n(9511),i=n(8355),o=n(2239);function l(e,t){var n,l,c,u,h,d,p,f;(0,s.A)(1,arguments);var m=(0,r.default)(e),g=m.getUTCFullYear(),y=(0,o.q)(),v=(0,i.A)(null!==(n=null!==(l=null!==(c=null!==(u=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==u?u:null===t||void 0===t||null===(h=t.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==c?c:y.firstWeekContainsDate)&&void 0!==l?l:null===(p=y.locale)||void 0===p||null===(f=p.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==n?n:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(g+1,0,v),b.setUTCHours(0,0,0,0);var w=(0,a.A)(b,t),x=new Date(0);x.setUTCFullYear(g,0,v),x.setUTCHours(0,0,0,0);var k=(0,a.A)(x,t);return m.getTime()>=w.getTime()?g+1:m.getTime()>=k.getTime()?g:g-1}},2239:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var r={};function s(){return r}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(5479),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=7*(0,r.A)(t);return(0,s.default)(e,n)}},2382:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getFullYear()===a.getFullYear()}},2430:function(e,t,n){var r;!function(s,a,i){var o,l=256,c=i.pow(l,6),u=i.pow(2,52),h=2*u,d=255;function p(e,t,n){var r=[],d=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),v(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,v(a)]}}():e,3),r),p=new f(r),b=function(){for(var e=p.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(i.random=e,t):e})(b,d,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,s=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);s<l;)i[s]=s++;for(s=0;s<l;s++)i[s]=i[a=d&a+e[s%n]+(t=i[s])],i[a]=t;(r.g=function(e){for(var t,n=0,s=r.i,a=r.j,i=r.S;e--;)t=i[s=d&s+1],n=n*l+i[d&(i[s]=i[a=d&a+t])+(i[a]=t)];return r.i=s,r.j=a,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],s=typeof e;if(t&&"object"==s)for(n in e)try{r.push(g(e[n],t-1))}catch(a){}return r.length?r:"string"==s?e:e+"\0"}function y(e,t){for(var n,r=e+"",s=0;s<r.length;)t[d&s]=d&(n^=19*t[d&s])+r.charCodeAt(s++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(i.random(),a),e.exports){e.exports=p;try{o=n(1234)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},2431:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}},2442:(e,t,n)=>{"use strict";function r(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}n.d(t,{A:()=>r})},2447:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6),s=n(4473),a=n(5202),i=n(4876);function o(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),l=1,c=1;t&&(0,r.sb)(e)&&(l=e.offsetWidth>0&&(0,s.LI)(o.width)/e.offsetWidth||1,c=e.offsetHeight>0&&(0,s.LI)(o.height)/e.offsetHeight||1);var u=((0,r.vq)(e)?(0,a.A)(e):window).visualViewport,h=!(0,i.A)()&&n,d=(o.left+(h&&u?u.offsetLeft:0))/l,p=(o.top+(h&&u?u.offsetTop:0))/c,f=o.width/l,m=o.height/c;return{width:f,height:m,top:p,right:d+f,bottom:p+m,left:d,x:d,y:p}}},2450:function(e,t,n){var r,s,a;s=[],void 0===(a="function"===typeof(r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,n){var o=i.URL||i.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):s(l.href)?r(e,t,n):a(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(s(e))r(e,n,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){a(o)}))}}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var a="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},u.readAsDataURL(e)}else{var h=i.URL||i.webkitURL,d=h.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});i.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,s):r)||(e.exports=a)},2547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:()=>f,default:()=>g});var r=n(5043),s=n(7950);function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var l,c,u=(void 0===l&&(l=0),function(){return++l}),h={},d={},p=["touchstart","touchmove"],f="ignore-react-onclickoutside";function m(e,t){var n={};return-1!==p.indexOf(t)&&c&&(n.passive=!e.props.preventDefault),n}const g=function(e,t){var n,l,p=e.displayName||e.name||"Component";return l=n=function(n){var l,f;function g(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+p+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,s.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!==typeof document&&!d[r._uid]){"undefined"===typeof c&&(c=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),d[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),h[r._uid]=function(e){var t;null!==r.componentNode&&(r.initTimeStamp>e.timeStamp||(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&o(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e)))},e.forEach((function(e){document.addEventListener(e,h[r._uid],m(i(r),e))}))}},r.disableOnClickOutside=function(){delete d[r._uid];var e=h[r._uid];if(e&&"undefined"!==typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,m(i(r),t))})),delete h[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=u(),r.initTimeStamp=performance.now(),r}f=n,(l=g).prototype=Object.create(f.prototype),l.prototype.constructor=l,a(l,f);var y=g.prototype;return y.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},y.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+p+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},y.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},y.componentWillUnmount=function(){this.disableOnClickOutside()},y.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,r.createElement)(e,n)},g}(r.Component),n.displayName="OnClickOutside("+p+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:f,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},l}},2724:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2447),s=n(6791),a=n(5775);function i(e){return(0,r.A)((0,s.A)(e)).left+(0,a.A)(e).scrollLeft}},2730:(e,t,n)=>{"use strict";var r=n(5043),s=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var L,F=Object.assign;function $(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function U(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case T:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Te=null;function Ee(e){if(e=bs(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=xs(t),ke(e.stateNode,e.type,t))}}function Ne(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function _e(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==Se||null!==Te)&&(_e(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Oe=!1}function Pe(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,$e=!1,ze=null,je={onError:function(e){Le=!0,Fe=e}};function Ue(e,t,n,r,s,a,i,o,l){Le=!1,Fe=null,Pe.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return We(s),e;if(i===r)return We(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Qe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=ht(o):0!==(a&=i)&&(r=ht(a))}else 0!==(i=n&~s)?r=ht(i):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,Tt,Et,Nt=!1,Ct=[],It=null,_t=null,At=null,Rt=new Map,Dt=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){$t(e)&&n.delete(t)}function jt(){Nt=!1,null!==It&&$t(It)&&(It=null),null!==_t&&$t(_t)&&(_t=null),null!==At&&$t(At)&&(At=null),Rt.forEach(zt),Dt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==_t&&Ut(_t,e),null!==At&&Ut(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var s=bt,a=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=s,Vt.transition=a}}function Gt(e,t,n,r){var s=bt,a=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=s,Vt.transition=a}}function qt(e,t,n,r){if(Wt){var s=Yt(e,t,n,r);if(null===s)Wr(e,t,r,Kt,n),Pt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return It=Lt(It,e,t,n,r,s),!0;case"dragenter":return _t=Lt(_t,e,t,n,r,s),!0;case"mouseover":return At=Lt(At,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==s;){var a=bs(s);if(null!==a&&xt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Kt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=vs(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Qt?Qt.value:Qt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(F({},pn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Tn}var Nn=F({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Nn),In=sn(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),On=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Pn=null;u&&"documentMode"in document&&(Pn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Pn,Fn=u&&(!Mn||Pn&&8<Pn&&11>=Pn),$n=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Kn(e){$r(e,0)}function Yn(e){if(q(ws(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Hn(t,qn,e,xe(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function ar(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=ur(n,a);var i=ur(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Tr={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=Er("animationend"),Cr=Er("animationiteration"),Ir=Er("animationstart"),_r=Er("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Mr=Rr[Or];Dr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Dr(Nr,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,o,l,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Fe;Le=!1,Fe=null,$e||($e=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function $r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Fr(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Fr(s,o,c),a=l}}}if($e)throw e=ze,$e=!1,ze=null,e}function zr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,jr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Xt(t)){case 1:var s=Ht;break;case 4:s=Gt;break;default:s=qt}n=s.bind(null,t,n,e),s=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=vs(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Re((function(){var r=a,s=xe(n),i=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Nr:case Cr:case Ir:l=yn;break;case _r:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=De(f,d))&&u.push(Hr(f,m,p)))),h)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?o:ws(l),p=null==c?o:ws(c),(o=new u(m,f+"leave",l,n,s)).target=h,o.relatedTarget=p,m=null,vs(s)===r&&((u=new u(d,f+"enter",c,n,s)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=qr(p))f++;for(p=0,m=d;m;m=qr(m))p++;for(;0<f-p;)u=qr(u),f--;for(;0<p-f;)d=qr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=qr(u),d=qr(d)}u=null}else u=null;null!==l&&Kr(i,o,l,u,!1),null!==c&&null!==h&&Kr(i,h,c,u,!0)}if("select"===(l=(o=r?ws(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Wn(o))if(Qn)g=ir;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(i,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?ws(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,s)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Qt=s)?Qt.value:Qt.textContent,Bn=!0)),0<(y=Gr(r,b)).length&&(b=new wn(b,e,null,n,s),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,$n);case"textInput":return(e=t.data)===$n&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Mn&&jn(e,t)?(e=en(),Zt=Jt=Qt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=v))}$r(i,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=De(e,n))&&r.unshift(Hr(e,a,s)),null!=(a=De(e,t))&&r.push(Hr(e,a,s))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,a))&&i.unshift(Hr(n,l,o)):s||null!=(l=De(n,a))&&i.push(Hr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,ps="__reactProps$"+hs,fs="__reactContainer$"+hs,ms="__reactEvents$"+hs,gs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function vs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[ds]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xs(e){return e[ps]||null}var ks=[],Ss=-1;function Ts(e){return{current:e}}function Es(e){0>Ss||(e.current=ks[Ss],ks[Ss]=null,Ss--)}function Ns(e,t){Ss++,ks[Ss]=e.current,e.current=t}var Cs={},Is=Ts(Cs),_s=Ts(!1),As=Cs;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Os(){Es(_s),Es(Is)}function Ms(e,t,n){if(Is.current!==Cs)throw Error(a(168));Ns(Is,t),Ns(_s,n)}function Ps(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(a(108,V(e)||"Unknown",s));return F({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,As=Is.current,Ns(Is,e),Ns(_s,_s.current),!0}function Fs(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ps(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,Es(_s),Es(Is),Ns(Is,e)):Es(_s),Ns(_s,n)}var $s=null,zs=!1,js=!1;function Us(e){null===$s?$s=[e]:$s.push(e)}function Bs(){if(!js&&null!==$s){js=!0;var e=0,t=bt;try{var n=$s;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$s=null,zs=!1}catch(s){throw null!==$s&&($s=$s.slice(e+1)),qe(Ze,Bs),s}finally{bt=t,js=!1}}return null}var Vs=[],Ws=0,Hs=null,Gs=0,qs=[],Ks=0,Ys=null,Xs=1,Qs="";function Js(e,t){Vs[Ws++]=Gs,Vs[Ws++]=Hs,Hs=e,Gs=t}function Zs(e,t,n){qs[Ks++]=Xs,qs[Ks++]=Qs,qs[Ks++]=Ys,Ys=e;var r=Xs;e=Qs;var s=32-it(r)-1;r&=~(1<<s),n+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Xs=1<<32-it(t)+s|n<<s|r,Qs=a+e}else Xs=1<<a|n<<s|r,Qs=e}function ea(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ta(e){for(;e===Hs;)Hs=Vs[--Ws],Vs[Ws]=null,Gs=Vs[--Ws],Vs[Ws]=null;for(;e===Ys;)Ys=qs[--Ks],qs[Ks]=null,Qs=qs[--Ks],qs[Ks]=null,Xs=qs[--Ks],qs[Ks]=null}var na=null,ra=null,sa=!1,aa=null;function ia(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Xs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cs(n.nextSibling);var r=na;t&&oa(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,sa=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!sa)return ua(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?cs(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=cs(e.nextSibling)}function pa(){ra=na=null,sa=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=w.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&va(a)===t.type)?((r=s(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case k:return(t=$c(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pc(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case k:return n.key===s?u(e,t,n,r):null;case D:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||P(n))return null!==s?null:h(e,t,n,r,null);ya(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,s,null);ya(t,r)}return null}function m(s,a,o,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(s,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(s,h),a=i(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(s,h),sa&&Js(s,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(s,o[m],l))&&(a=i(h,a,m),null===u?c=h:u.sibling=h,u=h);return sa&&Js(s,m),c}for(h=r(s,h);m<o.length;m++)null!==(g=f(h,s,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(s,e)})),sa&&Js(s,m),c}function g(s,o,l,c){var u=P(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=i(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(s,m),sa&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(s,v.value,c))&&(o=i(v,o,g),null===h?u=v:h.sibling=v,h=v);return sa&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=f(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=i(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(s,e)})),sa&&Js(s,g),u}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=a;null!==u;){if(u.key===c){if((c=i.type)===S){if(7===u.tag){n(r,u.sibling),(a=s(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&va(c)===u.type){n(r,u.sibling),(a=s(u,i.props)).ref=ga(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===S?((a=Pc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Mc(i.type,i.key,i.props,null,r.mode,l)).ref=ga(r,a,i),l.return=r,r=l)}return o(r);case k:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=s(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=$c(i,r.mode,l)).return=r,r=a}return o(r);case D:return e(r,a,(u=i._init)(i._payload),l)}if(te(i))return m(r,a,i,l);if(P(i))return g(r,a,i,l);ya(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=s(a,i)).return=r,r=a):(n(r,a),(a=Fc(i,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var wa=ba(!0),xa=ba(!1),ka=Ts(null),Sa=null,Ta=null,Ea=null;function Na(){Ea=Ta=Sa=null}function Ca(e){var t=ka.current;Es(ka),e._currentValue=t}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){Sa=e,Ea=Ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===Ta){if(null===Sa)throw Error(a(308));Ta=e,Sa.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var Ra=null;function Da(e){null===Ra?Ra=[e]:Ra.push(e)}function Oa(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Da(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ma(e,r)}function Ma(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $a(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ma(e,n)}return null===(s=r.interleaved)?(t.next=t,Da(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ma(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var s=e.updateQueue;Pa=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=s.baseState;for(i=0,u=c=l=null,o=a;;){var d=o.lane,p=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Pa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,i|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=h}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(a(191,s));s.call(r)}}}var Wa={},Ha=Ts(Wa),Ga=Ts(Wa),qa=Ts(Wa);function Ka(e){if(e===Wa)throw Error(a(174));return e}function Ya(e,t){switch(Ns(qa,t),Ns(Ga,e),Ns(Ha,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(Ha),Ns(Ha,t)}function Xa(){Es(Ha),Es(Ga),Es(qa)}function Qa(e){Ka(qa.current);var t=Ka(Ha.current),n=le(t,e.type);t!==n&&(Ns(Ga,e),Ns(Ha,n))}function Ja(e){Ga.current===e&&(Es(Ha),Es(Ga))}var Za=Ts(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=w.ReactCurrentDispatcher,si=w.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,ui=!1,hi=0,di=0;function pi(){throw Error(a(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function mi(e,t,n,r,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Ji:Zi,e=n(r,s),ui){i=0;do{if(ui=!1,hi=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,s)}while(ui)}if(ri.current=Qi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function gi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=oi,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((ai&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,ii.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Ll|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);or(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ki(){}function Si(e,t){var n=ii,r=vi(),s=t(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,bo=!0),r=r.queue,Pi(Ni.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ai(9,Ei.bind(null,n,r,s,t),void 0,null),null===_l)throw Error(a(349));0!==(30&ai)||Ti(n,t,s)}return s}function Ti(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ei(e,t,n,r){t.value=n,t.getSnapshot=r,Ci(t)&&Ii(e)}function Ni(e,t,n){return n((function(){Ci(t)&&Ii(e)}))}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ii(e){var t=Ma(e,1);null!==t&&nc(t,e,1,-1)}function _i(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=qi.bind(null,ii,e),[t.memoizedState,e]}function Ai(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ri(){return vi().memoizedState}function Di(e,t,n,r){var s=yi();ii.flags|=e,s.memoizedState=Ai(1|t,n,void 0,void 0===r?null:r)}function Oi(e,t,n,r){var s=vi();r=void 0===r?null:r;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==r&&fi(r,i.deps))return void(s.memoizedState=Ai(t,n,a,r))}ii.flags|=e,s.memoizedState=Ai(1|t,n,a,r)}function Mi(e,t){return Di(8390656,8,e,t)}function Pi(e,t){return Oi(2048,8,e,t)}function Li(e,t){return Oi(4,2,e,t)}function Fi(e,t){return Oi(4,4,e,t)}function $i(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4,4,$i.bind(null,t,e),n)}function ji(){}function Ui(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ii.lanes|=n,Ll|=n,e.baseState=!0),t)}function Wi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{bt=n,si.transition=r}}function Hi(){return vi().memoizedState}function Gi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(e))Yi(t,n);else if(null!==(n=Oa(e,t,n,r))){nc(n,e,r,ec()),Xi(n,t,r)}}function qi(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Yi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(s.next=s,Da(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Oa(e,t,s,r))&&(nc(n,e,r,s=ec()),Xi(n,t,r))}}function Ki(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qi={readContext:Aa,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Ji={readContext:Aa,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:Mi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,$i.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:_i,useDebugValue:ji,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=_i(!1),t=e[0];return e=Wi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,s=yi();if(sa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===_l)throw Error(a(349));0!==(30&ai)||Ti(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Mi(Ni.bind(null,r,i,e),[e]),r.flags|=2048,Ai(9,Ei.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=_l.identifierPrefix;if(sa){var n=Qs;t=":"+t+"R"+(n=(Xs&~(1<<32-it(Xs)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=di++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Aa,useCallback:Ui,useContext:Aa,useEffect:Pi,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:Bi,useReducer:wi,useRef:Ri,useState:function(){return wi(bi)},useDebugValue:ji,useDeferredValue:function(e){return Vi(vi(),oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],vi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Si,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Aa,useCallback:Ui,useContext:Aa,useEffect:Pi,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:Bi,useReducer:xi,useRef:Ri,useState:function(){return xi(bi)},useDebugValue:ji,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[xi(bi)[0],vi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Si,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=$a(r,s);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,s))&&(nc(t,e,s,r),ja(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=$a(r,s);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,s))&&(nc(t,e,s,r),ja(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=$a(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=za(e,s,r))&&(nc(t,e,r,n),ja(t,e,r))}};function so(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,a))}function ao(e,t,n){var r=!1,s=Cs,a=t.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(s=Ds(t)?As:Is.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Rs(e,s):Cs),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Aa(a):(a=Ds(t)?As:Is.current,s.context=Rs(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Ba(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=$a(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),uo(0,t)},n}function fo(e,t,n){(n=$a(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$a(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xa(t,null,n,r):wa(t,e.child,n,r)}function xo(e,t,n,r,s){n=n.render;var a=t.ref;return _a(t,s),r=mi(e,t,n,r,a,s),n=gi(),null===e||bo?(sa&&n&&ea(t),t.flags|=1,wo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function ko(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,So(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,n,r,s)}function To(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ns(Ol,Dl),Dl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ns(Ol,Dl),Dl|=r;return wo(e,t,s,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,s){var a=Ds(n)?As:Is.current;return a=Rs(t,a),_a(t,s),n=mi(e,t,n,r,a,s),r=gi(),null===e||bo?(sa&&r&&ea(t),t.flags|=1,wo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Co(e,t,n,r,s){if(Ds(n)){var a=!0;Ls(t)}else a=!1;if(_a(t,s),null===t.stateNode)Vo(e,t),ao(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Aa(c):c=Rs(t,c=Ds(n)?As:Is.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;h||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Pa=!1;var d=t.memoizedState;i.state=d,Ba(t,r,i,s),l=t.memoizedState,o!==r||d!==l||_s.current||Pa?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Pa||so(t,n,o,r,d,l,c))?(h||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fa(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,h=t.pendingProps,d=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Aa(l):l=Rs(t,l=Ds(n)?As:Is.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==h||d!==l)&&io(t,i,r,l),Pa=!1,d=t.memoizedState,i.state=d,Ba(t,r,i,s);var f=t.memoizedState;o!==h||d!==f||_s.current||Pa?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Pa||so(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,a,s)}function Io(e,t,n,r,s,a){Eo(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Fs(t,n,!1),Wo(e,t,a);r=t.stateNode,vo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,o,a)):wo(e,t,o,a),t.memoizedState=r.state,s&&Fs(t,n,!0),t.child}function _o(e){var t=e.stateNode;t.pendingContext?Ms(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ms(0,t.context,!1),Ya(e,t.containerInfo)}function Ao(e,t,n,r,s){return pa(),fa(s),t.flags|=256,wo(e,t,n,r),t.child}var Ro,Do,Oo,Mo,Po={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,s=t.pendingProps,i=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ns(Za,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Pc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Po,e):$o(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(i=Pc(i,s,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Po,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(i=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=_l)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Ma(e,s),nc(r,e,s,-1))}return mc(),zo(e,t,o,r=co(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ra=cs(s.nextSibling),na=t,sa=!0,aa=null,null!==e&&(qs[Ks++]=Xs,qs[Ks++]=Qs,qs[Ks++]=Ys,Xs=e.id,Qs=e.overflow,Ys=t),t=$o(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,i,n);if(o){o=s.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Oc(r,o):(o=Pc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Po,s}return e=(o=e.child).sibling,s=Oc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function $o(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&fa(r),wa(t,e.child,null,n),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function Uo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Bo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,n,t);else if(19===e.tag)jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Uo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Uo(t,!0,n,null,a);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ds(t.type)&&Os(),Go(t),null;case 3:return r=t.stateNode,Xa(),Es(_s),Es(Is),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Do(e,t),Go(t),null;case 5:Ja(t);var s=Ka(qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Ka(Ha.current),ha(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ds]=t,r[ps]=i,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Pr.length;s++)zr(Pr[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":se(r,i),zr("invalid",r)}for(var l in ve(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":G(r),Z(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ds]=t,e[ps]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Pr.length;s++)zr(Pr[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(i in ve(n,s),c=s)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zr("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(qa.current),Ka(Ha.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(i=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Go(t),null;case 13:if(Es(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),pa(),t.flags|=98560,i=!1;else if(i=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ds]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xa(),Do(e,t),null===e&&Br(t.stateNode.containerInfo),Go(t),null;case 10:return Ca(t.type._context),Go(t),null;case 19:if(Es(Za),null===(i=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ho(i,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ns(Za,1&Za.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Bl&&(t.flags|=128,r=!0,Ho(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sa)return Go(t),null}else 2*Qe()-i.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=Za.current,Ns(Za,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ko(e,t){switch(ta(t),t.tag){case 1:return Ds(t.type)&&Os(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Es(_s),Es(Is),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Es(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(Za),null;case 4:return Xa(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Oo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ka(Ha.current);var a,i=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),i=[];break;case"select":s=F({},s,{value:void 0}),r=F({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,n,a)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[ps],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=ul,s=hl;ul=null,dl(e,t,n),hl=s,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),s=s.next}while(s!==r)}dl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,dl(e,t,n),Xo=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));pl(i,o,s),ul=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Tc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Tc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(s,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):b(s,h,d,u)}switch(l){case"input":J(s,i);break;case"textarea":ae(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(s,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[ps]=i}catch(g){Tc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){Tc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Ul=Qe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||h,ml(t,e),Xo=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(f=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){xl(d);continue}}null!==f?(f.return=p,Jo=f):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Tc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Jo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var s=Jo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Yo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=i,(Xo=l)&&!c)for(Jo=s;null!==Jo;)l=(i=Jo).child,22===i.tag&&null!==i.memoizedState?kl(s):null!==l?(l.return=i,Jo=l):kl(s);for(;null!==a;)Jo=a,bl(a,t,n),a=a.sibling;Jo=s,Yo=o,Xo=c}wl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Jo=a):wl(e)}}function wl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Va(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&sl(t)}catch(p){Tc(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function kl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Tc(t,s,l)}}var a=t.return;try{sl(t)}catch(l){Tc(t,a,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){Tc(t,i,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Sl,Tl=Math.ceil,El=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Il=0,_l=null,Al=null,Rl=0,Dl=0,Ol=Ts(0),Ml=0,Pl=null,Ll=0,Fl=0,$l=0,zl=null,jl=null,Ul=0,Bl=1/0,Vl=null,Wl=!1,Hl=null,Gl=null,ql=!1,Kl=null,Yl=0,Xl=0,Ql=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==ma.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(a(185));yt(e,n,r),0!==(2&Il)&&e===_l||(e===_l&&(0===(2&Il)&&(Fl|=n),4===Ml&&oc(e,Rl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Qe()+500,zs&&Bs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=dt(e,e===_l?Rl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zs=!0,Us(e)}(lc.bind(null,e)):Us(lc.bind(null,e)),is((function(){0===(6&Il)&&Bs()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=dt(e,e===_l?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Il;Il|=2;var i=fc();for(_l===e&&Rl===t||(Vl=null,Bl=Qe()+500,dc(e,t));;)try{vc();break}catch(l){pc(e,l)}Na(),El.current=i,Il=s,null!==Al?t=0:(_l=null,Rl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=ac(e,s))),1===t)throw n=Pl,dc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!or(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t))throw n=Pl,dc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,jl,Vl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ul+500-Qe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(xc.bind(null,e,jl,Vl),t);break}xc(e,jl,Vl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>s&&(s=o),r&=~i}if(r=s,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=rs(xc.bind(null,e,jl,Vl),r);break}xc(e,jl,Vl);break;default:throw Error(a(329))}}}return rc(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=n,null!==t&&ic(t)),e}function ic(e){null===jl?jl=e:jl.push.apply(jl,e)}function oc(e,t){for(t&=~$l,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(a(327));kc();var t=dt(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Pl,dc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,jl,Vl),rc(e,Qe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Qe()+500,zs&&Bs())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Il=t))&&Bs()}}function hc(){Dl=Ol.current,Es(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Os();break;case 3:Xa(),Es(_s),Es(Is),ni();break;case 5:Ja(r);break;case 4:Xa();break;case 13:case 19:Es(Za);break;case 10:Ca(r.type._context);break;case 22:case 23:hc()}n=n.return}if(_l=e,Al=e=Oc(e.current,null),Rl=Dl=t,Ml=0,Pl=null,$l=Fl=Ll=0,jl=zl=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Ra=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Na(),ri.current=Qi,ci){for(var r=ii.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ci=!1}if(ai=0,li=oi=ii=null,ui=!1,hi=0,Nl.current=null,null===n||null===n.return){Ml=1,Pl=t,Al=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&mo(i,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(i,u,t),mc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),fa(lo(c,l));break e}}i=c=lo(c,l),4!==Ml&&(Ml=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ua(i,po(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ua(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fc(){var e=El.current;return El.current=Qi,null===e?Qi:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===_l||0===(268435455&Ll)&&0===(268435455&Fl)||oc(_l,Rl)}function gc(e,t){var n=Il;Il|=2;var r=fc();for(_l===e&&Rl===t||(Vl=null,dc(e,t));;)try{yc();break}catch(s){pc(e,s)}if(Na(),Il=n,El.current=r,null!==Al)throw Error(a(261));return _l=null,Rl=0,Ml}function yc(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Ye();)bc(Al)}function bc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Nl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Dl)))return void(Al=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ml=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ml&&(Ml=5)}function xc(e,t,n){var r=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Kl);if(0!==(6&Il))throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===_l&&(Al=_l=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,_c(tt,(function(){return kc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,Nl.current=null,function(e,t){if(es=Wt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==i||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Wt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(x){Tc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ts),Wt=!!es,ts=es=null,e.current=n,vl(n,e,s),Xe(),Il=l,bt=o,Cl.transition=i}else e.current=n;if(ql&&(ql=!1,Kl=e,Yl=s),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,Bs()}(e,t,n,r)}finally{Cl.transition=s,bt=r}return null}function kc(){if(null!==Kl){var e=wt(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Il))throw Error(a(331));var s=Il;for(Il|=4,Jo=e.current;null!==Jo;){var i=Jo,o=i.child;if(0!==(16&Jo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,i)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var p=(h=Jo).sibling,f=h.return;if(al(h),h===u){Jo=null;break}if(null!==p){p.return=f,Jo=p;break}Jo=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(i=Jo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Jo=v;break e}Jo=i.return}}var b=e.current;for(Jo=b;null!==Jo;){var w=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Jo=w;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Tc(l,l.return,k)}if(l===o){Jo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Jo=x;break e}Jo=l.return}}if(Il=s,Bs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(k){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=za(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=za(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Rl&n)===n&&(4===Ml||3===Ml&&(130023424&Rl)===Rl&&500>Qe()-Ul?dc(e,0):$l|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ma(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nc(e,n)}function _c(e,t){return qe(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,s,i){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Pc(n.children,s,i,t);case T:o=8,s|=8;break;case E:return(e=Rc(12,n,t,2|s)).elementType=E,e.lanes=i,e;case _:return(e=Rc(13,n,t,s)).elementType=_,e.lanes=i,e;case A:return(e=Rc(19,n,t,s)).elementType=A,e.lanes=i,e;case O:return Lc(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case C:o=9;break e;case I:o=11;break e;case R:o=14;break e;case D:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Pc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,s,a,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Uc(e){if(!e)return Cs;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Ps(e,n,t)}return t}function Bc(e,t,n,r,s,a,i,o,l){return(e=jc(n,r,!0,e,0,a,0,o,l)).context=Uc(null),n=e.current,(a=$a(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Vc(e,t,n,r){var s=t.current,a=ec(),i=tc(s);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$a(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(s,t,i))&&(nc(e,s,i,a),ja(e,s,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:_o(t),pa();break;case 5:Qa(t);break;case 1:Ds(t.type)&&Ls(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(ka,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Ns(Za,1&Za.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ns(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,sa&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var s=Rs(t,Is.current);_a(t,n),s=mi(null,t,r,e,s,n);var i=gi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(i=!0,Ls(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,La(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Io(null,t,r,!0,i,n)):(t.tag=0,sa&&i&&ea(t),wo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),s){case 0:t=No(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=ko(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(_o(t),null===e)throw Error(a(387));r=t.pendingProps,s=(i=t.memoizedState).element,Fa(e,t),Ba(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ao(e,t,r,n,s=lo(Error(a(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=lo(Error(a(424)),t));break e}for(ra=cs(t.stateNode.containerInfo.firstChild),na=t,sa=!0,aa=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===s){t=Wo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==i&&ns(r,i)&&(t.flags|=32),Eo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fo(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,xo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ns(ka,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===s.children&&!_s.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=$a(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ia(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ia(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_a(t,n),r=r(s=Aa(s)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),ko(e,t,r,s=to(r.type,s),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Vo(e,t),t.tag=1,Ds(r)?(e=!0,Ls(t)):e=!1,_a(t,n),ao(t,r,s),oo(t,r,s,n),Io(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return To(e,t,n)}throw Error(a(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof s){var o=s;s=function(){var e=Wc(i);o.call(e)}}Vc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var a=r;r=function(){var e=Wc(i);a.call(e)}}var i=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[fs]=i.current,Br(8===e.nodeType?e.parentNode:e),uc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fs]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,n,r)})),l}(n,t,e,s,r);return Wc(i)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[fs]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Qe()),0===(6&Il)&&(Bl=Qe()+500,Bs()))}break;case 13:uc((function(){var t=Ma(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},kt=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ma(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Tt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xs(r);if(!s)throw Error(a(90));q(r),J(r,s)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,_e=uc;var eu={usingClientEntryPoint:!1,Events:[bs,ws,xs,Ne,Ce,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",s=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Br(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",o=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,s,0,i,o),e[fs]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fs]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2733:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),s=n(3666);function a(e){return(0,s.A)(1,arguments),e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===Object.prototype.toString.call(e)}},2740:e=>{"use strict";e.exports=function(e,t,n,r,s,a,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,s,a,i,o],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},2950:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(i),n)}},2993:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(3651),s=n(5463);const a={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,a=e.name,i=n.offset,o=void 0===i?[0,0]:i,l=s.DD.reduce((function(e,n){return e[n]=function(e,t,n){var a=(0,r.A)(e),i=[s.kb,s.Mn].indexOf(a)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,l=o[0],c=o[1];return l=l||0,c=(c||0)*i,[s.kb,s.pG].indexOf(a)>=0?{x:c,y:l}:{x:l,y:c}}(n,t.rects,o),e}),{}),c=l[t.placement],u=c.x,h=c.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=h),t.modifiersData[a]=l}}},3146:(e,t,n)=>{"use strict";const r=n(6125).rE,s=n(6706);e.exports={...s,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${r}/dist/worker.min.js`}},3150:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3275:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getDay()}},3380:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(5463),s=n(3651),a=n(3436);var i=n(1564),o=n(7790),l=n(6493),c=n(6785),u=n(1594),h=n(7111),d=n(4473);const p={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,p=e.name,f=n.mainAxis,m=void 0===f||f,g=n.altAxis,y=void 0!==g&&g,v=n.boundary,b=n.rootBoundary,w=n.altBoundary,x=n.padding,k=n.tether,S=void 0===k||k,T=n.tetherOffset,E=void 0===T?0:T,N=(0,c.A)(t,{boundary:v,rootBoundary:b,padding:x,altBoundary:w}),C=(0,s.A)(t.placement),I=(0,u.A)(t.placement),_=!I,A=(0,a.A)(C),R="x"===A?"y":"x",D=t.modifiersData.popperOffsets,O=t.rects.reference,M=t.rects.popper,P="function"===typeof E?E(Object.assign({},t.rects,{placement:t.placement})):E,L="number"===typeof P?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,$={x:0,y:0};if(D){if(m){var z,j="y"===A?r.Mn:r.kb,U="y"===A?r.sQ:r.pG,B="y"===A?"height":"width",V=D[A],W=V+N[j],H=V-N[U],G=S?-M[B]/2:0,q=I===r.ni?O[B]:M[B],K=I===r.ni?-M[B]:-O[B],Y=t.elements.arrow,X=S&&Y?(0,o.A)(Y):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:(0,h.A)(),J=Q[j],Z=Q[U],ee=(0,i.u)(0,O[B],X[B]),te=_?O[B]/2-G-ee-J-L.mainAxis:q-ee-J-L.mainAxis,ne=_?-O[B]/2+G+ee+Z+L.mainAxis:K+ee+Z+L.mainAxis,re=t.elements.arrow&&(0,l.A)(t.elements.arrow),se=re?"y"===A?re.clientTop||0:re.clientLeft||0:0,ae=null!=(z=null==F?void 0:F[A])?z:0,ie=V+te-ae-se,oe=V+ne-ae,le=(0,i.u)(S?(0,d.jk)(W,ie):W,V,S?(0,d.T9)(H,oe):H);D[A]=le,$[A]=le-V}if(y){var ce,ue="x"===A?r.Mn:r.kb,he="x"===A?r.sQ:r.pG,de=D[R],pe="y"===R?"height":"width",fe=de+N[ue],me=de-N[he],ge=-1!==[r.Mn,r.kb].indexOf(C),ye=null!=(ce=null==F?void 0:F[R])?ce:0,ve=ge?fe:de-O[pe]-M[pe]-ye+L.altAxis,be=ge?de+O[pe]+M[pe]-ye-L.altAxis:me,we=S&&ge?(0,i.P)(ve,de,be):(0,i.u)(S?ve:fe,de,S?be:me);D[R]=we,$[R]=we-de}t.modifiersData[p]=$}},requiresIfExists:["offset"]}},3436:(e,t,n)=>{"use strict";function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}n.d(t,{A:()=>r})},3498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6819),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.default)(e,-n)}},3651:(e,t,n)=>{"use strict";function r(e){return e.split("-")[0]}n.d(t,{A:()=>r})},3662:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{A:()=>r})},3666:(e,t,n)=>{"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>r})},3764:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}},3778:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t),o=n.getFullYear(),l=n.getDate(),c=new Date(0);c.setFullYear(o,i,15),c.setHours(0,0,0,0);var u=function(e){(0,a.A)(1,arguments);var t=(0,s.default)(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}(c);return n.setMonth(i,Math.min(l,u)),n}},3825:(e,t,n)=>{"use strict";var r,s;n.d(t,{Wi:()=>s,__:()=>r}),function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(r||(r={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(s||(s={}))},3919:(e,t,n)=>{"use strict";const r=n(3146),s=n(4282),a=n(4826),i=n(6171),o=n(6677),l=n(1246);e.exports={defaultOptions:r,spawnWorker:s,terminateWorker:a,onMessage:i,send:o,loadImage:l}},4028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t);return n.setSeconds(i),n}},4122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e),n=t.getMonth(),a=n-n%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}},4123:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(6260),s=n(9511),a=n(2217),i=n(3666),o=n(8355),l=n(2239);var c=6048e5;function u(e,t){(0,i.A)(1,arguments);var n=(0,r.default)(e),u=(0,s.A)(n,t).getTime()-function(e,t){var n,r,c,u,h,d,p,f;(0,i.A)(1,arguments);var m=(0,l.q)(),g=(0,o.A)(null!==(n=null!==(r=null!==(c=null!==(u=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==u?u:null===t||void 0===t||null===(h=t.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==c?c:m.firstWeekContainsDate)&&void 0!==r?r:null===(p=m.locale)||void 0===p||null===(f=p.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==n?n:1),y=(0,a.A)(e,t),v=new Date(0);return v.setUTCFullYear(y,0,g),v.setUTCHours(0,0,0,0),(0,s.A)(v,t)}(n,t).getTime();return Math.round(u/c)+1}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,s)&&!T.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:S.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+I(l,0):a,x(i)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),_(i,t,s,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var u=a+I(o=e[c],c);l+=_(o,t,s,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=_(o=o.value,t,s,u=a+I(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],s=0;return _(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},M={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!T.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},4282:e=>{"use strict";e.exports=e=>{let t,{workerPath:n,workerBlobURL:r}=e;if(Blob&&URL&&r){const e=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(n);return t}},4334:(e,t,n)=>{var r=n(7359),s=n(7066),a=n(9016),i=n(9538),o=n(6288),l=n(5262),c=n(2430);c.alea=r,c.xor128=s,c.xorwow=a,c.xorshift7=i,c.xor4096=o,c.tychei=l,e.exports=c},4342:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rt});var r=n(2284);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}var i=n(8763),o=n(67),l=n(6260);function c(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var u=n(6087),h=n(4967),d=n(8982),p=n(8355),f=n(3666);function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=n(3662);function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,g.A)(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function w(e){var t=b();return function(){var n,s=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return function(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=(0,r.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function T(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(){function e(){x(this,e),E(this,"priority",void 0),E(this,"subPriority",0)}return T(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),C=function(e){y(n,e);var t=w(n);function n(e,r,s,a,i){var o;return x(this,n),(o=t.call(this)).value=e,o.validateValue=r,o.setValue=s,o.priority=a,i&&(o.subPriority=i),o}return T(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(N),I=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",10),E(m(e),"subPriority",-1),e}return T(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(N),_=function(){function e(){x(this,e),E(this,"incompatibleTokens",void 0),E(this,"priority",void 0),E(this,"subPriority",void 0)}return T(e,[{key:"run",value:function(e,t,n,r){var s=this.parse(e,t,n,r);return s?{setter:new C(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),A=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",140),E(m(e),"incompatibleTokens",["R","u","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(_),R=n(2026),D=/^(1[0-2]|0?\d)/,O=/^(3[0-1]|[0-2]?\d)/,M=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,P=/^(5[0-3]|[0-4]?\d)/,L=/^(2[0-3]|[0-1]?\d)/,F=/^(2[0-4]|[0-1]?\d)/,$=/^(1[0-1]|0?\d)/,z=/^(1[0-2]|0?\d)/,j=/^[0-5]?\d/,U=/^[0-5]?\d/,B=/^\d/,V=/^\d{1,2}/,W=/^\d{1,3}/,H=/^\d{1,4}/,G=/^-?\d+/,q=/^-?\d/,K=/^-?\d{1,2}/,Y=/^-?\d{1,3}/,X=/^-?\d{1,4}/,Q=/^([+-])(\d{2})(\d{2})?|Z/,J=/^([+-])(\d{2})(\d{2})|Z/,Z=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ee=/^([+-])(\d{2}):(\d{2})|Z/,te=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ne(e,t){return e?{value:t(e.value),rest:e.rest}:e}function re(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function se(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,s=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:r*(s*R.s0+a*R.Cg+i*R._m),rest:t.slice(n[0].length)}}function ae(e){return re(G,e)}function ie(e,t){switch(e){case 1:return re(B,t);case 2:return re(V,t);case 3:return re(W,t);case 4:return re(H,t);default:return re(new RegExp("^\\d{1,"+e+"}"),t)}}function oe(e,t){switch(e){case 1:return re(q,t);case 2:return re(K,t);case 3:return re(Y,t);case 4:return re(X,t);default:return re(new RegExp("^-?\\d{1,"+e+"}"),t)}}function le(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ce(e,t){var n,r=t>0,s=r?t:1-t;if(s<=50)n=e||100;else{var a=s+50;n=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return r?n:1-n}function ue(e){return e%400===0||e%4===0&&e%100!==0}var he=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",130),E(m(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return ne(ie(4,e),r);case"yo":return ne(n.ordinalNumber(e,{unit:"year"}),r);default:return ne(ie(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var s=ce(n.year,r);return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(_),de=n(2217),pe=n(9511),fe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",130),E(m(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return ne(ie(4,e),r);case"Yo":return ne(n.ordinalNumber(e,{unit:"year"}),r);default:return ne(ie(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var s=(0,de.A)(e,r);if(n.isTwoDigitYear){var a=ce(n.year,s);return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,pe.A)(e,r)}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,pe.A)(e,r)}}]),n}(_),me=n(1740),ge=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",130),E(m(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t){return oe("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,me.A)(r)}}]),n}(_),ye=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",130),E(m(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t){return oe("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(_),ve=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",120),E(m(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return ie(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(_),be=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",120),E(m(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return ie(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(_),we=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),E(m(e),"priority",110),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return ne(re(D,e),r);case"MM":return ne(ie(2,e),r);case"Mo":return ne(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(_),xe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",110),E(m(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return ne(re(D,e),r);case"LL":return ne(ie(2,e),r);case"Lo":return ne(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(_),ke=n(4123);var Se=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",100),E(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return re(P,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return(0,pe.A)(function(e,t,n){(0,f.A)(2,arguments);var r=(0,l.default)(e),s=(0,p.A)(t),a=(0,ke.A)(r,n)-s;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,n,r),r)}}]),n}(_),Te=n(1049);var Ee=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",100),E(m(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return re(P,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return(0,me.A)(function(e,t){(0,f.A)(2,arguments);var n=(0,l.default)(e),r=(0,p.A)(t),s=(0,Te.A)(n)-r;return n.setUTCDate(n.getUTCDate()-7*s),n}(e,n))}}]),n}(_),Ne=[31,28,31,30,31,30,31,31,30,31,30,31],Ce=[31,29,31,30,31,30,31,31,30,31,30,31],Ie=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",90),E(m(e),"subPriority",1),E(m(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return re(O,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){var n=ue(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Ce[r]:t>=1&&t<=Ne[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(_),_e=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",90),E(m(e),"subpriority",1),E(m(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return re(M,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return ue(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(_),Ae=n(2239);function Re(e,t,n){var r,s,a,i,o,c,u,h;(0,f.A)(2,arguments);var d=(0,Ae.q)(),m=(0,p.A)(null!==(r=null!==(s=null!==(a=null!==(i=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==i?i:null===n||void 0===n||null===(o=n.locale)||void 0===o||null===(c=o.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==a?a:d.weekStartsOn)&&void 0!==s?s:null===(u=d.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==r?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,l.default)(e),y=(0,p.A)(t),v=((y%7+7)%7<m?7:0)+y-g.getUTCDay();return g.setUTCDate(g.getUTCDate()+v),g}var De=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",90),E(m(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Re(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(_),Oe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",90),E(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n,r){var s=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ne(ie(t.length,e),s);case"eo":return ne(n.ordinalNumber(e,{unit:"day"}),s);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Re(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(_),Me=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",90),E(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n,r){var s=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ne(ie(t.length,e),s);case"co":return ne(n.ordinalNumber(e,{unit:"day"}),s);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Re(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(_);var Pe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",90),E(m(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return ie(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return ne(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return ne(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ne(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return ne(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){(0,f.A)(2,arguments);var n=(0,p.A)(t);n%7===0&&(n-=7);var r=(0,l.default)(e),s=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+s),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(_),Le=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",80),E(m(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(le(n),0,0,0),e}}]),n}(_),Fe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",80),E(m(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(le(n),0,0,0),e}}]),n}(_),$e=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",80),E(m(e),"incompatibleTokens",["a","b","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(le(n),0,0,0),e}}]),n}(_),ze=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",70),E(m(e),"incompatibleTokens",["H","K","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return re(z,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(_),je=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",70),E(m(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return re(L,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(_),Ue=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",70),E(m(e),"incompatibleTokens",["h","H","k","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return re($,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(_),Be=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",70),E(m(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return re(F,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(_),Ve=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",60),E(m(e),"incompatibleTokens",["t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return re(j,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(_),We=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",50),E(m(e),"incompatibleTokens",["t","T"]),e}return T(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return re(U,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(_),He=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",30),E(m(e),"incompatibleTokens",["t","T"]),e}return T(n,[{key:"parse",value:function(e,t){return ne(ie(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(_),Ge=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",10),E(m(e),"incompatibleTokens",["t","T","x"]),e}return T(n,[{key:"parse",value:function(e,t){switch(t){case"X":return se(Q,e);case"XX":return se(J,e);case"XXXX":return se(Z,e);case"XXXXX":return se(te,e);default:return se(ee,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(_),qe=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",10),E(m(e),"incompatibleTokens",["t","T","X"]),e}return T(n,[{key:"parse",value:function(e,t){switch(t){case"x":return se(Q,e);case"xx":return se(J,e);case"xxxx":return se(Z,e);case"xxxxx":return se(te,e);default:return se(ee,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(_),Ke=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",40),E(m(e),"incompatibleTokens","*"),e}return T(n,[{key:"parse",value:function(e){return ae(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(_),Ye=function(e){y(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return E(m(e=t.call.apply(t,[this].concat(s))),"priority",20),E(m(e),"incompatibleTokens","*"),e}return T(n,[{key:"parse",value:function(e){return ae(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(_),Xe={G:new A,y:new he,Y:new fe,R:new ge,u:new ye,Q:new ve,q:new be,M:new we,L:new xe,w:new Se,I:new Ee,d:new Ie,D:new _e,E:new De,e:new Oe,c:new Me,i:new Pe,a:new Le,b:new Fe,B:new $e,h:new ze,H:new je,K:new Ue,k:new Be,m:new Ve,s:new We,S:new He,X:new Ge,x:new qe,t:new Ke,T:new Ye},Qe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Je=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ze=/^'([^]*?)'?$/,et=/''/g,tt=/\S/,nt=/[a-zA-Z]/;function rt(e,t,n,s){var m,g,y,v,b,w,x,k,S,T,E,N,C,_,A,R,D,O;(0,f.A)(3,arguments);var M=String(e),P=String(t),L=(0,Ae.q)(),F=null!==(m=null!==(g=null===s||void 0===s?void 0:s.locale)&&void 0!==g?g:L.locale)&&void 0!==m?m:i.A;if(!F.match)throw new RangeError("locale must contain match property");var $=(0,p.A)(null!==(y=null!==(v=null!==(b=null!==(w=null===s||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==w?w:null===s||void 0===s||null===(x=s.locale)||void 0===x||null===(k=x.options)||void 0===k?void 0:k.firstWeekContainsDate)&&void 0!==b?b:L.firstWeekContainsDate)&&void 0!==v?v:null===(S=L.locale)||void 0===S||null===(T=S.options)||void 0===T?void 0:T.firstWeekContainsDate)&&void 0!==y?y:1);if(!($>=1&&$<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=(0,p.A)(null!==(E=null!==(N=null!==(C=null!==(_=null===s||void 0===s?void 0:s.weekStartsOn)&&void 0!==_?_:null===s||void 0===s||null===(A=s.locale)||void 0===A||null===(R=A.options)||void 0===R?void 0:R.weekStartsOn)&&void 0!==C?C:L.weekStartsOn)&&void 0!==N?N:null===(D=L.locale)||void 0===D||null===(O=D.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==E?E:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===P)return""===M?(0,l.default)(n):new Date(NaN);var j,U={firstWeekContainsDate:$,weekStartsOn:z,locale:F},B=[new I],V=P.match(Je).map((function(e){var t=e[0];return t in u.A?(0,u.A[t])(e,F.formatLong):e})).join("").match(Qe),W=[],H=a(V);try{var G=function(){var t=j.value;null!==s&&void 0!==s&&s.useAdditionalWeekYearTokens||!(0,d.xM)(t)||(0,d.lJ)(t,P,e),null!==s&&void 0!==s&&s.useAdditionalDayOfYearTokens||!(0,d.ef)(t)||(0,d.lJ)(t,P,e);var n=t[0],r=Xe[n];if(r){var a=r.incompatibleTokens;if(Array.isArray(a)){var i=W.find((function(e){return a.includes(e.token)||e.token===n}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&W.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));W.push({token:n,fullToken:t});var o=r.run(M,t,F.match,U);if(!o)return{v:new Date(NaN)};B.push(o.setter),M=o.rest}else{if(n.match(nt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(Ze)[1].replace(et,"'")),0!==M.indexOf(t))return{v:new Date(NaN)};M=M.slice(t.length)}};for(H.s();!(j=H.n()).done;){var q=G();if("object"===(0,r.A)(q))return q.v}}catch(ne){H.e(ne)}finally{H.f()}if(M.length>0&&tt.test(M))return new Date(NaN);var K=B.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return B.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),Y=(0,l.default)(n);if(isNaN(Y.getTime()))return new Date(NaN);var X,Q=(0,o.A)(Y,(0,h.A)(Y)),J={},Z=a(K);try{for(Z.s();!(X=Z.n()).done;){var ee=X.value;if(!ee.validate(Q,U))return new Date(NaN);var te=ee.set(Q,J,U);Array.isArray(te)?(Q=te[0],c(J,te[1])):Q=te}}catch(ne){Z.e(ne)}finally{Z.f()}return Q}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4396:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(3651),s=n(1594),a=n(3436),i=n(5463);function o(e){var t,n=e.reference,o=e.element,l=e.placement,c=l?(0,r.A)(l):null,u=l?(0,s.A)(l):null,h=n.x+n.width/2-o.width/2,d=n.y+n.height/2-o.height/2;switch(c){case i.Mn:t={x:h,y:n.y-o.height};break;case i.sQ:t={x:h,y:n.y+n.height};break;case i.pG:t={x:n.x+n.width,y:d};break;case i.kb:t={x:n.x-o.width,y:d};break;default:t={x:n.x,y:n.y}}var p=c?(0,a.A)(c):null;if(null!=p){var f="y"===p?"height":"width";switch(u){case i.ni:t[p]=t[p]-(n[f]/2-o[f]/2);break;case i._N:t[p]=t[p]+(n[f]/2-o[f]/2)}}return t}},4410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e).getTime(),i=(0,r.A)(t);return new Date(n+i)}},4473:(e,t,n)=>{"use strict";n.d(t,{LI:()=>a,T9:()=>r,jk:()=>s});var r=Math.max,s=Math.min,a=Math.round},4530:()=>{},4699:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(6650),s=n(7037),a=n(333),i=n(6);function o(e){return["html","body","#document"].indexOf((0,a.A)(e))>=0?e.ownerDocument.body:(0,i.sb)(e)&&(0,s.A)(e)?e:o((0,r.A)(e))}var l=n(5202);function c(e,t){var n;void 0===t&&(t=[]);var a=o(e),i=a===(null==(n=e.ownerDocument)?void 0:n.body),u=(0,l.A)(a),h=i?[u].concat(u.visualViewport||[],(0,s.A)(a)?a:[]):a,d=t.concat(h);return i?d:d.concat(c((0,r.A)(h)))}},4770:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(4396);const s={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=(0,r.A)({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}}},4826:e=>{"use strict";e.exports=e=>{e.terminate()}},4876:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(1415);function s(){return!/^((?!chrome|android).)*safari/i.test((0,r.A)())}},4967:(e,t,n)=>{"use strict";function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{A:()=>r})},4975:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},4998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getHours()}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5093:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2026),s=n(3666),a=n(8355);function i(e,t){var n;(0,s.A)(1,arguments);var i=(0,a.A)(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var m,g=function(e){var t,n={},r=e.split(o.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],o.timeZoneDelimiter.test(n.date)&&(n.date=e.split(o.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var s=o.timezone.exec(t);s?(n.time=t.replace(s[1],""),n.timezone=s[1]):n.time=t}return n}(e);if(g.date){var y=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?s:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(g.date,i);m=function(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var r=!!n[4],s=h(n[1]),a=h(n[2])-1,i=h(n[3]),o=h(n[4]),c=h(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,c)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=7*(t-1)+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}(t,o,c):new Date(NaN);var u=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(p[t]||(f(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(f(e)?366:365)}(t,s)?(u.setUTCFullYear(t,a,Math.max(s,i)),u):new Date(NaN)}(y.restDateString,y.year)}if(!m||isNaN(m.getTime()))return new Date(NaN);var v,b=m.getTime(),w=0;if(g.time&&(w=function(e){var t=e.match(c);if(!t)return NaN;var n=d(t[1]),s=d(t[2]),a=d(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,s,a))return NaN;return n*r.s0+s*r.Cg+1e3*a}(g.time),isNaN(w)))return new Date(NaN);if(!g.timezone){var x=new Date(b+w),k=new Date(0);return k.setFullYear(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()),k.setHours(x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds(),x.getUTCMilliseconds()),k}return v=function(e){if("Z"===e)return 0;var t=e.match(u);if(!t)return 0;var n="+"===t[1]?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,a))return NaN;return n*(s*r.s0+a*r.Cg)}(g.timezone),isNaN(v)?new Date(NaN):new Date(b+w+v)}var o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function h(e){return e?parseInt(e):1}function d(e){return e&&parseFloat(e.replace(",","."))||0}var p=[31,null,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400===0||e%4===0&&e%100!==0}},5125:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(4122),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()===a.getTime()}},5173:(e,t,n)=>{e.exports=n(1497)()},5202:(e,t,n)=>{"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}n.d(t,{A:()=>r})},5262:function(e,t,n){var r;!function(e,s){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,s=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^s,s=s-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^s,t.a=s-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new a(e),r=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,r&&("object"==typeof r&&i(r,n),s.state=function(){return i(n,{})}),s}s&&s.exports?s.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,s))||(s.exports=r):this.tychei=o}(0,e=n.nmd(e),n.amdD)},5277:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2284),s=n(6260),a=n(3666);function i(e){var t,n;if((0,a.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,s.default)(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)})),n||new Date(NaN)}},5362:(e,t,n)=>{"use strict";const r=n(1674);let s=0;e.exports=e=>{let{id:t,action:n,payload:a={}}=e,i=t;return"undefined"===typeof i&&(i=r("Job",s),s+=1),{id:i,action:n,payload:a}}},5403:(e,t,n)=>{"use strict";var r;n.d(t,{EA:()=>d,E_:()=>l,F3:()=>o,I9:()=>s,Ii:()=>i}),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));class s extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const a=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},a=n.Plugins=n.Plugins||{},i=()=>null!==t?t.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),o=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))},l=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=i,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==i(),n.isPluginAvailable=e=>{const t=l.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(i()))||!!o(e)},n.registerPlugin=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=l.get(e);if(u)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),u.proxy;const h=i(),d=o(e);let p;const f=a=>{let i;const o=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];const f=(async()=>(!p&&h in c?p=p="function"===typeof c[h]?await c[h]():c[h]:null!==t&&!p&&"web"in c&&(p=p="function"===typeof c.web?await c.web():c.web),p))().then((t=>{const o=((t,a)=>{var i,o;if(!d){if(t)return null===(o=t[a])||void 0===o?void 0:o.bind(t);throw new s(`"${e}" plugin is not implemented on ${h}`,r.Unimplemented)}{const r=null===d||void 0===d?void 0:d.methods.find((e=>a===e.name));if(r)return"promise"===r.rtype?t=>n.nativePromise(e,a.toString(),t):(t,r)=>n.nativeCallback(e,a.toString(),t,r);if(t)return null===(i=t[a])||void 0===i?void 0:i.bind(t)}})(t,a);if(o){const e=o(...l);return i=null===e||void 0===e?void 0:e.remove,e}throw new s(`"${e}.${a}()" is not implemented on ${h}`,r.Unimplemented)}));return"addListener"===a&&(f.remove=async()=>i()),f};return o.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(o,"name",{value:a,writable:!1,configurable:!1}),o},m=f("addListener"),g=f("removeListener"),y=(e,t)=>{const n=m({eventName:e},t),r=async()=>{const r=await n;g({eventName:e,callbackId:r},t)},s=new Promise((e=>n.then((()=>e({remove:r})))));return s.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},s},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?y:m;case"removeListener":return g;default:return f(t)}}});return a[e]=v,l.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(c),...d?[h]:[]])}),v},n.Exception=s,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},i=(e=>e.Capacitor=a(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),o=i.registerPlugin;class l{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach((e=>e(t)));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new i.Exception(e,r.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new i.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach((t=>{this.notifyListeners(e,t)})))}}const c=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class h extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),r=u(r).trim(),t[n]=r})),t}async setCookie(e){try{const t=c(e.key),n=c(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}o("CapacitorCookies",{web:()=>new h});const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((n,r,s)=>(n[r]=e[t[s]],n)),{})}(e.headers),s=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(s.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class p extends l{async request(e){const t=d(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce(((e,n)=>{const[r,s]=n;let a,i;return Array.isArray(s)?(i="",s.forEach((e=>{a=t?encodeURIComponent(e):e,i+=`${r}=${a}&`})),i.slice(0,-1)):(a=t?encodeURIComponent(s):s,i=`${r}=${a}`),`${e}&${i}`}),"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,s=await fetch(r,t),a=s.headers.get("content-type")||"";let i,o,{responseType:l="text"}=s.ok?e:{};switch(a.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await s.blob(),i=await(async e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)})))(o);break;case"json":i=await s.json();break;default:i=await s.text()}const c={};return s.headers.forEach(((e,t)=>{c[t]=e})),{data:i,headers:c,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}o("CapacitorHttp",{web:()=>new p})},5410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(2325),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.default)(e,-n)}},5463:(e,t,n)=>{"use strict";n.d(t,{DD:()=>g,GM:()=>y,Mn:()=>r,OM:()=>l,Ol:()=>m,R9:()=>d,WY:()=>h,_N:()=>u,ir:()=>f,kb:()=>i,ni:()=>c,pG:()=>a,qZ:()=>o,sQ:()=>s,xf:()=>p});var r="top",s="bottom",a="right",i="left",o="auto",l=[r,s,a,i],c="start",u="end",h="clippingParents",d="viewport",p="popper",f="reference",m=l.reduce((function(e,t){return e.concat([t+"-"+c,t+"-"+u])}),[]),g=[].concat(l,[o]).reduce((function(e,t){return e.concat([t,t+"-"+c,t+"-"+u])}),[]),y=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]},5479:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}},5541:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2733),s=n(6260),a=n(3666);function i(e){if((0,a.A)(1,arguments),!(0,r.default)(e)&&"number"!==typeof e)return!1;var t=(0,s.default)(e);return!isNaN(Number(t))}},5597:function(e,t){"use strict";var n=this;let r=!1;t.logging=r,t.setLogging=e=>{r=e},t.log=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r?console.log.apply(n,t):null}},5775:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5202);function s(e){var t=(0,r.A)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},5780:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e);return t.setHours(0,0,0,0),t}},5783:e=>{"use strict";e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},5817:()=>{},5891:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(8355),s=n(4410),a=n(3666),i=36e5;function o(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.A)(e,n*i)}},5998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Manager:()=>i,Popper:()=>M,Reference:()=>F,usePopper:()=>A});var r=n(5043),s=r.createContext(),a=r.createContext();function i(e){var t=e.children,n=r.useState(null),i=n[0],o=n[1],l=r.useRef(!1);r.useEffect((function(){return function(){l.current=!0}}),[]);var c=r.useCallback((function(e){l.current||o(e)}),[]);return r.createElement(s.Provider,{value:i},r.createElement(a.Provider,{value:c},t))}var o=function(e){return Array.isArray(e)?e[0]:e},l=function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},c=function(e,t){if("function"===typeof e)return l(e,t);null!=e&&(e.current=t)},u=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},h="undefined"!==typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,d=n(7950),p=n(6299),f=n(7471),m=n(4770),g=n(7103),y=n(333),v=n(6);const b={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];(0,v.sb)(s)&&(0,y.A)(s)&&(Object.assign(s.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],s=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});(0,v.sb)(r)&&(0,y.A)(r)&&(Object.assign(r.style,a),Object.keys(s).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var w=n(2993),x=n(246),k=n(3380),S=n(7013),T=n(1890),E=[f.A,m.A,g.A,b,w.A,x.A,k.A,S.A,T.A],N=(0,p.UD)({defaultModifiers:E}),C=n(6366),I=n.n(C),_=[],A=function(e,t,n){void 0===n&&(n={});var s=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||_},i=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=i[0],l=i[1],c=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);d.flushSync((function(){l({styles:u(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:u(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),p=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[c,{name:"applyStyles",enabled:!1}])};return I()(s.current,e)?s.current||e:(s.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,c]),f=r.useRef();return h((function(){f.current&&f.current.setOptions(p)}),[p]),h((function(){if(null!=e&&null!=t){var r=(n.createPopper||N)(e,t,p);return f.current=r,function(){r.destroy(),f.current=null}}}),[e,t,n.createPopper]),{state:f.current?f.current.state:null,styles:o.styles,attributes:o.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},R=function(){},D=function(){return Promise.resolve(null)},O=[];function M(e){var t=e.placement,n=void 0===t?"bottom":t,a=e.strategy,i=void 0===a?"absolute":a,l=e.modifiers,u=void 0===l?O:l,h=e.referenceElement,d=e.onFirstUpdate,p=e.innerRef,f=e.children,m=r.useContext(s),g=r.useState(null),y=g[0],v=g[1],b=r.useState(null),w=b[0],x=b[1];r.useEffect((function(){c(p,y)}),[p,y]);var k=r.useMemo((function(){return{placement:n,strategy:i,onFirstUpdate:d,modifiers:[].concat(u,[{name:"arrow",enabled:null!=w,options:{element:w}}])}}),[n,i,d,u,w]),S=A(h||m,y,k),T=S.state,E=S.styles,N=S.forceUpdate,C=S.update,I=r.useMemo((function(){return{ref:v,style:E.popper,placement:T?T.placement:n,hasPopperEscaped:T&&T.modifiersData.hide?T.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:T&&T.modifiersData.hide?T.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:E.arrow,ref:x},forceUpdate:N||R,update:C||D}}),[v,x,n,T,E,C,N]);return o(f)(I)}var P=n(6440),L=n.n(P);function F(e){var t=e.children,n=e.innerRef,s=r.useContext(a),i=r.useCallback((function(e){c(n,e),l(s,e)}),[n,s]);return r.useEffect((function(){return function(){return c(n,null)}}),[]),r.useEffect((function(){L()(Boolean(s),"`Reference` should not be used outside of a `Manager` component.")}),[s]),o(t)({ref:i})}},6025:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6);function s(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Ng)(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}},6087:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},s=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const a={p:s,P:function(e,t){var n,a=e.match(/(P+)(p+)?/)||[],i=a[1],o=a[2];if(!o)return r(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(i,t)).replace("{{time}}",s(o,t))}}},6125:e=>{"use strict";e.exports={rE:"6.0.1"}},6171:e=>{"use strict";e.exports=(e,t)=>{e.onmessage=e=>{let{data:n}=e;t(n)}}},6201:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(7111);function s(e){return Object.assign({},(0,r.A)(),e)}},6255:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},6260:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},6288:function(e,t,n){var r;!function(e,s){function a(e){var t=this;t.next=function(){var e,n,r=t.w,s=t.X,a=t.i;return t.w=r=r+1640531527|0,n=s[a+34&127],e=s[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=s[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,s,a,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),s=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,s=0==(n=o[127&a]^=r+i)?s+1:0);for(s>=128&&(o[127&(t&&t.length||0)]=-1),s=127,a=512;a>0;--a)r=o[s+34&127],n=o[s=s+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[s]=r^n;e.w=i,e.X=o,e.i=s}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,r&&(r.X&&i(r,n),s.state=function(){return i(n,{})}),s}s&&s.exports?s.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,s))||(s.exports=r):this.xor4096=o}(0,e=n.nmd(e),n.amdD)},6299:(e,t,n)=>{"use strict";n.d(t,{UD:()=>x});var r=n(2447),s=n(5775),a=n(5202),i=n(6);var o=n(333),l=n(2724),c=n(6791),u=n(7037),h=n(4473);function d(e,t,n){void 0===n&&(n=!1);var d=(0,i.sb)(t),p=(0,i.sb)(t)&&function(e){var t=e.getBoundingClientRect(),n=(0,h.LI)(t.width)/e.offsetWidth||1,r=(0,h.LI)(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),f=(0,c.A)(t),m=(0,r.A)(e,p,n),g={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(d||!d&&!n)&&(("body"!==(0,o.A)(t)||(0,u.A)(f))&&(g=function(e){return e!==(0,a.A)(e)&&(0,i.sb)(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:(0,s.A)(e);var t}(t)),(0,i.sb)(t)?((y=(0,r.A)(t,!0)).x+=t.clientLeft,y.y+=t.clientTop):f&&(y.x=(0,l.A)(f))),{x:m.left+g.scrollLeft-y.x,y:m.top+g.scrollTop-y.y,width:m.width,height:m.height}}var p=n(7790),f=n(4699),m=n(6493),g=n(5463);function y(e){var t=new Map,n=new Set,r=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&s(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||s(e)})),r}function v(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var b={placement:"bottom",modifiers:[],strategy:"absolute"};function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function x(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,s=t.defaultOptions,a=void 0===s?b:s;return function(e,t,n){void 0===n&&(n=a);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},b,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],l=!1,c={state:s,setOptions:function(n){var l="function"===typeof n?n(s.options):n;u(),s.options=Object.assign({},a,s.options,l),s.scrollParents={reference:(0,i.vq)(e)?(0,f.A)(e):e.contextElement?(0,f.A)(e.contextElement):[],popper:(0,f.A)(t)};var h=function(e){var t=y(e);return g.GM.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,s.options.modifiers)));return s.orderedModifiers=h.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var i=a({state:s,name:t,instance:c,options:r}),l=function(){};o.push(i||l)}})),c.update()},forceUpdate:function(){if(!l){var e=s.elements,t=e.reference,n=e.popper;if(w(t,n)){s.rects={reference:d(t,(0,m.A)(n),"fixed"===s.options.strategy),popper:(0,p.A)(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var a=s.orderedModifiers[r],i=a.fn,o=a.options,u=void 0===o?{}:o,h=a.name;"function"===typeof i&&(s=i({state:s,options:u,name:h,instance:c})||s)}else s.reset=!1,r=-1}}},update:v((function(){return new Promise((function(e){c.forceUpdate(),e(s)}))})),destroy:function(){u(),l=!0}};if(!w(e,t))return c;function u(){o.forEach((function(e){return e()})),o=[]}return c.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}},6366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,s="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var o,l,c,u;if(Array.isArray(e)){if((o=e.length)!=i.length)return!1;for(l=o;0!==l--;)if(!a(e[l],i[l]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!i.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!a(l.value[1],i.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!i.has(l.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((o=e.length)!=i.length)return!1;for(l=o;0!==l--;)if(e[l]!==i[l])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof i.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof i.toString)return e.toString()===i.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(i,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!a(e[c[l]],i[c[l]]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return a(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},6440:e=>{"use strict";var t=function(){};e.exports=t},6493:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(5202),s=n(333),a=n(8976),i=n(6);function o(e){return["table","td","th"].indexOf((0,s.A)(e))>=0}var l=n(6650),c=n(1415);function u(e){return(0,i.sb)(e)&&"fixed"!==(0,a.A)(e).position?e.offsetParent:null}function h(e){for(var t=(0,r.A)(e),n=u(e);n&&o(n)&&"static"===(0,a.A)(n).position;)n=u(n);return n&&("html"===(0,s.A)(n)||"body"===(0,s.A)(n)&&"static"===(0,a.A)(n).position)?t:n||function(e){var t=/firefox/i.test((0,c.A)());if(/Trident/i.test((0,c.A)())&&(0,i.sb)(e)&&"fixed"===(0,a.A)(e).position)return null;var n=(0,l.A)(e);for((0,i.Ng)(n)&&(n=n.host);(0,i.sb)(n)&&["html","body"].indexOf((0,s.A)(n))<0;){var r=(0,a.A)(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}},6650:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(333),s=n(6791),a=n(6);function i(e){return"html"===(0,r.A)(e)?e:e.assignedSlot||e.parentNode||((0,a.Ng)(e)?e.host:null)||(0,s.A)(e)}},6677:e=>{"use strict";e.exports=async(e,t)=>{e.postMessage(t)}},6706:e=>{"use strict";e.exports={workerBlobURL:!0,logger:()=>{}}},6740:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(4967),s=n(5780),a=n(3666),i=864e5;function o(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),o=(0,s.default)(t),l=n.getTime()-(0,r.A)(n),c=o.getTime()-(0,r.A)(o);return Math.round((l-c)/i)}},6785:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var r=n(5463),s=n(5202),a=n(6791),i=n(2724),o=n(4876);var l=n(8976),c=n(5775),u=n(4473);var h=n(4699),d=n(6493),p=n(6),f=n(2447),m=n(6650),g=n(6025),y=n(333);function v(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function b(e,t,n){return t===r.R9?v(function(e,t){var n=(0,s.A)(e),r=(0,a.A)(e),l=n.visualViewport,c=r.clientWidth,u=r.clientHeight,h=0,d=0;if(l){c=l.width,u=l.height;var p=(0,o.A)();(p||!p&&"fixed"===t)&&(h=l.offsetLeft,d=l.offsetTop)}return{width:c,height:u,x:h+(0,i.A)(e),y:d}}(e,n)):(0,p.vq)(t)?function(e,t){var n=(0,f.A)(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):v(function(e){var t,n=(0,a.A)(e),r=(0,c.A)(e),s=null==(t=e.ownerDocument)?void 0:t.body,o=(0,u.T9)(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),h=(0,u.T9)(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),d=-r.scrollLeft+(0,i.A)(e),p=-r.scrollTop;return"rtl"===(0,l.A)(s||n).direction&&(d+=(0,u.T9)(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:h,x:d,y:p}}((0,a.A)(e)))}function w(e,t,n,r){var s="clippingParents"===t?function(e){var t=(0,h.A)((0,m.A)(e)),n=["absolute","fixed"].indexOf((0,l.A)(e).position)>=0&&(0,p.sb)(e)?(0,d.A)(e):e;return(0,p.vq)(n)?t.filter((function(e){return(0,p.vq)(e)&&(0,g.A)(e,n)&&"body"!==(0,y.A)(e)})):[]}(e):[].concat(t),a=[].concat(s,[n]),i=a[0],o=a.reduce((function(t,n){var s=b(e,n,r);return t.top=(0,u.T9)(s.top,t.top),t.right=(0,u.jk)(s.right,t.right),t.bottom=(0,u.jk)(s.bottom,t.bottom),t.left=(0,u.T9)(s.left,t.left),t}),b(e,i,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var x=n(4396),k=n(6201),S=n(2442);function T(e,t){void 0===t&&(t={});var n=t,s=n.placement,i=void 0===s?e.placement:s,o=n.strategy,l=void 0===o?e.strategy:o,c=n.boundary,u=void 0===c?r.WY:c,h=n.rootBoundary,d=void 0===h?r.R9:h,m=n.elementContext,g=void 0===m?r.xf:m,y=n.altBoundary,b=void 0!==y&&y,T=n.padding,E=void 0===T?0:T,N=(0,k.A)("number"!==typeof E?E:(0,S.A)(E,r.OM)),C=g===r.xf?r.ir:r.xf,I=e.rects.popper,_=e.elements[b?C:g],A=w((0,p.vq)(_)?_:_.contextElement||(0,a.A)(e.elements.popper),u,d,l),R=(0,f.A)(e.elements.reference),D=(0,x.A)({reference:R,element:I,strategy:"absolute",placement:i}),O=v(Object.assign({},I,D)),M=g===r.xf?O:R,P={top:A.top-M.top+N.top,bottom:M.bottom-A.bottom+N.bottom,left:A.left-M.left+N.left,right:M.right-A.right+N.right},L=e.modifiersData.offset;if(g===r.xf&&L){var F=L[i];Object.keys(P).forEach((function(e){var t=[r.pG,r.sQ].indexOf(e)>=0?1:-1,n=[r.Mn,r.sQ].indexOf(e)>=0?"y":"x";P[e]+=F[n]*t}))}return P}},6791:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6);function s(e){return(((0,r.vq)(e)?e.ownerDocument:e.document)||window.document).documentElement}},6802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t);return n.setHours(i),n}},6819:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6260),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,s.default)(e),i=(0,r.A)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var o=n.getDate(),l=new Date(n.getTime());return l.setMonth(n.getMonth()+i+1,0),o>=l.getDate()?l:(n.setFullYear(l.getFullYear(),l.getMonth(),o),n)}},7013:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(3651),s=n(7790),a=n(6025),i=n(6493),o=n(3436),l=n(1564),c=n(6201),u=n(2442),h=n(5463);const d={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,a=e.name,d=e.options,p=n.elements.arrow,f=n.modifiersData.popperOffsets,m=(0,r.A)(n.placement),g=(0,o.A)(m),y=[h.kb,h.pG].indexOf(m)>=0?"height":"width";if(p&&f){var v=function(e,t){return e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,(0,c.A)("number"!==typeof e?e:(0,u.A)(e,h.OM))}(d.padding,n),b=(0,s.A)(p),w="y"===g?h.Mn:h.kb,x="y"===g?h.sQ:h.pG,k=n.rects.reference[y]+n.rects.reference[g]-f[g]-n.rects.popper[y],S=f[g]-n.rects.reference[g],T=(0,i.A)(p),E=T?"y"===g?T.clientHeight||0:T.clientWidth||0:0,N=k/2-S/2,C=v[w],I=E-b[y]-v[x],_=E/2-b[y]/2+N,A=(0,l.u)(C,_,I),R=g;n.modifiersData[a]=((t={})[R]=A,t.centerOffset=A-_,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&(0,a.A)(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},7037:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8976);function s(e){var t=(0,r.A)(e),n=t.overflow,s=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+s)}},7066:function(e,t,n){var r;!function(e,s){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new a(e),r=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,r&&("object"==typeof r&&i(r,n),s.state=function(){return i(n,{})}),s}s&&s.exports?s.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,s))||(s.exports=r):this.xor128=o}(0,e=n.nmd(e),n.amdD)},7092:e=>{"use strict";e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},7103:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(5463),s=n(6493),a=n(5202),i=n(6791),o=n(8976),l=n(3651),c=n(1594),u=n(4473),h={top:"auto",right:"auto",bottom:"auto",left:"auto"};function d(e){var t,n=e.popper,l=e.popperRect,c=e.placement,d=e.variation,p=e.offsets,f=e.position,m=e.gpuAcceleration,g=e.adaptive,y=e.roundOffsets,v=e.isFixed,b=p.x,w=void 0===b?0:b,x=p.y,k=void 0===x?0:x,S="function"===typeof y?y({x:w,y:k}):{x:w,y:k};w=S.x,k=S.y;var T=p.hasOwnProperty("x"),E=p.hasOwnProperty("y"),N=r.kb,C=r.Mn,I=window;if(g){var _=(0,s.A)(n),A="clientHeight",R="clientWidth";if(_===(0,a.A)(n)&&(_=(0,i.A)(n),"static"!==(0,o.A)(_).position&&"absolute"===f&&(A="scrollHeight",R="scrollWidth")),c===r.Mn||(c===r.kb||c===r.pG)&&d===r._N)C=r.sQ,k-=(v&&_===I&&I.visualViewport?I.visualViewport.height:_[A])-l.height,k*=m?1:-1;if(c===r.kb||(c===r.Mn||c===r.sQ)&&d===r._N)N=r.pG,w-=(v&&_===I&&I.visualViewport?I.visualViewport.width:_[R])-l.width,w*=m?1:-1}var D,O=Object.assign({position:f},g&&h),M=!0===y?function(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:(0,u.LI)(n*s)/s||0,y:(0,u.LI)(r*s)/s||0}}({x:w,y:k},(0,a.A)(n)):{x:w,y:k};return w=M.x,k=M.y,m?Object.assign({},O,((D={})[C]=E?"0":"",D[N]=T?"0":"",D.transform=(I.devicePixelRatio||1)<=1?"translate("+w+"px, "+k+"px)":"translate3d("+w+"px, "+k+"px, 0)",D)):Object.assign({},O,((t={})[C]=E?k+"px":"",t[N]=T?w+"px":"",t.transform="",t))}const p={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=void 0===r||r,a=n.adaptive,i=void 0===a||a,o=n.roundOffsets,u=void 0===o||o,h={placement:(0,l.A)(t.placement),variation:(0,c.A)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,d(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,d(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}}},7111:(e,t,n)=>{"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}n.d(t,{A:()=>r})},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(k);else{var t=r(u);null!==t&&M(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(N),N=-1),f=!0;var a=p;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!_());){var i=d.callback;if("function"===typeof i){d.callback=null,p=d.priorityLevel;var o=i(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&s(c),w(n)}else s(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&M(x,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,E=null,N=-1,C=5,I=-1;function _(){return!(t.unstable_now()-I<C)}function A(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?S():(T=!1,E=null)}}else T=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,S=function(){D.postMessage(null)}}else S=function(){y(A,0)};function O(e){E=e,T||(T=!0,S())}function M(e,n){N=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(v(N),N=-1):g=!0,M(x,a-i))):(e.sortIndex=o,n(c,e),m||f||(m=!0,O(k))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7278:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()<a.getTime()}},7359:function(e,t,n){var r;!function(e,s){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new a(e),r=t&&t.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,r&&("object"==typeof r&&i(r,n),s.state=function(){return i(n,{})}),s}s&&s.exports?s.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,s))||(s.exports=r):this.alea=o}(0,e=n.nmd(e),n.amdD)},7400:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getMinutes()}},7447:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(6260),s=n(238),a=n(3666);function i(e){return(0,a.A)(1,arguments),(0,s.default)(e,{weekStartsOn:1})}function o(e){(0,a.A)(1,arguments);var t=function(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var o=i(s),l=new Date(0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);var c=i(l);return t.getTime()>=o.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),i(n)}var l=6048e5;function c(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=i(t).getTime()-o(t).getTime();return Math.round(n/l)+1}},7461:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(6819),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=3*(0,r.A)(t);return(0,s.default)(e,n)}},7471:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5202),s={passive:!0};const a={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,a=e.options,i=a.scroll,o=void 0===i||i,l=a.resize,c=void 0===l||l,u=(0,r.A)(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach((function(e){e.addEventListener("scroll",n.update,s)})),c&&u.addEventListener("resize",n.update,s),function(){o&&h.forEach((function(e){e.removeEventListener("scroll",n.update,s)})),c&&u.removeEventListener("resize",n.update,s)}},data:{}}},7583:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()===a.getTime()}},7599:(e,t,n)=>{"use strict";const r="browser"===n(1734)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((n=>{e[n]&&(t[n]=r(t[n]))})),t}},7609:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(8355),s=n(234),a=n(3666);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,s.default)(e,-n)}},7790:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2447);function s(e){var t=(0,r.A)(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}},7872:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getSeconds()}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8108:()=>{},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},8150:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getTime()}},8349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()>a.getTime()}},8355:(e,t,n)=>{"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{A:()=>r})},8468:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e);return t.setHours(23,59,59,999),t}},8590:()=>{},8667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){return(0,s.A)(1,arguments),(0,r.default)(e).getDate()}},8763:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const s=function(e,t,n){var s,a=r[e];return s="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function a(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var i={date:a({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:a({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:a({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var o={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function l(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):s;r=e.formattingValues[a]||e.formattingValues[s]}else{var i=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[i]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function c(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i,o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(o)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(o)}));return i=e.valueCallback?e.valueCallback(c):c,{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(o.length)}}}var u;const h={code:"en-US",formatDistance:s,formatLong:i,formatRelative:function(e,t,n,r){return o[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:l({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:l({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:l({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:l({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:l({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(u={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(u.matchPattern);if(!n)return null;var r=n[0],s=e.match(u.parsePattern);if(!s)return null;var a=u.valueCallback?u.valueCallback(s[0]):s[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(r.length)}}),era:c({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:c({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:c({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:c({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:c({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},8818:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var s={},a={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=l(e,e<0?-1:0,!1),i&&(s[e]=n),n)}function o(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return k}else{if(e<=-f)return S;if(e+1>=f)return x}return e<0?o(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=o,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var s=o(c(n,8)),a=g,i=0;i<e.length;i+=8){var l=Math.min(8,e.length-i),h=parseInt(e.substring(i,i+l),n);if(l<8){var d=o(c(n,l));a=a.mul(d).add(o(h))}else a=(a=a.mul(s)).add(o(h))}return a.unsigned=t,a}function h(e,t){return"number"===typeof e?o(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,m=i(1<<24),g=i(0);n.ZERO=g;var y=i(0,!0);n.UZERO=y;var v=i(1);n.ONE=v;var b=i(1,!0);n.UONE=b;var w=i(-1);n.NEG_ONE=w;var x=l(-1,2147483647,!1);n.MAX_VALUE=x;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=o(c(e,6),this.unsigned),a=this,i="";;){var l=a.div(s),u=(a.sub(l.mul(s)).toInt()>>>0).toString(e);if((a=l).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},T.neg=T.negate,T.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,s=this.low>>>16,a=65535&this.low,i=e.high>>>16,o=65535&e.high,c=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=a+(65535&e.low))>>>16,d+=(p+=s+c)>>>16,u+=(d+=n+o)>>>16,u+=t+i,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,s=65535&this.high,a=this.low>>>16,i=65535&this.low,c=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,b=0;return v+=(b+=i*p)>>>16,y+=(v+=a*p)>>>16,v&=65535,y+=(v+=i*d)>>>16,f+=(y+=s*p)>>>16,y&=65535,f+=(y+=a*d)>>>16,y&=65535,f+=(y+=i*u)>>>16,f+=n*p+s*d+a*u+i*c,l((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,s,a;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;a=y}else{if(this.eq(S))return e.eq(v)||e.eq(w)?S:e.eq(S)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:w:(s=this.sub(e.mul(n)),a=n.add(s.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=g}for(s=this;s.gte(e);){n=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:c(2,i-48),d=o(n),p=d.mul(e);p.isNegative()||p.gt(s);)p=(d=o(n-=u,this.unsigned)).mul(e);d.isZero()&&(d=v),a=a.add(d),s=s.sub(p)}return a},T.div=T.divide,T.modulo=function(e){return r(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return l(~this.low,~this.high,this.unsigned)},T.and=function(e){return r(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return r(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return r(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8976:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5202);function s(e){return(0,r.A)(e).getComputedStyle(e)}},8982:(e,t,n)=>{"use strict";n.d(t,{ef:()=>a,lJ:()=>o,xM:()=>i});var r=["D","DD"],s=["YY","YYYY"];function a(e){return-1!==r.indexOf(e)}function i(e){return-1!==s.indexOf(e)}function o(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},9016:function(e,t,n){var r;!function(e,s){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new a(e),r=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,r&&("object"==typeof r&&i(r,n),s.state=function(){return i(n,{})}),s}s&&s.exports?s.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,s))||(s.exports=r):this.xorwow=o}(0,e=n.nmd(e),n.amdD)},9129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e){(0,s.A)(1,arguments);var t=(0,r.default)(e);return Math.floor(t.getMonth()/3)+1}},9170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5479),s=n(3666),a=n(8355);function i(e,t){(0,s.A)(2,arguments);var n=(0,a.A)(t);return(0,r.default)(e,-n)}},9275:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getFullYear()-a.getFullYear()}},9343:(e,t,n)=>{"use strict";const r=n(7599),s=n(5362),{log:a}=n(5597),i=n(1674),o=n(1600),{defaultOptions:l,spawnWorker:c,terminateWorker:u,onMessage:h,loadImage:d,send:p}=n(3919);let f=0;e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.LSTM_ONLY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const g=i("Worker",f),{logger:y,errorHandler:v,...b}=r({...l,...n}),w={},x="string"===typeof e?e.split("+"):e;let k=t,S=m;const T=[o.DEFAULT,o.LSTM_ONLY].includes(t)&&!b.legacyCore;let E,N;const C=new Promise(((e,t)=>{N=e,E=t}));let I=c(b);I.onerror=e=>{E(e.message)},f+=1;const _=e=>{let{id:t,action:n,payload:r}=e;return new Promise(((e,s)=>{a(`[${g}]: Start ${t}, action=${n}`);w[`${n}-${t}`]={resolve:e,reject:s},p(I,{workerId:g,jobId:t,action:n,payload:r})}))},A=(e,t)=>_(s({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:b.langPath,dataPath:b.dataPath,cachePath:b.cachePath,cacheMethod:b.cacheMethod,gzip:b.gzip,lstmOnly:[o.DEFAULT,o.LSTM_ONLY].includes(k)&&!b.legacyLang}}})),R=(e,t,n,r)=>_(s({id:r,action:"initialize",payload:{langs:e,oem:t,config:n}}));h(I,(e=>{let{workerId:t,jobId:n,status:r,action:s,data:i}=e;const o=`${s}-${n}`;if("resolve"===r)a(`[${t}]: Complete ${n}`),w[o].resolve({jobId:n,data:i}),delete w[o];else if("reject"===r){if(w[o].reject(i),delete w[o],"load"===s&&E(i),!v)throw Error(i);v(i)}else"progress"===r&&y({...i,userJobId:n})}));const D={id:g,worker:I,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>_(s({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>_(s({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>_(s({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>_(s({id:n,action:"FS",payload:{method:e,args:t}})),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(T&&[o.TESSERACT_ONLY,o.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const s=t||k;k=s;const a=n||S;S=a;const i=("string"===typeof e?e.split("+"):e).filter((e=>!x.includes(e)));return x.push(...i),i.length>0?A(i,r).then((()=>R(e,s,a,r))):R(e,s,a,r)},setParameters:function(){return _(s({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{text:!0};return _(s({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await d(e),options:t,output:n}}))},detect:async(e,t)=>{if(T)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(s({id:t,action:"detect",payload:{image:await d(e)}}))},terminate:async()=>(null!==I&&(u(I),I=null),Promise.resolve())};var O;return _(s({id:O,action:"load",payload:{options:{lstmOnly:T,corePath:b.corePath,logging:b.logging}}})).then((()=>A(e))).then((()=>R(e,t,m))).then((()=>N(D))).catch((()=>{})),C}},9511:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(6260),s=n(3666),a=n(8355),i=n(2239);function o(e,t){var n,o,l,c,u,h,d,p;(0,s.A)(1,arguments);var f=(0,i.q)(),m=(0,a.A)(null!==(n=null!==(o=null!==(l=null!==(c=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==o?o:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,r.default)(e),y=g.getUTCDay(),v=(y<m?7:0)+y-m;return g.setUTCDate(g.getUTCDate()-v),g.setUTCHours(0,0,0,0),g}},9519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(6260),s=n(3666);function a(e,t){(0,s.A)(2,arguments);var n=(0,r.default)(e).getTime(),a=(0,r.default)(t.start).getTime(),i=(0,r.default)(t.end).getTime();if(!(a<=i))throw new RangeError("Invalid interval");return n>=a&&n<=i}},9538:function(e,t,n){var r;!function(e,s){function a(e){var t=this;t.next=function(){var e,n,r=t.x,s=t.i;return e=r[s],n=(e^=e>>>7)^e<<24,n^=(e=r[s+1&7])^e>>>10,n^=(e=r[s+3&7])^e>>>3,n^=(e=r[s+4&7])^e<<7,e=r[s+7&7],n^=(e^=e<<13)^e<<9,r[s]=n,t.i=s+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,r&&(r.x&&i(r,n),s.state=function(){return i(n,{})}),s}s&&s.exports?s.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,s))||(s.exports=r):this.xorshift7=o}(0,e=n.nmd(e),n.amdD)},9993:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var r=n(5541),s=n(67),a=n(6260),i=n(3666);var o=n(1049),l=n(1104),c=n(4123),u=n(2217);function h(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const d={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return h("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):h(n+1,2)},d:function(e,t){return h(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return h(e.getUTCHours()%12||12,t.length)},H:function(e,t){return h(e.getUTCHours(),t.length)},m:function(e,t){return h(e.getUTCMinutes(),t.length)},s:function(e,t){return h(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return h(Math.floor(r*Math.pow(10,n-3)),t.length)}};var p="midnight",f="noon",m="morning",g="afternoon",y="evening",v="night";function b(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(0===a)return n+String(s);var i=t||"";return n+String(s)+i+h(a,2)}function w(e,t){return e%60===0?(e>0?"-":"+")+h(Math.abs(e)/60,2):x(e,t)}function x(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e);return r+h(Math.floor(s/60),2)+n+h(s%60,2)}const k={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return d.y(e,t)},Y:function(e,t,n,r){var s=(0,u.A)(e,r),a=s>0?s:1-s;return"YY"===t?h(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):h(a,t.length)},R:function(e,t){return h((0,l.A)(e),t.length)},u:function(e,t){return h(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return h(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return h(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return d.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return h(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var s=(0,c.A)(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):h(s,t.length)},I:function(e,t,n){var r=(0,o.A)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):h(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):d.d(e,t)},D:function(e,t,n){var r=function(e){(0,i.A)(1,arguments);var t=(0,a.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):h(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return h(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return h(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return h(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,s=e.getUTCHours();switch(r=12===s?f:0===s?p:s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,s=e.getUTCHours();switch(r=s>=17?y:s>=12?g:s>=4?m:v,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return d.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):d.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):h(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):h(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):d.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):d.s(e,t)},S:function(e,t){return d.S(e,t)},X:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return w(s);case"XXXX":case"XX":return x(s);default:return x(s,":")}},x:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return w(s);case"xxxx":case"xx":return x(s);default:return x(s,":")}},O:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+b(s,":");default:return"GMT"+x(s,":")}},z:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+b(s,":");default:return"GMT"+x(s,":")}},t:function(e,t,n,r){var s=r._originalDate||e;return h(Math.floor(s.getTime()/1e3),t.length)},T:function(e,t,n,r){return h((r._originalDate||e).getTime(),t.length)}};var S=n(6087),T=n(4967),E=n(8982),N=n(8355),C=n(2239),I=n(8763),_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,A=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,R=/^'([^]*?)'?$/,D=/''/g,O=/[a-zA-Z]/;function M(e,t,n){var o,l,c,u,h,d,p,f,m,g,y,v,b,w,x,M,P,L;(0,i.A)(2,arguments);var F=String(t),$=(0,C.q)(),z=null!==(o=null!==(l=null===n||void 0===n?void 0:n.locale)&&void 0!==l?l:$.locale)&&void 0!==o?o:I.A,j=(0,N.A)(null!==(c=null!==(u=null!==(h=null!==(d=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==d?d:null===n||void 0===n||null===(p=n.locale)||void 0===p||null===(f=p.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==h?h:$.firstWeekContainsDate)&&void 0!==u?u:null===(m=$.locale)||void 0===m||null===(g=m.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==c?c:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=(0,N.A)(null!==(y=null!==(v=null!==(b=null!==(w=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==w?w:null===n||void 0===n||null===(x=n.locale)||void 0===x||null===(M=x.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==b?b:$.weekStartsOn)&&void 0!==v?v:null===(P=$.locale)||void 0===P||null===(L=P.options)||void 0===L?void 0:L.weekStartsOn)&&void 0!==y?y:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!z.localize)throw new RangeError("locale must contain localize property");if(!z.formatLong)throw new RangeError("locale must contain formatLong property");var B=(0,a.default)(e);if(!(0,r.default)(B))throw new RangeError("Invalid time value");var V=(0,T.A)(B),W=(0,s.A)(B,V),H={firstWeekContainsDate:j,weekStartsOn:U,locale:z,_originalDate:B};return F.match(A).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,S.A[t])(e,z.formatLong):e})).join("").match(_).map((function(r){if("''"===r)return"'";var s=r[0];if("'"===s)return function(e){var t=e.match(R);if(!t)return e;return t[1].replace(D,"'")}(r);var a=k[s];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,E.xM)(r)||(0,E.lJ)(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,E.ef)(r)||(0,E.lJ)(r,t,String(e)),a(W,r,z.localize,H);if(s.match(O))throw new RangeError("Format string contains an unescaped latin alphabet character `"+s+"`");return r})).join("")}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{457:"4ba3c33b",940:"98db1613"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="panekkatt-money-tracker:";n.l=(r,s,a,i)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[s];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise(((n,r)=>s=e[t]=[n,r]));r.push(s[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,a,i=r[0],o=r[1],l=r[2],c=0;if(i.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkpanekkatt_money_tracker=self.webpackChunkpanekkatt_money_tracker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{arraysEqual:()=>AT,arraysEqualWithNull:()=>_T,assert:()=>TT,assertNonNegativeIntegerDimensions:()=>iE,assertNonNull:()=>NT,assertShapesMatch:()=>ET,bytesFromStringArray:()=>GT,bytesPerElement:()=>HT,checkConversionForErrors:()=>BT,clamp:()=>vT,computeStrides:()=>ZT,convertBackendValuesAndArrayBuffer:()=>nE,createScalarValue:()=>u_,createShuffledIndices:()=>MT,decodeString:()=>m_,distSquared:()=>ST,encodeString:()=>f_,fetch:()=>p_,fingerPrint64:()=>c_,flatten:()=>y_,getArrayFromDType:()=>UT,getTypedArrayFromDType:()=>jT,hasEncodingLoss:()=>WT,hexToLong:()=>JI,indexToLoc:()=>lE,inferDtype:()=>XT,inferFromImplicitShape:()=>FT,isBoolean:()=>KT,isFunction:()=>QT,isInt:()=>RT,isNumber:()=>YT,isPromise:()=>cE,isScalarShape:()=>IT,isString:()=>qT,isTypedArray:()=>g_,isValidDtype:()=>VT,locToIndex:()=>oE,makeOnesTypedArray:()=>rE,makeZerosNestedTypedArray:()=>aE,makeZerosTypedArray:()=>sE,nearestDivisor:()=>JT,nearestLargerEven:()=>bT,now:()=>d_,parseAxisParam:()=>$T,randUniform:()=>kT,repeatedTry:()=>LT,rightPad:()=>PT,shuffle:()=>gT,shuffleCombo:()=>yT,sizeFromShape:()=>CT,sizeToSquarishShape:()=>OT,squeezeShape:()=>zT,sum:()=>xT,swap:()=>wT,tanh:()=>DT,toNestedArray:()=>tE,toTypedArray:()=>h_});var t={};n.r(t),n.d(t,{assertTypesMatch:()=>W_,getTensorsInContainer:()=>G_,isTensorInList:()=>H_,makeTypesMatch:()=>V_});var r={};n.r(r),n.d(r,{isBrowser:()=>rA,isMobile:()=>nA,mockIsMobile:()=>tA});var s={};n.r(s),n.d(s,{Serializable:()=>oD,SerializationMap:()=>lD,getRegisteredName:()=>uD,registerClass:()=>cD});var a={};n.r(a),n.d(a,{assertAndGetBroadcastShape:()=>xD,getBroadcastDims:()=>bD,getReductionAxes:()=>wD});var i={};n.r(i),n.d(i,{CompositeArrayBuffer:()=>gA,browserFiles:()=>RD,browserHTTPRequest:()=>jD,concatenateArrayBuffers:()=>YA,copyModel:()=>MR,decodeWeights:()=>jA,decodeWeightsStream:()=>HA,encodeWeights:()=>zA,fromMemory:()=>WD,fromMemorySync:()=>HD,getLoadHandlers:()=>iR,getModelArtifactsForJSON:()=>ZA,getModelArtifactsForJSONSync:()=>JA,getModelArtifactsInfoForJSON:()=>eR,getSaveHandlers:()=>aR,getWeightSpecs:()=>tR,http:()=>zD,isHTTPScheme:()=>FD,listModels:()=>DR,loadWeights:()=>MD,moveModel:()=>PR,registerLoadRouter:()=>sR,registerSaveRouter:()=>rR,removeModel:()=>OR,weightsLoaderFactory:()=>PD,withSaveHandler:()=>GD,withSaveHandlerSync:()=>qD});var o={};n.r(o),n.d(o,{confusionMatrix:()=>eO});var l={};n.r(l),n.d(l,{draw:()=>cO,fromPixels:()=>uO,fromPixelsAsync:()=>iO,toPixels:()=>lO});var c={};n.r(c),n.d(c,{prepareAndValidate:()=>hO});var u={};n.r(u),n.d(u,{calculateShapes:()=>fO,validateInput:()=>pO,validateUpdateShape:()=>dO});var h={};n.r(h),n.d(h,{assertParamsValid:()=>yO,computeFlatOffset:()=>AO,computeOutShape:()=>bO,getNormalizedAxes:()=>SO,isSliceContinous:()=>_O,maskToAxes:()=>vO,parseSliceParams:()=>RO,sliceInfo:()=>DO,startForAxis:()=>CO,startIndicesWithElidedDims:()=>TO,stopForAxis:()=>IO,stopIndicesWithElidedDims:()=>EO,stridesForAxis:()=>NO,stridesWithElidedDims:()=>wO});var d={};n.r(d),n.d(d,{TEST_EPSILON_FLOAT16:()=>PO,createVideoElement:()=>GO,encodeStrings:()=>HO,expectArrayBuffersEqual:()=>WO,expectArraysClose:()=>LO,expectArraysEqual:()=>jO,expectNumbersClose:()=>UO,expectPromiseToFail:()=>zO,expectValuesInRange:()=>VO,play:()=>qO,testEpsilon:()=>FO});var p={};n.r(p),n.d(p,{conv2d:()=>JF,depthwiseConv2d:()=>t$,matMul:()=>n$});var f={};n.r(f),n.d(f,{collectGatherOpShapeInfo:()=>dj,computeOutShape:()=>hj,segOpComputeOptimalWindowSize:()=>uj});var m={};n.r(m),n.d(m,{ERF_A1:()=>Iz,ERF_A2:()=>_z,ERF_A3:()=>Az,ERF_A4:()=>Rz,ERF_A5:()=>Dz,ERF_P:()=>Cz,PARALLELIZE_THRESHOLD:()=>yz,RowPartitionType:()=>dz,SELU_SCALE:()=>Nz,SELU_SCALEALPHA:()=>Ez,applyActivation:()=>XF,assertAndGetBroadcastShape:()=>xD,assertAxesAreInnerMostDims:()=>wP,assertParamsConsistent:()=>uz,assignToTypedArray:()=>$z,axesAreInnerMostDims:()=>gP,calculateShapes:()=>fO,checkEinsumDimSizes:()=>qz,checkPadOnDimRoundingMode:()=>kM,combineLocations:()=>yP,combineRaggedTensorToTensorShapes:()=>pz,complexWithEvenIndex:()=>Pz,complexWithOddIndex:()=>Lz,computeConv2DInfo:()=>hM,computeConv3DInfo:()=>dM,computeDefaultPad:()=>pM,computeDilation2DInfo:()=>lM,computeOptimalWindowSize:()=>vz,computeOutAndReduceShapes:()=>vP,computeOutShape:()=>hz,computePool2DInfo:()=>cM,computePool3DInfo:()=>uM,convertConv2DDataFormat:()=>xM,decodeEinsumEquation:()=>Hz,eitherStridesOrDilationsAreOne:()=>bM,expandShapeToKeepDim:()=>bP,exponent:()=>jz,exponents:()=>zz,fromStringArrayToUint8:()=>fj,fromUint8ToStringArray:()=>pj,getAxesPermutation:()=>xP,getBroadcastDims:()=>bD,getComplexWithIndex:()=>Fz,getEinsumComputePath:()=>Kz,getEinsumPermutation:()=>Gz,getFusedBiasGradient:()=>YF,getFusedDyActivation:()=>KF,getImageCenter:()=>bz,getInnerMostAxes:()=>SP,getPermuted:()=>xz,getRaggedRank:()=>mz,getReductionAxes:()=>wD,getReshaped:()=>wz,getReshapedPermuted:()=>kz,getRowPartitionTypesHelper:()=>fz,getSliceBeginCoords:()=>Sz,getSliceSize:()=>Tz,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Jz,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Zz,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>ej,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>rj,getSparseReshapeInputOutputMismatchErrorMessage:()=>aj,getSparseReshapeInputOutputMultipleErrorMessage:()=>sj,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>tj,getSparseReshapeNegativeOutputDimErrorMessage:()=>nj,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>cj,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>ij,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>oj,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>lj,getUndoAxesPermutation:()=>kP,isIdentityPermutation:()=>Yz,log:()=>FI,mergeRealAndImagArrays:()=>Oz,prepareAndValidate:()=>hO,prepareSplitSize:()=>Qz,segment_util:()=>f,shouldFuse:()=>QF,slice_util:()=>h,splitRealAndImagArrays:()=>Mz,stridesOrDilationsArePositive:()=>wM,tupleValuesAreOne:()=>vM,upcastType:()=>z_,validateDefaultValueShape:()=>gz,validateInput:()=>pO,validateUpdateShape:()=>dO,warn:()=>LI});var g={};n.r(g),n.d(g,{nonMaxSuppressionV3Impl:()=>g$,nonMaxSuppressionV4Impl:()=>y$,nonMaxSuppressionV5Impl:()=>v$,whereImpl:()=>LF});var y={};n.r(y),n.d(y,{maxNorm:()=>dW,minMaxNorm:()=>mW,nonNeg:()=>fW,unitNorm:()=>pW});var v={};n.r(v),n.d(v,{constant:()=>vW,glorotNormal:()=>EW,glorotUniform:()=>TW,heNormal:()=>NW,heUniform:()=>CW,identity:()=>kW,leCunNormal:()=>IW,leCunUniform:()=>_W,ones:()=>yW,orthogonal:()=>AW,randomNormal:()=>wW,randomUniform:()=>bW,truncatedNormal:()=>xW,varianceScaling:()=>SW,zeros:()=>gW});var b={};n.r(b),n.d(b,{Layer:()=>HV,RNN:()=>ZG,RNNCell:()=>eq,activation:()=>OK,add:()=>BK,alphaDropout:()=>DY,average:()=>VK,averagePooling1d:()=>JK,averagePooling2d:()=>tY,averagePooling3d:()=>sY,avgPool1d:()=>ZK,avgPool2d:()=>nY,avgPool3d:()=>aY,avgPooling1d:()=>eY,avgPooling2d:()=>rY,avgPooling3d:()=>iY,batchNormalization:()=>YK,bidirectional:()=>TY,categoryEncoding:()=>FY,centerCrop:()=>PY,concatenate:()=>WK,conv1d:()=>TK,conv2d:()=>EK,conv2dTranspose:()=>NK,conv3d:()=>CK,conv3dTranspose:()=>IK,convLstm2d:()=>wY,convLstm2dCell:()=>xY,cropping2D:()=>AK,dense:()=>MK,depthwiseConv2d:()=>DK,dot:()=>KK,dropout:()=>PK,elu:()=>vK,embedding:()=>UK,flatten:()=>FK,gaussianDropout:()=>RY,gaussianNoise:()=>AY,globalAveragePooling1d:()=>oY,globalAveragePooling2d:()=>lY,globalMaxPool1d:()=>NY,globalMaxPool2d:()=>CY,globalMaxPooling1d:()=>cY,globalMaxPooling2d:()=>uY,gru:()=>fY,gruCell:()=>mY,input:()=>XH,inputLayer:()=>yK,layerNormalization:()=>XK,leakyReLU:()=>wK,lstm:()=>gY,lstmCell:()=>yY,masking:()=>OY,maxPool1d:()=>IY,maxPool2d:()=>_Y,maxPooling1d:()=>hY,maxPooling2d:()=>dY,maxPooling3d:()=>pY,maximum:()=>HK,minimum:()=>GK,multiply:()=>qK,permute:()=>jK,prelu:()=>xK,randomWidth:()=>$Y,reLU:()=>bK,repeatVector:()=>$K,rescaling:()=>MY,reshape:()=>zK,resizing:()=>LY,rnn:()=>kY,separableConv2d:()=>_K,simpleRNN:()=>vY,simpleRNNCell:()=>bY,softmax:()=>kK,spatialDropout1d:()=>LK,stackedRNNCells:()=>SY,thresholdedReLU:()=>SK,timeDistributed:()=>EY,upSampling2d:()=>RK,zeroPadding2d:()=>QK});var w={};n.r(w),n.d(w,{MAPE:()=>YY,MSE:()=>JY,binaryAccuracy:()=>zY,binaryCrossentropy:()=>jY,categoricalAccuracy:()=>BY,categoricalCrossentropy:()=>VY,cosineProximity:()=>GY,mape:()=>XY,meanAbsoluteError:()=>qY,meanAbsolutePercentageError:()=>KY,meanSquaredError:()=>QY,mse:()=>ZY,precision:()=>WY,r2Score:()=>eX,recall:()=>HY,sparseCategoricalAccuracy:()=>UY});var x={};n.r(x),n.d(x,{modelFromJSON:()=>HH});var k={};n.r(k),n.d(k,{l1:()=>nX,l1l2:()=>tX,l2:()=>rX});var S={};n.r(S),n.d(S,{json:()=>SX});var T={};n.r(T),n.d(T,{json:()=>TX});var E={};n.r(E),n.d(E,{json:()=>EX});var N={};n.r(N),n.d(N,{json:()=>NX});var C={};n.r(C),n.d(C,{json:()=>CX});var I={};n.r(I),n.d(I,{json:()=>IX});var _={};n.r(_),n.d(_,{json:()=>_X});var A={};n.r(A),n.d(A,{json:()=>AX});var R={};n.r(R),n.d(R,{json:()=>RX});var D={};n.r(D),n.d(D,{json:()=>DX});var O={};n.r(O),n.d(O,{json:()=>OX});var M={};n.r(M),n.d(M,{json:()=>MX});var P={};n.r(P),n.d(P,{json:()=>PX});var L={};n.r(L),n.d(L,{json:()=>LX});var F={};n.r(F),n.d(F,{json:()=>FX});var z={};n.r(z),n.d(z,{json:()=>$X});var j={};n.r(j),n.d(j,{json:()=>zX});var U={};n.r(U),n.d(U,{json:()=>jX});var B={};n.r(B),n.d(B,{json:()=>UX});var V={};n.r(V),n.d(V,{OP_SCOPE_SUFFIX:()=>uA,abs:()=>vD,acos:()=>XO,acosh:()=>QO,add:()=>WR,addN:()=>JO,all:()=>ZO,any:()=>eM,argMax:()=>tM,argMin:()=>nM,asin:()=>rM,asinh:()=>sM,atan:()=>aM,atan2:()=>iM,atanh:()=>oM,avgPool:()=>TM,avgPool3d:()=>EM,basicLSTMCell:()=>AM,batchNorm:()=>DM,batchNorm2d:()=>OM,batchNorm3d:()=>MM,batchNorm4d:()=>PM,batchToSpaceND:()=>RM,bincount:()=>LM,bitwiseAnd:()=>FM,booleanMaskAsync:()=>$F,broadcastArgs:()=>$M,broadcastTo:()=>zM,buffer:()=>jR,cast:()=>UR,ceil:()=>jM,clipByValue:()=>UM,clone:()=>BR,complex:()=>dA,concat:()=>NM,concat1d:()=>BM,concat2d:()=>VM,concat3d:()=>WM,concat4d:()=>HM,conv1d:()=>qM,conv2d:()=>GM,conv2dTranspose:()=>YM,conv3d:()=>XM,conv3dTranspose:()=>JM,cos:()=>ZM,cosh:()=>eP,cosineWindow:()=>HF,cumprod:()=>tP,cumsum:()=>nP,denseBincount:()=>rP,depthToSpace:()=>sP,depthwiseConv2d:()=>aP,diag:()=>iP,dilation2d:()=>oP,div:()=>GR,divNoNan:()=>uP,dot:()=>hP,dropout:()=>VF,einsum:()=>dP,elu:()=>pP,enclosingPowerOfTwo:()=>WF,ensureShape:()=>fP,equal:()=>lP,erf:()=>mP,euclideanNorm:()=>_P,exp:()=>AP,expandDims:()=>RP,expm1:()=>DP,eye:()=>MP,fft:()=>dF,fill:()=>pD,floor:()=>PP,floorDiv:()=>HR,fused:()=>p,gather:()=>LP,gatherND:()=>BF,greater:()=>FP,greaterEqual:()=>$P,ifft:()=>pF,imag:()=>XD,image:()=>nz,inTopKAsync:()=>GF,irfft:()=>fF,isFinite:()=>zP,isInf:()=>jP,isNaN:()=>UP,leakyRelu:()=>BP,less:()=>VP,lessEqual:()=>WP,linalg:()=>rz,linspace:()=>HP,localResponseNormalization:()=>GP,log:()=>qP,log1p:()=>KP,logSigmoid:()=>XP,logSoftmax:()=>QP,logSumExp:()=>JP,logicalAnd:()=>ZP,logicalNot:()=>eL,logicalOr:()=>tL,logicalXor:()=>nL,losses:()=>sz,lowerBound:()=>aL,matMul:()=>KD,max:()=>TP,maxPool:()=>iL,maxPool3d:()=>oL,maxPoolWithArgmax:()=>lL,maximum:()=>kD,mean:()=>cL,meshgrid:()=>dL,min:()=>EP,minimum:()=>pL,mirrorPad:()=>fL,mod:()=>mL,moments:()=>gL,movingAverage:()=>zF,mul:()=>qR,multiRNNCell:()=>yL,multinomial:()=>vL,neg:()=>QD,norm:()=>IP,notEqual:()=>bL,oneHot:()=>YD,ones:()=>hL,onesLike:()=>wL,op:()=>hA,outerProduct:()=>xL,pad:()=>kL,pad1d:()=>SL,pad2d:()=>TL,pad3d:()=>EL,pad4d:()=>NL,pool:()=>IL,pow:()=>mD,prelu:()=>_L,print:()=>VR,prod:()=>AL,raggedGather:()=>RL,raggedRange:()=>DL,raggedTensorToTensor:()=>OL,rand:()=>ML,randomGamma:()=>zL,randomNormal:()=>jL,randomStandardNormal:()=>UL,randomUniform:()=>BL,randomUniformInt:()=>VL,range:()=>WL,real:()=>JD,reciprocal:()=>HL,relu:()=>GL,relu6:()=>qL,reshape:()=>SM,reverse:()=>KL,reverse1d:()=>YL,reverse2d:()=>XL,reverse3d:()=>QL,reverse4d:()=>JL,rfft:()=>gF,round:()=>ZL,rsqrt:()=>eF,scalar:()=>sD,scatterND:()=>jF,searchSorted:()=>sL,selu:()=>tF,separableConv2d:()=>nF,setdiff1dAsync:()=>rF,sigmoid:()=>CM,sign:()=>sF,signal:()=>tz,sin:()=>aF,sinh:()=>iF,slice:()=>IM,slice1d:()=>oF,slice2d:()=>lF,slice3d:()=>cF,slice4d:()=>uF,softmax:()=>hF,softplus:()=>YP,spaceToBatchND:()=>CL,sparse:()=>az,sparseToDense:()=>UF,spectral:()=>ez,split:()=>mF,sqrt:()=>KR,square:()=>YR,squaredDifference:()=>yF,squeeze:()=>vF,stack:()=>bF,step:()=>wF,stridedSlice:()=>xF,string:()=>iz,sub:()=>gD,sum:()=>NP,tan:()=>kF,tanh:()=>_M,tensor:()=>fA,tensor1d:()=>SF,tensor2d:()=>TF,tensor3d:()=>tO,tensor4d:()=>EF,tensor5d:()=>NF,tensor6d:()=>CF,tensorScatterUpdate:()=>IF,tile:()=>OP,topk:()=>_F,transpose:()=>ZD,truncatedNormal:()=>AF,unique:()=>RF,unsortedSegmentSum:()=>DF,unstack:()=>OF,upperBound:()=>MF,variable:()=>PF,where:()=>cP,whereAsync:()=>FF,zeros:()=>uL,zerosLike:()=>XR});var W={};n.r(W),n.d(W,{CSVDataset:()=>kJ,Dataset:()=>uJ,FileDataSource:()=>PJ,TextLineDataset:()=>mJ,URLDataSource:()=>LJ,array:()=>dJ,csv:()=>FJ,func:()=>$J,generator:()=>zJ,microphone:()=>UJ,version_data:()=>BJ,webcam:()=>jJ,zip:()=>pJ});var H={};n.r(H),n.d(H,{addImpl:()=>oZ,bincountImpl:()=>hZ,bincountReduceImpl:()=>dZ,bitwiseAndImpl:()=>pZ,castImpl:()=>nZ,ceilImpl:()=>bZ,concatImpl:()=>kZ,equalImpl:()=>SZ,expImpl:()=>NZ,expm1Impl:()=>_Z,floorDivImpl:()=>PZ,floorImpl:()=>DZ,gatherNdImpl:()=>$Z,gatherV2Impl:()=>zZ,greaterEqualImpl:()=>VZ,greaterImpl:()=>jZ,lessEqualImpl:()=>YZ,lessImpl:()=>GZ,linSpaceImpl:()=>JZ,logImpl:()=>ZZ,maxImpl:()=>n0,maximumImpl:()=>r0,minimumImpl:()=>i0,multiplyImpl:()=>c0,negImpl:()=>p0,notEqualImpl:()=>m0,prodImpl:()=>x0,raggedGatherImpl:()=>N0,raggedRangeImpl:()=>I0,raggedTensorToTensorImpl:()=>O0,rangeImpl:()=>M0,rsqrtImpl:()=>P0,scatterImpl:()=>$0,sigmoidImpl:()=>z0,simpleAbsImpl:()=>GJ,sliceImpl:()=>B0,sparseFillEmptyRowsImpl:()=>H0,sparseReshapeImpl:()=>G0,sparseSegmentReductionImpl:()=>q0,sqrtImpl:()=>K0,squaredDifferenceImpl:()=>Q0,staticRegexReplaceImpl:()=>e1,stridedSliceImpl:()=>r1,stringNGramsImpl:()=>a1,stringSplitImpl:()=>o1,stringToHashBucketFastImpl:()=>l1,subImpl:()=>c1,tileImpl:()=>p1,topKImpl:()=>g1,transposeImpl:()=>v0,uniqueImpl:()=>y1});var G={};n.r(G),n.d(G,{assertNotComplex:()=>D5,bindCanvasToFramebuffer:()=>i5,bindColorTextureToFramebuffer:()=>o5,bindTextureToProgramUniformSampler:()=>a5,bindTextureUnit:()=>t5,bindVertexBufferToProgramAttribute:()=>e5,callAndCheck:()=>P6,canBeRepresented:()=>$6,createFragmentShader:()=>B6,createFramebuffer:()=>Z6,createProgram:()=>H6,createStaticIndexBuffer:()=>Y6,createStaticVertexBuffer:()=>K6,createTexture:()=>Q6,createVertexShader:()=>U6,getBatchDim:()=>p5,getExtensionOrThrow:()=>j6,getFramebufferErrorMessage:()=>u5,getMaxTexturesInShader:()=>T5,getNumChannels:()=>X6,getProgramUniformLocation:()=>s5,getProgramUniformLocationOrThrow:()=>r5,getRowsCols:()=>f5,getShapeAs3D:()=>m5,getTextureShapeFromLogicalShape:()=>g5,getWebGLDisjointQueryTimerVersion:()=>E5,getWebGLErrorMessage:()=>z6,getWebGLMaxTextureSize:()=>x5,hasExtension:()=>N5,isCapableOfRenderingToFloatTexture:()=>I5,isDownloadFloatTextureEnabled:()=>_5,isReshapeFree:()=>v5,isWebGLFenceEnabled:()=>R5,isWebGLVersionEnabled:()=>C5,linkProgram:()=>G6,logShaderSourceAndInfoLog:()=>W6,resetMaxTextureSize:()=>k5,resetMaxTexturesInShader:()=>S5,unbindColorTextureFromFramebuffer:()=>l5,unbindTextureUnit:()=>n5,validateFramebuffer:()=>c5,validateProgram:()=>q6,validateTextureSize:()=>J6});var q={};n.r(q),n.d(q,{bindVertexProgramAttributeStreams:()=>E8,createBufferFromOutputTexture:()=>I8,createFloat16MatrixTexture:()=>v8,createFloat16PackedMatrixTexture:()=>T8,createFloat32MatrixTexture:()=>g8,createIndexBuffer:()=>p8,createPackedMatrixTexture:()=>k8,createUnsignedBytesMatrixTexture:()=>w8,createVertexBuffer:()=>d8,createVertexShader:()=>h8,downloadByteEncodedFloatMatrixFromOutputTexture:()=>A8,downloadFloat32MatrixFromBuffer:()=>_8,downloadMatrixFromPackedOutputTexture:()=>D8,downloadPackedMatrixFromBuffer:()=>R8,getInternalFormatForFloat16MatrixTexture:()=>y8,getInternalFormatForFloat16PackedMatrixTexture:()=>S8,getInternalFormatForFloat32MatrixTexture:()=>m8,getInternalFormatForPackedMatrixTexture:()=>x8,getInternalFormatForUnsignedBytesMatrixTexture:()=>b8,uploadDenseMatrixToTexture:()=>N8,uploadPixelDataToTexture:()=>C8});var K={};n.r(K),n.d(K,{Abs:()=>vE,Acos:()=>bE,Acosh:()=>wE,AdadeltaOptimizer:()=>dD,AdagradOptimizer:()=>fD,AdamOptimizer:()=>yD,AdamaxOptimizer:()=>SD,Add:()=>xE,AddN:()=>kE,All:()=>SE,Any:()=>TE,ArgMax:()=>EE,ArgMin:()=>NE,Asin:()=>CE,Asinh:()=>IE,Atan:()=>_E,Atan2:()=>RE,Atanh:()=>AE,AvgPool:()=>DE,AvgPool3D:()=>ME,AvgPool3DGrad:()=>PE,AvgPoolGrad:()=>OE,BatchMatMul:()=>LE,BatchToSpaceND:()=>FE,Bincount:()=>$E,BitwiseAnd:()=>zE,BroadcastArgs:()=>UE,BroadcastTo:()=>jE,Callback:()=>sX,CallbackList:()=>PW,Cast:()=>BE,Ceil:()=>VE,ClipByValue:()=>WE,Complex:()=>HE,ComplexAbs:()=>GE,Concat:()=>qE,Conv2D:()=>KE,Conv2DBackpropFilter:()=>YE,Conv2DBackpropInput:()=>XE,Conv3D:()=>QE,Conv3DBackpropFilterV2:()=>JE,Conv3DBackpropInputV2:()=>ZE,Cos:()=>eN,Cosh:()=>tN,CropAndResize:()=>sN,Cumprod:()=>nN,Cumsum:()=>rN,CustomCallback:()=>$W,DataStorage:()=>pT,DenseBincount:()=>aN,DepthToSpace:()=>iN,DepthwiseConv2dNative:()=>oN,DepthwiseConv2dNativeBackpropFilter:()=>lN,DepthwiseConv2dNativeBackpropInput:()=>cN,Diag:()=>uN,Dilation2D:()=>hN,Dilation2DBackpropFilter:()=>pN,Dilation2DBackpropInput:()=>dN,Draw:()=>fN,ENV:()=>mE,EarlyStopping:()=>oX,Einsum:()=>gN,Elu:()=>yN,EluGrad:()=>vN,Environment:()=>hE,Equal:()=>wN,Erf:()=>bN,Exp:()=>xN,ExpandDims:()=>kN,Expm1:()=>SN,FFT:()=>TN,Fill:()=>EN,FlipLeftRight:()=>NN,Floor:()=>CN,FloorDiv:()=>IN,FromPixels:()=>RI,FusedBatchNorm:()=>_N,FusedConv2D:()=>MI,FusedDepthwiseConv2D:()=>PI,GPGPUContext:()=>O8,GatherNd:()=>RN,GatherV2:()=>AN,GraphModel:()=>_Q,Greater:()=>DN,GreaterEqual:()=>ON,History:()=>FW,IFFT:()=>PN,Identity:()=>MN,Imag:()=>LN,InputSpec:()=>jV,IsFinite:()=>FN,IsInf:()=>$N,IsNan:()=>zN,KernelBackend:()=>fT,LRN:()=>JN,LRNGrad:()=>ZN,LayerVariable:()=>FV,LayersModel:()=>VH,LeakyRelu:()=>jN,Less:()=>UN,LessEqual:()=>BN,LinSpace:()=>VN,Log:()=>WN,Log1p:()=>HN,LogSoftmax:()=>XN,LogicalAnd:()=>GN,LogicalNot:()=>qN,LogicalOr:()=>KN,LogicalXor:()=>YN,LowerBound:()=>QN,MathBackendCPU:()=>HJ,MathBackendWebGL:()=>K9,MatrixBandPart:()=>eC,Max:()=>tC,MaxPool:()=>rC,MaxPool3D:()=>aC,MaxPool3DGrad:()=>iC,MaxPoolGrad:()=>sC,MaxPoolWithArgmax:()=>oC,Maximum:()=>nC,Mean:()=>lC,Min:()=>cC,Minimum:()=>uC,MirrorPad:()=>hC,Mod:()=>dC,MomentumOptimizer:()=>ED,Multinomial:()=>pC,Multiply:()=>fC,Neg:()=>mC,NonMaxSuppressionV3:()=>yC,NonMaxSuppressionV4:()=>vC,NonMaxSuppressionV5:()=>bC,NotEqual:()=>gC,OP_SCOPE_SUFFIX:()=>uA,OneHot:()=>xC,OnesLike:()=>wC,Optimizer:()=>hD,OptimizerConstructors:()=>YO,Pack:()=>kC,PadV2:()=>SC,Pool:()=>TC,Pow:()=>EC,Prelu:()=>NC,Prod:()=>CC,RMSPropOptimizer:()=>ND,RNN:()=>ZG,RaggedGather:()=>IC,RaggedRange:()=>_C,RaggedTensorToTensor:()=>AC,Range:()=>RC,Rank:()=>O_,Real:()=>DC,RealDiv:()=>mN,Reciprocal:()=>OC,Reduction:()=>L$,Relu:()=>MC,Relu6:()=>jC,Reshape:()=>PC,ResizeBilinear:()=>$C,ResizeBilinearGrad:()=>zC,ResizeNearestNeighbor:()=>LC,ResizeNearestNeighborGrad:()=>FC,Reverse:()=>UC,RotateWithOffset:()=>DI,Round:()=>BC,Rsqrt:()=>VC,SGDOptimizer:()=>TD,ScatterNd:()=>WC,SearchSorted:()=>GC,Select:()=>qC,Selu:()=>KC,Sequential:()=>qH,Sigmoid:()=>ZC,Sign:()=>JC,Sin:()=>XC,Sinh:()=>QC,Slice:()=>YC,Softmax:()=>aI,Softplus:()=>eI,SpaceToBatchND:()=>rI,SparseFillEmptyRows:()=>iI,SparseReshape:()=>oI,SparseSegmentMean:()=>lI,SparseSegmentSum:()=>cI,SparseToDense:()=>uI,SplitV:()=>sI,Sqrt:()=>tI,Square:()=>dI,SquaredDifference:()=>hI,StaticRegexReplace:()=>pI,Step:()=>AI,StridedSlice:()=>fI,StringNGrams:()=>mI,StringSplit:()=>gI,StringToHashBucketFast:()=>yI,Sub:()=>vI,Sum:()=>nI,SymbolicTensor:()=>UV,Tan:()=>bI,Tanh:()=>wI,Tensor:()=>A_,TensorBuffer:()=>N_,TensorScatterUpdate:()=>HC,Tile:()=>xI,TopK:()=>kI,Transform:()=>SI,Transpose:()=>TI,Unique:()=>EI,Unpack:()=>NI,UnsortedSegmentSum:()=>CI,UpperBound:()=>II,Variable:()=>D_,ZerosLike:()=>_I,_FusedMatMul:()=>OI,abs:()=>vD,acos:()=>XO,acosh:()=>QO,add:()=>WR,addN:()=>JO,all:()=>ZO,any:()=>eM,argMax:()=>tM,argMin:()=>nM,asin:()=>rM,asinh:()=>sM,atan:()=>aM,atan2:()=>iM,atanh:()=>oM,avgPool:()=>TM,avgPool3d:()=>EM,backend:()=>LA,backend_util:()=>m,basicLSTMCell:()=>AM,batchNorm:()=>DM,batchNorm2d:()=>OM,batchNorm3d:()=>MM,batchNorm4d:()=>PM,batchToSpaceND:()=>RM,bincount:()=>LM,bitwiseAnd:()=>FM,booleanMaskAsync:()=>$F,broadcastArgs:()=>$M,broadcastTo:()=>zM,broadcast_util:()=>a,browser:()=>l,buffer:()=>jR,callbacks:()=>lX,cast:()=>UR,ceil:()=>jM,clipByValue:()=>UM,clone:()=>BR,complex:()=>dA,concat:()=>NM,concat1d:()=>BM,concat2d:()=>VM,concat3d:()=>WM,concat4d:()=>HM,constraints:()=>y,conv1d:()=>qM,conv2d:()=>GM,conv2dTranspose:()=>YM,conv3d:()=>XM,conv3dTranspose:()=>JM,copyRegisteredKernels:()=>qI,cos:()=>ZM,cosh:()=>eP,cosineWindow:()=>HF,cumprod:()=>tP,cumsum:()=>nP,customGrad:()=>nD,data:()=>W,denseBincount:()=>rP,deprecationWarn:()=>wA,depthToSpace:()=>sP,depthwiseConv2d:()=>aP,deregisterOp:()=>fX,device_util:()=>r,diag:()=>iP,dilation2d:()=>oP,disableDeprecationWarnings:()=>bA,dispose:()=>NA,disposeVariables:()=>xA,div:()=>GR,divNoNan:()=>uP,dot:()=>hP,dropout:()=>VF,einsum:()=>dP,elu:()=>pP,enableDebugMode:()=>vA,enableProdMode:()=>yA,enclosingPowerOfTwo:()=>WF,engine:()=>kA,ensureShape:()=>fP,env:()=>pE,equal:()=>lP,erf:()=>mP,euclideanNorm:()=>_P,exp:()=>AP,expandDims:()=>RP,expm1:()=>DP,eye:()=>MP,fft:()=>dF,fill:()=>pD,findBackend:()=>OA,findBackendFactory:()=>MA,floor:()=>PP,floorDiv:()=>HR,forceHalfFloat:()=>X9,fused:()=>p,gather:()=>LP,gatherND:()=>BF,gather_util:()=>c,getBackend:()=>RA,getGradient:()=>UI,getKernel:()=>jI,getKernelsForBackend:()=>BI,gpgpu_util:()=>q,grad:()=>QR,grads:()=>JR,greater:()=>FP,greaterEqual:()=>$P,ifft:()=>pF,imag:()=>XD,image:()=>nz,inTopKAsync:()=>GF,initializers:()=>v,input:()=>XH,io:()=>i,irfft:()=>fF,isFinite:()=>zP,isInf:()=>jP,isNaN:()=>UP,keep:()=>CA,kernel_impls:()=>g,layers:()=>b,leakyRelu:()=>BP,less:()=>VP,lessEqual:()=>WP,linalg:()=>rz,linspace:()=>HP,loadGraphModel:()=>AQ,loadGraphModelSync:()=>RQ,loadLayersModel:()=>GH,localResponseNormalization:()=>GP,log:()=>qP,log1p:()=>KP,logSigmoid:()=>XP,logSoftmax:()=>QP,logSumExp:()=>JP,logicalAnd:()=>ZP,logicalNot:()=>eL,logicalOr:()=>tL,logicalXor:()=>nL,losses:()=>sz,lowerBound:()=>aL,matMul:()=>KD,math:()=>o,max:()=>TP,maxPool:()=>iL,maxPool3d:()=>oL,maxPoolWithArgmax:()=>lL,maximum:()=>kD,mean:()=>cL,memory:()=>SA,meshgrid:()=>dL,metrics:()=>w,min:()=>EP,minimum:()=>pL,mirrorPad:()=>fL,mod:()=>mL,model:()=>KH,models:()=>x,moments:()=>gL,movingAverage:()=>zF,mul:()=>qR,multiRNNCell:()=>yL,multinomial:()=>vL,neg:()=>QD,nextFrame:()=>cz,norm:()=>IP,notEqual:()=>bL,oneHot:()=>YD,ones:()=>hL,onesLike:()=>wL,op:()=>hA,outerProduct:()=>xL,pad:()=>kL,pad1d:()=>SL,pad2d:()=>TL,pad3d:()=>EL,pad4d:()=>NL,pool:()=>IL,pow:()=>mD,prelu:()=>_L,print:()=>VR,prod:()=>AL,profile:()=>TA,raggedGather:()=>RL,raggedRange:()=>DL,raggedTensorToTensor:()=>OL,rand:()=>ML,randomGamma:()=>zL,randomNormal:()=>jL,randomStandardNormal:()=>UL,randomUniform:()=>BL,randomUniformInt:()=>VL,range:()=>WL,ready:()=>AA,real:()=>JD,reciprocal:()=>HL,registerBackend:()=>PA,registerCallbackConstructor:()=>QH,registerGradient:()=>WI,registerKernel:()=>VI,registerOp:()=>dX,regularizers:()=>k,relu:()=>GL,relu6:()=>qL,removeBackend:()=>DA,reshape:()=>SM,reverse:()=>KL,reverse1d:()=>YL,reverse2d:()=>XL,reverse3d:()=>QL,reverse4d:()=>JL,rfft:()=>gF,round:()=>ZL,rsqrt:()=>eF,scalar:()=>sD,scatterND:()=>jF,scatter_util:()=>u,searchSorted:()=>sL,selu:()=>tF,separableConv2d:()=>nF,sequential:()=>YH,serialization:()=>s,setBackend:()=>_A,setPlatform:()=>FA,setWebGLContext:()=>N6,setdiff1dAsync:()=>rF,shared:()=>H,sigmoid:()=>CM,sign:()=>sF,signal:()=>tz,sin:()=>aF,sinh:()=>iF,slice:()=>IM,slice1d:()=>oF,slice2d:()=>lF,slice3d:()=>cF,slice4d:()=>uF,slice_util:()=>h,softmax:()=>hF,softplus:()=>YP,spaceToBatchND:()=>CL,sparse:()=>az,sparseToDense:()=>UF,spectral:()=>ez,split:()=>mF,sqrt:()=>KR,square:()=>YR,squaredDifference:()=>yF,squeeze:()=>vF,stack:()=>bF,step:()=>wF,stridedSlice:()=>xF,string:()=>iz,sub:()=>gD,sum:()=>NP,sumOutType:()=>j_,tan:()=>kF,tanh:()=>_M,tensor:()=>fA,tensor1d:()=>SF,tensor2d:()=>TF,tensor3d:()=>tO,tensor4d:()=>EF,tensor5d:()=>NF,tensor6d:()=>CF,tensorScatterUpdate:()=>IF,tensor_util:()=>t,test_util:()=>d,tidy:()=>EA,tile:()=>OP,time:()=>IA,topk:()=>_F,train:()=>oz,transpose:()=>ZD,truncatedNormal:()=>AF,unique:()=>RF,unregisterGradient:()=>GI,unregisterKernel:()=>HI,unsortedSegmentSum:()=>DF,unstack:()=>OF,upcastType:()=>z_,upperBound:()=>MF,util:()=>e,valueAndGrad:()=>ZR,valueAndGrads:()=>eD,variable:()=>PF,variableGrads:()=>tD,version:()=>Wae,version_converter:()=>DQ,version_core:()=>KO,version_cpu:()=>v1,version_layers:()=>SH,version_webgl:()=>Y9,webgl:()=>Q9,webgl_util:()=>G,where:()=>cP,whereAsync:()=>FF,zeros:()=>uL,zerosLike:()=>XR});var Y,X=n(5043),Q=n.t(X,2),J=n(4391);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Y||(Y={}));const ee="popstate";function te(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ne(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function re(e,t){return{usr:e.state,key:e.key,idx:t}}function se(e,t,n,r){return void 0===n&&(n=null),Z({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ie(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ae(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function ie(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oe(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o=Y.Pop,l=null,c=u();function u(){return(i.state||{idx:null}).idx}function h(){o=Y.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function d(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:ae(e);return n=n.replace(/ $/,"%20"),te(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,i.replaceState(Z({},i.state,{idx:c}),""));let p={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ee,h),l=e,()=>{s.removeEventListener(ee,h),l=null}},createHref:e=>t(s,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=Y.Push;let r=se(p.location,e,t);n&&n(r,e),c=u()+1;let h=re(r,c),d=p.createHref(r);try{i.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(d)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o=Y.Replace;let r=se(p.location,e,t);n&&n(r,e),c=u();let s=re(r,c),h=p.createHref(r);i.replaceState(s,"",h),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>i.go(e)};return p}var le;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(le||(le={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ce(e,t,n){return void 0===n&&(n="/"),ue(e,t,n,!1)}function ue(e,t,n,r){let s=Te(("string"===typeof t?ie(t):t).pathname||"/",n);if(null==s)return null;let a=he(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=Se(s);i=xe(a[o],e,r)}return i}function he(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(te(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=_e([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(te(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),he(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:we(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of de(e.path))s(e,t,r);else s(e,t)})),t}function de(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=de(r.join("/")),o=[];return o.push(...i.map((e=>""===e?a:[a,e].join("/")))),s&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const pe=/^:[\w-]+$/,fe=3,me=2,ge=1,ye=10,ve=-2,be=e=>"*"===e;function we(e,t){let n=e.split("/"),r=n.length;return n.some(be)&&(r+=ve),t&&(r+=me),n.filter((e=>!be(e))).reduce(((e,t)=>e+(pe.test(t)?fe:""===t?ge:ye)),r)}function xe(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=ke({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=ke({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:_e([a,u.pathname]),pathnameBase:Ae(_e([a,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(a=_e([a,u.pathnameBase]))}return i}function ke(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ne("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:a,pathnameBase:i,pattern:e}}function Se(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return ne(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Te(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ee(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ne(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Ce(e,t){let n=Ne(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Ie(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=ie(e):(s=Z({},e),te(!s.pathname||!s.pathname.includes("?"),Ee("?","pathname","search",s)),te(!s.pathname||!s.pathname.includes("#"),Ee("#","pathname","hash",s)),te(!s.search||!s.search.includes("#"),Ee("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?ie(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:Re(r),hash:De(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const _e=e=>e.join("/").replace(/\/\/+/g,"/"),Ae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Re=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",De=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Me=["post","put","patch","delete"],Pe=(new Set(Me),["get",...Me]);new Set(Pe),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}const Fe=X.createContext(null);const $e=X.createContext(null);const ze=X.createContext(null);const je=X.createContext(null);const Ue=X.createContext({outlet:null,matches:[],isDataRoute:!1});const Be=X.createContext(null);function Ve(){return null!=X.useContext(je)}function We(){return Ve()||te(!1),X.useContext(je).location}function He(e){X.useContext(ze).static||X.useLayoutEffect(e)}function Ge(){let{isDataRoute:e}=X.useContext(Ue);return e?function(){let{router:e}=nt(et.UseNavigateStable),t=st(tt.UseNavigateStable),n=X.useRef(!1);He((()=>{n.current=!0}));let r=X.useCallback((function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Le({fromRouteId:t},s)))}),[e,t]);return r}():function(){Ve()||te(!1);let e=X.useContext(Fe),{basename:t,future:n,navigator:r}=X.useContext(ze),{matches:s}=X.useContext(Ue),{pathname:a}=We(),i=JSON.stringify(Ce(s,n.v7_relativeSplatPath)),o=X.useRef(!1);He((()=>{o.current=!0}));let l=X.useCallback((function(n,s){if(void 0===s&&(s={}),!o.current)return;if("number"===typeof n)return void r.go(n);let l=Ie(n,JSON.parse(i),a,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:_e([t,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)}),[t,r,i,a,e]);return l}()}function qe(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=X.useContext(ze),{matches:s}=X.useContext(Ue),{pathname:a}=We(),i=JSON.stringify(Ce(s,r.v7_relativeSplatPath));return X.useMemo((()=>Ie(e,JSON.parse(i),a,"path"===n)),[e,i,a,n])}function Ke(e,t,n,r){Ve()||te(!1);let{navigator:s,static:a}=X.useContext(ze),{matches:i}=X.useContext(Ue),o=i[i.length-1],l=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,h=We();if(t){var d;let e="string"===typeof t?ie(t):t;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||te(!1),u=e}else u=h;let p=u.pathname||"/",f=p;if("/"!==c){let e=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=!a&&n&&n.matches&&n.matches.length>0?n.matches:ce(e,{pathname:f});let g=Ze(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:_e([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:_e([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),i,n,r);return t&&g?X.createElement(je.Provider,{value:{location:Le({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Y.Pop}},g):g}function Ye(){let e=function(){var e;let t=X.useContext(Be),n=rt(tt.UseRouteError),r=st(tt.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Oe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),n?X.createElement("pre",{style:s},n):null,null)}const Xe=X.createElement(Ye,null);class Qe extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?X.createElement(Ue.Provider,{value:this.props.routeContext},X.createElement(Be.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Je(e){let{routeContext:t,match:n,children:r}=e,s=X.useContext(Fe);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(Ue.Provider,{value:t},r)}function Ze(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let i=e,o=null==(s=n)?void 0:s.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));e>=0||te(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let e=i[u];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=u),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight(((e,r,s)=>{let a,u=!1,h=null,d=null;var p;n&&(a=o&&r.route.id?o[r.route.id]:void 0,h=r.route.errorElement||Xe,l&&(c<0&&0===s?(p="route-fallback",!1||at[p]||(at[p]=!0),u=!0,d=null):c===s&&(u=!0,d=r.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,s+1)),m=()=>{let t;return t=a?h:u?d:r.route.Component?X.createElement(r.route.Component,null):r.route.element?r.route.element:e,X.createElement(Je,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?X.createElement(Qe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}var et=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(et||{}),tt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(tt||{});function nt(e){let t=X.useContext(Fe);return t||te(!1),t}function rt(e){let t=X.useContext($e);return t||te(!1),t}function st(e){let t=function(){let e=X.useContext(Ue);return e||te(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||te(!1),n.route.id}const at={};function it(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}Q.startTransition;function ot(e){let{to:t,replace:n,state:r,relative:s}=e;Ve()||te(!1);let{future:a,static:i}=X.useContext(ze),{matches:o}=X.useContext(Ue),{pathname:l}=We(),c=Ge(),u=Ie(t,Ce(o,a.v7_relativeSplatPath),l,"path"===s),h=JSON.stringify(u);return X.useEffect((()=>c(JSON.parse(h),{replace:n,state:r,relative:s})),[c,h,s,n,r]),null}function lt(e){te(!1)}function ct(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Y.Pop,navigator:a,static:i=!1,future:o}=e;Ve()&&te(!1);let l=t.replace(/^\/*/,"/"),c=X.useMemo((()=>({basename:l,navigator:a,static:i,future:Le({v7_relativeSplatPath:!1},o)})),[l,o,a,i]);"string"===typeof r&&(r=ie(r));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,m=X.useMemo((()=>{let e=Te(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:p,key:f},navigationType:s}}),[l,u,h,d,p,f,s]);return null==m?null:X.createElement(ze.Provider,{value:c},X.createElement(je.Provider,{children:n,value:m}))}function ut(e){let{children:t,location:n}=e;return Ke(ht(t),n)}new Promise((()=>{}));X.Component;function ht(e,t){void 0===t&&(t=[]);let n=[];return X.Children.forEach(e,((e,r)=>{if(!X.isValidElement(e))return;let s=[...t,r];if(e.type===X.Fragment)return void n.push.apply(n,ht(e.props.children,s));e.type!==lt&&te(!1),e.props.index&&e.props.children&&te(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ht(e.props.children,s)),n.push(a)})),n}var dt=n(7950),pt=n.t(dt,2);function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(this,arguments)}function mt(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const gt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(jEe){}new Map;const yt=Q.startTransition;pt.flushSync,Q.useId;function vt(e){let{basename:t,children:n,future:r,window:s}=e,a=X.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),oe((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return se("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ae(t)}),null,e)}({window:s,v5Compat:!0}));let i=a.current,[o,l]=X.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},u=X.useCallback((e=>{c&&yt?yt((()=>l(e))):l(e)}),[l,c]);return X.useLayoutEffect((()=>i.listen(u)),[i,u]),X.useEffect((()=>it(r)),[r]),X.createElement(ct,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const bt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,wt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=X.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:i,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=mt(e,gt),{basename:p}=X.useContext(ze),f=!1;if("string"===typeof c&&wt.test(c)&&(n=c,bt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=Te(t.pathname,p);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:f=!0}catch(jEe){}let m=function(e,t){let{relative:n}=void 0===t?{}:t;Ve()||te(!1);let{basename:r,navigator:s}=X.useContext(ze),{hash:a,pathname:i,search:o}=qe(e,{relative:n}),l=i;return"/"!==r&&(l="/"===i?r:_e([r,i])),s.createHref({pathname:l,search:o,hash:a})}(c,{relative:s}),g=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o}=void 0===t?{}:t,l=Ge(),c=We(),u=qe(e,{relative:i});return X.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:ae(c)===ae(u);l(e,{replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o})}}),[c,l,u,r,s,n,e,a,i,o])}(c,{replace:i,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:h});return X.createElement("a",ft({},d,{href:n||m,onClick:f||a?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))}));var kt,St;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(kt||(kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(St||(St={}));var Tt=n(8139),Et=n.n(Tt),Nt=n(579);const Ct=["xxl","xl","lg","md","sm","xs"],It="xs",_t=X.createContext({prefixes:{},breakpoints:Ct,minBreakpoint:It}),{Consumer:At,Provider:Rt}=_t;function Dt(e,t){const{prefixes:n}=(0,X.useContext)(_t);return e||n[t]||t}function Ot(){const{breakpoints:e}=(0,X.useContext)(_t);return e}function Mt(){const{minBreakpoint:e}=(0,X.useContext)(_t);return e}function Pt(){const{dir:e}=(0,X.useContext)(_t);return"rtl"===e}const Lt=X.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:s="div",className:a,...i}=e;const o=Dt(n,"container"),l="string"===typeof r?`-${r}`:"-fluid";return(0,Nt.jsx)(s,{ref:t,...i,className:Et()(a,r?`${o}${l}`:o)})}));Lt.displayName="Container";const Ft=Lt,$t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},zt=X.createContext(null);function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(null,arguments)}function Ut(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n(2740);function Bt(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Vt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Wt(e,t){return Object.keys(t).reduce((function(n,r){var s,a=n,i=a[Bt(r)],o=a[r],l=Ut(a,[Bt(r),r].map(Vt)),c=t[r],u=function(e,t,n){var r=(0,X.useRef)(void 0!==e),s=(0,X.useState)(t),a=s[0],i=s[1],o=void 0!==e,l=r.current;return r.current=o,!o&&l&&a!==t&&i(t),[o?e:a,(0,X.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];n&&n.apply(void 0,[e].concat(r)),i(e)}),[n])]}(o,i,e[c]),h=u[0],d=u[1];return jt({},l,((s={})[r]=h,s[c]=d,s))}),e)}function Ht(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Gt(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function qt(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Ht.__suppressDeprecationWarning=!0,Gt.__suppressDeprecationWarning=!0,qt.__suppressDeprecationWarning=!0;const Kt=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:s,...a}=e;n=Dt(n,"navbar-brand");const i=s||(a.href?"a":"span");return(0,Nt.jsx)(i,{...a,ref:t,className:Et()(r,n)})}));Kt.displayName="NavbarBrand";const Yt=Kt;function Xt(e){return e&&e.ownerDocument||document}function Qt(e,t){return function(e){var t=Xt(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Jt=/([A-Z])/g;var Zt=/^ms-/;function en(e){return function(e){return e.replace(Jt,"-$1").toLowerCase()}(e).replace(Zt,"-ms-")}var tn=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const nn=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(en(t))||Qt(e).getPropertyValue(en(t));Object.keys(t).forEach((function(s){var a=t[s];a||0===a?!function(e){return!(!e||!tn.test(e))}(s)?n+=en(s)+": "+a+";":r+=s+"("+a+") ":e.style.removeProperty(en(s))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};var rn=n(3662);const sn=!1,an=X.createContext(null);var on="unmounted",ln="exited",cn="entering",un="entered",hn="exiting",dn=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var s,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(s=ln,r.appearStatus=cn):s=un:s=t.unmountOnExit||t.mountOnEnter?on:ln,r.state={status:s},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,(0,rn.A)(t,n),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===on?{status:ln}:null};var s=r.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==cn&&n!==un&&(t=cn):n!==cn&&n!==un||(t=hn)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===cn){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:dt.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ln&&this.setState({status:on})},s.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,s=this.props.nodeRef?[r]:[dt.findDOMNode(this),r],a=s[0],i=s[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||sn?this.safeSetState({status:un},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,i),this.safeSetState({status:cn},(function(){t.props.onEntering(a,i),t.onTransitionEnd(l,(function(){t.safeSetState({status:un},(function(){t.props.onEntered(a,i)}))}))})))},s.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:dt.findDOMNode(this);t&&!sn?(this.props.onExit(r),this.safeSetState({status:hn},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:ln},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:ln},(function(){e.props.onExited(r)}))},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:dt.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=s[0],i=s[1];this.props.addEndListener(a,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},s.render=function(){var e=this.state.status;if(e===on)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Ut(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return X.createElement(an.Provider,{value:null},"function"===typeof n?n(e,r):X.cloneElement(X.Children.only(n),r))},r}(X.Component);function pn(){}dn.contextType=an,dn.propTypes={},dn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pn,onEntering:pn,onEntered:pn,onExit:pn,onExiting:pn,onExited:pn},dn.UNMOUNTED=on,dn.EXITED=ln,dn.ENTERING=cn,dn.ENTERED=un,dn.EXITING=hn;const fn=dn;function mn(e){if(!e||"function"===typeof e)return null;const{major:t}=function(){const e=X.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return t>=19?e.props.ref:e.ref}const gn=!("undefined"===typeof window||!window.document||!window.document.createElement);var yn=!1,vn=!1;try{var bn={get passive(){return yn=!0},get once(){return vn=yn=!0}};gn&&(window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,!0))}catch(jEe){}const wn=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!vn){var s=r.once,a=r.capture,i=n;!vn&&s&&(i=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=i),e.addEventListener(t,i,yn?r:a)}e.addEventListener(t,n,r)};const xn=function(e,t,n,r){var s=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)};const kn=function(e,t,n,r){return wn(e,t,n,r),function(){xn(e,t,n,r)}};function Sn(e,t,n){void 0===n&&(n=5);var r=!1,s=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,n,r),e.dispatchEvent(s)}}(e,"transitionend",!0)}),t+n),a=kn(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(s),a()}}function Tn(e,t,n,r){null==n&&(n=function(e){var t=nn(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var s=Sn(e,n,r),a=kn(e,"transitionend",t);return function(){s(),a()}}function En(e,t){const n=nn(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Nn(e,t){const n=En(e,"transitionDuration"),r=En(e,"transitionDelay"),s=Tn(e,(n=>{n.target===e&&(s(),t(n))}),n+r)}const Cn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r),t.apply(this,r)}}),null)};function In(e){e.offsetHeight}const _n=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const An=function(e,t){return(0,X.useMemo)((()=>function(e,t){const n=_n(e),r=_n(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};const Rn=X.forwardRef(((e,t)=>{let{onEnter:n,onEntering:r,onEntered:s,onExit:a,onExiting:i,onExited:o,addEndListener:l,children:c,childRef:u,...h}=e;const d=(0,X.useRef)(null),p=An(d,u),f=e=>{var t;p((t=e)&&"setState"in t?dt.findDOMNode(t):null!=t?t:null)},m=e=>t=>{e&&d.current&&e(d.current,t)},g=(0,X.useCallback)(m(n),[n]),y=(0,X.useCallback)(m(r),[r]),v=(0,X.useCallback)(m(s),[s]),b=(0,X.useCallback)(m(a),[a]),w=(0,X.useCallback)(m(i),[i]),x=(0,X.useCallback)(m(o),[o]),k=(0,X.useCallback)(m(l),[l]);return(0,Nt.jsx)(fn,{ref:t,...h,onEnter:g,onEntered:v,onEntering:y,onExit:b,onExited:x,onExiting:w,addEndListener:k,nodeRef:d,children:"function"===typeof c?(e,t)=>c(e,{...t,ref:f}):X.cloneElement(c,{ref:f})})})),Dn=Rn,On={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Mn(e,t){const n=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],r=On[e];return n+parseInt(nn(t,r[0]),10)+parseInt(nn(t,r[1]),10)}const Pn={[ln]:"collapse",[hn]:"collapsing",[cn]:"collapsing",[un]:"collapse show"},Ln=X.forwardRef(((e,t)=>{let{onEnter:n,onEntering:r,onEntered:s,onExit:a,onExiting:i,className:o,children:l,dimension:c="height",in:u=!1,timeout:h=300,mountOnEnter:d=!1,unmountOnExit:p=!1,appear:f=!1,getDimensionValue:m=Mn,...g}=e;const y="function"===typeof c?c():c,v=(0,X.useMemo)((()=>Cn((e=>{e.style[y]="0"}),n)),[y,n]),b=(0,X.useMemo)((()=>Cn((e=>{const t=`scroll${y[0].toUpperCase()}${y.slice(1)}`;e.style[y]=`${e[t]}px`}),r)),[y,r]),w=(0,X.useMemo)((()=>Cn((e=>{e.style[y]=null}),s)),[y,s]),x=(0,X.useMemo)((()=>Cn((e=>{e.style[y]=`${m(y,e)}px`,In(e)}),a)),[a,m,y]),k=(0,X.useMemo)((()=>Cn((e=>{e.style[y]=null}),i)),[y,i]);return(0,Nt.jsx)(Dn,{ref:t,addEndListener:Nn,...g,"aria-expanded":g.role?u:null,onEnter:v,onEntering:b,onEntered:w,onExit:x,onExiting:k,childRef:mn(l),in:u,timeout:h,mountOnEnter:d,unmountOnExit:p,appear:f,children:(e,t)=>X.cloneElement(l,{...t,className:Et()(o,l.props.className,Pn[e],"width"===y&&"collapse-horizontal")})})})),Fn=X.createContext(null);Fn.displayName="NavbarContext";const $n=Fn,zn=X.forwardRef(((e,t)=>{let{children:n,bsPrefix:r,...s}=e;r=Dt(r,"navbar-collapse");const a=(0,X.useContext)($n);return(0,Nt.jsx)(Ln,{in:!(!a||!a.expanded),...s,children:(0,Nt.jsx)("div",{ref:t,className:r,children:n})})}));zn.displayName="NavbarCollapse";const jn=zn;const Un=function(e){const t=(0,X.useRef)(e);return(0,X.useEffect)((()=>{t.current=e}),[e]),t};function Bn(e){const t=Un(e);return(0,X.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const Vn=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,label:a="Toggle navigation",as:i="button",onClick:o,...l}=e;n=Dt(n,"navbar-toggler");const{onToggle:c,expanded:u}=(0,X.useContext)($n)||{},h=Bn((e=>{o&&o(e),c&&c()}));return"button"===i&&(l.type="button"),(0,Nt.jsx)(i,{...l,ref:t,onClick:h,"aria-label":a,className:Et()(r,n,!u&&"collapsed"),children:s||(0,Nt.jsx)("span",{className:`${n}-icon`})})}));Vn.displayName="NavbarToggle";const Wn=Vn,Hn="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Gn="undefined"!==typeof document||Hn?X.useLayoutEffect:X.useEffect,qn=new WeakMap,Kn=(e,t)=>{if(!e||!t)return;const n=qn.get(t)||new Map;qn.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function Yn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=Kn(e,t),[r,s]=(0,X.useState)((()=>!!n&&n.matches));return Gn((()=>{let n=Kn(e,t);if(!n)return s(!1);let r=qn.get(t);const a=()=>{s(n.matches)};return n.refCount++,n.addListener(a),a(),()=>{n.removeListener(a),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),r}const Xn=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?`${e} and ${t}`:t}function r(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let s=e[r];return s="number"===typeof s?s-.2+"px":`calc(${s} - 0.2px)`,`(max-width: ${s})`}return function(t,s,a){let i;"object"===typeof t?(i=t,a=s,s=!0):(s=s||!0,i={[t]:s});let o=(0,X.useMemo)((()=>Object.entries(i).reduce(((t,s)=>{let[a,i]=s;return"up"!==i&&!0!==i||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n=`${n}px`),`(min-width: ${n})`}(a))),"down"!==i&&!0!==i||(t=n(t,r(a))),t}),"")),[JSON.stringify(i)]);return Yn(o,a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Qn=Xn;function Jn(e){void 0===e&&(e=Xt());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(jEe){return e.body}}function Zn(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function er(){const e=(0,X.useRef)(!0),t=(0,X.useRef)((()=>e.current));return(0,X.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}function tr(e){const t=function(e){const t=(0,X.useRef)(e);return t.current=e,t}(e);(0,X.useEffect)((()=>()=>t.current()),[])}function nr(e){const t=(0,X.useRef)(null);return(0,X.useEffect)((()=>{t.current=e})),t.current}const rr=function(e){const t=(0,X.useRef)(e);return(0,X.useEffect)((()=>{t.current=e}),[e]),t};function sr(e){const t=rr(e);return(0,X.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}function ar(e){return`data-rr-ui-${e}`}const ir=ar("modal-open");const or=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt(nn(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(ir,""),nn(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(ir),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},lr=(0,X.createContext)(gn?window:void 0);lr.Provider;function cr(){return(0,X.useContext)(lr)}const ur=(e,t)=>gn?null==e?(t||Xt()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const hr=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const dr=function(e,t){return(0,X.useMemo)((()=>function(e,t){const n=hr(e),r=hr(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])},pr="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,fr="undefined"!==typeof document||pr?X.useLayoutEffect:X.useEffect;const mr=function(e){let{children:t,in:n,onExited:r,mountOnEnter:s,unmountOnExit:a}=e;const i=(0,X.useRef)(null),o=(0,X.useRef)(n),l=sr(r);(0,X.useEffect)((()=>{n?o.current=!0:l(i.current)}),[n,l]);const c=dr(i,mn(t)),u=(0,X.cloneElement)(t,{ref:c});return n?u:a||!o.current&&s?null:u},gr=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const yr=["component"];const vr=X.forwardRef(((e,t)=>{let{component:n}=e;const r=function(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:s,onExiting:a,onExited:i,addEndListener:o,children:l}=e,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,gr);const u=(0,X.useRef)(null),h=dr(u,mn(l)),d=e=>t=>{e&&u.current&&e(u.current,t)},p=(0,X.useCallback)(d(t),[t]),f=(0,X.useCallback)(d(n),[n]),m=(0,X.useCallback)(d(r),[r]),g=(0,X.useCallback)(d(s),[s]),y=(0,X.useCallback)(d(a),[a]),v=(0,X.useCallback)(d(i),[i]),b=(0,X.useCallback)(d(o),[o]);return Object.assign({},c,{nodeRef:u},t&&{onEnter:p},n&&{onEntering:f},r&&{onEntered:m},s&&{onExit:g},a&&{onExiting:y},i&&{onExited:v},o&&{addEndListener:b},{children:"function"===typeof l?(e,t)=>l(e,Object.assign({},t,{ref:h})):(0,X.cloneElement)(l,{ref:h})})}(function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,yr));return(0,Nt.jsx)(n,Object.assign({ref:t},r))})),br=vr;function wr(e){let{children:t,in:n,onExited:r,onEntered:s,transition:a}=e;const[i,o]=(0,X.useState)(!n);n&&i&&o(!1);const l=function(e){let{in:t,onTransition:n}=e;const r=(0,X.useRef)(null),s=(0,X.useRef)(!0),a=sr(n);return fr((()=>{if(!r.current)return;let e=!1;return a({in:t,element:r.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[t,a]),fr((()=>(s.current=!1,()=>{s.current=!0})),[]),r}({in:!!n,onTransition:e=>{Promise.resolve(a(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(o(!0),null==r||r(e.element)))}),(t=>{throw e.in||o(!0),t}))}}),c=dr(l,mn(t));return i&&!n?null:(0,X.cloneElement)(t,{ref:c})}function xr(e,t,n){return e?(0,Nt.jsx)(br,Object.assign({},n,{component:e})):t?(0,Nt.jsx)(wr,Object.assign({},n,{transition:t})):(0,Nt.jsx)(mr,Object.assign({},n))}const kr=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let Sr;function Tr(e){const t=cr(),n=e||function(e){return Sr||(Sr=new or({ownerDocument:null==e?void 0:e.document})),Sr}(t),r=(0,X.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:(0,X.useCallback)((e=>{r.current.dialog=e}),[]),setBackdropRef:(0,X.useCallback)((e=>{r.current.backdrop=e}),[])})}const Er=(0,X.forwardRef)(((e,t)=>{let{show:n=!1,role:r="dialog",className:s,style:a,children:i,backdrop:o=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:h,runTransition:d,backdropTransition:p,runBackdropTransition:f,autoFocus:m=!0,enforceFocus:g=!0,restoreFocus:y=!0,restoreFocusOptions:v,renderDialog:b,renderBackdrop:w=e=>(0,Nt.jsx)("div",Object.assign({},e)),manager:x,container:k,onShow:S,onHide:T=()=>{},onExit:E,onExited:N,onExiting:C,onEnter:I,onEntering:_,onEntered:A}=e,R=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,kr);const D=cr(),O=function(e,t){const n=cr(),[r,s]=(0,X.useState)((()=>ur(e,null==n?void 0:n.document)));if(!r){const t=ur(e);t&&s(t)}return(0,X.useEffect)((()=>{t&&r&&t(r)}),[t,r]),(0,X.useEffect)((()=>{const t=ur(e);t!==r&&s(t)}),[e,r]),r}(k),M=Tr(x),P=er(),L=nr(n),[F,$]=(0,X.useState)(!n),z=(0,X.useRef)(null);(0,X.useImperativeHandle)(t,(()=>M),[M]),gn&&!L&&n&&(z.current=Jn(null==D?void 0:D.document)),n&&F&&$(!1);const j=sr((()=>{if(M.add(),G.current=kn(document,"keydown",W),H.current=kn(document,"focus",(()=>setTimeout(B)),!0),S&&S(),m){var e,t;const n=Jn(null!=(e=null==(t=M.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);M.dialog&&n&&!Zn(M.dialog,n)&&(z.current=n,M.dialog.focus())}})),U=sr((()=>{var e;(M.remove(),null==G.current||G.current(),null==H.current||H.current(),y)&&(null==(e=z.current)||null==e.focus||e.focus(v),z.current=null)}));(0,X.useEffect)((()=>{n&&O&&j()}),[n,O,j]),(0,X.useEffect)((()=>{F&&U()}),[F,U]),tr((()=>{U()}));const B=sr((()=>{if(!g||!P()||!M.isTopModal())return;const e=Jn(null==D?void 0:D.document);M.dialog&&e&&!Zn(M.dialog,e)&&M.dialog.focus()})),V=sr((e=>{e.target===e.currentTarget&&(null==c||c(e),!0===o&&T())})),W=sr((e=>{l&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&M.isTopModal()&&(null==u||u(e),e.defaultPrevented||T())})),H=(0,X.useRef)(),G=(0,X.useRef)();if(!O)return null;const q=Object.assign({role:r,ref:M.setDialogRef,"aria-modal":"dialog"===r||void 0},R,{style:a,className:s,tabIndex:-1});let K=b?b(q):(0,Nt.jsx)("div",Object.assign({},q,{children:X.cloneElement(i,{role:"document"})}));K=xr(h,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:E,onExiting:C,onExited:function(){$(!0),null==N||N(...arguments)},onEnter:I,onEntering:_,onEntered:A,children:K});let Y=null;return o&&(Y=w({ref:M.setBackdropRef,onClick:V}),Y=xr(p,f,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Y})),(0,Nt.jsx)(Nt.Fragment,{children:dt.createPortal((0,Nt.jsxs)(Nt.Fragment,{children:[Y,K]}),O)})}));Er.displayName="Modal";const Nr=Object.assign(Er,{Manager:or}),Cr={[cn]:"show",[un]:"show"},Ir=X.forwardRef(((e,t)=>{let{className:n,children:r,transitionClasses:s={},onEnter:a,...i}=e;const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},l=(0,X.useCallback)(((e,t)=>{In(e),null==a||a(e,t)}),[a]);return(0,Nt.jsx)(Dn,{ref:t,addEndListener:Nn,...o,onEnter:l,childRef:mn(r),children:(e,t)=>X.cloneElement(r,{...t,className:Et()("fade",n,r.props.className,Cr[e],s[e])})})}));Ir.displayName="Fade";const _r=Ir,Ar=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"offcanvas-body"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));Ar.displayName="OffcanvasBody";const Rr=Ar,Dr={[cn]:"show",[un]:"show"},Or=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,in:a=!1,mountOnEnter:i=!1,unmountOnExit:o=!1,appear:l=!1,...c}=e;return n=Dt(n,"offcanvas"),(0,Nt.jsx)(Dn,{ref:t,addEndListener:Nn,in:a,mountOnEnter:i,unmountOnExit:o,appear:l,...c,childRef:mn(s),children:(e,t)=>X.cloneElement(s,{...t,className:Et()(r,s.props.className,(e===cn||e===hn)&&`${n}-toggling`,Dr[e])})})}));Or.displayName="OffcanvasToggling";const Mr=Or,Pr=X.createContext({onHide(){}});var Lr=n(5173),Fr=n.n(Lr);const $r={"aria-label":Fr().string,onClick:Fr().func,variant:Fr().oneOf(["white"])},zr=X.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":s="Close",...a}=e;return(0,Nt.jsx)("button",{ref:t,type:"button",className:Et()("btn-close",r&&`btn-close-${r}`,n),"aria-label":s,...a})}));zr.displayName="CloseButton",zr.propTypes=$r;const jr=zr,Ur=X.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:r,closeButton:s=!1,onHide:a,children:i,...o}=e;const l=(0,X.useContext)(Pr),c=Bn((()=>{null==l||l.onHide(),null==a||a()}));return(0,Nt.jsxs)("div",{ref:t,...o,children:[i,s&&(0,Nt.jsx)(jr,{"aria-label":n,variant:r,onClick:c})]})})),Br=Ur,Vr=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:s="Close",closeButton:a=!1,...i}=e;return n=Dt(n,"offcanvas-header"),(0,Nt.jsx)(Br,{ref:t,...i,className:Et()(r,n),closeLabel:s,closeButton:a})}));Vr.displayName="OffcanvasHeader";const Wr=Vr,Hr=e=>X.forwardRef(((t,n)=>(0,Nt.jsx)("div",{...t,ref:n,className:Et()(t.className,e)}))),Gr=Hr("h5"),qr=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s=Gr,...a}=e;return r=Dt(r,"offcanvas-title"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));qr.displayName="OffcanvasTitle";const Kr=qr;var Yr=Function.prototype.bind.call(Function.prototype.call,[].slice);function Xr(e,t){return Yr(e.querySelectorAll(t))}function Qr(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Jr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Zr=".sticky-top",es=".navbar-toggler";class ts extends or{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,nn(t,{[e]:`${parseFloat(nn(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],nn(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Xr(t,Jr).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth))),Xr(t,Zr).forEach((t=>this.adjustAndStore(a,t,-e.scrollBarWidth))),Xr(t,es).forEach((t=>this.adjustAndStore(a,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=Qr(n.className,r):n.setAttribute("class",Qr(n.className&&n.className.baseVal||"",r));const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Xr(t,Jr).forEach((e=>this.restore(s,e))),Xr(t,Zr).forEach((e=>this.restore(a,e))),Xr(t,es).forEach((e=>this.restore(a,e)))}}let ns;function rs(e){return ns||(ns=new ts(e)),ns}const ss=ts;function as(e){return(0,Nt.jsx)(Mr,{...e})}function is(e){return(0,Nt.jsx)(_r,{...e})}const os=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,"aria-labelledby":a,placement:i="start",responsive:o,show:l=!1,backdrop:c=!0,keyboard:u=!0,scroll:h=!1,onEscapeKeyDown:d,onShow:p,onHide:f,container:m,autoFocus:g=!0,enforceFocus:y=!0,restoreFocus:v=!0,restoreFocusOptions:b,onEntered:w,onExit:x,onExiting:k,onEnter:S,onEntering:T,onExited:E,backdropClassName:N,manager:C,renderStaticNode:I=!1,..._}=e;const A=(0,X.useRef)();n=Dt(n,"offcanvas");const[R,D]=(0,X.useState)(!1),O=Bn(f),M=Qn(o||"xs","up");(0,X.useEffect)((()=>{D(o?l&&!M:l)}),[l,o,M]);const P=(0,X.useMemo)((()=>({onHide:O})),[O]);const L=(0,X.useCallback)((e=>(0,Nt.jsx)("div",{...e,className:Et()(`${n}-backdrop`,N)})),[N,n]),F=e=>(0,Nt.jsx)("div",{...e,..._,className:Et()(r,o?`${n}-${o}`:n,`${n}-${i}`),"aria-labelledby":a,children:s});return(0,Nt.jsxs)(Nt.Fragment,{children:[!R&&(o||I)&&F({}),(0,Nt.jsx)(Pr.Provider,{value:P,children:(0,Nt.jsx)(Nr,{show:R,ref:t,backdrop:c,container:m,keyboard:u,autoFocus:g,enforceFocus:y&&!h,restoreFocus:v,restoreFocusOptions:b,onEscapeKeyDown:d,onShow:p,onHide:O,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==S||S(e,...n)},onEntering:T,onEntered:w,onExit:x,onExiting:k,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==E||E(...n)},manager:C||(h?(A.current||(A.current=new ss({handleContainerOverflow:!1})),A.current):rs()),transition:as,backdropTransition:is,renderBackdrop:L,renderDialog:F})})]})}));os.displayName="Offcanvas";const ls=Object.assign(os,{Body:Rr,Header:Wr,Title:Kr}),cs=X.forwardRef(((e,t)=>{let{onHide:n,...r}=e;const s=(0,X.useContext)($n),a=Bn((()=>{null==s||null==s.onToggle||s.onToggle(),null==n||n()}));return(0,Nt.jsx)(ls,{ref:t,show:!(null==s||!s.expanded),...r,renderStaticNode:!0,onHide:a})}));cs.displayName="NavbarOffcanvas";const us=cs,hs=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="span",...a}=e;return r=Dt(r,"navbar-text"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));hs.displayName="NavbarText";const ds=hs,ps=X.forwardRef(((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:s="light",bg:a,fixed:i,sticky:o,className:l,as:c="nav",expanded:u,onToggle:h,onSelect:d,collapseOnSelect:p=!1,...f}=Wt(e,{expanded:"onToggle"}),m=Dt(n,"navbar"),g=(0,X.useCallback)((function(){null==d||d(...arguments),p&&u&&(null==h||h(!1))}),[d,p,u,h]);void 0===f.role&&"nav"!==c&&(f.role="navigation");let y=`${m}-expand`;"string"===typeof r&&(y=`${y}-${r}`);const v=(0,X.useMemo)((()=>({onToggle:()=>null==h?void 0:h(!u),bsPrefix:m,expanded:!!u,expand:r})),[m,u,r,h]);return(0,Nt.jsx)($n.Provider,{value:v,children:(0,Nt.jsx)(zt.Provider,{value:g,children:(0,Nt.jsx)(c,{ref:t,...f,className:Et()(l,m,r&&y,s&&`${m}-${s}`,a&&`bg-${a}`,o&&`sticky-${o}`,i&&`fixed-${i}`)})})})}));ps.displayName="Navbar";const fs=Object.assign(ps,{Brand:Yt,Collapse:jn,Offcanvas:us,Text:ds,Toggle:Wn});function ms(){const[,e]=(0,X.useReducer)((e=>e+1),0);return e}const gs=X.createContext(null);gs.displayName="NavContext";const ys=gs,vs=X.createContext(null),bs=["as","disabled"];function ws(e){let{tagName:t,disabled:n,href:r,target:s,rel:a,role:i,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=s||null!=a?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?s:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const xs=X.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,bs);const[a,{tagName:i}]=ws(Object.assign({tagName:n,disabled:r},s));return(0,Nt.jsx)(i,Object.assign({},s,a,{ref:t}))}));xs.displayName="Button";const ks=xs,Ss=["as","active","eventKey"];function Ts(e){let{key:t,onClick:n,active:r,id:s,role:a,disabled:i}=e;const o=(0,X.useContext)(zt),l=(0,X.useContext)(ys),c=(0,X.useContext)(vs);let u=r;const h={role:a};if(l){a||"tablist"!==l.role||(h.role="tab");const e=l.getControllerId(null!=t?t:null),n=l.getControlledId(null!=t?t:null);h[ar("event-key")]=t,h.id=e||s,u=null==r&&null!=t?l.activeKey===t:r,!u&&(null!=c&&c.unmountOnExit||null!=c&&c.mountOnEnter)||(h["aria-controls"]=n)}return"tab"===h.role&&(h["aria-selected"]=u,u||(h.tabIndex=-1),i&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=sr((e=>{i||(null==n||n(e),null!=t&&o&&!e.isPropagationStopped()&&o(t,e))})),[h,{isActive:u}]}const Es=X.forwardRef(((e,t)=>{let{as:n=ks,active:r,eventKey:s}=e,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Ss);const[i,o]=Ts(Object.assign({key:$t(s,a.href),active:r},a));return i[ar("active")]=o.isActive,(0,Nt.jsx)(n,Object.assign({},a,i,{ref:t}))}));Es.displayName="NavItem";const Ns=Es,Cs=["as","onSelect","activeKey","role","onKeyDown"];const Is=()=>{},_s=ar("event-key"),As=X.forwardRef(((e,t)=>{let{as:n="div",onSelect:r,activeKey:s,role:a,onKeyDown:i}=e,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Cs);const l=ms(),c=(0,X.useRef)(!1),u=(0,X.useContext)(zt),h=(0,X.useContext)(vs);let d,p;h&&(a=a||"tablist",s=h.activeKey,d=h.getControlledId,p=h.getControllerId);const f=(0,X.useRef)(null),m=e=>{const t=f.current;if(!t)return null;const n=Xr(t,`[${_s}]:not([aria-disabled=true])`),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const s=n.indexOf(r);if(-1===s)return null;let a=s+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},g=(e,t)=>{null!=e&&(null==r||r(e,t),null==u||u(e,t))};(0,X.useEffect)((()=>{if(f.current&&c.current){const e=f.current.querySelector(`[${_s}][aria-selected=true]`);null==e||e.focus()}c.current=!1}));const y=dr(t,f);return(0,Nt.jsx)(zt.Provider,{value:g,children:(0,Nt.jsx)(ys.Provider,{value:{role:a,activeKey:$t(s),getControlledId:d||Is,getControllerId:p||Is},children:(0,Nt.jsx)(n,Object.assign({},o,{onKeyDown:e=>{if(null==i||i(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}var n;t&&(e.preventDefault(),g(t.dataset[(n="EventKey",`rrUi${n}`)]||null,e),c.current=!0,l())},ref:y,role:a}))})})}));As.displayName="Nav";const Rs=Object.assign(As,{Item:Ns}),Ds=X.createContext(null);Ds.displayName="CardHeaderContext";const Os=Ds,Ms=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"nav-item"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));Ms.displayName="NavItem";const Ps=Ms;new WeakMap;const Ls=["onKeyDown"];const Fs=X.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Ls);const[s]=ws(Object.assign({tagName:"a"},r)),a=sr((e=>{s.onKeyDown(e),null==n||n(e)}));return(i=r.href)&&"#"!==i.trim()&&"button"!==r.role?(0,Nt.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,Nt.jsx)("a",Object.assign({ref:t},r,s,{onKeyDown:a}));var i}));Fs.displayName="Anchor";const $s=Fs,zs=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:s=$s,active:a,eventKey:i,disabled:o=!1,...l}=e;n=Dt(n,"nav-link");const[c,u]=Ts({key:$t(i,l.href),active:a,disabled:o,...l});return(0,Nt.jsx)(s,{...l,...c,ref:t,disabled:o,className:Et()(r,n,o&&"disabled",u.isActive&&"active")})}));zs.displayName="NavLink";const js=zs,Us=X.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:r,variant:s,fill:a=!1,justify:i=!1,navbar:o,navbarScroll:l,className:c,activeKey:u,...h}=Wt(e,{activeKey:"onSelect"}),d=Dt(r,"nav");let p,f,m=!1;const g=(0,X.useContext)($n),y=(0,X.useContext)(Os);return g?(p=g.bsPrefix,m=null==o||o):y&&({cardHeaderBsPrefix:f}=y),(0,Nt.jsx)(Rs,{as:n,ref:t,activeKey:u,className:Et()(c,{[d]:!m,[`${p}-nav`]:m,[`${p}-nav-scroll`]:m&&l,[`${f}-${s}`]:!!f,[`${d}-${s}`]:!!s,[`${d}-fill`]:a,[`${d}-justified`]:i}),...h})}));Us.displayName="Nav";const Bs=Object.assign(Us,{Item:Ps,Link:js}),Vs=X.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:s="primary",size:a,active:i=!1,disabled:o=!1,className:l,...c}=e;const u=Dt(r,"btn"),[h,{tagName:d}]=ws({tagName:n,disabled:o,...c}),p=d;return(0,Nt.jsx)(p,{...h,...c,ref:t,disabled:o,className:Et()(l,u,i&&"active",s&&`${u}-${s}`,a&&`${u}-${a}`,c.href&&o&&"disabled")})}));Vs.displayName="Button";const Ws=Vs;function Hs(e,t,n){const r=(0,X.useRef)(void 0!==e),[s,a]=(0,X.useState)(t),i=void 0!==e,o=r.current;return r.current=i,!i&&o&&s!==t&&a(t),[i?e:s,(0,X.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[s,...i]=t;let o=null==n?void 0:n(s,...i);return a(s),o}),[n])]}const Gs=X.createContext(null);var qs=Object.prototype.hasOwnProperty;function Ks(e,t,n){for(n of e.keys())if(Ys(n,t))return n}function Ys(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ys(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((s=r)&&"object"===typeof s&&!(s=Ks(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((s=r[0])&&"object"===typeof s&&!(s=Ks(t,s)))return!1;if(!Ys(r[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(qs.call(e,n)&&++r&&!qs.call(t,n))return!1;if(!(n in t)||!Ys(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const Xs=function(e){const t=er();return[e[0],(0,X.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};var Qs=n(7013),Js=n(7103),Zs=n(7471),ea=n(246),ta=n(1890),na=n(2993),ra=n(4770),sa=n(3380);const aa=(0,n(6299).UD)({defaultModifiers:[ta.A,ra.A,Js.A,Zs.A,na.A,ea.A,sa.A,Qs.A]}),ia=["enabled","placement","strategy","modifiers"];const oa={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},la={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:s}=t.elements,a=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===a&&"setAttribute"in s){const e=s.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;s.setAttribute("aria-describedby",e?`${e},${r.id}`:r.id)}}},ca=[];const ua=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:r=!0,placement:s="bottom",strategy:a="absolute",modifiers:i=ca}=n,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(n,ia);const l=(0,X.useRef)(i),c=(0,X.useRef)(),u=(0,X.useCallback)((()=>{var e;null==(e=c.current)||e.update()}),[]),h=(0,X.useCallback)((()=>{var e;null==(e=c.current)||e.forceUpdate()}),[]),[d,p]=Xs((0,X.useState)({placement:s,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),f=(0,X.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach((e=>{n[e]=t.styles[e],r[e]=t.attributes[e]})),p({state:t,styles:n,attributes:r,update:u,forceUpdate:h,placement:t.placement})}})),[u,h,p]),m=(0,X.useMemo)((()=>(Ys(l.current,i)||(l.current=i),l.current)),[i]);return(0,X.useEffect)((()=>{c.current&&r&&c.current.setOptions({placement:s,strategy:a,modifiers:[...m,f,oa]})}),[a,s,f,r,m]),(0,X.useEffect)((()=>{if(r&&null!=e&&null!=t)return c.current=aa(e,t,Object.assign({},o,{placement:s,strategy:a,modifiers:[...m,la,f]})),()=>{null!=c.current&&(c.current.destroy(),c.current=void 0,p((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[r,e,t]),d};var ha=n(6440),da=n.n(ha);const pa=()=>{};const fa=e=>e&&("current"in e?e.current:e),ma={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const ga=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pa,{disabled:n,clickTrigger:r="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,X.useRef)(!1),a=(0,X.useRef)(!1),i=(0,X.useCallback)((t=>{const n=fa(e);var r;da()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||!!((r=t).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(t)||!!Zn(n,t.target)||a.current,a.current=!1}),[e]),o=sr((t=>{const n=fa(e);n&&Zn(n,t.target)?a.current=!0:a.current=!1})),l=sr((e=>{s.current||t(e)}));(0,X.useEffect)((()=>{var t,s;if(n||null==e)return;const a=Xt(fa(e)),c=a.defaultView||window;let u=null!=(t=c.event)?t:null==(s=c.parent)?void 0:s.event,h=null;ma[r]&&(h=kn(a,ma[r],o,!0));const d=kn(a,r,i,!0),p=kn(a,r,(e=>{e!==u?l(e):u=void 0}));let f=[];return"ontouchstart"in a.documentElement&&(f=[].slice.call(a.body.children).map((e=>kn(e,"mousemove",pa)))),()=>{null==h||h(),d(),p(),f.forEach((e=>e()))}}),[e,n,r,i,o,l])};function ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function va(e){let{enabled:t,enableEvents:n,placement:r,flip:s,offset:a,fixed:i,containerPadding:o,arrowElement:l,popperConfig:c={}}=e;var u,h,d,p,f;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(c.modifiers);return Object.assign({},c,{placement:r,enabled:t,strategy:i?"fixed":c.strategy,modifiers:ya(Object.assign({},m,{eventListeners:{enabled:n,options:null==(u=m.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:o?Object.assign({padding:o},null==(h=m.preventOverflow)?void 0:h.options):null==(d=m.preventOverflow)?void 0:d.options}),offset:{options:Object.assign({offset:a},null==(p=m.offset)?void 0:p.options)},arrow:Object.assign({},m.arrow,{enabled:!!l,options:Object.assign({},null==(f=m.arrow)?void 0:f.options,{element:l})}),flip:Object.assign({enabled:!!s},m.flip)}))})}const ba=["children","usePopper"];const wa=()=>{};function xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,X.useContext)(Gs),[n,r]=(0,X.useState)(null),s=(0,X.useRef)(!1),{flip:a,offset:i,rootCloseEvent:o,fixed:l=!1,placement:c,popperConfig:u={},enableEventListeners:h=!0,usePopper:d=!!t}=e,p=null==(null==t?void 0:t.show)?!!e.show:t.show;p&&!s.current&&(s.current=!0);const{placement:f,setMenu:m,menuElement:g,toggleElement:y}=t||{},v=ua(y,g,va({placement:c||f||"bottom-start",enabled:d,enableEvents:null==h?p:h,offset:i,flip:a,fixed:l,arrowElement:n,popperConfig:u})),b=Object.assign({ref:m||wa,"aria-labelledby":null==y?void 0:y.id},v.attributes.popper,{style:v.styles.popper}),w={show:p,placement:f,hasShown:s.current,toggle:null==t?void 0:t.toggle,popper:d?v:null,arrowProps:d?Object.assign({ref:r},v.attributes.arrow,{style:v.styles.arrow}):{}};return ga(g,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:o,disabled:!p}),[b,w]}function ka(e){let{children:t,usePopper:n=!0}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,ba);const[s,a]=xa(Object.assign({},r,{usePopper:n}));return(0,Nt.jsx)(Nt.Fragment,{children:t(s,a)})}ka.displayName="DropdownMenu";const Sa=ka,Ta={prefix:String(Math.round(1e10*Math.random())),current:0},Ea=X.createContext(Ta),Na=X.createContext(!1);Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);let Ca=new WeakMap;function Ia(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,X.useContext)(Ea),n=(0,X.useRef)(null);if(null===n.current&&!e){var r,s;let e=null===(s=X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(r=s.ReactCurrentOwner)||void 0===r?void 0:r.current;if(e){let n=Ca.get(e);null==n?Ca.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,Ca.delete(e))}n.current=++t.current}return n.current}const _a="function"===typeof X.useId?function(e){let t=X.useId(),[n]=(0,X.useState)("function"===typeof X.useSyncExternalStore?X.useSyncExternalStore(Da,Aa,Ra):(0,X.useContext)(Na));return e||`${n?"react-aria":`react-aria${Ta.prefix}`}-${t}`}:function(e){let t=(0,X.useContext)(Ea),n=Ia(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`};function Aa(){return!1}function Ra(){return!0}function Da(e){return()=>{}}const Oa=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},Ma=()=>{};function Pa(){const e=_a(),{show:t=!1,toggle:n=Ma,setToggle:r,menuElement:s}=(0,X.useContext)(Gs)||{},a=(0,X.useCallback)((e=>{n(!t,e)}),[t,n]),i={id:e,ref:r||Ma,onClick:a,"aria-expanded":!!t};return s&&Oa(s)&&(i["aria-haspopup"]=!0),[i,{show:t,toggle:n}]}function La(e){let{children:t}=e;const[n,r]=Pa();return(0,Nt.jsx)(Nt.Fragment,{children:t(n,r)})}La.displayName="DropdownToggle";const Fa=La,$a=["eventKey","disabled","onClick","active","as"];function za(e){let{key:t,href:n,active:r,disabled:s,onClick:a}=e;const i=(0,X.useContext)(zt),o=(0,X.useContext)(ys),{activeKey:l}=o||{},c=$t(t,n),u=null==r&&null!=t?$t(l)===c:r;return[{onClick:sr((e=>{s||(null==a||a(e),i&&!e.isPropagationStopped()&&i(c,e))})),"aria-disabled":s||void 0,"aria-selected":u,[ar("dropdown-item")]:""},{isActive:u}]}const ja=X.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:s,active:a,as:i=ks}=e,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,$a);const[l]=za({key:n,href:o.href,disabled:r,onClick:s,active:a});return(0,Nt.jsx)(i,Object.assign({},o,{ref:t},l))}));ja.displayName="DropdownItem";const Ua=ja;function Ba(){const e=ms(),t=(0,X.useRef)(null),n=(0,X.useCallback)((n=>{t.current=n,e()}),[e]);return[t,n]}function Va(e){let{defaultShow:t,show:n,onSelect:r,onToggle:s,itemSelector:a=`* [${ar("dropdown-item")}]`,focusFirstItemOnShow:i,placement:o="bottom-start",children:l}=e;const c=cr(),[u,h]=Hs(n,t,s),[d,p]=Ba(),f=d.current,[m,g]=Ba(),y=m.current,v=nr(u),b=(0,X.useRef)(null),w=(0,X.useRef)(!1),x=(0,X.useContext)(zt),k=(0,X.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;h(e,{originalEvent:t,source:n})}),[h]),S=sr(((e,t)=>{null==r||r(e,t),k(!1,t,"select"),t.isPropagationStopped()||null==x||x(e,t)})),T=(0,X.useMemo)((()=>({toggle:k,placement:o,show:u,menuElement:f,toggleElement:y,setMenu:p,setToggle:g})),[k,o,u,f,y,p,g]);f&&v&&!u&&(w.current=f.contains(f.ownerDocument.activeElement));const E=sr((()=>{y&&y.focus&&y.focus()})),N=sr((()=>{const e=b.current;let t=i;if(null==t&&(t=!(!d.current||!Oa(d.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=Xr(d.current,a)[0];n&&n.focus&&n.focus()}));(0,X.useEffect)((()=>{u?N():w.current&&(w.current=!1,E())}),[u,w,E,N]),(0,X.useEffect)((()=>{b.current=null}));const C=(e,t)=>{if(!d.current)return null;const n=Xr(d.current,a);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=sr(n);(0,X.useEffect)((()=>{const n="function"===typeof e?e():e;return n.addEventListener(t,s,r),()=>n.removeEventListener(t,s,r)}),[e])}((0,X.useCallback)((()=>c.document),[c]),"keydown",(e=>{var t,n;const{key:r}=e,s=e.target,a=null==(t=d.current)?void 0:t.contains(s),i=null==(n=m.current)?void 0:n.contains(s);if(/input|textarea/i.test(s.tagName)&&(" "===r||"Escape"!==r&&a||"Escape"===r&&"search"===s.type))return;if(!a&&!i)return;if("Tab"===r&&(!d.current||!u))return;b.current=e.type;const o={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=C(s,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),u){const e=C(s,1);e&&e.focus&&e.focus()}else h(!0,o);return;case"Tab":wn(s.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=d.current)&&t.contains(e.target)||h(!1,o)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),h(!1,o)}})),(0,Nt.jsx)(zt.Provider,{value:S,children:(0,Nt.jsx)(Gs.Provider,{value:T,children:l})})}Va.displayName="Dropdown",Va.Menu=Sa,Va.Toggle=Fa,Va.Item=Ua;const Wa=Va,Ha=X.createContext({});Ha.displayName="DropdownContext";const Ga=Ha,qa=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="hr",role:a="separator",...i}=e;return r=Dt(r,"dropdown-divider"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),role:a,...i})}));qa.displayName="DropdownDivider";const Ka=qa,Ya=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",role:a="heading",...i}=e;return r=Dt(r,"dropdown-header"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),role:a,...i})}));Ya.displayName="DropdownHeader";const Xa=Ya,Qa=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,eventKey:s,disabled:a=!1,onClick:i,active:o,as:l=$s,...c}=e;const u=Dt(n,"dropdown-item"),[h,d]=za({key:s,href:c.href,disabled:a,onClick:i,active:o});return(0,Nt.jsx)(l,{...c,...h,ref:t,className:Et()(r,u,d.isActive&&"active",a&&"disabled")})}));Qa.displayName="DropdownItem";const Ja=Qa,Za=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="span",...a}=e;return r=Dt(r,"dropdown-item-text"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));Za.displayName="DropdownItemText";const ei=Za,ti=X.createContext(null);ti.displayName="InputGroupContext";const ni=ti;function ri(e,t){return e}function si(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const ai=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,align:s,rootCloseEvent:a,flip:i=!0,show:o,renderOnMount:l,as:c="div",popperConfig:u,variant:h,...d}=e,p=!1;const f=(0,X.useContext)($n),m=Dt(n,"dropdown-menu"),{align:g,drop:y,isRTL:v}=(0,X.useContext)(Ga);s=s||g;const b=(0,X.useContext)(ni),w=[];if(s)if("object"===typeof s){const e=Object.keys(s);if(e.length){const t=e[0],n=s[t];p="start"===n,w.push(`${m}-${t}-${n}`)}}else"end"===s&&(p=!0);const x=si(p,y,v),[k,{hasShown:S,popper:T,show:E,toggle:N}]=xa({flip:i,rootCloseEvent:a,show:o,usePopper:!f&&0===w.length,offset:[0,2],popperConfig:u,placement:x});if(k.ref=An(ri(t),k.ref),Gn((()=>{E&&(null==T||T.update())}),[E]),!S&&!l&&!b)return null;"string"!==typeof c&&(k.show=E,k.close=()=>null==N?void 0:N(!1),k.align=s);let C=d.style;return null!=T&&T.placement&&(C={...d.style,...k.style},d["x-placement"]=T.placement),(0,Nt.jsx)(c,{...d,...k,style:C,...(w.length||f)&&{"data-bs-popper":"static"},className:Et()(r,m,E&&"show",p&&`${m}-end`,h&&`${m}-${h}`,...w)})}));ai.displayName="DropdownMenu";const ii=ai,oi=X.forwardRef(((e,t)=>{let{bsPrefix:n,split:r,className:s,childBsPrefix:a,as:i=Ws,...o}=e;const l=Dt(n,"dropdown-toggle"),c=(0,X.useContext)(Gs);void 0!==a&&(o.bsPrefix=a);const[u]=Pa();return u.ref=An(u.ref,ri(t)),(0,Nt.jsx)(i,{className:Et()(s,l,r&&`${l}-split`,(null==c?void 0:c.show)&&"show"),...u,...o})}));oi.displayName="DropdownToggle";const li=oi,ci=X.forwardRef(((e,t)=>{const{bsPrefix:n,drop:r="down",show:s,className:a,align:i="start",onSelect:o,onToggle:l,focusFirstItemOnShow:c,as:u="div",navbar:h,autoClose:d=!0,...p}=Wt(e,{show:"onToggle"}),f=(0,X.useContext)(ni),m=Dt(n,"dropdown"),g=Pt(),y=Bn(((e,t)=>{var n;var r;(null==(n=t.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),r=t.source,(!1===d?"click"===r:"inside"===d?"rootClose"!==r:"outside"!==d||"select"!==r)&&(null==l||l(e,t)))})),v=si("end"===i,r,g),b=(0,X.useMemo)((()=>({align:i,drop:r,isRTL:g})),[i,r,g]),w={down:m,"down-centered":`${m}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,Nt.jsx)(Ga.Provider,{value:b,children:(0,Nt.jsx)(Wa,{placement:v,show:s,onSelect:o,onToggle:y,focusFirstItemOnShow:c,itemSelector:`.${m}-item:not(.disabled):not(:disabled)`,children:f?p.children:(0,Nt.jsx)(u,{...p,ref:t,className:Et()(a,s&&"show",w[r])})})})}));ci.displayName="Dropdown";const ui=Object.assign(ci,{Toggle:li,Menu:ii,Item:Ja,ItemText:ei,Divider:Ka,Header:Xa});var hi={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},di=X.createContext&&X.createContext(hi),pi=function(){return pi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},pi.apply(this,arguments)},fi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function mi(e){return e&&e.map((function(e,t){return X.createElement(e.tag,pi({key:t},e.attr),mi(e.child))}))}function gi(e){return function(t){return X.createElement(yi,pi({attr:pi({},e.attr)},t),mi(e.child))}}function yi(e){var t=function(t){var n,r=e.attr,s=e.size,a=e.title,i=fi(e,["attr","size","title"]),o=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),X.createElement("svg",pi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,i,{className:n,style:pi(pi({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&X.createElement("title",null,a),e.children)};return void 0!==di?X.createElement(di.Consumer,null,(function(e){return t(e)})):t(hi)}function vi(e){return gi({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}}]})(e)}function bi(e){return gi({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"}}]})(e)}function wi(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function xi(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function ki(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(e)}function Si(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function Ti(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function Ei(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(e)}function Ni(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function Ci(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function Ii(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(e)}function _i(e){return gi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"}}]})(e)}function Ai(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Ri(e){return gi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function Di(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"}}]})(e)}function Oi(e){return gi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function Mi(e){return gi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function Pi(e){return gi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function Li(e){return gi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"}}]})(e)}function Fi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function $i(e){return gi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function zi(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function ji(e){return gi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"}}]})(e)}function Ui(e){return gi({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}}]})(e)}function Bi(e){return gi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(e)}function Vi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"}}]})(e)}function Wi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]})(e)}function Hi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}}]})(e)}function Gi(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function qi(e){return gi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"}}]})(e)}function Ki(e){return gi({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"}}]})(e)}function Yi(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function Xi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function Qi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"}}]})(e)}function Ji(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function Zi(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"}}]})(e)}function eo(e){return gi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"}}]})(e)}function to(e){return gi({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function no(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function ro(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function so(e){return gi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function ao(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function io(e){return gi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"}}]})(e)}function oo(e){return gi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"}}]})(e)}const lo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},co={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],a=s+1<e.length,i=a?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let h=(15&i)<<2|l>>6,d=63&l;o||(d=64,a||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==i||null==o)throw new uo;const l=t<<2|a>>4;if(r.push(l),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class uo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ho=function(e){return function(e){const t=lo(e);return co.encodeByteArray(t,!0)}(e).replace(/\./g,"")},po=function(e){try{return co.decodeString(e,!0)}catch(jEe){console.error("base64Decode failed: ",jEe)}return null};function fo(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const mo=()=>{try{return fo().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyABCmprcNBNvQOo3kcx30HgV1cItVAhNMM",REACT_APP_FIREBASE_APP_ID:"1:772202958486:web:f9d254f7d4e6916366bcb7",REACT_APP_FIREBASE_AUTH_DOMAIN:"panekkatt-money-tracker.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"772202958486",REACT_APP_FIREBASE_PROJECT_ID:"panekkatt-money-tracker",REACT_APP_FIREBASE_STORAGE_BUCKET:"panekkatt-money-tracker.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(jEe){return}const t=e&&po(e[1]);return t&&JSON.parse(t)})()}catch(jEe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${jEe}`)}},go=e=>{var t,n;return null===(n=null===(t=mo())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},yo=e=>{const t=go(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},vo=()=>{var e;return null===(e=mo())||void 0===e?void 0:e.config},bo=e=>{var t;return null===(t=mo())||void 0===t?void 0:t[`_${e}`]};class wo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function xo(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ho(JSON.stringify({alg:"none",type:"JWT"})),ho(JSON.stringify(a)),""].join(".")}function ko(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function So(){return!function(){var e;const t=null===(e=mo())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(jEe){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function To(){try{return"object"===typeof indexedDB}catch(jEe){return!1}}class Eo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,No.prototype.create)}}class No{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(Co,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",a=`${this.serviceName}: ${s} (${n}).`;return new Eo(n,a,t)}}const Co=/\{\$([^}]+)}/g;function Io(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],a=t[s];if(_o(n)&&_o(a)){if(!Io(n,a))return!1}else if(n!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _o(e){return null!==e&&"object"===typeof e}function Ao(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ro(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Do(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Oo{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Mo),void 0===r.error&&(r.error=Mo),void 0===r.complete&&(r.complete=Mo);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(jEe){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(jEe){"undefined"!==typeof console&&console.error&&console.error(jEe)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Mo(){}function Po(e){return e&&e._delegate?e._delegate:e}class Lo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fo="[DEFAULT]";class $o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new wo;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(jEe){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jEe){if(r)return null;throw jEe}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch(jEe){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(jEe){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Fo?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo;return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class zo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const jo=[];var Uo;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Uo||(Uo={}));const Bo={debug:Uo.DEBUG,verbose:Uo.VERBOSE,info:Uo.INFO,warn:Uo.WARN,error:Uo.ERROR,silent:Uo.SILENT},Vo=Uo.INFO,Wo={[Uo.DEBUG]:"log",[Uo.VERBOSE]:"log",[Uo.INFO]:"info",[Uo.WARN]:"warn",[Uo.ERROR]:"error"},Ho=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Wo[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i];console[r](`[${n}]  ${e.name}:`,...a)};class Go{constructor(e){this.name=e,this._logLevel=Vo,this._logHandler=Ho,this._userLogHandler=null,jo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Uo))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Bo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.DEBUG,...t),this._logHandler(this,Uo.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.VERBOSE,...t),this._logHandler(this,Uo.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.INFO,...t),this._logHandler(this,Uo.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.WARN,...t),this._logHandler(this,Uo.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.ERROR,...t),this._logHandler(this,Uo.ERROR,...t)}}let qo,Ko;const Yo=new WeakMap,Xo=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,Zo=new WeakMap;let el={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Qo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rl(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function tl(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ko||(Ko=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(sl(this),n),rl(Yo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rl(e.apply(sl(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.call(sl(this),t,...r);return Qo.set(a,t.sort?t.sort():[t]),rl(a)}}function nl(e){return"function"===typeof e?tl(e):(e instanceof IDBTransaction&&function(e){if(Xo.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)}));Xo.set(e,t)}(e),t=e,(qo||(qo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,el):e);var t}function rl(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(rl(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Yo.set(t,e)})).catch((()=>{})),Zo.set(t,e),t}(e);if(Jo.has(e))return Jo.get(e);const t=nl(e);return t!==e&&(Jo.set(e,t),Zo.set(t,e)),t}const sl=e=>Zo.get(e);const al=["get","getKey","getAll","getAllKeys","count"],il=["put","add","delete","clear"],ol=new Map;function ll(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ol.get(t))return ol.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=il.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!al.includes(n))return;const a=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let a=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),s&&t.done]))[0]};return ol.set(t,a),a}!function(e){el=e(el)}((e=>({...e,get:(t,n,r)=>ll(t,n)||e.get(t,n,r),has:(t,n)=>!!ll(t,n)||e.has(t,n)})));class cl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ul="@firebase/app",hl="0.11.5",dl=new Go("@firebase/app"),pl="@firebase/app-compat",fl="@firebase/analytics-compat",ml="@firebase/analytics",gl="@firebase/app-check-compat",yl="@firebase/app-check",vl="@firebase/auth",bl="@firebase/auth-compat",wl="@firebase/database",xl="@firebase/data-connect",kl="@firebase/database-compat",Sl="@firebase/functions",Tl="@firebase/functions-compat",El="@firebase/installations",Nl="@firebase/installations-compat",Cl="@firebase/messaging",Il="@firebase/messaging-compat",_l="@firebase/performance",Al="@firebase/performance-compat",Rl="@firebase/remote-config",Dl="@firebase/remote-config-compat",Ol="@firebase/storage",Ml="@firebase/storage-compat",Pl="@firebase/firestore",Ll="@firebase/vertexai",Fl="@firebase/firestore-compat",$l="firebase",zl="[DEFAULT]",jl={[ul]:"fire-core",[pl]:"fire-core-compat",[ml]:"fire-analytics",[fl]:"fire-analytics-compat",[yl]:"fire-app-check",[gl]:"fire-app-check-compat",[vl]:"fire-auth",[bl]:"fire-auth-compat",[wl]:"fire-rtdb",[xl]:"fire-data-connect",[kl]:"fire-rtdb-compat",[Sl]:"fire-fn",[Tl]:"fire-fn-compat",[El]:"fire-iid",[Nl]:"fire-iid-compat",[Cl]:"fire-fcm",[Il]:"fire-fcm-compat",[_l]:"fire-perf",[Al]:"fire-perf-compat",[Rl]:"fire-rc",[Dl]:"fire-rc-compat",[Ol]:"fire-gcs",[Ml]:"fire-gcs-compat",[Pl]:"fire-fst",[Fl]:"fire-fst-compat",[Ll]:"fire-vertex","fire-js":"fire-js",[$l]:"fire-js-all"},Ul=new Map,Bl=new Map,Vl=new Map;function Wl(e,t){try{e.container.addComponent(t)}catch(jEe){dl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,jEe)}}function Hl(e){const t=e.name;if(Vl.has(t))return dl.debug(`There were multiple attempts to register component ${t}.`),!1;Vl.set(t,e);for(const n of Ul.values())Wl(n,e);for(const n of Bl.values())Wl(n,e);return!0}function Gl(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ql(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Kl=new No("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Yl{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Lo("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kl.create("app-deleted",{appName:this._name})}}const Xl="11.6.1";function Ql(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:zl,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Kl.create("bad-app-name",{appName:String(s)});if(n||(n=vo()),!n)throw Kl.create("no-options");const a=Ul.get(s);if(a){if(Io(n,a.options)&&Io(r,a.config))return a;throw Kl.create("duplicate-app",{appName:s})}const i=new zo(s);for(const l of Vl.values())i.addComponent(l);const o=new Yl(n,r,i);return Ul.set(s,o),o}function Jl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zl;const t=Ul.get(e);if(!t&&e===zl&&vo())return Ql();if(!t)throw Kl.create("no-app",{appName:e});return t}function Zl(e,t,n){var r;let s=null!==(r=jl[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void dl.warn(e.join(" "))}Hl(new Lo(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const ec="firebase-heartbeat-store";let tc=null;function nc(){return tc||(tc=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=rl(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(rl(i.result),e.oldVersion,e.newVersion,rl(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ec)}catch(jEe){console.warn(jEe)}}}).catch((e=>{throw Kl.create("idb-open",{originalErrorMessage:e.message})}))),tc}async function rc(e,t){try{const n=(await nc()).transaction(ec,"readwrite"),r=n.objectStore(ec);await r.put(t,sc(e)),await n.done}catch(jEe){if(jEe instanceof Eo)dl.warn(jEe.message);else{const t=Kl.create("idb-set",{originalErrorMessage:null===jEe||void 0===jEe?void 0:jEe.message});dl.warn(t.message)}}}function sc(e){return`${e.name}!${e.options.appId}`}class ac{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oc(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ic();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(jEe){dl.warn(jEe)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ic(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),lc(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=ho(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(jEe){return dl.warn(jEe),""}}}function ic(){return(new Date).toISOString().substring(0,10)}class oc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!To()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await nc()).transaction(ec),n=await t.objectStore(ec).get(sc(e));return await t.done,n}catch(jEe){if(jEe instanceof Eo)dl.warn(jEe.message);else{const t=Kl.create("idb-get",{originalErrorMessage:null===jEe||void 0===jEe?void 0:jEe.message});dl.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rc(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rc(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function lc(e){return ho(JSON.stringify({version:2,heartbeats:e})).length}var cc;cc="",Hl(new Lo("platform-logger",(e=>new cl(e)),"PRIVATE")),Hl(new Lo("heartbeat",(e=>new ac(e)),"PRIVATE")),Zl(ul,hl,cc),Zl(ul,hl,"esm2017"),Zl("fire-js","");Zl("firebase","11.6.1","app");var uc,hc,dc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pc={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var a=e.g[3],i=t+(a^n&(s^a))+r[0]+3614090360&4294967295;i=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=n+(i<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^a&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^a)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((a=(t=n+((i=t+(s^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=a+((i=s+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var a=0|e[s];r&&a==t||(n[s]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,a=this.h,i=0;i<t;){if(0==a)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(s[a++]=e.charCodeAt(i++),a==this.blockSize){n(this,s),a=0;break}}else for(;i<t;)if(s[a++]=e[i++],a==this.blockSize){n(this,s),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function a(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(i(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),a=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(s=s.add(n),a=c),r=v(r,1),n=v(n,1)}return t=p(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=i(n)).j(t);h(c)||0<c.l(e);)c=(a=i(n-=r)).j(t);u(a)&&(a=l),s=s.add(a),e=p(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,a=[],i=0;i<s;i++)a[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,a=((0<(n=p(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,a=0;a<=t;a++){var i=s+(65535&this.i(a))+(65535&e.i(a)),o=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);s=o>>>16,i&=65535,o&=65535,n[a]=o<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<e.g.length;a++){var l=this.i(s)>>>16,p=65535&this.i(s),m=e.i(a)>>>16,g=65535&e.i(a);n[2*s+2*a]+=p*g,f(n,2*s+2*a),n[2*s+2*a+1]+=l*g,f(n,2*s+2*a+1),n[2*s+2*a+1]+=p*m,f(n,2*s+2*a+1),n[2*s+2*a+2]+=l*m,f(n,2*s+2*a+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,hc=pc.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),s=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=i(Math.pow(n,l)),s=s.j(l).add(i(c))):s=(s=s.j(r)).add(i(c))}return s},uc=pc.Integer=r}).apply("undefined"!==typeof dc?dc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var fc,mc,gc,yc,vc,bc,wc,xc,kc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Sc={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof kc&&kc];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var i=e[a];if(!(i in s))break e;s=s[i]}(r=r(a=s[e=e[e.length-1]]))!=a&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));var r=r||{},s=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){s.setTimeout((()=>{throw e}),0)}function T(){var e=_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new N),(e=>e.reset()));class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,_=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(R)}};var R=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(n){S(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function D(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function P(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(a){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,O);var L={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),$=0;function z(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++$,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],a=Array.prototype.indexOf.call(s,t,void 0);(r=0<=a)&&Array.prototype.splice.call(s,a,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var s=0;s<e.length;++s){var a=e[s];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return s}return-1}U.prototype.add=function(e,t,n,r,s){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var i=V(e,t,r,s);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new z(t,this.src,a,!!r,s)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),H={};function G(e,t,n,r,s){if(r&&r.once)return K(e,t,n,r,s);if(Array.isArray(t)){for(var a=0;a<t.length;a++)G(e,t[a],n,r,s);return null}return n=te(n),e&&e[F]?e.K(t,n,i(r)?!!r.capture:!!r,s):q(e,t,n,!1,r,s)}function q(e,t,n,r,s,a){if(!t)throw Error("Invalid event type");var o=i(s)?!!s.capture:!!s,l=Z(e);if(l||(e[W]=l=new U(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,s){if(Array.isArray(t)){for(var a=0;a<t.length;a++)K(e,t[a],n,r,s);return null}return n=te(n),e&&e[F]?e.L(t,n,i(r)?!!r.capture:!!r,s):q(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)Y(e,t[a],n,r,s);else r=i(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(a=e.g[t],n,r,s))&&(j(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):j(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new U(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var s=t;x(t=new O(r,e),s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var i=t.g=n[a];s=se(i,r,!0,t)&&s}if(s=se(i=t.g=e,r,!0,t)&&s,s=se(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)s=se(i=t.g=n[a],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,a=0;a<t.length;++a){var i=t[a];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&B(e.i,i),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ie(e){e.g=ae((()=>{e.g=null,e.i&&(e.i=!1,ie(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)j(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=s.JSON.stringify,de=s.JSON.parse,pe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}h(ve,O),h(be,O);var we={},xe=null;function ke(){return xe=xe||new ne}function Se(e){O.call(this,we.La,e)}function Te(e){const t=ke();re(t,new Se(t))}function Ee(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Ne(e){const t=ke();re(t,new Ee(t,e))}function Ce(e,t){O.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function _e(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var i=1;i<s.length;i++)s[i]=""}}}return he(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Se,O),we.STAT_EVENT="statevent",h(Ee,O),we.Ma="timingevent",h(Ce,O),_e.prototype.xa=function(){this.g=!1},_e.prototype.info=function(){};var Re,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Me,fe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Re=new Me;var Fe={},$e={};function ze(e,t,n){e.L=1,e.v=ht(it(t)),e.m=n,e.P=!0,je(e,null)}function je(e,t){e.F=Date.now(),Ve(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var a=0;a<s.length;a++){var i=G(n,s[a],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,s,a){e.info((function(){if(e.g)if(a)for(var i="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");i=2<=h.length&&"type"==h[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$e:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?$e:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||ln(e.j,e)}function qe(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}rn(n),Ne(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!f(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(et(a,a.h),a.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),i.K){tt(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(He(o),Ve(o)),r.g=i}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Te()}catch(u){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=d||7==t||Te(),He(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=Gt(this.g);e="";var a=r.length,i=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qe(this),Ge(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,a,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+a+" "+i}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),qe(this),Ge(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==$e){4==d&&(this.s=4,Ne(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ne(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ke(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(h),h.M=!0,Ne(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),qe(this),Ge(this)}else Ae(this.i,this.l,o,null),Ke(this,o);4==d&&qe(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=k(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[s]||[];t[s]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),qe(this),Ge(this)}}}catch(d){}},Pe.prototype.cancel=function(){this.J=!0,qe(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Ne(17)),qe(this),this.s=2,Ge(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof at){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function it(e){return new at(e)}function ot(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}at.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var a=e[n].substring(0,r);s=e[n].substring(r+1)}else a=e[n];t(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){kt(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return kt(e),t=Nt(e,t),e.g.has(t)}function Et(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),d(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(a){}}function It(){this.g=new pe}function _t(e,t,n){const r=n||"";try{rt(e,(function(e,n){let s=e;i(e)&&(s=he(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(jEe){throw t.push(r+"type="+encodeURIComponent("_badmap")),jEe}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Mt(e)}function Mt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){kt(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,Tt(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var s=a;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")},h(At,fe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Mt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mt(this)),this.g&&(this.readyState=3,Mt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Mt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var $t=/^https?$/i,zt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Vt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var i=String(e.D).match(st)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),a=!$t.test(i?i.toLowerCase():"")}n=a}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ut(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(jEe){}}}function Wt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Qt(e),3==e.G){var t=e.U++,n=it(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ht(it(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}hn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Qt(e){Xt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),I||(C(),I=!0),_.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{_t(l,e,"req"+n+"_")}catch(a){r&&r(l)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),I||(C(),I=!0),_.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(it(t)),n.m=null,n.P=!0,je(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=ke(),new Ce(r,n)),Jt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new at(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),ht(r),t?function(e,t){const n=new _e;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),hn(e),Qt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof at?it(n):new at(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var a=s.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new at(null);r&&ot(i,r),t&&(i.g=t),a&&lt(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new At({eb:n})):new Ft(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void jt(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),a=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(zt,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(i){jt(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Pe(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),x(a,this.S)):a=this.S),null!==this.m||this.O||(s.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=it(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(Pt(a)))+"&"+t:this.m&&Lt(n,this.m,a)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,ze(s,n,null)):ze(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Qe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,be),h(bn,fn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,xc=Sc.createWebChannelTransport=function(){return new mn},wc=Sc.getStatEventTarget=function(){return ke()},bc=Sc.Event=we,vc=Sc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,yc=Sc.ErrorCode=De,Oe.COMPLETE="complete",gc=Sc.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,mc=Sc.WebChannel=ge,Sc.FetchXmlHttpFactory=At,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,fc=Sc.XhrIo=Ft}).apply("undefined"!==typeof kc?kc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Tc="@firebase/firestore",Ec="4.7.11";class Nc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nc.UNAUTHENTICATED=new Nc(null),Nc.GOOGLE_CREDENTIALS=new Nc("google-credentials-uid"),Nc.FIRST_PARTY=new Nc("first-party-uid"),Nc.MOCK_USER=new Nc("mock-user");let Cc="11.6.1";const Ic=new Go("@firebase/firestore");function _c(){return Ic.logLevel}function Ac(e){if(Ic.logLevel<=Uo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Oc);Ic.debug(`Firestore (${Cc}): ${e}`,...s)}}function Rc(e){if(Ic.logLevel<=Uo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Oc);Ic.error(`Firestore (${Cc}): ${e}`,...s)}}function Dc(e){if(Ic.logLevel<=Uo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Oc);Ic.warn(`Firestore (${Cc}): ${e}`,...s)}}function Oc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Mc(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Pc(e,r,n)}function Pc(e,t,n){let r=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Rc(r),new Error(r)}function Lc(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Pc(t,s,r)}function Fc(e,t){return e}const $c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zc extends Eo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Uc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nc.UNAUTHENTICATED)))}shutdown(){}}class Vc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Wc{constructor(e){this.t=e,this.currentUser=Nc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Lc(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new jc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jc,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{Ac("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(Ac("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jc)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ac("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Lc("string"==typeof t.accessToken,31837,{l:t}),new Uc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lc(null===e||"string"==typeof e,2055,{h:e}),new Nc(e)}}class Hc{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Nc.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Gc{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Hc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kc{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ql(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Lc(void 0===this.o,3512);const n=e=>{null!=e.error&&Ac("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Ac("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ac("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ac("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Lc("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new qc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Yc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Xc(){return new TextEncoder}class Qc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Yc(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Jc(e,t){return e<t?-1:e>t?1:0}function Zc(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Jc(r,s);{const a=Xc(),i=tu(a.encode(eu(e,n)),a.encode(eu(t,n)));return 0!==i?i:Jc(r,s)}}n+=r>65535?2:1}return Jc(e.length,t.length)}function eu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function tu(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Jc(e[n],t[n]);return Jc(e.length,t.length)}function nu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const ru=-62135596800,su=1e6;class au{static now(){return au.fromMillis(Date.now())}static fromDate(e){return au.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*su);return new au(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zc($c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zc($c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ru)throw new zc($c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zc($c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/su}_compareTo(e){return this.seconds===e.seconds?Jc(this.nanoseconds,e.nanoseconds):Jc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ru;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class iu{static fromTimestamp(e){return new iu(e)}static min(){return new iu(new au(0,0))}static max(){return new iu(new au(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ou="__name__";class lu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Mc(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Mc(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=lu.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Jc(e.length,t.length)}static compareSegments(e,t){const n=lu.isNumericId(e),r=lu.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?lu.extractNumericId(e).compare(lu.extractNumericId(t)):Zc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uc.fromString(e.substring(4,e.length-2))}}class cu extends lu{construct(e,t,n){return new cu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new zc($c.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((e=>e.length>0)))}return new cu(e)}static emptyPath(){return new cu([])}}const uu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hu extends lu{construct(e,t,n){return new hu(e,t,n)}static isValidIdentifier(e){return uu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ou}static keyField(){return new hu([ou])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new zc($c.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new zc($c.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zc($c.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(s(),r++)}if(s(),a)throw new zc($c.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hu(t)}static emptyPath(){return new hu([])}}class du{constructor(e){this.path=e}static fromPath(e){return new du(cu.fromString(e))}static fromName(e){return new du(cu.fromString(e).popFirst(5))}static empty(){return new du(cu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new du(new cu(e.slice()))}}const pu=-1;class fu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fu.UNKNOWN_ID=-1;function mu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=iu.fromTimestamp(1e9===r?new au(n+1,0):new au(n,r));return new yu(s,du.empty(),t)}function gu(e){return new yu(e.readTime,e.key,pu)}class yu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new yu(iu.min(),du.empty(),pu)}static max(){return new yu(iu.max(),du.empty(),pu)}}function vu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=du.comparator(e.documentKey,t.documentKey),0!==n?n:Jc(e.largestBatchId,t.largestBatchId))}const bu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xu(e){if(e.code!==$c.FAILED_PRECONDITION||e.message!==bu)throw e;Ac("LocalStore","Unexpectedly lost primary lease")}class ku{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Mc(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ku(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ku?t:ku.resolve(t)}catch(e){return ku.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ku.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ku.reject(t)}static resolve(e){return new ku(((t,n)=>{t(e)}))}static reject(e){return new ku(((t,n)=>{n(e)}))}static waitFor(e){return new ku(((t,n)=>{let r=0,s=0,a=!1;e.forEach((e=>{++r,e.next((()=>{++s,a&&s===r&&t()}),(e=>n(e)))})),a=!0,s===r&&t()}))}static or(e){let t=ku.resolve(!1);for(const n of e)t=t.next((e=>e?ku.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ku(((n,r)=>{const s=e.length,a=new Array(s);let i=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{a[l]=e,++i,i===s&&n(a)}),(e=>r(e)))}}))}static doWhile(e,t){return new ku(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function Su(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tu(e){return"IndexedDbTransactionError"===e.name}class Eu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Eu.le=-1;const Nu=-1;function Cu(e){return null==e}function Iu(e){return 0===e&&1/e==-1/0}function _u(e){return"number"==typeof e&&Number.isInteger(e)&&!Iu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Au="\x01";function Ru(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ou(t)),t=Du(e.get(n),t);return Ou(t)}function Du(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Au:n+="\x01\x11";break;default:n+=t}}return n}function Ou(e){return e+Au+"\x01"}const Mu="remoteDocuments",Pu="owner",Lu="mutationQueues",Fu="mutations";const $u="documentMutations",zu="remoteDocumentsV14",ju="remoteDocumentGlobal",Uu="targets",Bu="targetDocuments",Vu="targetGlobal",Wu="collectionParents",Hu="clientMetadata",Gu="bundles",qu="namedQueries",Ku="indexConfiguration",Yu="indexState",Xu="indexEntries",Qu="documentOverlays",Ju="globals",Zu=[Lu,Fu,$u,Mu,Uu,Pu,Vu,Bu,Hu,ju,Wu,Gu,qu],eh=[Lu,Fu,$u,zu,Uu,Pu,Vu,Bu,Hu,ju,Wu,Gu,qu,Qu],th=eh,nh=[...th,Ku,Yu,Xu];function rh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ah(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ih{constructor(e,t){this.comparator=e,this.root=t||lh.EMPTY}insert(e,t){return new ih(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lh.BLACK,null,null))}remove(e){return new ih(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lh{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:lh.RED,this.left=null!=r?r:lh.EMPTY,this.right=null!=s?s:lh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new lh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return lh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return lh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Mc(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Mc(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Mc(27949);return e+(this.isRed()?0:1)}}lh.EMPTY=null,lh.RED=!0,lh.BLACK=!1,lh.EMPTY=new class{constructor(){this.size=0}get key(){throw Mc(57766)}get value(){throw Mc(16141)}get color(){throw Mc(16727)}get left(){throw Mc(29726)}get right(){throw Mc(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new lh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ch{constructor(e){this.comparator=e,this.data=new ih(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uh(this.data.getIterator())}getIteratorFrom(e){return new uh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ch))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ch(this.comparator);return t.data=e,t}}class uh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hh{constructor(e){this.fields=e,e.sort(hu.comparator)}static empty(){return new hh([])}unionWith(e){let t=new ch(hu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class dh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ph{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new dh("Invalid base64 string: "+e):e}}(e);return new ph(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ph(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ph.EMPTY_BYTE_STRING=new ph("");const fh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mh(e){if(Lc(!!e,39018),"string"==typeof e){let t=0;const n=fh.exec(e);if(Lc(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gh(e.seconds),nanos:gh(e.nanos)}}function gh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yh(e){return"string"==typeof e?ph.fromBase64String(e):ph.fromUint8Array(e)}const vh="server_timestamp",bh="__type__",wh="__previous_value__",xh="__local_write_time__";function kh(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[bh])||void 0===n?void 0:n.stringValue)===vh}function Sh(e){const t=e.mapValue.fields[wh];return kh(t)?Sh(t):t}function Th(e){const t=mh(e.mapValue.fields[xh].timestampValue);return new au(t.seconds,t.nanos)}class Eh{constructor(e,t,n,r,s,a,i,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l}}const Nh="(default)";class Ch{constructor(e,t){this.projectId=e,this.database=t||Nh}static empty(){return new Ch("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof Ch&&e.projectId===this.projectId&&e.database===this.database}}const Ih="__type__",_h="__max__",Ah={mapValue:{fields:{__type__:{stringValue:_h}}}},Rh="__vector__",Dh="value";function Oh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kh(e)?4:Xh(e)?9007199254740991:Kh(e)?10:11:Mc(28295,{value:e})}function Mh(e,t){if(e===t)return!0;const n=Oh(e);if(n!==Oh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Th(e).isEqual(Th(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=mh(e.timestampValue),r=mh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yh(e.bytesValue).isEqual(yh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gh(e.geoPointValue.latitude)===gh(t.geoPointValue.latitude)&&gh(e.geoPointValue.longitude)===gh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gh(e.integerValue)===gh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=gh(e.doubleValue),r=gh(t.doubleValue);return n===r?Iu(n)===Iu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return nu(e.arrayValue.values||[],t.arrayValue.values||[],Mh);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rh(n)!==rh(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Mh(n[s],r[s])))return!1;return!0}(e,t);default:return Mc(52216,{left:e})}}function Ph(e,t){return void 0!==(e.values||[]).find((e=>Mh(e,t)))}function Lh(e,t){if(e===t)return 0;const n=Oh(e),r=Oh(t);if(n!==r)return Jc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=gh(e.integerValue||e.doubleValue),r=gh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fh(e.timestampValue,t.timestampValue);case 4:return Fh(Th(e),Th(t));case 5:return Zc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=yh(e),r=yh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Jc(n[s],r[s]);if(0!==e)return e}return Jc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Jc(gh(e.latitude),gh(t.latitude));return 0!==n?n:Jc(gh(e.longitude),gh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return $h(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,a;const i=e.fields||{},o=t.fields||{},l=null===(n=i[Dh])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Dh])||void 0===r?void 0:r.arrayValue,u=Jc((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:$h(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ah.mapValue&&t===Ah.mapValue)return 0;if(e===Ah.mapValue)return 1;if(t===Ah.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},a=Object.keys(s);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=Zc(r[i],a[i]);if(0!==e)return e;const t=Lh(n[r[i]],s[a[i]]);if(0!==t)return t}return Jc(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Mc(23264,{Pe:n})}}function Fh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jc(e,t);const n=mh(e),r=mh(t),s=Jc(n.seconds,r.seconds);return 0!==s?s:Jc(n.nanos,r.nanos)}function $h(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Lh(n[s],r[s]);if(e)return e}return Jc(n.length,r.length)}function zh(e){return jh(e)}function jh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=mh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return yh(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return du.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${jh(e.fields[s])}`;return n+"}"}(e.mapValue):Mc(61005,{value:e})}function Uh(e){switch(Oh(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Sh(e);return t?16+Uh(t):16;case 5:return 2*e.stringValue.length;case 6:return yh(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Uh(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return sh(e.fields,((e,n)=>{t+=e.length+Uh(n)})),t}(e.mapValue);default:throw Mc(13486,{value:e})}}function Bh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Vh(e){return!!e&&"integerValue"in e}function Wh(e){return!!e&&"arrayValue"in e}function Hh(e){return!!e&&"nullValue"in e}function Gh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qh(e){return!!e&&"mapValue"in e}function Kh(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ih])||void 0===n?void 0:n.stringValue)===Rh}function Yh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Yh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Xh(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===_h}class Qh{constructor(e){this.value=e}static empty(){return new Qh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yh(t)}setAll(e){let t=hu.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Yh(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sh(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Qh(Yh(this.value))}}function Jh(e){const t=[];return sh(e.fields,((e,n)=>{const r=new hu([e]);if(qh(n)){const e=Jh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new hh(t)}class Zh{constructor(e,t,n,r,s,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=i}static newInvalidDocument(e){return new Zh(e,0,iu.min(),iu.min(),iu.min(),Qh.empty(),0)}static newFoundDocument(e,t,n,r){return new Zh(e,1,t,iu.min(),n,r,0)}static newNoDocument(e,t){return new Zh(e,2,t,iu.min(),iu.min(),Qh.empty(),0)}static newUnknownDocument(e,t){return new Zh(e,3,t,iu.min(),iu.min(),Qh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(iu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=iu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ed{constructor(e,t){this.position=e,this.inclusive=t}}function td(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(r=a.field.isKeyField()?du.comparator(du.fromName(i.referenceValue),n.key):Lh(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function nd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mh(e.position[n],t.position[n]))return!1;return!0}class rd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ad{}class id extends ad{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new fd(e,t,n):"array-contains"===t?new vd(e,n):"in"===t?new bd(e,n):"not-in"===t?new wd(e,n):"array-contains-any"===t?new xd(e,n):new id(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new md(e,n):new gd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Lh(t,this.value)):null!==t&&Oh(this.value)===Oh(t)&&this.matchesComparison(Lh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mc(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class od extends ad{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new od(e,t)}matches(e){return ld(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ld(e){return"and"===e.op}function cd(e){return ud(e)&&ld(e)}function ud(e){for(const t of e.filters)if(t instanceof od)return!1;return!0}function hd(e){if(e instanceof id)return e.field.canonicalString()+e.op.toString()+zh(e.value);if(cd(e))return e.filters.map((e=>hd(e))).join(",");{const t=e.filters.map((e=>hd(e))).join(",");return`${e.op}(${t})`}}function dd(e,t){return e instanceof id?function(e,t){return t instanceof id&&e.op===t.op&&e.field.isEqual(t.field)&&Mh(e.value,t.value)}(e,t):e instanceof od?function(e,t){return t instanceof od&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&dd(n,t.filters[r])),!0)}(e,t):void Mc(19439)}function pd(e){return e instanceof id?function(e){return`${e.field.canonicalString()} ${e.op} ${zh(e.value)}`}(e):e instanceof od?function(e){return e.op.toString()+" {"+e.getFilters().map(pd).join(" ,")+"}"}(e):"Filter"}class fd extends id{constructor(e,t,n){super(e,t,n),this.key=du.fromName(n.referenceValue)}matches(e){const t=du.comparator(e.key,this.key);return this.matchesComparison(t)}}class md extends id{constructor(e,t){super(e,"in",t),this.keys=yd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gd extends id{constructor(e,t){super(e,"not-in",t),this.keys=yd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>du.fromName(e.referenceValue)))}class vd extends id{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wh(t)&&Ph(t.arrayValue,this.value)}}class bd extends id{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ph(this.value.arrayValue,t)}}class wd extends id{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ph(this.value.arrayValue,t)}}class xd extends id{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ph(this.value.arrayValue,e)))}}class kd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=i,this.Ie=null}}function Sd(e){return new kd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Td(e){const t=Fc(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>hd(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Cu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>zh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>zh(e))).join(",")),t.Ie=e}return t.Ie}function Ed(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nd(e.startAt,t.startAt)&&nd(e.endAt,t.endAt)}function Nd(e){return du.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Cd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=i,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Id(e,t,n,r,s,a,i,o){return new Cd(e,t,n,r,s,a,i,o)}function _d(e){return new Cd(e)}function Ad(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Rd(e){return null!==e.collectionGroup}function Dd(e){const t=Fc(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ch(hu.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new rd(r,n))})),e.has(hu.keyField().canonicalString())||t.Ee.push(new rd(hu.keyField(),n))}return t.Ee}function Od(e){const t=Fc(e);return t.de||(t.de=Md(t,Dd(e))),t.de}function Md(e,t){if("F"===e.limitType)return Sd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new rd(e.field,t)}));const n=e.endAt?new ed(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ed(e.startAt.position,e.startAt.inclusive):null;return Sd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Pd(e,t){const n=e.filters.concat([t]);return new Cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ld(e,t,n){return new Cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fd(e,t){return Ed(Od(e),Od(t))&&e.limitType===t.limitType}function $d(e){return`${Td(Od(e))}|lt:${e.limitType}`}function zd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>pd(e))).join(", ")}]`),Cu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>zh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>zh(e))).join(",")),`Target(${t})`}(Od(e))}; limitType=${e.limitType})`}function jd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):du.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Dd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=td(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Dd(e),t))&&!(e.endAt&&!function(e,t,n){const r=td(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Dd(e),t))}(e,t)}function Ud(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bd(e){return(t,n)=>{let r=!1;for(const s of Dd(e)){const e=Vd(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Vd(e,t,n){const r=e.field.isKeyField()?du.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Lh(r,s):Mc(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mc(19790,{direction:e.dir})}}class Wd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sh(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return ah(this.inner)}size(){return this.innerSize}}const Hd=new ih(du.comparator);function Gd(){return Hd}const qd=new ih(du.comparator);function Kd(){let e=qd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Yd(e){let t=qd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Xd(){return Jd()}function Qd(){return Jd()}function Jd(){return new Wd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Zd=new ih(du.comparator),ep=new ch(du.comparator);function tp(){let e=ep;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const np=new ch(Jc);function rp(){return np}function sp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(t)?"-0":t}}function ap(e){return{integerValue:""+e}}function ip(e,t){return _u(t)?ap(t):sp(e,t)}class op{constructor(){this._=void 0}}function lp(e,t,n){return e instanceof hp?function(e,t){const n={fields:{[bh]:{stringValue:vh},[xh]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&kh(t)&&(t=Sh(t)),t&&(n.fields[wh]=t),{mapValue:n}}(n,t):e instanceof dp?pp(e,t):e instanceof fp?mp(e,t):function(e,t){const n=up(e,t),r=yp(n)+yp(e.Re);return Vh(n)&&Vh(e.Re)?ap(r):sp(e.serializer,r)}(e,t)}function cp(e,t,n){return e instanceof dp?pp(e,t):e instanceof fp?mp(e,t):n}function up(e,t){return e instanceof gp?function(e){return Vh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class hp extends op{}class dp extends op{constructor(e){super(),this.elements=e}}function pp(e,t){const n=vp(t);for(const r of e.elements)n.some((e=>Mh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class fp extends op{constructor(e){super(),this.elements=e}}function mp(e,t){let n=vp(t);for(const r of e.elements)n=n.filter((e=>!Mh(e,r)));return{arrayValue:{values:n}}}class gp extends op{constructor(e,t){super(),this.serializer=e,this.Re=t}}function yp(e){return gh(e.integerValue||e.doubleValue)}function vp(e){return Wh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class bp{constructor(e,t){this.version=e,this.transformResults=t}}class wp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wp}static exists(e){return new wp(void 0,e)}static updateTime(e){return new wp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class kp{}function Sp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Op(e.key,wp.none()):new Ip(e.key,e.data,wp.none());{const n=e.data,r=Qh.empty();let s=new ch(hu.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new _p(e.key,r,new hh(s.toArray()),wp.none())}}function Tp(e,t,n){e instanceof Ip?function(e,t,n){const r=e.value.clone(),s=Rp(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _p?function(e,t,n){if(!xp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Rp(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Ap(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ep(e,t,n,r){return e instanceof Ip?function(e,t,n,r){if(!xp(e.precondition,t))return n;const s=e.value.clone(),a=Dp(e.fieldTransforms,r,t);return s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof _p?function(e,t,n,r){if(!xp(e.precondition,t))return n;const s=Dp(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ap(e)),a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return xp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Np(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=up(r.transform,e||null);null!=s&&(null===n&&(n=Qh.empty()),n.set(r.field,s))}return n||null}function Cp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&nu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dp&&t instanceof dp||e instanceof fp&&t instanceof fp?nu(e.elements,t.elements,Mh):e instanceof gp&&t instanceof gp?Mh(e.Re,t.Re):e instanceof hp&&t instanceof hp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ip extends kp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _p extends kp{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ap(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Rp(e,t,n){const r=new Map;Lc(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);r.set(a.field,cp(i,o,n[s]))}return r}function Dp(e,t,n){const r=new Map;for(const s of e){const e=s.transform,a=n.data.field(s.field);r.set(s.field,lp(e,a,t))}return r}class Op extends kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mp extends kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Tp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ep(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ep(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Qd();return this.mutations.forEach((r=>{const s=e.get(r.key),a=s.overlayedDocument;let i=this.applyToLocalView(a,s.mutatedFields);i=t.has(r.key)?null:i;const o=Sp(a,i);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(iu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tp())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,((e,t)=>Cp(e,t)))&&nu(this.baseMutations,e.baseMutations,((e,t)=>Cp(e,t)))}}class Lp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Lc(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Zd;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,n[a].version);return new Lp(e,t,n,r)}}class Fp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $p{constructor(e,t){this.count=e,this.unchangedNames=t}}var zp,jp;function Up(e){switch(e){case $c.OK:return Mc(64938);case $c.CANCELLED:case $c.UNKNOWN:case $c.DEADLINE_EXCEEDED:case $c.RESOURCE_EXHAUSTED:case $c.INTERNAL:case $c.UNAVAILABLE:case $c.UNAUTHENTICATED:return!1;case $c.INVALID_ARGUMENT:case $c.NOT_FOUND:case $c.ALREADY_EXISTS:case $c.PERMISSION_DENIED:case $c.FAILED_PRECONDITION:case $c.ABORTED:case $c.OUT_OF_RANGE:case $c.UNIMPLEMENTED:case $c.DATA_LOSS:return!0;default:return Mc(15467,{code:e})}}function Bp(e){if(void 0===e)return Rc("GRPC error has no .code"),$c.UNKNOWN;switch(e){case zp.OK:return $c.OK;case zp.CANCELLED:return $c.CANCELLED;case zp.UNKNOWN:return $c.UNKNOWN;case zp.DEADLINE_EXCEEDED:return $c.DEADLINE_EXCEEDED;case zp.RESOURCE_EXHAUSTED:return $c.RESOURCE_EXHAUSTED;case zp.INTERNAL:return $c.INTERNAL;case zp.UNAVAILABLE:return $c.UNAVAILABLE;case zp.UNAUTHENTICATED:return $c.UNAUTHENTICATED;case zp.INVALID_ARGUMENT:return $c.INVALID_ARGUMENT;case zp.NOT_FOUND:return $c.NOT_FOUND;case zp.ALREADY_EXISTS:return $c.ALREADY_EXISTS;case zp.PERMISSION_DENIED:return $c.PERMISSION_DENIED;case zp.FAILED_PRECONDITION:return $c.FAILED_PRECONDITION;case zp.ABORTED:return $c.ABORTED;case zp.OUT_OF_RANGE:return $c.OUT_OF_RANGE;case zp.UNIMPLEMENTED:return $c.UNIMPLEMENTED;case zp.DATA_LOSS:return $c.DATA_LOSS;default:return Mc(39323,{code:e})}}(jp=zp||(zp={}))[jp.OK=0]="OK",jp[jp.CANCELLED=1]="CANCELLED",jp[jp.UNKNOWN=2]="UNKNOWN",jp[jp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jp[jp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jp[jp.NOT_FOUND=5]="NOT_FOUND",jp[jp.ALREADY_EXISTS=6]="ALREADY_EXISTS",jp[jp.PERMISSION_DENIED=7]="PERMISSION_DENIED",jp[jp.UNAUTHENTICATED=16]="UNAUTHENTICATED",jp[jp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jp[jp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jp[jp.ABORTED=10]="ABORTED",jp[jp.OUT_OF_RANGE=11]="OUT_OF_RANGE",jp[jp.UNIMPLEMENTED=12]="UNIMPLEMENTED",jp[jp.INTERNAL=13]="INTERNAL",jp[jp.UNAVAILABLE=14]="UNAVAILABLE",jp[jp.DATA_LOSS=15]="DATA_LOSS";let Vp=null;const Wp=new uc([4294967295,4294967295],0);function Hp(e){const t=Xc().encode(e),n=new hc;return n.update(t),new Uint8Array(n.digest())}function Gp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new uc([n,r],0),new uc([s,a],0)]}class qp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Kp(`Invalid padding: ${t}`);if(n<0)throw new Kp(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Kp(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Kp(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=uc.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(uc.fromNumber(n)));return 1===r.compare(Wp)&&(r=new uc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Hp(e),[n,r]=Gp(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new qp(s,r,t);return n.forEach((e=>a.insert(e))),a}insert(e){if(0===this.pe)return;const t=Hp(e),[n,r]=Gp(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Kp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yp{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Xp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Yp(iu.min(),r,new ih(Jc),Gd(),tp())}}class Xp{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xp(n,t,tp(),tp(),tp())}}class Qp{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Jp{constructor(e,t){this.targetId=e,this.Ce=t}}class Zp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ph.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ef{constructor(){this.Fe=0,this.Me=rf(),this.xe=ph.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=tp(),t=tp(),n=tp();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mc(38017,{changeType:s})}})),new Xp(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=rf()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Lc(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class tf{constructor(e){this.ze=e,this.je=new Map,this.He=Gd(),this.Je=nf(),this.Ye=nf(),this.Ze=new ih(Jc)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Mc(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(Nd(s))if(0===n){const e=new du(s.path);this.tt(t,e,Zh.newNoDocument(e,iu.min()))}else Lc(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Vp||Vp.ht(function(e,t,n,r,s){var a,i,o,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===s,hashCount:null!==(a=null==d?void 0:d.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(l=null===(o=null===(i=null==d?void 0:d.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.Ce,this.ze.Pt(),n,s))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let a,i;try{a=yh(n).toUint8Array()}catch(e){if(e instanceof dh)return Dc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new qp(a,r,s)}catch(e){return Dc(e instanceof Kp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.pe?null:i}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&Nd(s.target)){const t=new du(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Zh.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=tp();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Yp(e,t,this.Ze,this.He,n);return this.He=Gd(),this.Je=nf(),this.Ye=nf(),this.Ze=new ih(Jc),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new ef,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ch(Jc),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ch(Jc),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||Ac("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new ef),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function nf(){return new ih(du.comparator)}function rf(){return new ih(du.comparator)}const sf={asc:"ASCENDING",desc:"DESCENDING"},af={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},of={and:"AND",or:"OR"};class lf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cf(e,t){return e.useProto3Json||Cu(t)?t:{value:t}}function uf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function df(e,t){return uf(e,t.toTimestamp())}function pf(e){return Lc(!!e,49232),iu.fromTimestamp(function(e){const t=mh(e);return new au(t.seconds,t.nanos)}(e))}function ff(e,t){return mf(e,t).canonicalString()}function mf(e,t){const n=function(e){return new cu(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function gf(e){const t=cu.fromString(e);return Lc(Lf(t),10190,{key:t.toString()}),t}function yf(e,t){return ff(e.databaseId,t.path)}function vf(e,t){const n=gf(t);if(n.get(1)!==e.databaseId.projectId)throw new zc($c.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zc($c.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new du(kf(n))}function bf(e,t){return ff(e.databaseId,t)}function wf(e){const t=gf(e);return 4===t.length?cu.emptyPath():kf(t)}function xf(e){return new cu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kf(e){return Lc(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Sf(e,t,n){return{name:yf(e,t),fields:n.value.mapValue.fields}}function Tf(e,t){let n;if(t instanceof Ip)n={update:Sf(e,t.key,t.value)};else if(t instanceof Op)n={delete:yf(e,t.key)};else if(t instanceof _p)n={update:Sf(e,t.key,t.data),updateMask:Pf(t.fieldMask)};else{if(!(t instanceof Mp))return Mc(16599,{ft:t.type});n={verify:yf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof hp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof dp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gp)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw Mc(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:df(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mc(27497)}(e,t.precondition)),n}function Ef(e,t){return{documents:[bf(e,t.path)]}}function Nf(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bf(e,s);const a=function(e){if(0!==e.length)return Mf(od.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const i=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Df(e.field),direction:_f(e.dir)}}(e)))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=cf(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function Cf(e){let t=wf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Lc(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=If(e);return t instanceof od&&cd(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map((e=>function(e){return new rd(Of(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Cu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ed(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ed(n,t)}(n.endAt)),Id(t,s,i,a,o,"F",l,c)}function If(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Of(e.unaryFilter.field);return id.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Of(e.unaryFilter.field);return id.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Of(e.unaryFilter.field);return id.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Of(e.unaryFilter.field);return id.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Mc(61313);default:return Mc(60726)}}(e):void 0!==e.fieldFilter?function(e){return id.create(Of(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Mc(58110);default:return Mc(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return od.create(e.compositeFilter.filters.map((e=>If(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Mc(1026)}}(e.compositeFilter.op))}(e):Mc(30097,{filter:e})}function _f(e){return sf[e]}function Af(e){return af[e]}function Rf(e){return of[e]}function Df(e){return{fieldPath:e.canonicalString()}}function Of(e){return hu.fromServerFormat(e.fieldPath)}function Mf(e){return e instanceof id?function(e){if("=="===e.op){if(Gh(e.value))return{unaryFilter:{field:Df(e.field),op:"IS_NAN"}};if(Hh(e.value))return{unaryFilter:{field:Df(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gh(e.value))return{unaryFilter:{field:Df(e.field),op:"IS_NOT_NAN"}};if(Hh(e.value))return{unaryFilter:{field:Df(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Df(e.field),op:Af(e.op),value:e.value}}}(e):e instanceof od?function(e){const t=e.getFilters().map((e=>Mf(e)));return 1===t.length?t[0]:{compositeFilter:{op:Rf(e.op),filters:t}}}(e):Mc(54877,{filter:e})}function Pf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Lf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ff{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:iu.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:iu.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ph.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new Ff(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ff(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $f{constructor(e){this.wt=e}}function zf(e){const t=Cf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ld(t,t.limit,"L"):t}class jf{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(gh(e.integerValue));else if("doubleValue"in e){const n=gh(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Iu(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=mh(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(yh(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Xh(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Kh(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Mc(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const a=Dh,i=(null===(r=null===(n=s[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(gh(i)),this.Nt(a,t),this.Ct(s[a],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),du.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}jf.Wt=new jf;class Uf{constructor(){this.yn=new Bf}addToCollectionParentIndex(e,t){return this.yn.add(t),ku.resolve()}getCollectionParents(e,t){return ku.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ku.resolve()}deleteFieldIndex(e,t){return ku.resolve()}deleteAllFieldIndexes(e){return ku.resolve()}createTargetIndexes(e,t){return ku.resolve()}getDocumentsMatchingTarget(e,t){return ku.resolve(null)}getIndexType(e,t){return ku.resolve(0)}getFieldIndexes(e,t){return ku.resolve([])}getNextCollectionGroupToUpdate(e){return ku.resolve(null)}getMinOffset(e,t){return ku.resolve(yu.min())}getMinOffsetFromCollectionGroup(e,t){return ku.resolve(yu.min())}updateCollectionGroup(e,t,n){return ku.resolve()}updateIndexEntries(e,t){return ku.resolve()}}class Bf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ch(cu.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ch(cu.comparator)).toArray()}}new Uint8Array(0);const Vf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wf=41943040;class Hf{static withCacheSize(e){return new Hf(e,Hf.DEFAULT_COLLECTION_PERCENTILE,Hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Hf.DEFAULT_COLLECTION_PERCENTILE=10,Hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hf.DEFAULT=new Hf(Wf,Hf.DEFAULT_COLLECTION_PERCENTILE,Hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hf.DISABLED=new Hf(-1,0,0);class Gf{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Gf(0)}static ir(){return new Gf(-1)}}const qf="LruGarbageCollector",Kf=1048576;function Yf(e,t){let[n,r]=e,[s,a]=t;const i=Jc(n,s);return 0===i?Jc(r,a):i}class Xf{constructor(e){this.cr=e,this.buffer=new ch(Yf),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Yf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){Ac(qf,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Tu(e)?Ac(qf,"Ignoring IndexedDB error during garbage collection: ",e):await xu(e)}await this.Ir(3e5)}))}}class Jf{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ku.resolve(Eu.le);const n=new Xf(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ac("LruGarbageCollector","Garbage collection skipped; disabled"),ku.resolve(Vf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ac("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vf):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,s,a,i,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ac("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,i=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),_c()<=Uo.DEBUG&&Ac("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-c}ms\n\tDetermined least recently used ${r} in `+(i-a)+"ms\n"+`\tRemoved ${s} targets in `+(o-i)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),ku.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}function Zf(e,t){return new Jf(e,t)}class em{constructor(){this.changes=new Wd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ku.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ep(n.mutation,e,hh.empty(),au.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,tp()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tp();const r=Xd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Kd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Xd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,tp())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=Gd();const a=Jd(),i=Jd();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof _p)?s=s.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),Ep(i.mutation,t,i.mutation.getFieldMask(),au.now())):a.set(t.key,hh.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new tm(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=Jd();let r=new ih(((e,t)=>e-t)),s=tp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||hh.empty();i=s.applyToLocalView(a,i),n.set(e,i);const o=(r.get(s.batchId)||tp()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=Qd();l.forEach((e=>{if(!s.has(e)){const r=Sp(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ku.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return du.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ku.resolve(Xd());let i=pu,o=s;return a.next((t=>ku.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?ku.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,tp()))).next((e=>({batchId:i,changes:Yd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new du(t)).next((e=>{let t=Kd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=Kd();return this.indexManager.getCollectionParents(e,s).next((i=>ku.forEach(i,(i=>{const o=function(e,t){return new Cd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Zh.newInvalidDocument(r)))}));let n=Kd();return e.forEach(((e,r)=>{const a=s.get(e);void 0!==a&&Ep(a.mutation,r,hh.empty(),au.now()),jd(t,r)&&(n=n.insert(e,r))})),n}))}}class rm{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ku.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:pf(e.createTime)}}(t)),ku.resolve()}getNamedQuery(e,t){return ku.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:zf(e.bundledQuery),readTime:pf(e.readTime)}}(t)),ku.resolve()}}class sm{constructor(){this.overlays=new ih(du.comparator),this.Or=new Map}getOverlay(e,t){return ku.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xd();return ku.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),ku.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),ku.resolve()}getOverlaysForCollection(e,t,n){const r=Xd(),s=t.length+1,a=new du(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ku.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new ih(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Xd(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Xd(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return ku.resolve(i)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fp(t,n));let s=this.Or.get(t);void 0===s&&(s=tp(),this.Or.set(t,s)),this.Or.set(t,s.add(n.key))}}class am{constructor(){this.sessionToken=ph.EMPTY_BYTE_STRING}getSessionToken(e){return ku.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ku.resolve()}}class im{constructor(){this.Nr=new ch(om.Br),this.Lr=new ch(om.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new om(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new om(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new du(new cu([])),n=new om(t,e),r=new om(t,e+1),s=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),s.push(e.key)})),s}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new du(new cu([])),n=new om(t,e),r=new om(t,e+1);let s=tp();return this.Lr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new om(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class om{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return du.comparator(e.key,t.key)||Jc(e.Gr,t.Gr)}static kr(e,t){return Jc(e.Gr,t.Gr)||du.comparator(e.key,t.key)}}class lm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new ch(om.Br)}checkEmpty(e){return ku.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Pp(s,t,n,r);this.mutationQueue.push(a);for(const i of r)this.zr=this.zr.add(new om(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return ku.resolve(a)}lookupMutationBatch(e,t){return ku.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),s=r<0?0:r;return ku.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ku.resolve(0===this.mutationQueue.length?Nu:this.Jn-1)}getAllMutationBatches(e){return ku.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new om(t,0),r=new om(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);s.push(t)})),ku.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ch(Jc);return t.forEach((e=>{const t=new om(e,0),r=new om(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),ku.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;du.isDocumentKey(s)||(s=s.child(""));const a=new om(new du(s),0);let i=new ch(Jc);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.Gr)),!0)}),a),ku.resolve(this.Jr(i))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Lc(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return ku.forEach(t.mutations,(r=>{const s=new om(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new om(t,0),r=this.zr.firstAfterOrEqual(n);return ku.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ku.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cm{constructor(e){this.Zr=e,this.docs=new ih(du.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ku.resolve(n?n.document.mutableCopy():Zh.newInvalidDocument(t))}getEntries(e,t){let n=Gd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Zh.newInvalidDocument(e))})),ku.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Gd();const a=t.path,i=new du(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||vu(gu(i),n)<=0||(r.has(i.key)||jd(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return ku.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Mc(9500)}Xr(e,t){return ku.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new um(this)}getSize(e){return ku.resolve(this.size)}}class um extends em{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),ku.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class hm{constructor(e){this.persistence=e,this.ei=new Wd((e=>Td(e)),Ed),this.lastRemoteSnapshotVersion=iu.min(),this.highestTargetId=0,this.ti=0,this.ni=new im,this.targetCount=0,this.ri=Gf.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),ku.resolve()}getLastRemoteSnapshotVersion(e){return ku.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ku.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ku.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),ku.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Gf(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ku.resolve()}updateTargetData(e,t){return this.ar(t),ku.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ku.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ei.forEach(((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),ku.waitFor(s).next((()=>r))}getTargetCount(e){return ku.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return ku.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),ku.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),ku.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ku.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return ku.resolve(n)}containsKey(e,t){return ku.resolve(this.ni.containsKey(t))}}class dm{constructor(e,t){this.ii={},this.overlays={},this.si=new Eu(0),this.oi=!1,this.oi=!0,this._i=new am,this.referenceDelegate=e(this),this.ai=new hm(this),this.indexManager=new Uf,this.remoteDocumentCache=function(e){return new cm(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new $f(t),this.ci=new rm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new lm(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){Ac("MemoryPersistence","Starting transaction:",e);const r=new pm(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return ku.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class pm extends wu{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.Ti=new im,this.Ii=null}static Ei(e){return new fm(e)}get di(){if(this.Ii)return this.Ii;throw Mc(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),ku.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),ku.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ku.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ku.forEach(this.di,(n=>{const r=du.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,iu.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return ku.or([()=>ku.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class mm{constructor(e,t){this.persistence=e,this.Ri=new Wd((e=>Ru(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Zf(this,t)}static Ei(e,t){return new mm(e,t)}li(){}hi(e){return ku.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return ku.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?ku.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,iu.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ku.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),ku.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),ku.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ku.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}gr(e,t,n){return ku.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return ku.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class gm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=tp(),r=tp();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new gm(e,t.fromCache,n,r)}}class ym{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vm{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=So()?8:Su(ko())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Rs(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.Vs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new ym;return this.fs(e,t,n).next((r=>{if(s.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>s.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(_c()<=Uo.DEBUG&&Ac("QueryEngine","SDK will not create cache indexes for query:",zd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ku.resolve()):(_c()<=Uo.DEBUG&&Ac("QueryEngine","Query:",zd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(_c()<=Uo.DEBUG&&Ac("QueryEngine","The SDK decides to create cache indexes for query:",zd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Od(t))):ku.resolve())}Rs(e,t){if(Ad(t))return ku.resolve(null);let n=Od(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Ld(t,null,"F"),n=Od(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=tp(...r);return this.As.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const a=this.ps(t,r);return this.ys(t,a,s,n.readTime)?this.Rs(e,Ld(t,null,"F")):this.ws(e,a,t,n)}))))})))))}Vs(e,t,n,r){return Ad(t)||r.isEqual(iu.min())?ku.resolve(null):this.As.getDocuments(e,n).next((s=>{const a=this.ps(t,s);return this.ys(t,a,n,r)?ku.resolve(null):(_c()<=Uo.DEBUG&&Ac("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zd(t)),this.ws(e,a,t,mu(r,pu)).next((e=>e)))}))}ps(e,t){let n=new ch(Bd(e));return t.forEach(((t,r)=>{jd(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}fs(e,t,n){return _c()<=Uo.DEBUG&&Ac("QueryEngine","Using full collection scan to execute query:",zd(t)),this.As.getDocumentsMatchingQuery(e,t,yu.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const bm="LocalStore";class wm{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new ih(Jc),this.Ds=new Wd((e=>Td(e)),Ed),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nm(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}function xm(e,t,n,r){return new wm(e,t,n,r)}async function km(e,t){const n=Fc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],a=[];let i=tp();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({Ms:e,removedBatchIds:s,addedBatchIds:a})))}))}))}function Sm(e){const t=Fc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function Tm(e,t,n){let r=tp(),s=tp();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Gd();return n.forEach(((n,a)=>{const i=e.get(n);a.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),a.isNoDocument()&&a.version.isEqual(iu.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ac(bm,"Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),{xs:r,Os:s}}))}function Em(e,t){const n=Fc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Nu),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Nm(e,t){const n=Fc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((s=>s?(r=s,ku.resolve(r)):n.ai.allocateTargetId(e).next((s=>(r=new Ff(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}async function Cm(e,t,n){const r=Fc(e),s=r.Ss.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!Tu(e))throw e;Ac(bm,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(s.target)}function Im(e,t,n){const r=Fc(e);let s=iu.min(),a=tp();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Fc(e),s=r.Ds.get(n);return void 0!==s?ku.resolve(r.Ss.get(s)):r.ai.getTargetData(t,n)}(r,e,Od(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?s:iu.min(),n?a:tp()))).next((e=>(_m(r,Ud(t),e),{documents:e,Ns:a})))))}function _m(e,t,n){let r=e.vs.get(t)||iu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}class Am{constructor(){this.activeTargetIds=rp()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rm{constructor(){this.So=new Am,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Am,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dm{vo(e){}shutdown(){}}const Om="ConnectivityMonitor";class Mm{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ac(Om,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ac(Om,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pm=null;function Lm(){return null===Pm?Pm=268435456+Math.round(2147483648*Math.random()):Pm++,"0x"+Pm.toString(16)}const Fm="RestConnection",$m={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zm{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===Nh?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,s){const a=Lm(),i=this.$o(e,t.toUriEncodedString());Ac(Fm,`Sending RPC '${e}' ${a}:`,i,n);const o={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(o,r,s),this.Ko(e,i,o,n).then((t=>(Ac(Fm,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Dc(Fm,`RPC '${e}' ${a} failed with error: `,t,"url: ",i,"request:",n),t}))}Wo(e,t,n,r,s,a){return this.Qo(e,t,n,r,s)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=$m[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}class jm{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const Um="WebChannelConnection";class Bm extends zm{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r){const s=Lm();return new Promise(((a,i)=>{const o=new fc;o.setWithCredentials(!0),o.listenOnce(gc.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case yc.NO_ERROR:const t=o.getResponseJson();Ac(Um,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),a(t);break;case yc.TIMEOUT:Ac(Um,`RPC '${e}' ${s} timed out`),i(new zc($c.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const n=o.getStatus();if(Ac(Um,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($c).indexOf(t)>=0?t:$c.UNKNOWN}(t.status);i(new zc(e,t.message))}else i(new zc($c.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new zc($c.UNAVAILABLE,"Connection failed."));break;default:Mc(9055,{s_:e,streamId:s,o_:o.getLastErrorCode(),__:o.getLastError()})}}finally{Ac(Um,`RPC '${e}' ${s} completed.`)}}));const l=JSON.stringify(r);Ac(Um,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=Lm(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xc(),i=wc(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Uo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Ac(Um,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=a.createWebChannel(c,o);let h=!1,d=!1;const p=new jm({Go:t=>{d?Ac(Um,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Ac(Um,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Ac(Um,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,mc.EventType.OPEN,(()=>{d||(Ac(Um,`RPC '${e}' stream ${r} transport opened.`),p.t_())})),f(u,mc.EventType.CLOSE,(()=>{d||(d=!0,Ac(Um,`RPC '${e}' stream ${r} transport closed`),p.r_())})),f(u,mc.EventType.ERROR,(t=>{d||(d=!0,Dc(Um,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.r_(new zc($c.UNAVAILABLE,"The operation could not be completed")))})),f(u,mc.EventType.MESSAGE,(t=>{var n;if(!d){const s=t.data[0];Lc(!!s,16349);const a=s,i=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){Ac(Um,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=zp[e];if(void 0!==t)return Bp(t)}(t),s=i.message;void 0===n&&(n=$c.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),d=!0,p.r_(new zc(n,s)),u.close()}else Ac(Um,`RPC '${e}' stream ${r} received:`,s),p.i_(s)}})),f(i,bc.STAT_EVENT,(t=>{t.stat===vc.PROXY?Ac(Um,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===vc.NOPROXY&&Ac(Um,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.n_()}),0),p}}function Vm(){return"undefined"!=typeof document?document:null}function Wm(e){return new lf(e,!0)}class Hm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&Ac("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const Gm="PersistentStream";class qm{constructor(e,t,n,r,s,a,i,o){this.bi=e,this.R_=n,this.V_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Hm(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===$c.RESOURCE_EXHAUSTED?(Rc(t.toString()),Rc("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===$c.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.m_===t&&this.B_(n,r)}),(t=>{e((()=>{const e=new zc($c.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return Ac(Gm,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(Ac(Gm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Km extends qm{constructor(e,t,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mc(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Lc(void 0===t||"string"==typeof t,58123),ph.fromBase64String(t||"")):(Lc(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ph.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?$c.UNKNOWN:Bp(e.code);return new zc(t,e.message||"")}(i);n=new Zp(r,s,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=vf(e,r.document.name),a=pf(r.document.updateTime),i=r.document.createTime?pf(r.document.createTime):iu.min(),o=new Qh({mapValue:{fields:r.document.fields}}),l=Zh.newFoundDocument(s,a,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Qp(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=vf(e,r.document),a=r.readTime?pf(r.readTime):iu.min(),i=Zh.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Qp([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=vf(e,r.document),a=r.removedTargetIds||[];n=new Qp([],a,s,null)}else{if(!("filter"in t))return Mc(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,a=new $p(r,s),i=e.targetId;n=new Jp(i,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return iu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?iu.min():t.readTime?pf(t.readTime):iu.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=xf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nd(r)?{documents:Ef(e,r)}:{query:Nf(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=hf(e,t.resumeToken);const r=cf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(iu.min())>0){n.readTime=uf(e,t.snapshotVersion.toTimestamp());const r=cf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mc(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.F_(t)}}class Ym extends qm{constructor(e,t,n,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Lc(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lc(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){Lc(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(Lc(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?pf(e.updateTime):pf(t);return n.isEqual(iu.min())&&(n=pf(t)),new bp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=pf(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=xf(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Tf(this.serializer,e)))};this.F_(t)}}class Xm{}class Qm extends Xm{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new zc($c.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,i]=s;return this.connection.Qo(e,mf(t,n),r,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$c.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zc($c.UNKNOWN,e.toString())}))}Wo(e,t,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((a=>{let[i,o]=a;return this.connection.Wo(e,mf(t,n),r,i,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$c.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zc($c.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class Jm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Rc(t),this.ea=!1):Ac("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const Zm="RemoteStore";class eg{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo((e=>{n.enqueueAndForget((async()=>{cg(this)&&(Ac(Zm,"Restarting streams for network reachability change."),await async function(e){const t=Fc(e);t.aa.add(4),await ng(t),t.la.set("Unknown"),t.aa.delete(4),await tg(t)}(this))}))})),this.la=new Jm(n,r)}}async function tg(e){if(cg(e))for(const t of e.ua)await t(!0)}async function ng(e){for(const t of e.ua)await t(!1)}function rg(e,t){const n=Fc(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),lg(n)?og(n):Ig(n).b_()&&ag(n,t))}function sg(e,t){const n=Fc(e),r=Ig(n);n._a.delete(t),r.b_()&&ig(n,t),0===n._a.size&&(r.b_()?r.v_():cg(n)&&n.la.set("Unknown"))}function ag(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(iu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ig(e).U_(t)}function ig(e,t){e.ha.Ke(t),Ig(e).K_(t)}function og(e){e.ha=new tf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Ig(e).start(),e.la.ta()}function lg(e){return cg(e)&&!Ig(e).w_()&&e._a.size>0}function cg(e){return 0===Fc(e).aa.size}function ug(e){e.ha=void 0}async function hg(e){e.la.set("Online")}async function dg(e){e._a.forEach(((t,n)=>{ag(e,t)}))}async function pg(e,t){ug(e),lg(e)?(e.la.ia(t),og(e)):e.la.set("Unknown")}async function fg(e,t,n){if(e.la.set("Online"),t instanceof Zp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){Ac(Zm,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await mg(e,n)}else if(t instanceof Qp?e.ha.Xe(t):t instanceof Jp?e.ha.ot(t):e.ha.nt(t),!n.isEqual(iu.min()))try{const t=await Sm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e._a.get(r);s&&e._a.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(ph.EMPTY_BYTE_STRING,r.snapshotVersion)),ig(e,t);const s=new Ff(r.target,t,n,r.sequenceNumber);ag(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ac(Zm,"Failed to raise snapshot:",t),await mg(e,t)}}async function mg(e,t,n){if(!Tu(t))throw t;e.aa.add(1),await ng(e),e.la.set("Offline"),n||(n=()=>Sm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ac(Zm,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await tg(e)}))}function gg(e,t){return t().catch((n=>mg(e,n,t)))}async function yg(e){const t=Fc(e),n=_g(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:Nu;for(;vg(t);)try{const e=await Em(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,bg(t,e)}catch(e){await mg(t,e)}wg(t)&&xg(t)}function vg(e){return cg(e)&&e.oa.length<10}function bg(e,t){e.oa.push(t);const n=_g(e);n.b_()&&n.W_&&n.G_(t.mutations)}function wg(e){return cg(e)&&!_g(e).w_()&&e.oa.length>0}function xg(e){_g(e).start()}async function kg(e){_g(e).H_()}async function Sg(e){const t=_g(e);for(const n of e.oa)t.G_(n.mutations)}async function Tg(e,t,n){const r=e.oa.shift(),s=Lp.from(r,t,n);await gg(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await yg(e)}async function Eg(e,t){t&&_g(e).W_&&await async function(e,t){if(function(e){return Up(e)&&e!==$c.ABORTED}(t.code)){const n=e.oa.shift();_g(e).D_(),await gg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await yg(e)}}(e,t),wg(e)&&xg(e)}async function Ng(e,t){const n=Fc(e);n.asyncQueue.verifyOperationInProgress(),Ac(Zm,"RemoteStore received new credentials");const r=cg(n);n.aa.add(3),await ng(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await tg(n)}async function Cg(e,t){const n=Fc(e);t?(n.aa.delete(2),await tg(n)):t||(n.aa.add(2),await ng(n),n.la.set("Unknown"))}function Ig(e){return e.Pa||(e.Pa=function(e,t,n){const r=Fc(e);return r.Y_(),new Km(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:hg.bind(null,e),Jo:dg.bind(null,e),Zo:pg.bind(null,e),Q_:fg.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),lg(e)?og(e):e.la.set("Unknown")):(await e.Pa.stop(),ug(e))}))),e.Pa}function _g(e){return e.Ta||(e.Ta=function(e,t,n){const r=Fc(e);return r.Y_(),new Ym(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:kg.bind(null,e),Zo:Eg.bind(null,e),z_:Sg.bind(null,e),j_:Tg.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await yg(e)):(await e.Ta.stop(),e.oa.length>0&&(Ac(Zm,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta}class Ag{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new jc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,i=new Ag(e,t,a,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zc($c.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(e,t){if(Rc("AsyncQueue",`${t}: ${e}`),Tu(e))return new zc($c.UNAVAILABLE,`${t}: ${e}`);throw e}class Dg{static emptySet(e){return new Dg(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||du.comparator(t.key,n.key):(e,t)=>du.comparator(e.key,t.key),this.keyedMap=Kd(),this.sortedSet=new ih(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Dg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Og{constructor(){this.Ia=new ih(du.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Mc(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Mg{constructor(e,t,n,r,s,a,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new Mg(e,t,Dg.emptySet(t),a,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Pg{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class Lg{constructor(){this.queries=Fg(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=Fc(e),r=n.queries;n.queries=Fg(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new zc($c.ABORTED,"Firestore shutting down"))}}function Fg(){return new Wd((e=>$d(e)),Fd)}async function $g(e,t){const n=Fc(e);let r=3;const s=t.query;let a=n.queries.get(s);a?!a.Va()&&t.ma()&&(r=2):(a=new Pg,r=t.ma()?0:1);try{switch(r){case 0:a.Aa=await n.onListen(s,!0);break;case 1:a.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Rg(e,`Initialization of query '${zd(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,a),a.Ra.push(t),t.ga(n.onlineState),a.Aa&&t.pa(a.Aa)&&Bg(n)}async function zg(e,t){const n=Fc(e),r=t.query;let s=3;const a=n.queries.get(r);if(a){const e=a.Ra.indexOf(t);e>=0&&(a.Ra.splice(e,1),0===a.Ra.length?s=t.ma()?0:1:!a.Va()&&t.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jg(e,t){const n=Fc(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(s)&&(r=!0);t.Aa=s}}r&&Bg(n)}function Ug(e,t,n){const r=Fc(e),s=r.queries.get(t);if(s)for(const a of s.Ra)a.onError(n);r.queries.delete(t)}function Bg(e){e.fa.forEach((e=>{e.next()}))}var Vg,Wg;(Wg=Vg||(Vg={})).ya="default",Wg.Cache="cache";class Hg{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Mg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=Mg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Vg.Cache}}class Gg{constructor(e){this.key=e}}class qg{constructor(e){this.key=e}}class Kg{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=tp(),this.mutatedKeys=tp(),this.Ua=Bd(e),this.Ka=new Dg(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new Og,r=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=jd(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.ja(c,u)||(n.track({type:2,doc:u}),p=!0,(o&&this.Ua(u,o)>0||l&&this.Ua(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(o||l)&&(i=!0)),p&&(u?(a=a.add(u),s=d?s.add(e):s.delete(e)):(a=a.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ka:a,za:n,ys:i,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mc(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const i=t&&!r?this.Ja():[],o=0===this.$a.size&&this.current&&!r?1:0,l=o!==this.Qa;return this.Qa=o,0!==a.length||l?{snapshot:new Mg(this.query,e.Ka,s,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:i}:{Ya:i}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Og,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=tp(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new qg(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new Gg(n))})),t}Xa(e){this.qa=e.Ns,this.$a=tp();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Mg.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const Yg="SyncEngine";class Xg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Qg{constructor(e){this.key=e,this.tu=!1}}class Jg{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Wd((e=>$d(e)),Fd),this.iu=new Map,this.su=new Set,this.ou=new ih(du.comparator),this._u=new Map,this.au=new im,this.uu={},this.cu=new Map,this.lu=Gf.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function Zg(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=wy(e);let s;const a=r.ru.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.eu()):s=await ty(r,t,n,!0),s}async function ey(e,t){const n=wy(e);await ty(n,t,!0,!1)}async function ty(e,t,n,r){const s=await Nm(e.localStore,Od(t)),a=s.targetId,i=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await ny(e,t,a,"current"===i,s.resumeToken)),e.isPrimaryClient&&n&&rg(e.remoteStore,s),o}async function ny(e,t,n,r,s){e.Pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.Ga(n);s.ys&&(s=await Im(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ga(n,s)})));const a=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,a,i);return fy(e,t.targetId,o.Ya),o.snapshot}(e,t,n,r);const a=await Im(e.localStore,t,!0),i=new Kg(t,a.Ns),o=i.Ga(a.documents),l=Xp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(o,e.isPrimaryClient,l);fy(e,n,c.Ya);const u=new Xg(t,n,i);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}async function ry(e,t,n){const r=Fc(e),s=r.ru.get(t),a=r.iu.get(s.targetId);if(a.length>1)return r.iu.set(s.targetId,a.filter((e=>!Fd(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sg(r.remoteStore,s.targetId),dy(r,s.targetId)})).catch(xu)):(dy(r,s.targetId),await Cm(r.localStore,s.targetId,!0))}async function sy(e,t){const n=Fc(e),r=n.ru.get(t),s=n.iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sg(n.remoteStore,r.targetId))}async function ay(e,t){const n=Fc(e);try{const e=await function(e,t){const n=Fc(e),r=t.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const i=[];t.targetChanges.forEach(((a,o)=>{const l=s.get(o);if(!l)return;i.push(n.ai.removeMatchingKeys(e,a.removedDocuments,o).next((()=>n.ai.addMatchingKeys(e,a.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ph.EMPTY_BYTE_STRING,iu.min()).withLastLimboFreeSnapshotVersion(iu.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,a)&&i.push(n.ai.updateTargetData(e,c))}));let o=Gd(),l=tp();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(Tm(e,a,t.documentUpdates).next((e=>{o=e.xs,l=e.Os}))),!r.isEqual(iu.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return ku.waitFor(i).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ss=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(Lc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?Lc(r.tu,14607):e.removedDocuments.size>0&&(Lc(r.tu,42227),r.tu=!1))})),await yy(n,e,t)}catch(e){await xu(e)}}function iy(e,t,n){const r=Fc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const s=r.view.ga(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=Fc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Ra)s.ga(t)&&(r=!0)})),r&&Bg(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function oy(e,t,n){const r=Fc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r._u.get(t),a=s&&s.key;if(a){let e=new ih(du.comparator);e=e.insert(a,Zh.newNoDocument(a,iu.min()));const n=tp().add(a),s=new Yp(iu.min(),new Map,new ih(Jc),e,n);await ay(r,s),r.ou=r.ou.remove(a),r._u.delete(t),gy(r)}else await Cm(r.localStore,t,!1).then((()=>dy(r,t,n))).catch(xu)}async function ly(e,t){const n=Fc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Fc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,a=s.keys();let i=ku.resolve();return a.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const a=n.docVersions.get(e);Lc(null!==a,48541),t.version.compareTo(a)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=tp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);hy(n,r,null),uy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yy(n,e)}catch(e){await xu(e)}}async function cy(e,t,n){const r=Fc(e);try{const e=await function(e,t){const n=Fc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Lc(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);hy(r,t,n),uy(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await yy(r,e)}catch(n){await xu(n)}}function uy(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function hy(e,t,n){const r=Fc(e);let s=r.uu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.uu[r.currentUser.toKey()]=s}}function dy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||py(e,t)}))}function py(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(sg(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),gy(e))}function fy(e,t,n){for(const r of n)r instanceof Gg?(e.au.addReference(r.key,t),my(e,r)):r instanceof qg?(Ac(Yg,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||py(e,r.key)):Mc(19791,{Iu:r})}function my(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(Ac(Yg,"New document in limbo: "+n),e.su.add(r),gy(e))}function gy(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new du(cu.fromString(t)),r=e.lu.next();e._u.set(r,new Qg(n)),e.ou=e.ou.insert(n,r),rg(e.remoteStore,new Ff(Od(_d(n.path)),r,"TargetPurposeLimboResolution",Eu.le))}}async function yy(e,t,n){const r=Fc(e),s=[],a=[],i=[];r.ru.isEmpty()||(r.ru.forEach(((e,o)=>{i.push(r.Pu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=gm.Ps(o.targetId,e);a.push(t)}})))})),await Promise.all(i),r.nu.Q_(s),await async function(e,t){const n=Fc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ku.forEach(t,(t=>ku.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ku.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Tu(e))throw e;Ac(bm,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,s)}}}(r.localStore,a))}async function vy(e,t){const n=Fc(e);if(!n.currentUser.isEqual(t)){Ac(Yg,"User change. New user:",t.toKey());const e=await km(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new zc($c.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await yy(n,e.Ms)}}function by(e,t){const n=Fc(e),r=n._u.get(t);if(r&&r.tu)return tp().add(r.key);{let e=tp();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function wy(e){const t=Fc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ay.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=by.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oy.bind(null,t),t.nu.Q_=jg.bind(null,t.eventManager),t.nu.Tu=Ug.bind(null,t.eventManager),t}function xy(e){const t=Fc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ly.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cy.bind(null,t),t}class ky{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wm(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return xm(this.persistence,new vm,e.initialUser,this.serializer)}Ru(e){return new dm(fm.Ei,this.serializer)}Au(e){return new Rm}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ky.provider={build:()=>new ky};class Sy extends ky{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Lc(this.persistence.referenceDelegate instanceof mm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Qf(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?Hf.withCacheSize(this.cacheSizeBytes):Hf.DEFAULT;return new dm((e=>mm.Ei(e,t)),this.serializer)}}class Ty{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>iy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=vy.bind(null,this.syncEngine),await Cg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Lg}createDatastore(e){const t=Wm(e.databaseInfo.databaseId),n=function(e){return new Bm(e)}(e.databaseInfo);return function(e,t,n,r){return new Qm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new eg(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>iy(this.syncEngine,e,0)),Mm.C()?new Mm:new Dm)}createSyncEngine(e,t){return function(e,t,n,r,s,a,i){const o=new Jg(e,t,n,r,s,a);return i&&(o.hu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Fc(e);Ac(Zm,"RemoteStore shutting down."),t.aa.add(5),await ng(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ty.provider={build:()=>new Ty};class Ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Rc("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ny="FirestoreClient";class Cy{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Nc.UNAUTHENTICATED,this.clientId=Qc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{Ac(Ny,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ac(Ny,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Rg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Iy(e,t){e.asyncQueue.verifyOperationInProgress(),Ac(Ny,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await km(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function _y(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ay(e);Ac(Ny,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Ng(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ng(t.remoteStore,n))),e._onlineComponents=t}async function Ay(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ac(Ny,"Using user provided OfflineComponentProvider");try{await Iy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===$c.FAILED_PRECONDITION||e.code===$c.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Dc("Error using user provided cache. Falling back to memory cache: "+n),await Iy(e,new ky)}}else Ac(Ny,"Using default OfflineComponentProvider"),await Iy(e,new Sy(void 0));return e._offlineComponents}async function Ry(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ac(Ny,"Using user provided OnlineComponentProvider"),await _y(e,e._uninitializedComponentsProvider._online)):(Ac(Ny,"Using default OnlineComponentProvider"),await _y(e,new Ty))),e._onlineComponents}function Dy(e){return Ry(e).then((e=>e.syncEngine))}async function Oy(e){const t=await Ry(e),n=t.eventManager;return n.onListen=Zg.bind(null,t.syncEngine),n.onUnlisten=ry.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ey.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=sy.bind(null,t.syncEngine),n}function My(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const a=new Ey({next:o=>{a.yu(),t.enqueueAndForget((()=>zg(e,i)));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new zc($c.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new zc($c.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new Hg(_d(n.path),a,{includeMetadataChanges:!0,Fa:!0});return $g(e,i)}(await Oy(e),e.asyncQueue,t,n,r))),r.promise}function Py(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const a=new Ey({next:n=>{a.yu(),t.enqueueAndForget((()=>zg(e,i))),n.fromCache&&"server"===r.source?s.reject(new zc($c.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new Hg(n,a,{includeMetadataChanges:!0,Fa:!0});return $g(e,i)}(await Oy(e),e.asyncQueue,t,n,r))),r.promise}function Ly(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fy=new Map;function $y(e,t,n){if(!n)throw new zc($c.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function zy(e){if(!du.isDocumentKey(e))throw new zc($c.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jy(e){if(du.isDocumentKey(e))throw new zc($c.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Uy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Mc(12329,{type:typeof e})}function By(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zc($c.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uy(e);throw new zc($c.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const Vy="firestore.googleapis.com",Wy=!0;class Hy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zc($c.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vy,this.ssl=Wy}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Wy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Wf;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Kf)throw new zc($c.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new zc($c.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ly(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zc($c.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new zc($c.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new zc($c.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zc($c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zc($c.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bc;switch(e.type){case"firstParty":return new Gc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zc($c.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fy.get(e);t&&(Ac("ComponentProvider","Removing Datastore"),Fy.delete(e),t.terminate())}(this),Promise.resolve()}}class qy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qy(this.firestore,e,this._query)}}class Ky{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ky(this.firestore,e,this._key)}}class Yy extends qy{constructor(e,t,n){super(e,t,_d(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ky(this.firestore,null,new du(e))}withConverter(e){return new Yy(this.firestore,e,this._path)}}function Xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Po(e),$y("collection","path",t),e instanceof Gy){const n=cu.fromString(t,...r);return jy(n),new Yy(e,null,n)}{if(!(e instanceof Ky||e instanceof Yy))throw new zc($c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cu.fromString(t,...r));return jy(n),new Yy(e.firestore,null,n)}}function Qy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Po(e),1===arguments.length&&(t=Qc.newId()),$y("doc","path",t),e instanceof Gy){const n=cu.fromString(t,...r);return zy(n),new Ky(e,null,new du(n))}{if(!(e instanceof Ky||e instanceof Yy))throw new zc($c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cu.fromString(t,...r));return zy(n),new Ky(e.firestore,e instanceof Yy?e.converter:null,new du(n))}}const Jy="AsyncQueue";class Zy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Hm(this,"async_queue_retry"),this.ju=()=>{const e=Vm();e&&Ac(Jy,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=Vm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Vm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new jc;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(jEe){if(!Tu(jEe))throw jEe;Ac(Jy,"Operation failed with retryable error: "+jEe)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,Rc("INTERNAL UNHANDLED ERROR: ",ev(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=Ag.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&Mc(47125,{ec:ev(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function ev(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class tv extends Gy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Zy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zy(e),this._firestoreClient=void 0,await e}}}function nv(e){if(e._terminated)throw new zc($c.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||rv(e),e._firestoreClient}function rv(e){var t,n,r;const s=e._freezeSettings(),a=function(e,t,n,r){return new Eh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ly(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Cy(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class sv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sv(ph.fromBase64String(e))}catch(e){throw new zc($c.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new sv(ph.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class av{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new zc($c.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iv{constructor(e){this._methodName=e}}class ov{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zc($c.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zc($c.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jc(this._lat,e._lat)||Jc(this._long,e._long)}}class lv{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const cv=/^__.*__$/;class uv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _p(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ip(e,this.data,t,this.fieldTransforms)}}class hv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _p(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mc(40011,{oc:e})}}class pv{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Iv(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(dv(this.oc)&&cv.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class fv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Wm(e)}dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pv({oc:e,methodName:t,Ec:n,path:hu.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mv(e){const t=e._freezeSettings(),n=Wm(e._databaseId);return new fv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gv(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.dc(a.merge||a.mergeFields?2:0,t,n,s);Tv("Data must be an object, but it was:",i,r);const o=kv(r,i);let l,c;if(a.merge)l=new hh(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const s=Ev(t,r,n);if(!i.contains(s))throw new zc($c.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);_v(e,s)||e.push(s)}l=new hh(e),c=i.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=i.fieldTransforms;return new uv(new Qh(o),l,c)}class yv extends iv{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yv}}function vv(e,t,n,r){const s=e.dc(1,t,n);Tv("Data must be an object, but it was:",s,r);const a=[],i=Qh.empty();sh(r,((e,r)=>{const o=Cv(t,e,n);r=Po(r);const l=s.hc(o);if(r instanceof yv)a.push(o);else{const e=xv(r,l);null!=e&&(a.push(o),i.set(o,e))}}));const o=new hh(a);return new hv(i,o,s.fieldTransforms)}function bv(e,t,n,r,s,a){const i=e.dc(1,t,n),o=[Ev(t,r,n)],l=[s];if(a.length%2!=0)throw new zc($c.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<a.length;d+=2)o.push(Ev(t,a[d])),l.push(a[d+1]);const c=[],u=Qh.empty();for(let d=o.length-1;d>=0;--d)if(!_v(c,o[d])){const e=o[d];let t=l[d];t=Po(t);const n=i.hc(e);if(t instanceof yv)c.push(e);else{const r=xv(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new hh(c);return new hv(u,h,i.fieldTransforms)}function wv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return xv(n,e.dc(r?4:3,t))}function xv(e,t){if(Sv(e=Po(e)))return Tv("Unsupported field value:",t,e),kv(e,t);if(e instanceof iv)return function(e,t){if(!dv(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=xv(s,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Po(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ip(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=au.fromDate(e);return{timestampValue:uf(t.serializer,n)}}if(e instanceof au){const n=new au(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:uf(t.serializer,n)}}if(e instanceof ov)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sv)return{bytesValue:hf(t.serializer,e._byteString)};if(e instanceof Ky){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ff(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof lv)return function(e,t){return{mapValue:{fields:{[Ih]:{stringValue:Rh},[Dh]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return sp(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${Uy(e)}`)}(e,t)}function kv(e,t){const n={};return ah(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sh(e,((e,r)=>{const s=xv(r,t.uc(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function Sv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof au||e instanceof ov||e instanceof sv||e instanceof Ky||e instanceof iv||e instanceof lv)}function Tv(e,t,n){if(!Sv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Uy(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function Ev(e,t,n){if((t=Po(t))instanceof av)return t._internalPath;if("string"==typeof t)return Cv(e,t);throw Iv("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nv=new RegExp("[~\\*/\\[\\]]");function Cv(e,t,n){if(t.search(Nv)>=0)throw Iv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new av(...t.split("."))._internalPath}catch(r){throw Iv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Iv(e,t,n,r,s){const a=r&&!r.isEmpty(),i=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new zc($c.INVALID_ARGUMENT,o+e+l)}function _v(e,t){return e.some((e=>e.isEqual(t)))}class Av{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ky(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Rv extends Av{data(){return super.data()}}function Dv(e,t){return"string"==typeof t?Cv(e,t):t instanceof av?t._internalPath:t._delegate._internalPath}function Ov(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zc($c.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mv{}class Pv extends Mv{}function Lv(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];t instanceof Mv&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof zv)).length,n=e.filter((e=>e instanceof Fv)).length;if(t>1||t>0&&n>0)throw new zc($c.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class Fv extends Pv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Fv(e,t,n)}_apply(e){const t=this._parse(e);return Wv(e._query,t),new qy(e.firestore,e.converter,Pd(e._query,t))}_parse(e){const t=mv(e.firestore),n=function(e,t,n,r,s,a,i){let o;if(s.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new zc($c.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){Vv(i,a);const t=[];for(const n of i)t.push(Bv(r,e,n));o={arrayValue:{values:t}}}else o=Bv(r,e,i)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Vv(i,a),o=wv(n,t,i,"in"===a||"not-in"===a);return id.create(s,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function $v(e,t,n){const r=t,s=Dv("where",e);return Fv._create(s,r,n)}class zv extends Mv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:od.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Wv(n,s),n=Pd(n,s)}(e._query,t),new qy(e.firestore,e.converter,Pd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jv extends Pv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new jv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new zc($c.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zc($c.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(t,n)}(e._query,this._field,this._direction);return new qy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Cd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Uv(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Dv("orderBy",e);return jv._create(n,t)}function Bv(e,t,n){if("string"==typeof(n=Po(n))){if(""===n)throw new zc($c.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rd(t)&&-1!==n.indexOf("/"))throw new zc($c.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(cu.fromString(n));if(!du.isDocumentKey(r))throw new zc($c.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bh(e,new du(r))}if(n instanceof Ky)return Bh(e,n._key);throw new zc($c.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uy(n)}.`)}function Vv(e,t){if(!Array.isArray(e)||0===e.length)throw new zc($c.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zc($c.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new zc($c.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Hv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Mc(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return sh(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Dh].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>gh(e.doubleValue)));return new lv(s)}convertGeoPoint(e){return new ov(gh(e.latitude),gh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Th(e));default:return null}}convertTimestamp(e){const t=mh(e);return new au(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cu.fromString(e);Lc(Lf(n),9688,{name:e});const r=new Ch(n.get(1),n.get(3)),s=new du(n.popFirst(5));return r.isEqual(t)||Rc(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Gv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kv extends Av{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Dv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Yv extends Kv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Xv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new qv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Yv(this._firestore,this._userDataWriter,n.key,n,new qv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zc($c.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Yv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new qv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Yv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,a=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Qv(t.type),doc:r,oldIndex:s,newIndex:a}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Qv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mc(61501,{type:e})}}function Jv(e){e=By(e,Ky);const t=By(e.firestore,tv);return My(nv(t),e._key).then((n=>ab(t,e,n)))}class Zv extends Hv{constructor(e){super(),this.firestore=e}convertBytes(e){return new sv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ky(this.firestore,null,t)}}function eb(e){e=By(e,qy);const t=By(e.firestore,tv),n=nv(t),r=new Zv(t);return Ov(e._query),Py(n,e._query).then((n=>new Xv(t,r,e,n)))}function tb(e,t,n){e=By(e,Ky);const r=By(e.firestore,tv),s=mv(r);let a;for(var i=arguments.length,o=new Array(i>3?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];return a="string"==typeof(t=Po(t))||t instanceof av?bv(s,"updateDoc",e._key,t,n,o):vv(s,"updateDoc",e._key,t),sb(r,[a.toMutation(e._key,wp.exists(!0))])}function nb(e){return sb(By(e.firestore,tv),[new Op(e._key,wp.none())])}function rb(e,t){const n=By(e.firestore,tv),r=Qy(e),s=Gv(e.converter,t);return sb(n,[gv(mv(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,wp.exists(!1))]).then((()=>r))}function sb(e,t){return function(e,t){const n=new jc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=xy(e);try{const e=await function(e,t){const n=Fc(e),r=au.now(),s=t.reduce(((e,t)=>e.add(t.key)),tp());let a,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Gd(),l=tp();return n.Cs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{a=s;const i=[];for(const e of t){const t=Np(e,a.get(e.key).overlayedDocument);null!=t&&i.push(new _p(e.key,t,Jh(t.value.mapValue),wp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:Yd(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new ih(Jc)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await yy(r,e.changes),await yg(r.remoteStore)}catch(e){const t=Rg(e,"Failed to persist write");n.reject(t)}}(await Dy(e),t,n))),n.promise}(nv(e),t)}function ab(e,t,n){const r=n.docs.get(t._key),s=new Zv(e);return new Kv(e,s,t._key,r,new qv(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Cc=e}(Xl),Hl(new Lo("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const a=e.getProvider("app").getImmediate(),i=new tv(new Wc(e.getProvider("auth-internal")),new Kc(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zc($c.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(e.options.projectId,t)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),Zl(Tc,Ec,e),Zl(Tc,Ec,"esm2017")}();function ib(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lb=ob,cb=new No("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ub=new Go("@firebase/auth");function hb(e){if(ub.logLevel<=Uo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ub.error(`Auth (${Xl}): ${e}`,...n)}}function db(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gb(e,...n)}function pb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gb(e,...n)}function fb(e,t,n){const r=Object.assign(Object.assign({},lb()),{[t]:n});return new No("auth","Firebase",r).create(t,{appName:e.name})}function mb(e){return fb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return cb.create(e,...n)}function yb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw gb(t,...r)}}function vb(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hb(t),new Error(t)}function bb(e,t){e||vb(t)}function wb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xb(){return"http:"===kb()||"https:"===kb()}function kb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Sb(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(xb()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Tb{constructor(e,t){this.shortDelay=e,this.longDelay=t,bb(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ko())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Sb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Eb(e,t){bb(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Nb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void vb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void vb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void vb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ib=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_b=new Tb(3e4,6e4);function Ab(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Rb(e,t,n,r){return Db(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const i=Ao(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Nb.fetch()(await Mb(e,e.config.apiHost,n,i),l)}))}async function Db(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Cb),t);try{const t=new Lb(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Fb(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const t=s.ok?a.errorMessage:a.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Fb(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw Fb(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw Fb(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw fb(e,o,i);db(e,o)}}catch(jEe){if(jEe instanceof Eo)throw jEe;db(e,"network-request-failed",{message:String(jEe)})}}async function Ob(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await Rb(e,t,n,r,s);return"mfaPendingCredential"in a&&db(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function Mb(e,t,n,r){const s=`${t}${n}?${r}`,a=e,i=a.config.emulator?Eb(e.config,s):`${e.config.apiScheme}://${s}`;if(Ib.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(i).toString()}return i}function Pb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(pb(this.auth,"network-request-failed"))),_b.get())}))}}function Fb(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pb(e,t,r);return s.customData._tokenResponse=n,s}function $b(e){return void 0!==e&&void 0!==e.enterprise}class zb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Pb(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jb(e,t){return Rb(e,"GET","/v2/recaptchaConfig",Ab(e,t))}async function Ub(e,t){return Rb(e,"POST","/v1/accounts:lookup",t)}function Bb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(jEe){}}function Vb(e){return 1e3*Number(e)}function Wb(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return hb("JWT malformed, contained fewer than 3 sections"),null;try{const e=po(n);return e?JSON.parse(e):(hb("Failed to decode base64 JWT payload"),null)}catch(jEe){return hb("Caught error parsing JWT payload as JSON",null===jEe||void 0===jEe?void 0:jEe.toString()),null}}function Hb(e){const t=Wb(e);return yb(t,"internal-error"),yb("undefined"!==typeof t.exp,"internal-error"),yb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Gb(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(jEe){throw jEe instanceof Eo&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(jEe)&&e.auth.currentUser===e&&await e.auth.signOut(),jEe}}class qb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(jEe){return void("auth/network-request-failed"===(null===jEe||void 0===jEe?void 0:jEe.code)&&this.schedule(!0))}this.schedule()}}class Kb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bb(this.lastLoginAt),this.creationTime=Bb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yb(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Gb(e,Ub(n,{idToken:r}));yb(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const a=s.users[0];e._notifyReloadListener(a);const i=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?Xb(a.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Kb(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function Xb(e){return e.map((e=>{var{providerId:t}=e,n=ib(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Qb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yb(e.idToken,"internal-error"),yb("undefined"!==typeof e.idToken,"internal-error"),yb("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yb(0!==e.length,"internal-error");const t=Hb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(yb(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Db(e,{},(async()=>{const n=Ao({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await Mb(e,r,"/v1/token",`key=${s}`),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",Nb.fetch()(a,{method:"POST",headers:i,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,a=new Qb;return n&&(yb("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(yb("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),s&&(yb("number"===typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qb,this.toJSON())}_performRefresh(){return vb("not implemented")}}function Jb(e,t){yb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Zb{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=ib(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Gb(this,this.stsTokenManager.getToken(this.auth,e));return yb(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Po(e),r=await n.getIdToken(t),s=Wb(r);yb(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a="object"===typeof s.firebase?s.firebase:void 0,i=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Bb(Vb(s.auth_time)),issuedAtTime:Bb(Vb(s.iat)),expirationTime:Bb(Vb(s.exp)),signInProvider:i||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Po(e);await Yb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zb(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ql(this.auth.app))return Promise.reject(mb(this.auth));const e=await this.getIdToken();return await Gb(this,async function(e,t){return Rb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,i,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(i=t.tenantId)&&void 0!==i?i:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;yb(v&&k,e,"internal-error");const S=Qb.fromJSON(this.name,k);yb("string"===typeof v,e,"internal-error"),Jb(u,e.name),Jb(h,e.name),yb("boolean"===typeof b,e,"internal-error"),yb("boolean"===typeof w,e,"internal-error"),Jb(d,e.name),Jb(p,e.name),Jb(f,e.name),Jb(m,e.name),Jb(g,e.name),Jb(y,e.name);const T=new Zb({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(T.providerData=x.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qb;r.updateFromServerResponse(t);const s=new Zb({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Yb(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];yb(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Xb(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),i=new Qb;i.updateFromIdToken(n);const o=new Zb({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Kb(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const ew=new Map;function tw(e){bb(e instanceof Function,"Expected a class definition");let t=ew.get(e);return t?(bb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ew.set(e,t),t)}class nw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nw.type="NONE";const rw=nw;function sw(e,t,n){return`firebase:${e}:${t}:${n}`}class aw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=sw(this.userKey,r.apiKey,s),this.fullPersistenceKey=sw("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Ub(this.auth,{idToken:e}).catch((()=>{}));return t?Zb._fromGetAccountInfoResponse(this.auth,t,e):null}return Zb._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new aw(tw(rw),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||tw(rw);const a=sw(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(a);if(t){let n;if("string"===typeof t){const r=await Ub(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Zb._fromGetAccountInfoResponse(e,r,t)}else n=Zb._fromJSON(e,t);c!==s&&(i=n),s=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],i&&await s._set(a,i.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(a)}catch(l){}}))),new aw(s,e,n)):new aw(s,e,n)}}function iw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ow(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dw(t))return"Blackberry";if(pw(t))return"Webos";if(lw(t))return"Safari";if((t.includes("chrome/")||cw(t))&&!t.includes("edge/"))return"Chrome";if(hw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/firefox\//i.test(e)}function lw(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/crios\//i.test(e)}function uw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/iemobile/i.test(e)}function hw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/android/i.test(e)}function dw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/blackberry/i.test(e)}function pw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/webos/i.test(e)}function fw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mw(){return function(){const e=ko();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function gw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko();return fw(e)||hw(e)||pw(e)||dw(e)||/windows phone/i.test(e)||uw(e)}function yw(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=iw(ko());break;case"Worker":t=`${iw(ko())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xl}/${r}`}class vw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(jEe){r(jEe)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(jEe){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===jEe||void 0===jEe?void 0:jEe.message})}}}class bw{constructor(e){var t,n,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,a,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ww{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kw(this),this.idTokenSubscription=new kw(this),this.beforeStateQueue=new vw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tw(t)),this._initializationPromise=this.queue((async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await aw.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(jEe){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ub(this,{idToken:e}),n=await Zb._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ql(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==a||!(null===i||void 0===i?void 0:i.user)||(r=i.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(jEe){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(jEe)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yb(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(jEe){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yb(e)}catch(jEe){if("auth/network-request-failed"!==(null===jEe||void 0===jEe?void 0:jEe.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ql(this.app))return Promise.reject(mb(this));const t=e?Po(e):null;return t&&yb(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yb(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ql(this.app)?Promise.reject(mb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ql(this.app)?Promise.reject(mb(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(tw(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Rb(e,"GET","/v2/passwordPolicy",Ab(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bw(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new No("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Rb(e,"POST","/v2/accounts:revokeToken",Ab(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tw(e)||this._popupRedirectResolver;yb(t,this,"argument-error"),this.redirectPersistenceManager=await aw.create(this,[tw(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let a=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(yb(i,this,"internal-error"),i.then((()=>{a||s(this.currentUser)})),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{a=!0,s()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yb(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ql(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ub.logLevel<=Uo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ub.warn(`Auth (${Xl}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function xw(e){return Po(e)}class kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Oo(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return yb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tw(e){return Sw.loadJS(e)}function Ew(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Nw{constructor(){this.enterprise=new Cw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Cw{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Iw="NO_RECAPTCHA";class _w{constructor(e){this.type="recaptcha-enterprise",this.auth=xw(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;$b(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Iw)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Nw).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{jb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new zb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&$b(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Sw.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Tw(t).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Aw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new _w(e);let i;if(s)i=Iw;else try{i=await a.verify(n)}catch(l){i=await a.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rw(e,t,n,r,s){var a,i;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Aw(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch((async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Aw(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)}))}if("PHONE_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("PHONE_PROVIDER")){const s=await Aw(e,t,n);return r(e,s).catch((async s=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const s=await Aw(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)}))}{const s=await Aw(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Dw(e){const t=xw(e),n=await jb(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new zb(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new _w(t).verify()}}function Ow(e,t,n){const r=xw(e);yb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Mw(t),{host:i,port:o}=function(e){const t=Mw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Pw(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Pw(t)}}}(t),l={url:`${a}//${i}${null===o?"":`:${o}`}/`},c=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return yb(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void yb(Io(l,r.config.emulator)&&Io(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Mw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Lw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vb("not implemented")}_getIdTokenResponse(e){return vb("not implemented")}_linkToIdToken(e,t){return vb("not implemented")}_getReauthenticationResolver(e){return vb("not implemented")}}async function Fw(e,t){return Rb(e,"POST","/v1/accounts:signUp",t)}async function $w(e,t){return Ob(e,"POST","/v1/accounts:signInWithPassword",Ab(e,t))}class zw extends Lw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new zw(e,t,"password")}static _fromEmailAndCode(e,t){return new zw(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Rw(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$w,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Ob(e,"POST","/v1/accounts:signInWithEmailLink",Ab(e,t))}(e,{email:this._email,oobCode:this._password});default:db(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Rw(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fw,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Ob(e,"POST","/v1/accounts:signInWithEmailLink",Ab(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:db(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function jw(e,t){return Ob(e,"POST","/v1/accounts:signInWithIdp",Ab(e,t))}class Uw extends Lw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):db("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=ib(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new Uw(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return jw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,jw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jw(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ao(t)}return e}}async function Bw(e,t){return Rb(e,"POST","/v1/accounts:sendVerificationCode",Ab(e,t))}const Vw={USER_NOT_FOUND:"user-not-found"};class Ww extends Lw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ww({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ww({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ob(e,"POST","/v1/accounts:signInWithPhoneNumber",Ab(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ob(e,"POST","/v1/accounts:signInWithPhoneNumber",Ab(e,t));if(n.temporaryProof)throw Fb(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ob(e,"POST","/v1/accounts:signInWithPhoneNumber",Ab(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Vw)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Ww({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Hw{constructor(e){var t,n,r,s,a,i;const o=Ro(Do(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);yb(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(a=o.lang)&&void 0!==a?a:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=Ro(Do(e)).link,n=t?Ro(Do(t)).deep_link_id:null,r=Ro(Do(e)).deep_link_id;return(r?Ro(Do(r)).link:null)||r||n||t||e}(e);try{return new Hw(t)}catch(n){return null}}}class Gw{constructor(){this.providerId=Gw.PROVIDER_ID}static credential(e,t){return zw._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hw.parseLink(t);return yb(n,"argument-error"),zw._fromEmailAndCode(e,n.code,n.tenantId)}}Gw.PROVIDER_ID="password",Gw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Gw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Kw extends qw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yw extends Kw{constructor(){super("facebook.com")}static credential(e){return Uw._fromParams({providerId:Yw.PROVIDER_ID,signInMethod:Yw.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yw.credentialFromTaggedObject(e)}static credentialFromError(e){return Yw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Yw.credential(t.oauthAccessToken)}catch(n){return null}}}Yw.FACEBOOK_SIGN_IN_METHOD="facebook.com",Yw.PROVIDER_ID="facebook.com";class Xw extends Kw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uw._fromParams({providerId:Xw.PROVIDER_ID,signInMethod:Xw.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xw.credentialFromTaggedObject(e)}static credentialFromError(e){return Xw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Xw.credential(n,r)}catch(s){return null}}}Xw.GOOGLE_SIGN_IN_METHOD="google.com",Xw.PROVIDER_ID="google.com";class Qw extends Kw{constructor(){super("github.com")}static credential(e){return Uw._fromParams({providerId:Qw.PROVIDER_ID,signInMethod:Qw.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qw.credentialFromTaggedObject(e)}static credentialFromError(e){return Qw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qw.credential(t.oauthAccessToken)}catch(n){return null}}}Qw.GITHUB_SIGN_IN_METHOD="github.com",Qw.PROVIDER_ID="github.com";class Jw extends Kw{constructor(){super("twitter.com")}static credential(e,t){return Uw._fromParams({providerId:Jw.PROVIDER_ID,signInMethod:Jw.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Jw.credentialFromTaggedObject(e)}static credentialFromError(e){return Jw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Jw.credential(n,r)}catch(s){return null}}}async function Zw(e,t){return Ob(e,"POST","/v1/accounts:signUp",Ab(e,t))}Jw.TWITTER_SIGN_IN_METHOD="twitter.com",Jw.PROVIDER_ID="twitter.com";class ex{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Zb._fromIdTokenResponse(e,n,r),a=tx(n);return new ex({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=tx(n);return new ex({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function tx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class nx extends Eo{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,nx.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new nx(e,t,n,r)}}function rx(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw nx._fromErrorAndOperation(e,n,t,r);throw n}))}async function sx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Gb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ex._forOperation(e,"link",r)}async function ax(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ql(r.app))return Promise.reject(mb(r));const s="reauthenticate";try{const a=await Gb(e,rx(r,s,t,e),n);yb(a.idToken,r,"internal-error");const i=Wb(a.idToken);yb(i,r,"internal-error");const{sub:o}=i;return yb(e.uid===o,r,"user-mismatch"),ex._forOperation(e,s,a)}catch(jEe){throw"auth/user-not-found"===(null===jEe||void 0===jEe?void 0:jEe.code)&&db(r,"user-mismatch"),jEe}}async function ix(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ql(e.app))return Promise.reject(mb(e));const r="signIn",s=await rx(e,r,t),a=await ex._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(a.user),a}async function ox(e,t){return ix(xw(e),t)}async function lx(e){const t=xw(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function cx(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=Po(e),a={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},i=await Gb(s,async function(e,t){return Rb(e,"POST","/v1/accounts:update",t)}(s.auth,a));s.displayName=i.displayName||null,s.photoURL=i.photoUrl||null;const o=s.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(i)}function ux(e,t){return Rb(e,"POST","/v2/accounts/mfaEnrollment:start",Ab(e,t))}new WeakMap;const hx="__sak";class dx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hx,"1"),this.storage.removeItem(hx),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class px extends dx{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);mw()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}px.type="LOCAL";const fx=px;function mx(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function gx(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class yx{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=gx(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return mx(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=gx(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=gx(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=mx(n);const s=setInterval((()=>{const e=mx(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(s)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}yx.type="COOKIE";class vx extends dx{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vx.type="SESSION";const bx=vx;class wx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new wx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(a).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function xx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wx.receivers=[];class kx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise(((i,o)=>{const l=xx("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{a&&this.removeMessageHandler(a)}))}}function Sx(){return window}function Tx(){return"undefined"!==typeof Sx().WorkerGlobalScope&&"function"===typeof Sx().importScripts}const Ex="firebaseLocalStorageDb",Nx="firebaseLocalStorage",Cx="fbase_key";class Ix{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function _x(e,t){return e.transaction([Nx],t?"readwrite":"readonly").objectStore(Nx)}function Ax(){const e=indexedDB.open(Ex,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Nx,{keyPath:Cx})}catch(jEe){n(jEe)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Nx)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ex);return new Ix(e).toPromise()}(),t(await Ax()))}))}))}async function Rx(e,t,n){const r=_x(e,!0).put({[Cx]:t,value:n});return new Ix(r).toPromise()}function Dx(e,t){const n=_x(e,!0).delete(t);return new Ix(n).toPromise()}class Ox{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ax()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(jEe){if(t++>3)throw jEe;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wx._getInstance(Tx()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new kx(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ax();return await Rx(e,hx,"1"),await Dx(e,hx),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Rx(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=_x(e,!1).get(t),r=await new Ix(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Dx(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=_x(e,!1).getAll();return new Ix(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ox.type="LOCAL";const Mx=Ox;function Px(e,t){return Rb(e,"POST","/v2/accounts/mfaSignIn:start",Ab(e,t))}Ew("rcb"),new Tb(3e4,6e4);const Lx="recaptcha";async function Fx(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Dw(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){yb("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=Rw(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Iw){yb((null===n||void 0===n?void 0:n.type)===Lx,e,"argument-error");return ux(e,await $x(e,t,n))}return ux(e,t)}),"PHONE_PROVIDER");return(await a.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{yb("signin"===t.type,e,"internal-error");const a=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;yb(a,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Rw(e,i,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Iw){yb((null===n||void 0===n?void 0:n.type)===Lx,e,"argument-error");return Px(e,await $x(e,t,n))}return Px(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Rw(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Iw){yb((null===n||void 0===n?void 0:n.type)===Lx,e,"argument-error");return Bw(e,await $x(e,t,n))}return Bw(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function $x(e,t,n){yb(n.type===Lx,e,"argument-error");const r=await n.verify();yb("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,a=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class zx{constructor(e){this.providerId=zx.PROVIDER_ID,this.auth=xw(e)}verifyPhoneNumber(e,t){return Fx(this.auth,e,Po(t))}static credential(e,t){return Ww._fromVerification(e,t)}static credentialFromResult(e){const t=e;return zx.credentialFromTaggedObject(t)}static credentialFromError(e){return zx.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ww._fromTokenResponse(n,r):null}}function jx(e,t){return t?tw(t):(yb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zx.PROVIDER_ID="phone",zx.PHONE_SIGN_IN_METHOD="phone";class Ux extends Lw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bx(e){return ix(e.auth,new Ux(e),e.bypassAuthState)}function Vx(e){const{auth:t,user:n}=e;return yb(n,t,"internal-error"),ax(n,new Ux(e),e.bypassAuthState)}async function Wx(e){const{auth:t,user:n}=e;return yb(n,t,"internal-error"),sx(n,new Ux(e),e.bypassAuthState)}class Hx{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(jEe){this.reject(jEe)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:a,type:i}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(jEe){this.reject(jEe)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bx;case"linkViaPopup":case"linkViaRedirect":return Wx;case"reauthViaPopup":case"reauthViaRedirect":return Vx;default:db(this.auth,"internal-error")}}resolve(e){bb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gx=new Tb(2e3,1e4);class qx extends Hx{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,qx.currentPopupAction&&qx.currentPopupAction.cancel(),qx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yb(e,this.auth,"internal-error"),e}async onExecution(){bb(1===this.filter.length,"Popup operations only handle one event");const e=xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(pb(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pb(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(pb(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Gx.get())};e()}}qx.currentPopupAction=null;const Kx=new Map;class Yx extends Hx{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Kx.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Jx(t),r=Qx(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(jEe){e=()=>Promise.reject(jEe)}Kx.set(this.auth._key(),e)}return this.bypassAuthState||Kx.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Xx(e,t){Kx.set(e._key(),t)}function Qx(e){return tw(e._redirectPersistence)}function Jx(e){return sw("pendingRedirect",e.config.apiKey,e.name)}async function Zx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ql(e.app))return Promise.reject(mb(e));const r=xw(e),s=jx(r,t),a=new Yx(r,s,n),i=await a.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class ek{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nk(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!nk(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pb(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tk(e))}saveEventToCache(e){this.cachedEventUids.add(tk(e)),this.lastProcessedEventTime=Date.now()}}function tk(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function nk(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sk=/^https?/;async function ak(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Rb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ik(r))return}catch(n){}db(e,"unauthorized-domain")}function ik(e){const t=wb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!sk.test(n))return!1;if(rk.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const ok=new Tb(3e4,6e4);function lk(){const e=Sx().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ck(e){return new Promise(((t,n)=>{var r,s,a;function i(){lk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lk(),n(pb(e,"network-request-failed"))},timeout:ok.get()})}if(null===(s=null===(r=Sx().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Sx().gapi)||void 0===a?void 0:a.load)){const t=Ew("iframefcb");return Sx()[t]=()=>{gapi.load?i():n(pb(e,"network-request-failed"))},Tw(`${Sw.gapiScript}?onload=${t}`).catch((e=>n(e)))}i()}})).catch((e=>{throw uk=null,e}))}let uk=null;const hk=new Tb(5e3,15e3),dk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fk(e){const t=e.config;yb(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Eb(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Xl},s=pk.get(e.config.apiHost);s&&(r.eid=s);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ao(r).slice(1)}`}async function mk(e){const t=await function(e){return uk=uk||ck(e),uk}(e),n=Sx().gapi;return yb(n,e,"internal-error"),t.open({where:document.body,url:fk(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dk,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=pb(e,"network-request-failed"),a=Sx().setTimeout((()=>{r(s)}),hk.get());function i(){Sx().clearTimeout(a),n(t)}t.ping(i).then(i,(()=>{r(s)}))}))))}const gk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(jEe){}}}function vk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},gk),{width:r.toString(),height:s.toString(),top:a,left:i}),c=ko().toLowerCase();n&&(o=cw(c)?"_blank":n),ow(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return fw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new yk(null);const h=window.open(t||"",o,u);yb(h,e,"popup-blocked");try{h.focus()}catch(jEe){}return new yk(h)}const bk="__/auth/handler",wk="emulator/auth/handler",xk=encodeURIComponent("fac");async function kk(e,t,n,r,s,a){yb(e.config.authDomain,e,"auth-domain-config-required"),yb(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Xl,eventId:s};if(t instanceof qw){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))i[e]=t}if(t instanceof Kw){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${xk}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${bk}`;return Eb(t,wk)}(e)}?${Ao(o).slice(1)}${c}`}const Sk="webStorageSupport";const Tk=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bx,this._completeRedirectFn=Zx,this._overrideRedirectResult=Xx}async _openPopup(e,t,n,r){var s;bb(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return vk(e,await kk(e,t,n,wb(),r),xx())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Sx().location.href=e}(await kk(e,t,n,wb(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bb(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await mk(e),n=new ek(e);return t.register("authEvent",(t=>{yb(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sk,{type:Sk},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Sk];void 0!==s&&t(!!s),db(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ak(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gw()||lw()||fw()}};var Ek="@firebase/auth",Nk="1.10.1";class Ck{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ik=bo("authIdTokenMaxAge")||300;let _k=null;var Ak;!function(e){Sw=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ak="Browser",Hl(new Lo("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;yb(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:Ak,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(Ak)},c=new ww(r,s,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Hl(new Lo("auth-internal",(e=>(e=>new Ck(e))(xw(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Zl(Ek,Nk,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ak)),Zl(Ek,Nk,"esm2017");const Rk="firebasestorage.googleapis.com",Dk="storageBucket";class Ok extends Eo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Lk(e),`Firebase Storage: ${t} (${Lk(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ok.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mk,Pk;function Lk(e){return"storage/"+e}function Fk(){return new Ok(Mk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function $k(){return new Ok(Mk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zk(){return new Ok(Mk.CANCELED,"User canceled the upload/download.")}function jk(){return new Ok(Mk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uk(e){return new Ok(Mk.INVALID_ARGUMENT,e)}function Bk(){return new Ok(Mk.APP_DELETED,"The Firebase app was deleted.")}function Vk(e,t){return new Ok(Mk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Wk(e){throw new Ok(Mk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Mk||(Mk={}));class Hk{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Hk.makeFromUrl(e,t)}catch(jEe){return new Hk(e,"")}if(""===n.path)return n;throw r=e,new Ok(Mk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${i}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp(`^https?://${t===Rk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Hk(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Ok(Mk.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Gk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function qk(e){return"string"===typeof e||e instanceof String}function Kk(e){return Yk()&&e instanceof Blob}function Yk(){return"undefined"!==typeof Blob}function Xk(e,t,n,r){if(r<t)throw Uk(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Uk(`Invalid value for '${e}'. Expected ${n} or less.`)}function Qk(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Jk(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Zk(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Pk||(Pk={}));class eS{constructor(e,t,n,r,s,a,i,o,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=i,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new tS(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Pk.NO_ERROR,s=n.getStatus();if(!t||Zk(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Pk.ABORT;return void e(!1,new tS(!1,null,t))}const a=-1!==this.successCodes_.indexOf(s);e(!0,new tS(a,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(jEe){r(jEe)}else if(null!==s){const e=Fk();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Bk():zk())}else{r($k())}};this.canceled_?t(0,new tS(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,a=null,i=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){s=setTimeout((()=>{s=null,e(p,l())}),t)}function d(){a&&clearTimeout(a)}function p(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void u.call(null,e,...n);if(l()||i)return d(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===o?(o=2,a=0):a=1e3*(r+Math.random()),h(a)}let f=!1;function m(e){f||(f=!0,d(),c||(null!==s?(e||(o=2),clearTimeout(s),h(0)):e||(o=1)))}return h(0),a=setTimeout((()=>{i=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class tS{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function nS(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function rS(){const e=nS();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Yk())return new Blob(n);throw new Ok(Mk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function sS(e){if("undefined"===typeof atob)throw t="base-64",new Ok(Mk.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const aS="raw",iS="base64",oS="base64url",lS="data_url";class cS{constructor(e,t){this.data=e,this.contentType=t||null}}function uS(e,t){switch(e){case aS:return new cS(hS(t));case iS:case oS:return new cS(dS(e,t));case lS:return new cS(function(e){const t=new pS(e);return t.base64?dS(iS,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(jEe){throw Vk(lS,"Malformed data URL.")}return hS(t)}(t.rest)}(t),new pS(t).contentType)}throw Fk()}function hS(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function dS(e,t){switch(e){case iS:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Vk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case oS:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Vk(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=sS(t)}catch(jEe){if(jEe.message.includes("polyfill"))throw jEe;throw Vk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class pS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vk(lS,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class fS{constructor(e,t){let n=0,r="";Kk(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Kk(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new fS(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new fS(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Yk()){const e=t.map((e=>e instanceof fS?e.data_:e));return new fS(rS.apply(null,e))}{const e=t.map((e=>qk(e)?uS(aS,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let s=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]})),new fS(r,!0)}}uploadData(){return this.data_}}function mS(e){let t;try{t=JSON.parse(e)}catch(jEe){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function gS(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function yS(e,t){return t}class vS{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||yS}}let bS=null;function wS(){if(bS)return bS;const e=[];e.push(new vS("bucket")),e.push(new vS("generation")),e.push(new vS("metageneration")),e.push(new vS("name","fullPath",!0));const t=new vS("name");t.xform=function(e,t){return function(e){return!qk(e)||e.length<2?e:gS(e)}(t)},e.push(t);const n=new vS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new vS("timeCreated")),e.push(new vS("updated")),e.push(new vS("md5Hash",null,!0)),e.push(new vS("cacheControl",null,!0)),e.push(new vS("contentDisposition",null,!0)),e.push(new vS("contentEncoding",null,!0)),e.push(new vS("contentLanguage",null,!0)),e.push(new vS("contentType",null,!0)),e.push(new vS("metadata","customMetadata",!0)),bS=e,bS}function xS(e,t,n){const r={type:"file"},s=n.length;for(let a=0;a<s;a++){const e=n[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Hk(n,r);return t._makeStorageReference(s)}})}(r,e),r}function kS(e,t,n){const r=mS(t);if(null===r)return null;return xS(e,r,n)}function SS(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class TS{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ES(e){if(!e)throw Fk()}function NS(e,t){return function(n,r){const s=kS(e,r,t);return ES(null!==s),s}}function CS(e,t){return function(n,r){const s=kS(e,r,t);return ES(null!==s),function(e,t,n,r){const s=mS(t);if(null===s)return null;if(!qk(s.downloadTokens))return null;const a=s.downloadTokens;if(0===a.length)return null;const i=encodeURIComponent;return a.split(",").map((t=>{const s=e.bucket,a=e.fullPath;return Qk("/b/"+i(s)+"/o/"+i(a),n,r)+Jk({alt:"media",token:t})}))[0]}(s,r,e.host,e._protocol)}}function IS(e){return function(t,n){let r;var s,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ok(Mk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ok(Mk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Ok(Mk.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new Ok(Mk.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function _S(e){const t=IS(e);return function(n,r){let s=t(n,r);var a;return 404===n.getStatus()&&(a=e.path,s=new Ok(Mk.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function AS(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function RS(e,t,n,r,s){const a=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i["Content-Type"]="multipart/related; boundary="+o;const l=AS(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+SS(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",h=fS.getBlob(c,r,u);if(null===h)throw jk();const d={name:l.fullPath},p=Qk(a,e.host,e._protocol),f=e.maxUploadRetryTime,m=new TS(p,"POST",NS(e,n),f);return m.urlParams=d,m.headers=i,m.body=h.uploadData(),m.errorHandler=IS(t),m}class DS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pk.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Pk.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Pk.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Wk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wk("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(jEe){return-1}}getResponse(){if(!this.sent_)throw Wk("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wk("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class OS extends DS{initXhr(){this.xhr_.responseType="text"}}function MS(){return new OS}class PS{constructor(e,t){this._service=e,this._location=t instanceof Hk?t:Hk.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new PS(e,t)}get root(){const e=new Hk(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gS(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Hk(this._location.bucket,e);return new PS(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Ok(Mk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function LS(e,t,n){e._throwIfRoot("uploadBytes");const r=RS(e.storage,e._location,wS(),new fS(t,!0),n);return e.storage.makeRequestWithTokens(r,MS).then((t=>({metadata:t,ref:e})))}function FS(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Qk(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,a=new TS(r,"GET",CS(e,n),s);return a.errorHandler=_S(t),a}(e.storage,e._location,wS());return e.storage.makeRequestWithTokens(t,MS).then((e=>{if(null===e)throw new Ok(Mk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function $S(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Hk(e._location.bucket,n);return new PS(e.storage,r)}function zS(e,t){if(e instanceof BS){const n=e;if(null==n._bucket)throw new Ok(Mk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dk+"' property when initializing the app?");const r=new PS(n,n._bucket);return null!=t?zS(r,t):r}return void 0!==t?$S(e,t):e}function jS(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof BS)return new PS(e,t);throw Uk("To use ref(service, url), the first argument must be a Storage instance.")}return zS(e,t)}function US(e,t){const n=null===t||void 0===t?void 0:t[Dk];return null==n?null:Hk.makeFromBucketSpec(n,e)}class BS{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Hk.makeFromBucketSpec(r,this._host):US(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Hk.makeFromBucketSpec(this._url,e):this._bucket=US(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(ql(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new PS(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Gk(Bk());{const a=function(e,t,n,r,s,a){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=Jk(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new eS(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then((()=>this._requests.delete(a)),(()=>this._requests.delete(a))),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const VS="@firebase/storage",WS="0.13.7",HS="storage";function GS(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new BS(r,s,a,n,Xl)}Hl(new Lo(HS,GS,"PUBLIC").setMultipleInstances(!0)),Zl(VS,WS,""),Zl(VS,WS,"esm2017");const qS={apiKey:"AIzaSyABCmprcNBNvQOo3kcx30HgV1cItVAhNMM",authDomain:"panekkatt-money-tracker.firebaseapp.com",projectId:"panekkatt-money-tracker",storageBucket:"panekkatt-money-tracker.appspot.com",messagingSenderId:"772202958486",appId:"1:772202958486:web:f9d254f7d4e6916366bcb7"},KS=Ql(qS),YS=function(e,t){const n="object"==typeof e?e:Jl(),r="string"==typeof e?e:t||Nh,s=Gl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=yo("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const a=(e=By(e,Gy))._getSettings(),i=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),o=`${t}:${n}`;a.host!==Vy&&a.host!==o&&Dc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},a),{host:o,ssl:!1,emulatorOptions:r});if(!Io(l,i)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Nc.MOCK_USER;else{t=xo(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new zc($c.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Nc(a)}e._authCredentials=new Vc(new Uc(t,n))}}(s,...e)}return s}(KS),XS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jl();const t=Gl(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Gl(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Io(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;db(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Tk,persistence:[Mx,fx,bx]}),r=bo("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ik)return;const r=null===t||void 0===t?void 0:t.token;_k!==r&&(_k=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Po(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Po(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var s;const a=go("auth");return a&&Ow(n,`http://${a}`),n}(KS),QS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jl(),t=arguments.length>1?arguments[1]:void 0;e=Po(e);const n=Gl(e,HS).getImmediate({identifier:t}),r=yo("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:xo(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(KS);console.log("Firebase initialized with config:",{apiKey:qS.apiKey?"Provided":"Missing",authDomain:qS.authDomain,projectId:qS.projectId,storageBucket:qS.storageBucket});const JS={USER_PROFILE:"panekkatt_user_profile",TRANSACTIONS:"panekkatt_transactions",CATEGORIES:"panekkatt_categories",LAST_SYNC:"panekkatt_last_sync",AUTH_USER:"panekkatt_auth_user"},ZS=e=>{try{const t=localStorage.getItem(JS[e]);return t?JSON.parse(t):null}catch(t){return console.error(`Error retrieving ${e} from local storage:`,t),null}},eT=(e,t)=>{try{return localStorage.setItem(JS[e],JSON.stringify(t)),!0}catch(n){return console.error(`Error saving ${e} to local storage:`,n),!1}},tT=e=>{if(!e)return!1;const t={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,lastLoginAt:(new Date).toISOString()};return eT("AUTH_USER",t)},nT=()=>(e=>{try{return localStorage.removeItem(JS[e]),!0}catch(t){return console.error(`Error removing ${e} from local storage:`,t),!1}})("AUTH_USER"),rT=async(e,t,n)=>{try{if(console.log("Attempting to create user with email:",e),!XS)throw new Error("Firebase auth is not initialized");const r=await async function(e,t,n){if(ql(e.app))return Promise.reject(mb(e));const r=xw(e),s=Rw(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zw,"EMAIL_PASSWORD_PROVIDER"),a=await s.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&lx(e),t})),i=await ex._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(i.user),i}(XS,e,t);return console.log("User created successfully, adding display name"),await cx(r.user,{displayName:n}),tT(r.user),console.log("User profile updated and saved to local storage"),r.user}catch(r){throw console.error("Error signing up:",r),console.error("Error code:",r.code),console.error("Error message:",r.message),"auth/configuration-not-found"===r.code?console.error("Firebase auth configuration not found. Make sure Email/Password authentication is enabled in the Firebase console."):"auth/email-already-in-use"===r.code?console.error("Email is already in use by another account."):"auth/invalid-email"===r.code?console.error("Email address is not valid."):"auth/operation-not-allowed"===r.code?console.error("Email/Password accounts are not enabled in Firebase console."):"auth/weak-password"===r.code&&console.error("Password is too weak. It should be at least 6 characters."),r}},sT=async(e,t)=>{try{const n=await function(e,t,n){return ql(e.app)?Promise.reject(mb(e)):ox(Po(e),Gw.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&lx(e),t}))}(XS,e,t);return tT(n.user),n.user}catch(n){throw console.error("Error signing in:",n),n}},aT=async()=>{try{return await function(e){return Po(e).signOut()}(XS),nT(),!0}catch(e){throw console.error("Error signing out:",e),e}},iT="userProfiles",oT=async(e,t)=>{try{const n=Qy(YS,iT,e);return await function(e,t,n){e=By(e,Ky);const r=By(e.firestore,tv),s=Gv(e.converter,t,n);return sb(r,[gv(mv(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,wp.none())])}(n,t,{merge:!0}),{id:e,...t}}catch(n){throw console.error("Error saving user profile:",n),n}},lT=async e=>{try{const t=Qy(YS,iT,e),n=await Jv(t);return n.exists()?{id:e,...n.data()}:null}catch(t){throw console.error("Error fetching user profile:",t),t}},cT="categories",uT=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=XS.currentUser?XS.currentUser.uid:null;if(!t)throw new Error("User must be authenticated to fetch categories");const n=Xy(YS,cT);let r=[$v("userId","==",t)];e&&r.push($v("type","==",e));let s=Lv(n,...r,Uv("name"));const a=await eb(s),i=[];return a.forEach((e=>{i.push({id:e.id,...e.data()})})),i}catch(t){throw console.error("Error fetching categories:",t),t}},hT=async e=>{try{const t=XS.currentUser?XS.currentUser.uid:null;if(!t)throw new Error("User must be authenticated to add a category");const n={...e,userId:t,createdAt:(new Date).toISOString()};return{id:(await rb(Xy(YS,cT),n)).id,...n}}catch(t){throw console.error("Error adding category:",t),t}},dT=async e=>{try{if(!e)throw new Error("User ID is required to fetch categories");const t=XS.currentUser;if(t&&t.uid!==e)throw new Error("User ID mismatch. Cannot fetch categories for a different user.");const n=t?null:{uid:e};n&&(XS.currentUser=n);const r=await uT();return n&&(XS.currentUser=null),r}catch(t){throw console.error("Error in getCategories:",t),t}};class pT{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class fT{refCount(e){return mT("refCount")}incRef(e){return mT("incRef")}timerAvailable(){return!0}time(e){return mT("time")}read(e){return mT("read")}readSync(e){return mT("readSync")}readToGPU(e,t){return mT("readToGPU")}numDataIds(){return mT("numDataIds")}disposeData(e,t){return mT("disposeData")}write(e,t,n){return mT("write")}move(e,t,n,r,s){return mT("move")}createTensorFromGPUData(e,t,n){return mT("createTensorFromGPUData")}memory(){return mT("memory")}floatPrecision(){return mT("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return mT("dispose")}}function mT(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function gT(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,wT(e,t,n)}function yT(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,wT(e,n,r),wT(t,n,r)}function vT(e,t,n){return Math.max(e,Math.min(t,n))}function bT(e){return e%2===0?e:e+1}function wT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xT(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function kT(e,t){const n=Math.random();return t*n+(1-n)*e}function ST(e,t){let n=0;for(let r=0;r<e.length;r++){const s=Number(e[r])-Number(t[r]);n+=s*s}return n}function TT(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function ET(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";TT(AT(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function NT(e){TT(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function CT(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function IT(e){return 0===e.length}function _T(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function AT(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function RT(e){return e%1===0}function DT(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function OT(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function MT(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return gT(t),t}function PT(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function LT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((s,a)=>{let i=0;const o=()=>{if(e())return void s();i++;const l=t(i);null!=n&&i>=n?a():null!=r?r(o,l):setTimeout(o,l)};o()}))}function FT(e,t){let n=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(e[a]<0)throw Error(`Shapes can not be < 0. Found ${e[a]} at dim ${a}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const s=e.slice();return s[r]=t/n,s}function $T(e,t){const n=t.length;return TT((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),TT(e.every((e=>RT(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function zT(e,t){const n=[],r=[],s=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||s?null:$T(t,e).sort();let i=0;for(let o=0;o<e.length;++o){if(null!=a){if(a[i]===o&&1!==e[o])throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(null==a[i]||a[i]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),a[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function jT(e,t){return UT(e,t)}function UT(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function BT(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function VT(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function WT(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function HT(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function GT(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function qT(e){return"string"===typeof e||e instanceof String}function KT(e){return"boolean"===typeof e}function YT(e){return"number"===typeof e}function XT(e){return Array.isArray(e)?XT(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":YT(e)?"float32":qT(e)?"string":KT(e)?"bool":"float32"}function QT(e){return!!(e&&e.constructor&&e.call&&e.apply)}function JT(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function ZT(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function eE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)s[t]=n[e+t]}else{const a=t[0],i=t.slice(1),o=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)s[t]=eE(e+t*o,i,n,r)}return s}function tE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return eE(0,e,t,n)}function nE(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function rE(e,t){const n=sE(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function sE(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function aE(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return tE(e,new Float32Array(n));if("int32"===t)return tE(e,new Int32Array(n));if("bool"===t)return tE(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function iE(e){e.forEach((t=>{TT(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function oE(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=n[s]*e[s];return r}function lE(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(e/n[s]),e-=r[s]*n[s];return r[r.length-1]=e,r}function cE(e){return e&&e.then&&"function"===typeof e.then}const uE="tfjsflags";class hE{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=dE,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(pE().getBool("IS_TEST")||pE().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];pE().getBool("IS_TEST")||pE().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(cE(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(uE in e){e[uE].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}}function dE(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function pE(){return mE}let fE,mE=null;function gE(){if(null==fE){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}fE=e}return fE}function yE(e,t){const n=function(){const e=gE();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const vE="Abs",bE="Acos",wE="Acosh",xE="Add",kE="AddN",SE="All",TE="Any",EE="ArgMax",NE="ArgMin",CE="Asin",IE="Asinh",_E="Atan",AE="Atanh",RE="Atan2",DE="AvgPool",OE="AvgPoolGrad",ME="AvgPool3D",PE="AvgPool3DGrad",LE="BatchMatMul",FE="BatchToSpaceND",$E="Bincount",zE="BitwiseAnd",jE="BroadcastTo",UE="BroadcastArgs",BE="Cast",VE="Ceil",WE="ClipByValue",HE="Complex",GE="ComplexAbs",qE="Concat",KE="Conv2D",YE="Conv2DBackpropFilter",XE="Conv2DBackpropInput",QE="Conv3D",JE="Conv3DBackpropFilterV2",ZE="Conv3DBackpropInputV2",eN="Cos",tN="Cosh",nN="Cumprod",rN="Cumsum",sN="CropAndResize",aN="DenseBincount",iN="DepthToSpace",oN="DepthwiseConv2dNative",lN="DepthwiseConv2dNativeBackpropFilter",cN="DepthwiseConv2dNativeBackpropInput",uN="Diag",hN="Dilation2D",dN="Dilation2DBackpropInput",pN="Dilation2DBackpropFilter",fN="Draw",mN="RealDiv",gN="Einsum",yN="Elu",vN="EluGrad",bN="Erf",wN="Equal",xN="Exp",kN="ExpandDims",SN="Expm1",TN="FFT",EN="Fill",NN="FlipLeftRight",CN="Floor",IN="FloorDiv",_N="FusedBatchNorm",AN="GatherV2",RN="GatherNd",DN="Greater",ON="GreaterEqual",MN="Identity",PN="IFFT",LN="Imag",FN="IsFinite",$N="IsInf",zN="IsNan",jN="LeakyRelu",UN="Less",BN="LessEqual",VN="LinSpace",WN="Log",HN="Log1p",GN="LogicalAnd",qN="LogicalNot",KN="LogicalOr",YN="LogicalXor",XN="LogSoftmax",QN="LowerBound",JN="LRN",ZN="LRNGrad",eC="MatrixBandPart",tC="Max",nC="Maximum",rC="MaxPool",sC="MaxPoolGrad",aC="MaxPool3D",iC="MaxPool3DGrad",oC="MaxPoolWithArgmax",lC="Mean",cC="Min",uC="Minimum",hC="MirrorPad",dC="Mod",pC="Multinomial",fC="Multiply",mC="Neg",gC="NotEqual",yC="NonMaxSuppressionV3",vC="NonMaxSuppressionV4",bC="NonMaxSuppressionV5",wC="OnesLike",xC="OneHot",kC="Pack",SC="PadV2",TC="Pool",EC="Pow",NC="Prelu",CC="Prod",IC="RaggedGather",_C="RaggedRange",AC="RaggedTensorToTensor",RC="Range",DC="Real",OC="Reciprocal",MC="Relu",PC="Reshape",LC="ResizeNearestNeighbor",FC="ResizeNearestNeighborGrad",$C="ResizeBilinear",zC="ResizeBilinearGrad",jC="Relu6",UC="Reverse",BC="Round",VC="Rsqrt",WC="ScatterNd",HC="TensorScatterUpdate",GC="SearchSorted",qC="Select",KC="Selu",YC="Slice",XC="Sin",QC="Sinh",JC="Sign",ZC="Sigmoid",eI="Softplus",tI="Sqrt",nI="Sum",rI="SpaceToBatchND",sI="SplitV",aI="Softmax",iI="SparseFillEmptyRows",oI="SparseReshape",lI="SparseSegmentMean",cI="SparseSegmentSum",uI="SparseToDense",hI="SquaredDifference",dI="Square",pI="StaticRegexReplace",fI="StridedSlice",mI="StringNGrams",gI="StringSplit",yI="StringToHashBucketFast",vI="Sub",bI="Tan",wI="Tanh",xI="Tile",kI="TopK",SI="Transform",TI="Transpose",EI="Unique",NI="Unpack",CI="UnsortedSegmentSum",II="UpperBound",_I="ZerosLike",AI="Step",RI="FromPixels",DI="RotateWithOffset",OI="_FusedMatMul",MI="FusedConv2D",PI="FusedDepthwiseConv2D";function LI(){pE().getBool("IS_TEST")||pE().getBool("PROD")||console.warn(...arguments)}function FI(){pE().getBool("IS_TEST")||pE().getBool("PROD")||console.log(...arguments)}const $I=yE("kernelRegistry",(()=>new Map)),zI=yE("gradRegistry",(()=>new Map));function jI(e,t){const n=KI(e,t);return $I.get(n)}function UI(e){return zI.get(e)}function BI(e){const t=$I.entries(),n=[];for(;;){const{done:r,value:s}=t.next();if(r)break;const[a,i]=s,[o]=a.split("_");o===e&&n.push(i)}return n}function VI(e){const{kernelName:t,backendName:n}=e,r=KI(t,n);$I.has(r)&&LI(`The kernel '${t}' for backend '${n}' is already registered`),$I.set(r,e)}function WI(e){const{kernelName:t}=e;zI.has(t)&&pE().getBool("DEBUG")&&LI(`Overriding the gradient for '${t}'`),zI.set(t,e)}function HI(e,t){const n=KI(e,t);if(!$I.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);$I.delete(n)}function GI(e){if(!zI.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);zI.delete(e)}function qI(e,t){BI(e).forEach((e=>{VI(Object.assign({},e,{backendName:t}))}))}function KI(e,t){return`${t}_${e}`}function YI(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var XI=n(8818);const QI=n.n(XI)()||XI;function JI(e){return QI.fromString(e,!0,16)}const ZI=JI("c3a5c85c97cb3127"),e_=JI("b492b66fbe98f273"),t_=JI("9ae16a3b2f90404f");function n_(e){return e.xor(e.shru(47))}function r_(e,t,n){const r=e.slice(t,t+n);return QI.fromBytes(Array.from(r),!0,!0)}function s_(e,t){return r_(e,t,8)}function a_(e,t){return r_(e,t,4)}function i_(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function o_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:JI("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let s=t.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function l_(e,t,n,r){return function(e,t,n,r,s,a){s=s.add(e),a=i_(a.add(s).add(r),21);const i=s;return s=(s=s.add(t)).add(n),a=a.add(i_(s,44)),[s.add(r),a.add(i)]}(s_(e,t),s_(e,t+8),s_(e,t+16),s_(e,t+24),n,r)}function c_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=QI.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=t_.add(2*t),r=s_(e,0).add(t_),s=s_(e,t-8);return o_(i_(s,37).mul(n).add(r),i_(r,25).add(s).mul(n),n)}if(t>=4){const n=t_.add(2*t);return o_(a_(e,0).shl(3).add(t),a_(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return n_(t_.mul(n).xor(ZI.mul(r))).mul(t_)}return t_}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=t_.add(2*t),r=s_(e,0).mul(e_),s=s_(e,8),a=s_(e,t-8).mul(n),i=s_(e,t-16).mul(t_);return o_(i_(r.add(s),43).add(i_(a,30)).add(i),r.add(i_(s.add(t_),18)).add(a),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=t_.add(2*t),r=s_(e,0).mul(t_),s=s_(e,8),a=s_(e,t-8).mul(n),i=s_(e,t-16).mul(t_),o=i_(r.add(s),43).add(i_(a,30)).add(i),l=o_(o,r.add(i_(s.add(t_),18)).add(a),n),c=s_(e,16).mul(n),u=s_(e,24),h=o.add(s_(e,t-32)).mul(n),d=l.add(s_(e,t-24)).mul(n);return o_(i_(c.add(u),43).add(i_(h,30)).add(d),c.add(i_(u.add(r),18)).add(h),n)}(e,t);let r=n,s=n.mul(e_).add(113),a=n_(s.mul(t_).add(113)).mul(t_),i=[QI.UZERO,QI.UZERO],o=[QI.UZERO,QI.UZERO];r=r.mul(t_).add(s_(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=i_(r.add(s).add(i[0]).add(s_(e,l+8)),37).mul(e_),s=i_(s.add(i[1]).add(s_(e,l+48)),42).mul(e_),r=r.xor(o[1]),s=s.add(i[0]).add(s_(e,l+40)),a=i_(a.add(o[0]),33).mul(e_),i=l_(e,l,i[1].mul(e_),r.add(o[0])),o=l_(e,l+32,a.add(o[1]),s.add(s_(e,l+16))),[a,r]=[r,a],l+=64}while(l!==c);const h=e_.add(a.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=i_(r.add(s).add(i[0]).add(s_(e,l+8)),37).mul(h),s=i_(s.add(i[1]).add(s_(e,l+48)),42).mul(h),r=r.xor(o[1].mul(9)),s=s.add(i[0].mul(9).add(s_(e,l+40))),a=i_(a.add(o[0]),33).mul(h),i=l_(e,l,i[1].mul(h),r.add(o[0])),o=l_(e,l+32,a.add(o[1]),s.add(s_(e,l+16))),[a,r]=[r,a],o_(o_(i[0],o[0],h).add(n_(s).mul(ZI)).add(a),o_(i[1],o[1],h).add(r),h)}function u_(e,t){return"string"===t?f_(e):h_([e],t)}function h_(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=y_(e)),pE().getBool("DEBUG")&&BT(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function d_(){return pE().platform.now()}function p_(e,t){return pE().platform.fetch(e,t)}function f_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",pE().platform.encode(e,t)}function m_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",pE().platform.decode(e,t)}function g_(e){return null!=pE().platform.isTypedArray?pE().platform.isTypedArray(e):YI(e)}function y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||cE(e)||null==e||g_(e)&&n)t.push(e);else if(Array.isArray(e)||g_(e))for(let r=0;r<e.length;++r)y_(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let s=0;s<=r;s++)y_(e[s],t,n)}return t}class v_{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new w_)}profileKernel(e,t,n){let r;const s=()=>{r=n()};let a;const i=d_();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const e of r)e.dataSync();a=Promise.resolve({kernelMs:d_()-i})}if(pE().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){const t=r[o];t.data().then((n=>{b_(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((e=>e.kernelMs)),extraInfo:a.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:s,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],s,n[2])}))}))}}function b_(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class w_{logKernelProfile(e,t,n,r,s,a){const i="number"===typeof r?PT(`${r}ms`,9):r.error,o=PT(e,25),l=t.rank,c=t.size,u=PT(t.shape.toString(),14);let h="";for(const d in s){const e=s[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${o}\t%c${i}\t%c${l}D ${u}\t%c${c}\t%c${h}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function x_(e,t,n,r){const s=ZT(t),a=function(e,t,n,r){const s=CT(t),a=r[r.length-1],i=new Array(a).fill(0),o=t.length,l="complex64"===n?E_(e):e;if(o>1)for(let c=0;c<s/a;c++){const e=c*a;for(let t=0;t<a;t++)i[t]=Math.max(i[t],k_(l[e+t],0,n).length)}return i}(e,t,n,s),i=t.length,o=T_(e,t,n,s,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map((e=>"    "+e)).join("\n")),l.join("\n")}function k_(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:qT(e)?`'${e}'`:"bool"===n?S_(e):parseFloat(e.toFixed(7)).toString(),PT(r,t)}function S_(e){return 0===e?"false":"true"}function T_(e,t,n,r,s){let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,o=t[0],l=t.length;if(0===l){if("complex64"===n){return[k_(E_(e)[0],0,n)]}return"bool"===n?[S_(e[0])]:[e[0].toString()]}if(1===l){if(o>20){const t=3*i;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((o-3)*i,o*i));return"complex64"===n&&(r=E_(r),a=E_(a)),["["+r.map(((e,t)=>k_(e,s[t],n))).join(", ")+", ..., "+a.map(((e,t)=>k_(e,s[o-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?E_(e):Array.from(e)).map(((e,t)=>k_(e,s[t],n))).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),h=r[0]*i,d=[];if(o>20){for(let t=0;t<3;t++){const r=t*h,a=r+h;d.push(...T_(e.slice(r,a),c,n,u,s,!1))}d.push("...");for(let t=o-3;t<o;t++){const r=t*h,a=r+h;d.push(...T_(e.slice(r,a),c,n,u,s,t===o-1))}}else for(let m=0;m<o;m++){const t=m*h,r=t+h;d.push(...T_(e.slice(t,r),c,n,u,s,m===o-1))}const p=2===l?",":"";d[0]="["+(o>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(a?"":f),d}function E_(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class N_{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=CT(e),null!=n){const e=n.length;TT(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||UT(t,this.size),this.strides=ZT(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),TT(n.length===this.rank,(()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`));const s=this.locToIndex(n);this.values[s]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const a of t){if(a<0||a>=this.shape[r]){const e=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(e)}r++}let s=t[t.length-1];for(let a=0;a<t.length-1;++a)s+=this.strides[a]*t[a];return this.values[s]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return C_().makeTensor(this.values,this.shape,this.dtype)}}let C_=null,I_=null,__=null;class A_{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=CT(e),this.strides=ZT(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return I_.buffer(this.shape,this.dtype,e)}bufferSync(){return I_.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return tE(this.shape,e,"complex64"===this.dtype)}arraySync(){return tE(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=C_().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>m_(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),C_().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=C_().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>m_(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await C_().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),C_().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return I_.print(this,e)}clone(){return this.throwIfDisposed(),I_.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return x_(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),I_.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),C_().makeVariable(this,e,t,n)}}function R_(){return yE("Tensor",(()=>A_))}Object.defineProperty(A_,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),R_();class D_ extends A_{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!AT(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);C_().disposeTensor(this),this.dataId=e.dataId,C_().incRef(this,null)}dispose(){C_().disposeVariable(this),this.isDisposedInternal=!0}}var O_,M_,P_,L_,F_;Object.defineProperty(D_,Symbol.hasInstance,{value:e=>e instanceof A_&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(O_||(O_={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(M_||(M_={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(P_||(P_={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(L_||(L_={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(F_||(F_={}));const $_={float32:L_,int32:M_,bool:P_,complex64:F_};function z_(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return $_[e][t]}function j_(e){return z_(e,"int32")}function U_(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function B_(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function V_(e,t){if(e.dtype===t.dtype)return[e,t];const n=z_(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function W_(e,t){TT(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}function H_(e,t){return t.some((t=>t.id===e.id))}function G_(e){const t=[];return q_(e,t,new Set),t}function q_(e,t,n){if(null==e)return;if(e instanceof A_)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const s=e;for(const a in s){const e=s[a];n.has(e)||(n.add(e),q_(e,t,n))}}function K_(e){return null!=e.kernelName}class Y_{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class X_{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Y_}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(LI(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new v_(this.backendInstance),!0}setupRegisteredKernels(){BI(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){BI(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof fT||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,LI(`Initialization of backend ${e} failed`),LI(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return LI(`Initialization of backend ${e} failed`),LI(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:s}=this.initializeBackend(n);if(s||r)return{name:n,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,s=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,s,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return X_.nextTensorId++}nextVariableId(){return X_.nextVariableId++}clone(e){const t=J_.runKernel(MN,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return J_.runKernel(BE,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=jI(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let s=0;n.forEach((e=>{s+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-s-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;let i,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=K_(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(K_(e)){const{kernelName:t,inputs:s,attrs:a}=e;null==this.backendName&&this.backend;const l=jI(t,this.backendName);TT(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),i=()=>{const e=this.backend.numDataIds();o=l.kernelFunc({inputs:s,attrs:a,backend:this.backend});const i=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const c=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,s,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,s=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();o=this.tidy((()=>t(this.backend,s)));const n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,h=K_(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,c,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=i()})),r&&this.addTapeNode(l,c,t,h,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map((e=>null!=c[e]?c[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=UI(e);if(null!=r){const e=r.inputsToSave||[],s=r.outputsToSave||[];let a;r.saveAllInputs?(TT(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=n.filter(((e,t)=>s[t]));return a.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let s=e;"string"===n&&qT(e[0])&&(s=e.map((e=>f_(e))));const a=r.write(s,t,n),i=new A_(t,n,a,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(a),t=GT(s);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const s={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(s,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:s}=e,a=new A_(r,s,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const s=new D_(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[s.name])throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*HT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof D_||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*HT(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,s,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:s},o=UI(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=sE(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],s,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=G_(e),n=new Set(t.map((e=>e.id)));for(let s=0;s<this.state.activeScope.track.length;s++){const e=this.state.activeScope.track[s];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(TT(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const s=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));TT(s instanceof A_,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},s={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],a=n.inputs;for(const e in a){const i=a[e];let o=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach((e=>r[e.id]=!0)),o=!0,s[n.id]=!0;break}if(o)break}}const a={};a[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(a[t.outputs[e].id]){for(const e in n)a[n[e].id]=!0,i[t.id]=!0;break}}const o=[];for(let l=0;l<e.length;l++){const t=e[l];if(s[t.id]&&i[t.id]){const e={};for(const s in t.inputs){const n=t.inputs[s];r[n.id]&&(e[s]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,s);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[s.id]=null==n?function(e){const t=rE(CT(e),"float32");return J_.makeTensor(t,e,"float32")}(s.shape):n,function(e,t,n,r){for(let s=t.length-1;s>=0;s--){const a=t[s],i=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(i);for(const t in a.inputs){if(!(t in o))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(o)}.`);const s=n((()=>o[t]()));if("float32"!==s.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${s.dtype}'`);const i=a.inputs[t];if(!AT(s.shape,i.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${s.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=s;else{const t=e[i.id];e[i.id]=r(t,s),t.dispose()}}}}(e,a,(e=>this.tidy(e)),Z_);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:s,grads:r}}))}customGrad(e){var t=this;return TT(QT(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];let a;TT(r.every((e=>e instanceof A_)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const i={};r.forEach(((e,t)=>{i[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(a=e(...r,n),TT(a.value instanceof A_,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),TT(QT(a.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),a.value),backwardsFunc:(e,t)=>{const n=a.gradFunc(e,t),s=Array.isArray(n)?n:[n];TT(s.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),TT(s.every((e=>e instanceof A_)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return s.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=d_(),n=await this.backend.time(e);return n.wallMs=d_()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Y_;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Q_(){const e=gE();if(null==e._tfengine){const t=new hE(e);e._tfengine=new X_(t)}var t;return t=e._tfengine.ENV,mE=t,C_=()=>e._tfengine,e._tfengine}X_.nextTensorId=0,X_.nextVariableId=0;const J_=Q_();function Z_(e,t){const n={a:e,b:t};return J_.runKernel(xE,n)}let eA;function tA(e){eA=e}function nA(e){if(void 0!==eA)return eA;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function rA(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const sA=pE();function aA(e,t){let n=e;if(g_(e))return"string"===t?[]:[e.length];if(U_(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(B_(e))return[e.buffer.size/(null==t?4:HT(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||g_(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&pE().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&iA(e,r,[]),r}function iA(e,t,n){if(n=n||[],!Array.isArray(e)&&!g_(e))return void TT(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));TT(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),TT(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let s=0;s<e.length;++s)iA(e[s],r,n.concat(s))}function oA(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function lA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof R_())return oA(r,e.dtype,t,n),e;let s=XT(e);if("string"!==s&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),oA(r,s,t,n),null==e||!g_(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const a=aA(e,s);g_(e)||Array.isArray(e)||(e=[e]);const i="string"!==s?h_(e,s):y_(e,[],!0);return J_.makeTensor(i,a,s)}function cA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,s)=>lA(e,`${t}[${s}]`,n,r)))}sA.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),sA.registerFlag("IS_BROWSER",(()=>rA())),sA.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),sA.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),sA.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),sA.registerFlag("PROD",(()=>!1)),sA.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>sA.getBool("DEBUG"))),sA.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),sA.registerFlag("IS_TEST",(()=>!1)),sA.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>sA.getBool("DEBUG"))),sA.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),sA.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),sA.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const uA="__op";function hA(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=uA;const s=function(){J_.startScope(n);try{const e=r(...arguments);return cE(e)&&console.error("Cannot return a Promise inside of tidy."),J_.endScope(e),e}catch(e){throw J_.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}const dA=hA({complex_:function(e,t){const n=lA(e,"real","complex"),r=lA(t,"imag","complex");ET(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return J_.runKernel(HE,s)}});function pA(e,t,n,r){if(null==r)r=XT(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(B_(e)||U_(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return J_.backend.createTensorFromGPUData(e,t||n,r)}if(!g_(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){iE(t);const e=CT(t),r=CT(n);TT(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let s=0;s<n.length;++s){const e=n[s],r=s!==n.length-1||e!==CT(t.slice(s));TT(n[s]===t[s]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return g_(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?h_(e,r):y_(e,[],!0),J_.makeTensor(e,t,r)}function fA(e,t,n){return pA(e,t,aA(e,n),n)}const mA={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class gA{static join(e){return new gA(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>g_(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=t+r.byteLength;this.shards.push({buffer:r,start:t,end:s}),t=s}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),s=new Uint8Array(r);let a=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],r=e+a-n.start,o=a,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(s.set(c,o),a+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,a=t(e[s]);if(0===a)return s;a<0?r=s:n=s+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function yA(){pE().set("PROD",!0)}function vA(){pE().set("DEBUG",!0)}function bA(){pE().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function wA(e){pE().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function xA(){J_.disposeVariables()}function kA(){return J_}function SA(){return J_.memory()}function TA(e){return J_.profile(e)}function EA(e,t){return J_.tidy(e,t)}function NA(e){G_(e).forEach((e=>e.dispose()))}function CA(e){return J_.keep(e)}function IA(e){return J_.time(e)}function _A(e){return J_.setBackend(e)}function AA(){return J_.ready()}function RA(){return J_.backendName}function DA(e){J_.removeBackend(e)}function OA(e){return J_.findBackend(e)}function MA(e){return J_.findBackendFactory(e)}function PA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return J_.registerBackend(e,t,n)}function LA(){return J_.backend}function FA(e,t){pE().setPlatform(e,t)}__=wA;const $A=4;async function zA(e,t){const n=[],r=[],s=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<s.length;++a){const i=s[a],o=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${o.dtype}`);const l={name:i,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){const e=new Promise((async e=>{const t=await o.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+$A*t.length,r=new Uint8Array(n);let s=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,s),s+=$A,r.set(e,s),s+=e.length}e(r)}));r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:GA(await Promise.all(r)),specs:n}}function jA(e,t){const n=new gA(e),r={};let s=0;for(const a of t){const e=UA(a,((e,t)=>n.slice(s+e,s+t)));r[a.name]=VA(a,n.slice(s,s+e)),s+=e}return r}function UA(e,t){const n=CT(e.shape);let r;if("quantization"in e){const t=e.quantization;r=mA[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=$A+new Uint32Array(t(e,e+$A))[0];return e}r=mA[e.dtype]}return n*r}async function BA(e,t){const n=CT(e.shape);let r;if("quantization"in e){const t=e.quantization;r=mA[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=$A+new Uint32Array(await t(e,e+$A))[0];return e}r=mA[e.dtype]}return n*r}function VA(e,t){const n=e.name,r=e.dtype,s=e.shape,a=CT(s);let i,o=0;if("quantization"in e){const s=e.quantization;if("uint8"===s.dtype||"uint16"===s.dtype){if(!("min"in s)||!("scale"in s))throw new Error(`Weight ${e.name} with quantization ${s.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==s.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${s.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==r)throw new Error(`Weight ${e.name} is quantized with ${s.dtype} which only supports weights of type float32 not ${r}.`)}const l=mA[s.dtype],c="uint8"===s.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===s.dtype||"uint16"===s.dtype){i=new Float32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];i[e]=t*s.scale+s.min}}else{if("float16"!==s.dtype)throw new Error(`Unsupported quantization type ${s.dtype} for weight type float32.`);{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const s=new ArrayBuffer(4*r.length),a=new Uint32Array(s);for(let i=0;i<r.length;i++){const s=r[i],o=e[n[s>>10]+(1023&s)]+t[s>>10];a[i]=o}return new Float32Array(s)}}();i=e(c)}}else{if("int32"!==r)throw new Error(`Unsupported dtype in weight '${n}': ${r}`);if("uint8"!==s.dtype&&"uint16"!==s.dtype)throw new Error(`Unsupported quantization type ${s.dtype} for weight type int32.`);i=new Int32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];i[e]=Math.round(t*s.scale+s.min)}}o+=a*l}else if("string"===r){const n=CT(e.shape);i=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(o,o+$A))[0];o+=$A;const n=new Uint8Array(t.slice(o,o+e));i.push(n),o+=e}}else{const e=mA[r];if("float32"===r)i=new Float32Array(t);else if("int32"===r)i=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){i=new Float32Array(t);const e=new Float32Array(i.length/2),n=new Float32Array(i.length/2);for(let t=0;t<e.length;t++)e[t]=i[2*t],n[t]=i[2*t+1];const r=fA(e,s,"float32"),a=fA(n,s,"float32"),o=dA(r,a);return r.dispose(),a.dispose(),o}throw new Error(`Unsupported dtype in weight '${n}': ${r}`)}i=new Uint8Array(t)}o+=a*e}return fA(i,s,r)}async function WA(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:s}=await e.read();if(t&&null==s){const e=n-r.byteLength;throw new Error(`Reader is done but ${e} bytes are still expected`)}const a=new Uint8Array(r.length+s.byteLength);a.set(r,0),a.set(new Uint8Array(s),r.length),r=a}return r.buffer}async function HA(e,t){const n={},r=e.getReader();let s=new ArrayBuffer(0);for(const a of t){const e=await BA(a,(async(e,t)=>(s=await WA(r,s,t),s.slice(e,t))));s=await WA(r,s,e);const t=s.slice(0,e);s=s.slice(e);const i=VA(a,t);if(n[a.name]=i,"webgpu"===RA()){const e=LA();"uploadToGPU"in e&&CT(i.shape)>=pE().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(i.dataId)}}return n}function GA(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let s=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),s),s+=e.byteLength})),r.buffer}const qA="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function KA(e){return qA?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function YA(e){return gA.join(e)}function XA(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function QA(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function JA(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function ZA(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),JA(e,n,r)}function eR(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:KA(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:KA(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new gA(e.weightData).byteLength}}function tR(e){const t=[];for(const n of e)t.push(...n.weights);return t}class nR{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==nR.instance&&(nR.instance=new nR),nR.instance}static registerSaveRouter(e){nR.getInstance().saveRouters.push(e)}static registerLoadRouter(e){nR.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return nR.getHandlers(e,"save")}static getLoadHandlers(e,t){return nR.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?nR.getInstance().loadRouters:nR.getInstance().saveRouters).forEach((t=>{const s=t(e,n);null!==s&&r.push(s)})),r}}const rR=e=>nR.registerSaveRouter(e),sR=e=>nR.registerLoadRouter(e),aR=e=>nR.getSaveHandlers(e),iR=(e,t)=>nR.getLoadHandlers(e,t),oR="tensorflowjs",lR="models_store",cR="model_info_store";function uR(){if(!pE().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function hR(e){const t=e.result;t.createObjectStore(lR,{keyPath:"modelPath"}),t.createObjectStore(cR,{keyPath:"modelPath"})}class dR{constructor(e){if(this.indexedDB=uR(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(oR,1);r.onupgradeneeded=()=>hR(r),r.onsuccess=()=>{const s=r.result;if(null==t){const t=s.transaction(lR,"readonly"),r=t.objectStore(lR).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return s.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(s.close(),n(r.error)),t.oncomplete=()=>s.close()}else{t.weightData=gA.join(t.weightData);const r=eR(t),i=s.transaction(cR,"readwrite");let o,l,c=i.objectStore(cR);try{o=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(a){return n(a)}o.onsuccess=()=>{l=s.transaction(lR,"readwrite");const o=l.objectStore(lR);let u;try{u=o.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(a){return n(a)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=i.objectStore(cR);const t=c.delete(this.modelPath);t.onsuccess=()=>(s.close(),n(u.error)),t.onerror=e=>(s.close(),n(u.error))}},o.onerror=e=>(s.close(),n(o.error)),i.oncomplete=()=>{null==l?s.close():l.oncomplete=()=>s.close()}}},r.onerror=e=>n(r.error)}))}}dR.URL_SCHEME="indexeddb://";const pR=e=>{return pE().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dR.URL_SCHEME)?(t=e.slice(dR.URL_SCHEME.length),new dR(t)):null;var t};nR.registerSaveRouter(pR),nR.registerLoadRouter(pR);class fR{constructor(){this.indexedDB=uR()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(oR,1);n.onupgradeneeded=()=>hR(n),n.onsuccess=()=>{const r=n.result,s=r.transaction(cR,"readonly"),a=s.objectStore(cR).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),s.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(dR.URL_SCHEME)?t.slice(dR.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(oR,1);r.onupgradeneeded=()=>hR(r),r.onsuccess=()=>{const s=r.result,a=s.transaction(cR,"readwrite"),i=a.objectStore(cR),o=i.get(e);let l;o.onsuccess=()=>{if(null==o.result)return s.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=i.delete(e),a=()=>{l=s.transaction(lR,"readwrite");const r=l.objectStore(lR).delete(e);r.onsuccess=()=>t(o.result.modelArtifactsInfo),r.onerror=e=>n(o.error)};r.onsuccess=a,r.onerror=e=>(a(),s.close(),n(o.error))}},o.onerror=e=>(s.close(),n(o.error)),a.oncomplete=()=>{null==l?s.close():l.oncomplete=()=>s.close()}},r.onerror=e=>n(r.error)}))}}const mR="/",gR="tensorflowjs_models",yR="info",vR="model_topology",bR="weight_specs",wR="weight_data",xR="model_metadata";function kR(e){return{info:[gR,e,yR].join(mR),topology:[gR,e,vR].join(mR),weightSpecs:[gR,e,bR].join(mR),weightData:[gR,e,wR].join(mR),modelMetadata:[gR,e,xR].join(mR)}}function SR(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function TR(e){const t=e.split(mR);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(mR)}class ER{constructor(e){if(!pE().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=kR(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=eR(e),a=gA.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(qA)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,s=t.length;r<s;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(a));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:s}}catch(t){throw SR(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const s=this.LS.getItem(this.keys.modelMetadata);if(null!=s){const e=JSON.parse(s);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(qA){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(a),t}}ER.URL_SCHEME="localstorage://";const NR=e=>{return pE().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ER.URL_SCHEME)?(t=e.slice(ER.URL_SCHEME.length),new ER(t)):null;var t};nR.registerSaveRouter(NR),nR.registerLoadRouter(NR);class CR{constructor(){TT(pE().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),TT("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=gR+mR,n=mR+yR;for(let r=0;r<this.LS.length;++r){const s=this.LS.key(r);if(s.startsWith(t)&&s.endsWith(n)){e[TR(s)]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){var t;const n=kR(e=(t=e).startsWith(ER.URL_SCHEME)?t.slice(ER.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return SR(n),r}}const IR="://";class _R{constructor(){this.managers={}}static getInstance(){return null==_R.instance&&(_R.instance=new _R),_R.instance}static registerManager(e,t){TT(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(IR)&&(e=e.slice(0,e.indexOf(IR))),TT(e.length>0,(()=>"scheme must not be an empty string."));const n=_R.getInstance();TT(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=_R.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(_R.getInstance().managers)}}function AR(e){if(-1===e.indexOf(IR))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${_R.getSchemes().join(",")}`);return{scheme:e.split(IR)[0],path:e.split(IR)[1]}}async function RR(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];TT(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=nR.getLoadHandlers(e);TT(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),TT(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const s=r[0],a=nR.getSaveHandlers(t);TT(a.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),TT(a.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const i=a[0],o=AR(e).scheme,l=AR(e).path,c=o===AR(e).scheme,u=await s.load();n&&c&&await _R.getManager(o).removeModel(l);const h=await i.save(u);return n&&!c&&await _R.getManager(o).removeModel(l),h.modelArtifactsInfo}async function DR(){const e=_R.getSchemes(),t={};for(const n of e){const e=await _R.getManager(n).listModels();for(const r in e){t[n+IR+r]=e[r]}}return t}async function OR(e){const t=AR(e);return _R.getManager(t.scheme).removeModel(t.path)}async function MR(e,t){return RR(e,t,!1)}async function PR(e,t){return RR(e,t,!0)}class LR{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&pE().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return YI(e)}}if(pE().get("IS_BROWSER")){pE().setPlatform("browser",new LR);try{_R.registerManager(ER.URL_SCHEME,new CR)}catch(UEe){}try{_R.registerManager(dR.URL_SCHEME,new fR)}catch(UEe){}}const FR=()=>n(5817);let $R;class zR{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=pE().global.fetch?pE().global.fetch(e,t):(null==$R&&($R=FR()),$R(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function jR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",iE(e),new N_(e,t,n)}pE().get("IS_NODE")&&!pE().get("IS_BROWSER")&&pE().setPlatform("node",new zR);const UR=hA({cast_:function(e,t){const n=lA(e,"x","cast");if(!VT(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:t};return J_.runKernel(BE,r,s)}});const BR=hA({clone_:function(e){const t={x:lA(e,"x","clone","string_or_numeric")};return J_.runKernel(MN,t)}});function VR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}Q_();I_={buffer:jR,cast:UR,clone:BR,print:VR};const WR=hA({add_:function(e,t){let n=lA(e,"a","add"),r=lA(t,"b","add");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(xE,s)}});const HR=hA({floorDiv_:function(e,t){let n=lA(e,"a","floorDiv"),r=lA(t,"b","floorDiv");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(IN,s)}});const GR=hA({div_:function(e,t){let n=lA(e,"a","div"),r=lA(t,"b","div");if([n,r]=V_(n,r),"int32"===n.dtype&&"int32"===r.dtype)return HR(n,r);const s={a:n,b:r};return J_.runKernel(mN,s,{})}});const qR=hA({mul_:function(e,t){let n=lA(e,"a","mul"),r=lA(t,"b","mul");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(fC,s)}});const KR=hA({sqrt_:function(e){const t={x:lA(e,"x","sqrt","float32")};return J_.runKernel(tI,t)}});const YR=hA({square_:function(e){const t=lA(e,"x","square");return J_.runKernel("Square",{x:t},{})}});const XR=hA({zerosLike_:function(e){const t={x:lA(e,"x","zerosLike")};return J_.runKernel(_I,t)}});function QR(e){return TT(QT(e),(()=>"The f passed in grad(f) must be a function")),(t,n)=>{const r=lA(t,"x","tf.grad","string_or_numeric"),s=null!=n?lA(n,"dy","tf.grad"):null;return J_.tidy((()=>{const{value:t,grads:n}=J_.gradients((()=>e(r)),[r],s);return null!=s&&ET(t.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),rD(n),n[0]}))}}function JR(e){return TT(QT(e),(()=>"The f passed in grads(f) must be a function")),(t,n)=>{TT(Array.isArray(t),(()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"));const r=cA(t,"args","tf.grads","string_or_numeric"),s=null!=n?lA(n,"dy","tf.grads"):null;return J_.tidy((()=>{const{value:t,grads:n}=J_.gradients((()=>e(...r)),r,s);return null!=s&&ET(t.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),rD(n),n}))}}function ZR(e){return TT(QT(e),(()=>"The f passed in valueAndGrad(f) must be a function")),(t,n)=>{TT(t instanceof A_,(()=>"The x passed in valueAndGrad(f)(x) must be a tensor")),TT(null==n||n instanceof A_,(()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"));const{grads:r,value:s}=J_.gradients((()=>e(t)),[t],n);return rD(r),{grad:r[0],value:s}}}function eD(e){return TT(QT(e),(()=>"The f passed in valueAndGrads(f) must be a function")),(t,n)=>{TT(Array.isArray(t)&&t.every((e=>e instanceof A_)),(()=>"The args passed in valueAndGrads(f)(args) must be array of tensors")),TT(null==n||n instanceof A_,(()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"));const r=J_.gradients((()=>e(...t)),t,n);return null!=n&&ET(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),rD(r.grads),r}}function tD(e,t){TT(QT(e),(()=>"The f passed in variableGrads(f) must be a function")),TT(null==t||Array.isArray(t)&&t.every((e=>e instanceof D_)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in J_.registeredVariables)t.push(J_.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,s=t.length;t=t.filter((e=>e.trainable)),TT(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`));const{value:a,grads:i}=J_.gradients(e,t,null,!0);TT(i.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),TT(0===a.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`));const o={};return t.forEach(((e,t)=>{null!=i[t]&&(o[e.name]=i[t])})),null!=r&&r.forEach((e=>o[e.name]=null)),{value:a,grads:o}}function nD(e){return J_.customGrad(e)}function rD(e){if(e.filter((e=>null==e)).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function sD(e,t){if((g_(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&g_(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return pA(e,[],[],t)}const aD=new Map,iD=new Map;class oD{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class lD{constructor(){this.classNameMap={}}static getMap(){return null==lD.instance&&(lD.instance=new lD),lD.instance}static register(e){lD.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function cD(e,t,n){TT(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),TT("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),TT(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return lD.register(e),aD.set(r,e),iD.set(e,r),e}function uD(e){return iD.has(e)?iD.get(e):e.className}class hD extends oD{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:s}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:s[e.name]})));this.applyGradients(e)}else this.applyGradients(s);return NA(s),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return tD(e,t)}dispose(){null!=this.iterations_&&NA(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:sD(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(hD,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class dD extends hD{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=J_.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=J_.registeredVariables[t],s=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:EA((()=>XR(r).variable(s)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:EA((()=>XR(r).variable(s)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;EA((()=>{const e=WR(qR(i,this.rho),qR(YR(a),1-this.rho)),t=qR(GR(KR(WR(o,this.epsilon)),KR(WR(i,this.epsilon))),a),n=WR(qR(o,this.rho),qR(YR(t),1-this.rho));i.assign(e),o.assign(n);const s=WR(qR(t,-this.learningRate),r);r.assign(s)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(NA(this.accumulatedGrads.map((e=>e.variable))),NA(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function pD(e,t,n){iE(e);const r={shape:e,value:t,dtype:n=n||XT(t)};return J_.runKernel(EN,{},r)}class fD extends hD{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=J_.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:EA((()=>pD(r.shape,this.initialAccumulatorValue).variable(e)))}}const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const a=this.accumulatedGrads[n].variable;EA((()=>{const e=WR(a,YR(s));a.assign(e);const t=WR(qR(GR(s,KR(WR(e,J_.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&NA(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const mD=hA({pow_:function(e,t){let n=lA(e,"base","pow"),r=lA(t,"exp","pow");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(EC,s)}});const gD=hA({sub_:function(e,t){let n=lA(e,"a","sub"),r=lA(t,"b","sub");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(vI,s)}});class yD extends hD{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],EA((()=>{this.accBeta1=sD(t).variable(),this.accBeta2=sD(n).variable()})),null==r&&(this.epsilon=J_.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);EA((()=>{const n=gD(1,this.accBeta1),r=gD(1,this.accBeta2);t.forEach(((t,s)=>{const a=J_.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[s]&&(this.accumulatedFirstMoment[s]={originalName:`${t}/m`,variable:EA((()=>XR(a).variable(i)))}),null==this.accumulatedSecondMoment[s]&&(this.accumulatedSecondMoment[s]={originalName:`${t}/v`,variable:EA((()=>XR(a).variable(i)))});const o=Array.isArray(e)?e[s].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[s].variable,c=this.accumulatedSecondMoment[s].variable,u=WR(qR(l,this.beta1),qR(o,1-this.beta1)),h=WR(qR(c,this.beta2),qR(YR(o),1-this.beta2)),d=GR(u,n),p=GR(h,r);l.assign(u),c.assign(h);const f=WR(qR(GR(d,WR(KR(p),this.epsilon)),-this.learningRate),a);a.assign(f)})),this.accBeta1.assign(qR(this.accBeta1,this.beta1)),this.accBeta2.assign(qR(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&NA(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&NA(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),EA((()=>{this.accBeta1.assign(mD(this.beta1,this.iterations_+1)),this.accBeta2.assign(mD(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const vD=hA({abs_:function(e){const t=lA(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return J_.runKernel(GE,e)}{const e={x:t};return J_.runKernel(vE,e)}}});function bD(e,t){const n=e.length,r=[];for(let s=0;s<n;s++){const a=n-1-s,i=e[a]||1;(t[t.length-1-s]||1)>1&&1===i&&r.unshift(a)}return r}function wD(e,t){const n=[];for(let r=0;r<t.length;r++){const s=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==s||1===s&&i>1)&&n.unshift(a)}return n}function xD(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let s=0;s<n;s++){let a=e[e.length-s-1];null==a&&(a=1);let i=t[t.length-s-1];if(null==i&&(i=1),1===a)r[n-s-1]=i;else if(1===i)r[n-s-1]=a;else{if(a!==i){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}r[n-s-1]=a}}return r}const kD=hA({maximum_:function(e,t){let n=lA(e,"a","maximum"),r=lA(t,"b","maximum");[n,r]=V_(n,r),"bool"===n.dtype&&(n=UR(n,"int32"),r=UR(r,"int32")),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(nC,s)}});class SD extends hD{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],EA((()=>{this.iteration=sD(0).variable(),this.accBeta1=sD(t).variable()})),null==r&&(this.epsilon=J_.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);EA((()=>{const n=gD(1,this.accBeta1),r=GR(-this.learningRate,WR(qR(this.iteration,this.decay),1));t.forEach(((t,s)=>{const a=J_.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[s]&&(this.accumulatedFirstMoment[s]={originalName:`${t}/m`,variable:XR(a).variable(i)}),null==this.accumulatedWeightedInfNorm[s]&&(this.accumulatedWeightedInfNorm[s]={originalName:`${t}/v`,variable:XR(a).variable(i)});const o=Array.isArray(e)?e[s].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[s].variable,c=this.accumulatedWeightedInfNorm[s].variable,u=WR(qR(l,this.beta1),qR(o,1-this.beta1)),h=qR(c,this.beta2),d=vD(o),p=kD(h,d);l.assign(u),c.assign(p);const f=WR(qR(GR(r,n),GR(u,WR(p,this.epsilon))),a);a.assign(f)})),this.iteration.assign(WR(this.iteration,1)),this.accBeta1.assign(qR(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&NA(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&NA(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class TD extends hD{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const s=J_.registeredVariables[t];EA((()=>{const e=WR(qR(this.c,r),s);s.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=CA(sD(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class ED extends TD{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=sD(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=J_.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:EA((()=>XR(r).variable(e)))}}const s=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&EA((()=>{let e;const t=WR(qR(this.m,s),a);e=this.useNesterov?WR(qR(this.c,WR(a,qR(t,this.m))),r):WR(qR(this.c,t),r),s.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&NA(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class ND extends hD{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,null==r&&(this.epsilon=J_.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=J_.registeredVariables[t],s=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:EA((()=>XR(r).variable(s)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:EA((()=>XR(r).variable(s)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:EA((()=>XR(r).variable(s)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;EA((()=>{const e=WR(qR(i,this.decay),qR(YR(a),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,s=WR(qR(t,this.decay),qR(a,1-this.decay)),l=GR(qR(a,this.learningRate),KR(gD(e,WR(YR(s),this.epsilon)))),c=WR(qR(o,this.momentum),l);i.assign(e),t.assign(s),o.assign(c);const u=gD(r,c);r.assign(u)}else{const e=WR(qR(i,this.decay),qR(YR(a),1-this.decay)),t=WR(qR(o,this.momentum),GR(qR(a,this.learningRate),KR(WR(e,this.epsilon))));i.assign(e),o.assign(t);const n=gD(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&NA(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&NA(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&NA(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const CD=[dD,fD,yD,SD,ED,ND,TD];function ID(e){return new Promise((e=>setTimeout(e))).then(e)}class _D{constructor(e){if(!pE().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(_D.URL_SCHEME)&&(e=e.slice(_D.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=gA.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=QA(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),s=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=r,await ID((()=>s.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await ID((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:eR(e)}}}}_D.URL_SCHEME="downloads://";class AD{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),s=r.modelTopology;if(null==s)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:s});const a=ZA(r,(e=>this.loadWeights(e)));e(a)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const a of e)t.push(...a.weights),n.push(...a.paths);const r=this.checkManifestAndWeightFiles(e),s=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(s).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const s=new FileReader;s.onload=e=>{const t=e.target.result;n(t)},s.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>XA(e.name))),r={};for(const s of e)s.paths.forEach((e=>{const s=XA(e);if(-1!==t.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(t.push(s),-1===n.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(s)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function RD(e){return new AD(e)}function DD(e,t,n,r){!function(e){TT(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){TT(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),TT(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),TT(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let s=0;return Promise.all(e.map((a=>(a.then((a=>{const i=n+ ++s/e.length*(r-n);return t(i),a})),a))))}async function OD(e,t){null==t&&(t={});const n=null==t.fetchFunc?pE().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),s=(null==t.onProgress?await Promise.all(r):await DD(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(s):await DD(s,t.onProgress,.5,1)}async function MD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return PD((e=>OD(e,{requestInit:r})))(e,t,n)}function PD(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const s=t.map((()=>!1)),a={},i=null!=r?r.map((()=>!1)):[],o=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,c=mA[l]*CT(e.shape),u=()=>{s[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((t,n)=>{t===e.name&&(u(),i[n]=!0)})):u(),o.push(e.name),n+=c}))})),!i.every((e=>e))){const e=r.filter(((e,t)=>!i[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),c=[];l.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;c.push(t)}))}));const u=await e(c),h={};let d=0;return l.forEach((e=>{const n=t[e].paths.length,r=new gA(u.slice(d,d+n));a[e].forEach((e=>{const t=jA(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)h[n]=t[n]})),d+=n})),h}}nR.registerSaveRouter((e=>pE().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_D.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new _D(e)}(e.slice(_D.URL_SCHEME.length)):null));class LD{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(TT("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=pE().platform.fetch,TT(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&TT(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=QA(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=gA.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:eR(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(jEe){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return ZA(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=tR(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?pE().platform.fetch:t.fetchFunc;let s,a=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;a<e.length;){if(!s){const n=(await r(e[a],t.requestInit,{isBinary:!0})).body;s=n.getReader()}const{done:o,value:l}=await s.read();if(!o)return void n.enqueue(l);a++,s=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,a/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),s=n>t?e.substring(n):"";return[r+"/",s]}(t),s=this.weightPathPrefix||n,a=[],i=[];for(const o of e)for(const e of o.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):a.push(s+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(i)),a}async loadWeights(e){const t=await this.getWeightUrls(e);return[tR(e),await OD(t,this.loadOptions)]}}function FD(e){return null!=e.match(LD.URL_SCHEME_REGEX)}LD.URL_SCHEME_REGEX=/^https?:\/\//;const $D=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>FD(e))):FD(e),n)return zD(e,t)}return null};function zD(e,t){return new LD(e,t)}function jD(e,t){return zD(e,t)}nR.registerSaveRouter($D),nR.registerLoadRouter($D);class UD{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class BD{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class VD{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function WD(e,t,n,r){return new VD(HD(...arguments))}function HD(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new UD(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new UD({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new UD({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function GD(e){return new BD(e)}function qD(e){return new BD(e)}const KD=hA({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=lA(e,"a","matMul"),a=lA(t,"b","matMul");[s,a]=V_(s,a);const i={a:s,b:a},o={transposeA:n,transposeB:r};return J_.runKernel(LE,i,o)}});const YD=hA({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:lA(e,"indices","oneHot","int32")},i={dtype:s,depth:t,onValue:n,offValue:r};return J_.runKernel(xC,a,i)}});const XD=hA({imag_:function(e){const t={input:lA(e,"input","imag")};return J_.runKernel(LN,t)}});const QD=hA({neg_:function(e){const t={x:lA(e,"x","neg")};return J_.runKernel(mC,t)}});const JD=hA({real_:function(e){const t={input:lA(e,"input","real")};return J_.runKernel(DC,t)}});const ZD=hA({transpose_:function(e,t,n){const r=lA(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),TT(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{TT(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const s={x:r},a={perm:t};return"complex64"===r.dtype?EA((()=>{let e=JD(r),t=XD(r);return e=J_.runKernel(TI,{x:e},a),t=J_.runKernel(TI,{x:t},a),n&&(t=QD(t)),dA(e,t)})):J_.runKernel(TI,s,a)}});const eO=hA({confusionMatrix_:function(e,t,n){const r=lA(e,"labels","confusionMatrix"),s=lA(t,"predictions","confusionMatrix");TT(null==n||n>0&&Number.isInteger(n),(()=>`If provided, numClasses must be a positive integer, but got ${n}`)),TT(1===r.rank,(()=>`Expected the rank of labels to be 1, but got ${r.rank}`)),TT(1===s.rank,(()=>`Expected the rank of predictions to be 1, but got ${s.rank}`)),TT(r.shape[0]===s.shape[0],(()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`)),TT(n>0&&Number.isInteger(n),(()=>`numClasses is required to be a positive integer, but got ${n}`));const a=YD(UR(r,"int32"),n),i=YD(UR(s,"int32"),n),o=ZD(a),l=KD(o,i);return UR(l,"int32")}});function tO(e,t,n){if(NT(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=aA(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return pA(e,t,r,n)}let nO,rO=!1;function sO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)s=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);o=!0}if(null!=jI(RI,J_.backendName)){const n={pixels:e},r={numChannels:t};return J_.runKernel(RI,n,r)}const[l,c]=s?[e.videoWidth,e.videoHeight]:[e.width,e.height];let u,h;if(i)u=e.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)u=e.data;else if(a||s||o){if(null==nO)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");nO=new OffscreenCanvas(1,1).getContext("2d")}else nO=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});nO.canvas.width=l,nO.canvas.height=c,nO.drawImage(e,0,0,l,c),u=nO.getImageData(0,0,l,c).data}if(4===t)h=new Int32Array(u);else{const e=l*c;h=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)h[n*t+e]=u[4*n+e]}return tO(h,[c,l,t],"int32")}function aO(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function iO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=null;if(pE().getBool("WRAP_TO_IMAGEBITMAP")&&aO(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(jEe){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return sO(n,t)}function oO(e){if(2!==e.rank&&3!==e.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);const t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}async function lO(e,t){let n=lA(e,"img","toPixels");if(!(e instanceof A_)){const e=n;n=UR(e,"int32"),e.dispose()}oO(n);const[r,s]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2],i=await n.data(),o="float32"===n.dtype?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const e=[0,0,0,255];for(let r=0;r<a;r++){const t=i[c*a+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===a?(e[0]=t*o,e[1]=t*o,e[2]=t*o):e[r]=t*o}const t=4*c;l[t+0]=Math.round(e[0]),l[t+1]=Math.round(e[1]),l[t+2]=Math.round(e[2]),l[t+3]=Math.round(e[3])}if(null!=t){if(!rO){null!=jI(fN,J_.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),rO=!0)}t.width=s,t.height=r;const e=t.getContext("2d"),n=new ImageData(l,s,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}function cO(e,t,n){let r=lA(e,"img","draw");if(!(e instanceof A_)){const e=r;r=UR(e,"int32"),e.dispose()}oO(r),function(e){const t=(null===e||void 0===e?void 0:e.alpha)||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}(null===n||void 0===n?void 0:n.imageOptions);const s={image:r},a={canvas:t,options:n};J_.runKernel(fN,s,a)}const uO=hA({fromPixels_:sO});function hO(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===CT(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const s=t.shape,a=s[s.length-1];let i=1;for(let h=0;h<s.length-1;++h)i*=s[h];const o=e.shape,l=s.slice();l.pop();let c=1;for(let h=a;h<n;++h)c*=o[h],l.push(o[h]);const u=[...ZT(e.shape).map((e=>e/c)),1].slice(0,a);return[l,i,c,u]}function dO(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(a+` update.rank < ${s}. `);if(e.length<r+(n.rank-s))throw new Error(a+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+e.length-r)throw new Error(a+" update.rank != "+(s+e.length-r));for(let i=0;i<s;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==e[i+r])throw new Error(a+` updates.shape[${i+s}] (${n.shape[i+s]}) != shape[${i+s}] (${e[i+s]})`)}function pO(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}dO(n,t,e)}function fO(e,t,n){const r=t.shape.length,s=r>1?t.shape[r-1]:1,a=n.length;let i=1;for(let l=s;l<a;++l)i*=n[l];const o=s<1?1:s;return{sliceRank:s,numUpdates:CT(t.shape)/o,sliceSize:i,strides:[...ZT(n.slice(0,s)),1],outputSize:CT(n)}}const mO=-2,gO=-1;function yO(e,t,n){const r=e.shape.length;TT(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),TT(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let s=0;s<r;++s)TT(t[s]+n[s]<=e.shape[s],(()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${t[s]+n[s]}) would overflow input.shape[${s}] (${e.shape[s]})`))}function vO(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function bO(e,t,n){const r=[];for(let s=0;s<e.length;s++)r[s]=Math.ceil((t[s]-e[s])/n[s]);return r}function wO(e,t,n,r){const s=[...e];for(let a=s.length;a<r.length;a++)s.push(1);for(let a=0;a<n;a++)0===a?s[t]=1:(s.splice(t,0,1),s.pop());return s}function xO(e,t,n){return n<=e?n:n-(t-1)}function kO(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function SO(e,t,n,r,s,a,i,o,l){const c=e.length;let u=new Array(c),h=new Array(c),d=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=TO(i,l,c,r,e),h=EO(o,l,c,s,e),d=wO(a,l,c,e)}else for(let p=0;p<c;p++)u[p]=CO(i,r,a,e,p,l),h[p]=IO(o,s,a,e,p,l),d[p]=NO(a,p,l);return{begin:u,end:h,strides:d}}function TO(e,t,n,r,s){const a=[...s],i=kO(n,t);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const s=xO(t,n,o);let i=r[s];e&1<<s&&(i=0),a[o]=i}return a}function EO(e,t,n,r,s){const a=[...s],i=kO(n,t);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const s=xO(t,n,o);let i=r[s];e&1<<s&&(i=Number.MAX_SAFE_INTEGER),a[o]=i}for(let o=0;o<a.length;o++){const e=s[o];a[o]<0&&(a[o]+=e),a[o]=vT(0,a[o],s[o])}return a}function NO(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function CO(e,t,n,r,s,a){let i=t[s];const o=n[s]||1;(e&1<<s||a&1<<s||null==i)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=vT(0,i,l-1),i}function IO(e,t,n,r,s,a){let i=t[s];const o=n[s]||1;(e&1<<s||a&1<<s||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=o>0?vT(0,i,l):vT(-1,i,l-1),i}function _O(e,t,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(t[s]>0||n[s]!==e[s])return!1;return!0}function AO(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function RO(e,t,n){let r;const s=e.shape.length;let a;return r="number"===typeof t?[t,...new Array(s-1).fill(0)]:t.length<s?t.concat(new Array(s-t.length).fill(0)):t.slice(),r.forEach((e=>{TT(-1!==e,(()=>"slice() does not support negative begin indexing."))})),a=null==n?new Array(s).fill(-1):"number"===typeof n?[n,...new Array(s-1).fill(-1)]:n.length<s?n.concat(new Array(s-n.length).fill(-1)):n,a=a.map(((t,n)=>t>=0?t:(TT(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,a]}function DO(e,t,n,r,s,a,i,o,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let v=0;v<h.dims;v++)u&&0!==(1<<v&o)&&h.numAddAxisAfterEllipsis++,1<<v&i&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const s=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<s;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(mO),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(gO),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let v=0;v<e.length;++v){if(0===d.strides[v])throw Error(`strides[${v}] must be non-zero`);const t=!!(d.shrinkAxisMask&1<<v),n=e[v];if(-1===n){g.push(t?1:-1);continue}const r=[d.beginMask&1<<v,d.endMask&1<<v],s=[d.strides[v]>0?0:-1,d.strides[v]>0?n:n-1];if(t&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[v];const a=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(t){const e=d.begin[v]<0?n+d.begin[v]:d.begin[v];if(d.begin[v]=e,d.end[v]=d.begin[v]+1,e<0||e>=n)throw Error(`slice index ${d.begin[v]} of dimension ${v} out of bounds.`)}else d.begin[v]=OO(d.begin[v],0,d.strides[v],n,r,s),d.end[v]=OO(d.end[v],1,d.strides[v],n,r,s);const e=1===d.strides[v]&&0===d.begin[v]&&d.end[v]===n;p=p&&e,f=f&&(0===v&&1===d.strides[v]||e)}else p=p&&1===d.strides[v]&&a,f=f&&(0===v&&1===d.strides[v]||a);let i,o=!1;if(d.beginValid&&d.endValid?(i=d.end[v]-d.begin[v],o=!0):t?(i=1,o=!0):a&&n>=0&&(i=d.strides[v]<0?-n:n,o=!0),o){let e;e=0===i||i<0!==d.strides[v]<0?0:Math.trunc(i/d.strides[v])+(i%d.strides[v]!==0?1:0),g.push(e)}else g.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const e=d.finalShapeGatherIndices[v];e>=0?y.push(g[e]):e===mO&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==mO)),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function OO(e,t,n,r,s,a){if(s[t])return n>0?a[t]:a[t+1&1];{const t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}const MO=.001,PO=.1;function LO(e,t,n){return null==n&&(n=FO()),$O(e,t,((e,t)=>BO(e,t,n)))}function FO(){return 32===J_.backend.floatPrecision()?MO:PO}function $O(e,t,n){let r=!0;if((g_(e)||g_(t))&&(r=!1),g_(e)&&g_(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=aA(e),r=aA(t);if(!AT(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const s=g_(e)?e:y_(e),a=g_(t)?t:y_(t);if(s.length!==a.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${a.length}.\nActual:   ${s}.\nExpected: ${a}.`);for(let i=0;i<a.length;++i){const e=s[i],t=a[i];if(!n(e,t))throw new Error(`Arrays differ: actual[${i}] = ${e}, expected[${i}] = ${t}.\nActual:   ${s}.\nExpected: ${a}.`)}"undefined"!==typeof expect&&expect().nothing()}function zO(e,t){e().then((()=>t.fail()),(()=>t())),"undefined"!==typeof expect&&expect().nothing()}function jO(e,t){const n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return qT(e)||qT(e[0])||qT(t)||qT(t[0])?$O(e,n,((e,t)=>e==t)):$O(e,t,((e,t)=>BO(e,t,0)))}function UO(e,t,n){if(null==n&&(n=FO()),!BO(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);"undefined"!==typeof expect&&expect().nothing()}function BO(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function VO(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function WO(e,t){const n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let s=0;s<r.length;s++)if(n[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${n[s]} instead`)}function HO(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?HO(n):e[t]=f_(n)}return e}function GO(e){const t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((e=>{t.addEventListener("loadeddata",(n=>e(t))),t.load()}))}async function qO(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise((t=>{e.requestVideoFrameCallback(t)}))}const KO="4.22.0";class YO{static sgd(e){return new TD(e)}static momentum(e,t){return new ED(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new ND(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new yD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new dD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new SD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new fD(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}const XO=hA({acos_:function(e){const t={x:lA(e,"x","acos")};return J_.runKernel(bE,t)}});const QO=hA({acosh_:function(e){const t={x:lA(e,"x","acosh")};return J_.runKernel(wE,t)}});const JO=hA({addN_:function(e){TT(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),TT(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>lA(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!AT(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return J_.runKernel(kE,r)}});const ZO=hA({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:lA(e,"x","all","bool")},s={axis:t,keepDims:n};return J_.runKernel(SE,r,s)}});const eM=hA({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:lA(e,"x","any","bool")},s={axis:t,keepDims:n};return J_.runKernel(TE,r,s)}});const tM=hA({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:lA(e,"x","argMax")},r={axis:t};return J_.runKernel(EE,n,r)}});const nM=hA({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:lA(e,"x","argMin")},r={axis:t};return J_.runKernel(NE,n,r)}});const rM=hA({asin_:function(e){const t={x:lA(e,"x","asin")};return J_.runKernel(CE,t)}});const sM=hA({asinh_:function(e){const t={x:lA(e,"x","asinh")};return J_.runKernel(IE,t)}});const aM=hA({atan_:function(e){const t={x:lA(e,"x","atan")};return J_.runKernel(_E,t)}});const iM=hA({atan2_:function(e,t){let n=lA(e,"a","atan2"),r=lA(t,"b","atan2");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(RE,s)}});const oM=hA({atanh_:function(e){const t={x:lA(e,"x","atanh")};return J_.runKernel(AE,t)}});function lM(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5?arguments[5]:void 0;return hM(e,[...t,e[3]],n,a,r,null,null,xM(s))}function cM(e,t,n,r,s,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[o,l]=fM(t);let c;if("channelsLast"===i)c=[o,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);c=[o,l,e[1],e[1]]}return hM(e,c,n,r,s,a,!1,i)}function uM(e,t,n,r,s,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[o,l,c]=mM(t);let u,h;if("NDHWC"===i)h="channelsLast",u=[o,l,c,e[4],e[4]];else{if("NCDHW"!==i)throw new Error(`Unknown dataFormat ${i}`);h="channelsFirst",u=[o,l,c,e[1],e[1]]}return dM(e,u,n,r,s,!1,h,a)}function hM(e,t,n,r,s,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,h]=[-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,h]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,h,c,u]=e}const[d,p,,f]=t,[m,g]=fM(n),[y,v]=fM(r),b=gM(d,y),w=gM(p,v),{padInfo:x,outHeight:k,outWidth:S}=function(e,t,n,r,s,a,i,o,l){let c,u,h;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const s=function(e,t,n,r,s){null==r&&(r=pM(e,t,n));const a=e[0],i=e[1],o=yM((a-t+2*r)/n+1,s),l=yM((i-t+2*r)/n+1,s);return[o,l]}([t,n],a,r,e,o);u=s[0],h=s[1]}else if("same"===e){u=Math.ceil(t/r),h=Math.ceil(n/s);const e=Math.max(0,(u-1)*r+a-t),o=Math.max(0,(h-1)*s+i-n),l=Math.floor(e/2),d=e-l,p=Math.floor(o/2);c={top:l,bottom:d,left:p,right:o-p,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-a+1)/r),h=Math.ceil((n-i+1)/s);else{if("object"!==typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=yM((t-a+d+p)/r+1,o),h=yM((n-i+f+m)/s+1,o)}}return{padInfo:c,outHeight:u,outWidth:h}}(s,c,u,m,g,b,w,a,o),T=i?f*h:f;let E;return"channelsFirst"===o?E=[l,T,k,S]:"channelsLast"===o&&(E=[l,k,S,T]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:h,outHeight:k,outWidth:S,outChannels:T,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:y,dilationWidth:v,inShape:e,outShape:E,filterShape:t}}function dM(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",o=arguments.length>7?arguments[7]:void 0,[l,c,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,c,u,h,d]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[l,d,c,u,h]=e}const[p,f,m,,g]=t,[y,v,b]=mM(n),[w,x,k]=mM(r),S=gM(p,w),T=gM(f,x),E=gM(m,k),{padInfo:N,outDepth:C,outHeight:I,outWidth:_}=function(e,t,n,r,s,a,i,o,l,c,u){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,r,s,a){null==s&&(s=pM(e,t[0],r[0]));const i=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*s>=t[o]&&(i[o]=yM((e[o]-t[o]+2*s)/r[o]+1,a));return i}([t,n,r,1],[o,l,c],1,[s,a,i],e,u);d=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{d=Math.ceil(t/s),p=Math.ceil(n/a),f=Math.ceil(r/i);const e=(d-1)*s+o-t,u=(p-1)*a+l-n,m=(f-1)*i+c-r,g=Math.floor(e/2),y=e-g,v=Math.floor(u/2),b=u-v,w=Math.floor(m/2);h={top:v,bottom:b,left:w,right:m-w,front:g,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(s,c,u,h,y,v,b,S,T,E,o),A=a?g*d:g;let R;return"channelsFirst"===i?R=[l,A,C,I,_]:"channelsLast"===i&&(R=[l,C,I,_,A]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:h,inChannels:d,outDepth:C,outHeight:I,outWidth:_,outChannels:A,padInfo:N,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:T,effectiveFilterWidth:E,dilationDepth:w,dilationHeight:x,dilationWidth:k,inShape:e,outShape:R,filterShape:t}}function pM(e,t,n){const r=gM(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function fM(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function mM(e){return"number"===typeof e?[e,e,e]:e}function gM(e,t){return t<=1?e:e+(e-1)*(t-1)}function yM(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function vM(e){const[t,n,r]=fM(e);return 1===t&&1===n&&1===r}function bM(e,t){return vM(e)||vM(t)}function wM(e){return fM(e).every((e=>e>0))}function xM(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function kM(e,t,n){if(null!=n){if("string"===typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"===typeof t)TT(RT(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!==typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{TT(RT(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const SM=hA({reshape_:function(e,t){const n={x:lA(e,"x","reshape","string_or_numeric")},r={shape:t};return J_.runKernel(PC,n,r)}});const TM=hA({avgPool_:function(e,t,n,r,s){const a=lA(e,"x","avgPool","float32");TT(bM(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let i=a,o=!1;3===a.rank&&(o=!0,i=SM(a,[1,a.shape[0],a.shape[1],a.shape[2]])),TT(4===i.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`)),kM("avgPool",r,s);const l={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:s};let u=J_.runKernel(DE,l,c);return u=UR(u,a.dtype),o?SM(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const EM=hA({avgPool3d_:function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=lA(e,"x","avgPool3d","float32");let o=i,l=!1;4===i.rank&&(l=!0,o=SM(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),TT(5===o.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`)),TT("NDHWC"===a,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),TT("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`)),kM("avgPool3d",r,s);const c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:s,dataFormat:a};let h=J_.runKernel(ME,c,u);return h=UR(h,o.dtype),l?SM(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const NM=hA({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;TT(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=cA(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return BR(n[0]);const r=n,s={axis:t};return J_.runKernel(qE,r,s)}});const CM=hA({sigmoid_:function(e){const t={x:lA(e,"x","sigmoid","float32")};return J_.runKernel(ZC,t)}});const IM=hA({slice_:function(e,t,n){const r=lA(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const s={x:r},a={begin:t,size:n};return J_.runKernel(YC,s,a)}});const _M=hA({tanh_:function(e){const t={x:lA(e,"x","tanh","float32")};return J_.runKernel(wI,t)}});const AM=hA({basicLSTMCell_:function(e,t,n,r,s,a){const i=lA(e,"forgetBias","basicLSTMCell"),o=lA(t,"lstmKernel","basicLSTMCell"),l=lA(n,"lstmBias","basicLSTMCell"),c=lA(r,"data","basicLSTMCell"),u=lA(s,"c","basicLSTMCell"),h=lA(a,"h","basicLSTMCell"),d=NM([c,h],1),p=KD(d,o),f=WR(p,l),m=f.shape[0],g=f.shape[1]/4,y=[m,g],v=IM(f,[0,0],y),b=IM(f,[0,g],y),w=IM(f,[0,2*g],y),x=IM(f,[0,3*g],y),k=WR(qR(CM(v),_M(b)),qR(u,CM(WR(i,w))));return[k,qR(_M(k),CM(x))]}});const RM=hA({batchToSpaceND_:function(e,t,n){const r=lA(e,"x","batchToSpaceND"),s=t.reduce(((e,t)=>e*t));TT(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),TT(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),TT(r.shape[0]%s===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${s}`));const a={x:r},i={blockShape:t,crops:n};return J_.runKernel(FE,a,i)}});const DM=hA({batchNorm_:function(e,t,n,r,s,a){null==a&&(a=.001);const i=lA(e,"x","batchNorm"),o=lA(t,"mean","batchNorm"),l=lA(n,"variance","batchNorm");let c,u;null!=s&&(c=lA(s,"scale","batchNorm")),null!=r&&(u=lA(r,"offset","batchNorm")),TT(o.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),TT(null==u||o.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),TT(null==c||o.rank===c.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const h=function(e){let t;return t=0===e.rank||1===e.rank?SM(e,[1,1,1,e.size]):2===e.rank?SM(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?SM(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),d={x:h,scale:c,offset:u,mean:o,variance:l},p={varianceEpsilon:a},f=J_.runKernel(_N,d,p);return SM(f,i.shape)}});const OM=hA({batchNorm2d_:function(e,t,n,r,s,a){const i=lA(e,"x","batchNorm"),o=lA(t,"mean","batchNorm"),l=lA(n,"variance","batchNorm");let c,u;return null!=s&&(c=lA(s,"scale","batchNorm")),null!=r&&(u=lA(r,"offset","batchNorm")),TT(2===i.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`)),TT(2===o.rank||1===o.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`)),TT(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=c&&TT(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`)),null!=u&&TT(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`)),DM(i,o,l,u,c,a)}});const MM=hA({batchNorm3d_:function(e,t,n,r,s,a){const i=lA(e,"x","batchNorm"),o=lA(t,"mean","batchNorm"),l=lA(n,"variance","batchNorm");let c,u;return null!=s&&(c=lA(s,"scale","batchNorm")),null!=r&&(u=lA(r,"offset","batchNorm")),TT(3===i.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`)),TT(3===o.rank||1===o.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`)),TT(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=c&&TT(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`)),null!=u&&TT(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`)),DM(i,o,l,u,c,a)}});const PM=hA({batchNorm4d_:function(e,t,n,r,s,a){const i=lA(e,"x","batchNorm"),o=lA(t,"mean","batchNorm"),l=lA(n,"variance","batchNorm");let c,u;return null!=s&&(c=lA(s,"scale","batchNorm")),null!=r&&(u=lA(r,"offset","batchNorm")),TT(4===i.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`)),TT(4===o.rank||1===o.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`)),TT(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=c&&TT(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`)),null!=u&&TT(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`)),DM(i,o,l,u,c,a)}});const LM=hA({bincount_:function(e,t,n){const r=lA(e,"x","bincount"),s=lA(t,"weights","bincount");TT("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),TT(n>=0,(()=>`size must be non-negative, but got ${n}.`)),TT(s.size===r.size||0===s.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`));const a={x:r,weights:s},i={size:n};return J_.runKernel($E,a,i)}});const FM=hA({bitwiseAnd_:function(e,t){const n=lA(e,"x","bitwiseAnd"),r=lA(t,"y","bitwiseAnd");if(!AT(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return J_.runKernel(zE,s)}});const $M=hA({broadcastArgs_:function(e,t){const n=lA(e,"s0","broadcastArgs","int32"),r=lA(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return J_.runKernel(UE,s)}});const zM=hA({broadcastTo_:function(e,t){let n=lA(e,"broadcastTo","x");const r=n.shape;if(iE(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=SM(n,e)}const s=n.shape,a=Array.from(t);for(let l=t.length-1;l>=0;l--)if(s[l]===t[l])a[l]=1;else if(1!==n.shape[l])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(0===a.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return BR(n);const i={x:n},o={reps:a};return J_.runKernel(xI,i,o)}});const jM=hA({ceil_:function(e){const t={x:lA(e,"x","ceil","float32")};return J_.runKernel(VE,t)}});const UM=hA({clipByValue_:function(e,t,n){const r=lA(e,"x","clipByValue");if(TT(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return pD(r.shape,t,r.dtype);const s={x:r},a={clipValueMin:t,clipValueMax:n};return J_.runKernel(WE,s,a)}});const BM=hA({concat1d_:function(e){return NM(e,0)}});const VM=hA({concat2d_:function(e,t){return NM(e,t)}});const WM=hA({concat3d_:function(e,t){return NM(e,t)}});const HM=hA({concat4d_:function(e,t){return NM(e,t)}});const GM=hA({conv2d_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const o=lA(e,"x","conv2d","float32"),l=lA(t,"filter","conv2d","float32");let c=o,u=!1;3===o.rank&&(u=!0,c=SM(o,[1,o.shape[0],o.shape[1],o.shape[2]])),TT(4===c.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`)),TT(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),kM("conv2d",r,i);const h="NHWC"===s?c.shape[3]:c.shape[1];TT(h===l.shape[2],(()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`)),TT(bM(n,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),TT(wM(a),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),TT(wM(n),(()=>"Error in conv2D: Strides should be larger than 0."));const d={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},f=J_.runKernel(KE,d,p);return u?SM(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const qM=hA({conv1d_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=lA(e,"x","conv1d"),l=lA(t,"filter","conv1d");let c=o,u=!1;2===o.rank&&(u=!0,c=SM(o,[1,o.shape[0],o.shape[1]])),TT(3===c.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`)),TT(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),kM("conv1d",r,i),TT(c.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),TT(bM(n,a),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`)),TT(wM(a),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),TT(wM(n),(()=>"Error in conv1D: Stride should be larger than 0.")),TT("NWC"===s,(()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`));const h=SM(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=SM(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=GM(d,h,[1,n],r,"NHWC",[1,a],i);return SM(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const KM=hA({conv2DBackpropInput_:function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;TT(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let o=e,l=t,c=!1;3===t.rank&&(c=!0,l=SM(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),TT(4===o.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`)),TT(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),TT(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const u="NHWC"===a?o[3]:o[1],h="NHWC"===a?l.shape[3]:l.shape[1];TT(u===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`)),TT(h===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`)),kM("conv2dDerInput",s,i);const d={dy:l,filter:n},p={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,inputShape:o},f=J_.runKernel(XE,d,p);return c?SM(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const YM=hA({conv2dTranspose_:function(e,t,n,r,s,a){const i=lA(e,"x","conv2dTranspose"),o=lA(t,"filter","conv2dTranspose");return KM(n,i,o,r,s,"NHWC",a)}});const XM=hA({conv3d_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=lA(e,"x","conv3d"),o=lA(t,"filter","conv3d");let l=i,c=!1;4===i.rank&&(c=!0,l=SM(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),TT(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),TT(5===o.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`)),TT(l.shape[4]===o.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`)),TT(bM(n,a),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),TT("NDHWC"===s,(()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`)),TT(wM(a),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),TT(wM(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:l,filter:o},h={strides:n,pad:r,dataFormat:s,dilations:a},d=J_.runKernel(QE,u,h);return c?SM(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const QM=hA({conv3DBackpropInput_:function(e,t,n,r,s){TT(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let a=e,i=t,o=!1;4===t.rank&&(o=!0,i=SM(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const l=a[4],c=i.shape[4];TT(5===a.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`)),TT(5===i.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`)),TT(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),TT(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),TT(c===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`));const u={dy:i,filter:n},h={pad:s,strides:r,inputShape:a},d=J_.runKernel(ZE,u,h);return o?SM(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const JM=hA({conv3dTranspose_:function(e,t,n,r,s){const a=lA(e,"x","conv3dTranspose"),i=lA(t,"filter","conv3dTranspose");return QM(n,a,i,r,s)}});const ZM=hA({cos_:function(e){const t={x:lA(e,"x","cos","float32")};return J_.runKernel(eN,t)}});const eP=hA({cosh_:function(e){const t={x:lA(e,"x","cosh","float32")};return J_.runKernel(tN,t)}});const tP=hA({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s={x:lA(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return J_.runKernel(nN,s,a)}});const nP=hA({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s={x:lA(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return J_.runKernel(rN,s,a)}});const rP=hA({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=lA(e,"x","denseBincount"),a=lA(t,"weights","denseBincount");TT("int32"===s.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`)),TT(s.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`)),TT(n>=0,(()=>`size must be non-negative, but got ${n}.`)),TT(a.size===s.size||0===a.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${a.shape}.`));const i={x:s,weights:a},o={size:n,binaryOutput:r};return J_.runKernel(aN,i,o)}});const sP=hA({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=lA(e,"x","depthToSpace","float32"),s="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];TT(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),TT(s*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),TT(a*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),TT(i%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`));const o={x:r},l={blockSize:t,dataFormat:n};return J_.runKernel(iN,o,l)}});const aP=hA({depthwiseConv2d_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const o=lA(e,"x","depthwiseConv2d","float32"),l=lA(t,"filter","depthwiseConv2d","float32");let c=o,u=!1;3===o.rank&&(u=!0,c=SM(o,[1,o.shape[0],o.shape[1],o.shape[2]])),TT(4===c.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`)),TT(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const h="NHWC"===s?c.shape[3]:c.shape[1];TT(h===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`)),kM("depthwiseConv2d",r,i);const d={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},f=J_.runKernel(oN,d,p);return u?SM(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const iP=hA({diag_:function(e){const t={x:lA(e,"x","diag")};return J_.runKernel(uN,t)}});const oP=hA({dilation2d_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=lA(e,"x","dilation2d"),o=lA(t,"filter","dilation2d");TT(3===i.rank||4===i.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`)),TT(3===o.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`)),TT("NHWC"===a,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`));let l=i,c=!1;3===i.rank&&(l=SM(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),TT(l.shape[3]===o.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`));const u={x:l,filter:o},h={strides:n,pad:r,dilations:s},d=J_.runKernel(hN,u,h);return c?SM(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const lP=hA({equal_:function(e,t){let n=lA(e,"a","equal","string_or_numeric"),r=lA(t,"b","equal","string_or_numeric");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(wN,s)}});const cP=hA({where_:function(e,t,n){const r=lA(t,"a","where"),s=lA(n,"b","where"),a=lA(e,"condition","where","bool"),i=xD(xD(a.shape,r.shape),s.shape),o={condition:zM(a,i),t:zM(r,i),e:zM(s,i)};return J_.runKernel(qC,o)}});const uP=hA({divNoNan_:function(e,t){let n=lA(e,"a","div"),r=lA(t,"b","div");[n,r]=V_(n,r);const s=GR(n,r),a=XR(s),i=lP(r,a);return cP(i,a,s)}});const hP=hA({dot_:function(e,t){const n=lA(e,"t1","dot"),r=lA(t,"t2","dot");TT((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const s=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(TT(s===a,(()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${a}.`)),1===n.rank&&1===r.rank){const e=SM(n,[1,-1]),t=SM(r,[-1,1]),s=KD(e,t);return SM(s,[])}if(1===n.rank&&2===r.rank){const e=SM(n,[1,-1]),t=SM(r,[r.shape[0],r.shape[1]]),s=KD(e,t);return SM(s,[s.size])}if(2===n.rank&&1===r.rank){const e=SM(r,[-1,1]),t=KD(n,e);return SM(t,[t.size])}{const e=SM(r,[r.shape[0],r.shape[1]]);return KD(n,e)}}});const dP=hA({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(((e,t)=>lA(e,`tensors${t}`,"einsum"))),a={equation:e};return J_.runKernel(gN,s,a)}});const pP=hA({elu_:function(e){const t={x:lA(e,"x","elu","float32")};return J_.runKernel(yN,t)}});const fP=hA({ensureShape_:function(e,t){const n=lA(e,"x","ensureShape","string_or_numeric");if(!_T(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}});const mP=hA({erf_:function(e){let t=lA(e,"x","erf");TT("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=UR(t,"float32"));const n={x:t};return J_.runKernel(bN,n)}});function gP(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function yP(e,t,n){const r=e.length+t.length,s=[];let a=0,i=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?s.push(e[a++]):s.push(t[i++]);return s}function vP(e,t){const n=[],r=e.length;for(let s=0;s<r;s++)-1===t.indexOf(s)&&n.push(e[s]);return[n,t.map((t=>e[t]))]}function bP(e,t){return yP(e,t.map((e=>1)),t)}function wP(e,t,n){TT(gP(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function xP(e,t){if(gP(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function kP(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function SP(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const TP=hA({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:lA(e,"x","max")},s={reductionIndices:t,keepDims:n};return J_.runKernel(tC,r,s)}});const EP=hA({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:lA(e,"x","min")},s={axis:t,keepDims:n};return J_.runKernel(cC,r,s)}});const NP=hA({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=lA(e,"x","sum");"bool"===r.dtype&&(r=UR(r,"int32"));const s={x:r},a={axis:t,keepDims:n};return J_.runKernel(nI,s,a)}});function CP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return vD(e);if(1!==e.rank&&null===n)return CP(SM(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return NP(vD(e),n);if(t===1/0)return TP(vD(e),n);if(t===-1/0)return EP(vD(e),n);if("euclidean"===t||2===t)return KR(NP(mD(vD(e),sD(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return TP(NP(vD(e),n[0]),n[1]-1);if(t===1/0)return TP(NP(vD(e),n[1]),n[0]);if(t===-1/0)return EP(NP(vD(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return KR(NP(YR(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const IP=hA({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=CP(e=lA(e,"x","norm"),t,n);let a=s.shape;if(r){const t=$T(n,e.shape);a=bP(s.shape,t)}return SM(s,a)}});const _P=hA({euclideanNorm_:function(e){return IP(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const AP=hA({exp_:function(e){const t={x:lA(e,"x","exp")};return J_.runKernel(xN,t)}});const RP=hA({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=lA(e,"x","expandDims","string_or_numeric");TT(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},s={dim:t};return J_.runKernel(kN,r,s)}});const DP=hA({expm1_:function(e){const t={x:lA(e,"x","expm1")};return J_.runKernel(SN,t)}});const OP=hA({tile_:function(e,t){const n=lA(e,"x","tile","string_or_numeric");TT(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},s={reps:t};return J_.runKernel(xI,r,s)}});const MP=hA({eye_:function(e,t,n){null==t&&(t=e);const r=jR([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),s=e<=t?e:t;for(let i=0;i<s;++i)r.set(1,i,i);const a=SM(r.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return OP(RP(a,0),[n[0],1,1]);if(2===n.length)return OP(RP(RP(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return OP(RP(RP(RP(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});const PP=hA({floor_:function(e){const t={x:lA(e,"x","floor","float32")};return J_.runKernel(CN,t)}});const LP=hA({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s={x:lA(e,"x","gather"),indices:lA(t,"indices","gather","int32")},a={axis:n,batchDims:r};return J_.runKernel(AN,s,a)}});const FP=hA({greater_:function(e,t){let n=lA(e,"a","greater","string_or_numeric"),r=lA(t,"b","greater","string_or_numeric");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(DN,s)}});const $P=hA({greaterEqual_:function(e,t){let n=lA(e,"a","greaterEqual","string_or_numeric"),r=lA(t,"b","greaterEqual","string_or_numeric");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(ON,s)}});const zP=hA({isFinite_:function(e){const t={x:lA(e,"x","isFinite")};return J_.runKernel(FN,t)}});const jP=hA({isInf_:function(e){const t={x:lA(e,"x","isInf")};return J_.runKernel($N,t)}});const UP=hA({isNaN_:function(e){const t={x:lA(e,"x","isNaN")};return J_.runKernel(zN,t)}});const BP=hA({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:lA(e,"x","leakyRelu")},r={alpha:t};return J_.runKernel(jN,n,r)}});const VP=hA({less_:function(e,t){let n=lA(e,"a","less","string_or_numeric"),r=lA(t,"b","less","string_or_numeric");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(UN,s)}});const WP=hA({lessEqual_:function(e,t){let n=lA(e,"a","lessEqual","string_or_numeric"),r=lA(t,"b","lessEqual","string_or_numeric");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(BN,s)}});function HP(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return J_.runKernel(VN,{},r)}const GP=hA({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const a=lA(e,"x","localResponseNormalization");TT(4===a.rank||3===a.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${a.rank}.`)),TT(RT(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let i=a,o=!1;3===a.rank&&(o=!0,i=SM(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},c={depthRadius:t,bias:n,alpha:r,beta:s},u=J_.runKernel(JN,l,c);return o?SM(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const qP=hA({log_:function(e){const t={x:lA(e,"x","log","float32")};return J_.runKernel(WN,t)}});const KP=hA({log1p_:function(e){const t={x:lA(e,"x","log1p")};return J_.runKernel(HN,t)}});const YP=hA({softplus_:function(e){const t={x:lA(e,"x","softplus")};return J_.runKernel(eI,t)}});const XP=hA({logSigmoid_:function(e){const t=lA(e,"x","logSigmoid"),n=nD((e=>({value:QD(YP(QD(e))),gradFunc:t=>qR(t,CM(QD(e)))})));return n(t)}});const QP=hA({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=lA(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=nD(((e,n)=>{const r=TP(e,t,!0),s=gD(e,r),a=gD(UR(s,"float32"),qP(NP(AP(s),t,!0)));n([a]);return{value:a,gradFunc:(e,n)=>{const[r]=n,s=AP(r);return gD(e,qR(NP(e,t,!0),s))}}}));return r(n)}});const JP=hA({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=lA(e,"x","logSumExp"),s=$T(t,r.shape),a=TP(r,s,!0),i=gD(r,a),o=AP(i),l=NP(o,s),c=qP(l),u=WR(SM(a,c.shape),c);if(n){const e=bP(u.shape,s);return SM(u,e)}return u}});const ZP=hA({logicalAnd_:function(e,t){const n=lA(e,"a","logicalAnd","bool"),r=lA(t,"b","logicalAnd","bool");xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(GN,s)}});const eL=hA({logicalNot_:function(e){const t={x:lA(e,"x","logicalNot","bool")};return J_.runKernel(qN,t)}});const tL=hA({logicalOr_:function(e,t){const n=lA(e,"a","logicalOr","bool"),r=lA(t,"b","logicalOr","bool");xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(KN,s)}});const nL=hA({logicalXor_:function(e,t){const n=lA(e,"a","logicalXor","bool"),r=lA(t,"b","logicalXor","bool");return xD(n.shape,r.shape),ZP(tL(e,t),eL(ZP(e,t)))}}),rL=2147483648;const sL=hA({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=lA(e,"sortedSequence","searchSorted"),s=lA(t,"values","searchSorted"),a=r.shape[r.shape.length-1],i=s.shape[s.shape.length-1],o=SM(r,[-1,a]),l=SM(s,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(CT(l.shape)>=rL)throw new Error("values tensor size must less than 2147483648");if(o.shape[1]>=rL)throw new Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},u={side:n};return J_.runKernel(GC,c,u)}});function aL(e,t){return sL(e,t,"left")}const iL=hA({maxPool_:function(e,t,n,r,s){const a=lA(e,"x","maxPool");let i=a,o=!1;3===a.rank&&(o=!0,i=SM(a,[1,a.shape[0],a.shape[1],a.shape[2]])),TT(4===i.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`)),TT(bM(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),kM("maxPool",r,s);const l={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:s},u=J_.runKernel(rC,l,c);return o?SM(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const oL=hA({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=lA(e,"x","maxPool3d");let o=i,l=!1;4===i.rank&&(l=!0,o=SM(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),TT(5===o.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`)),TT("NDHWC"===a,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),kM("maxPool3d",r,s);const c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:s,dataFormat:a},h=J_.runKernel(aC,c,u);return l?SM(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const lL=hA({maxPoolWithArgmax_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a={x:lA(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:s},o=J_.runKernel(oC,a,i);return{result:o[0],indexes:o[1]}}});const cL=hA({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:lA(e,"x","mean")},s={axis:t,keepDims:n};return J_.runKernel(lC,r,s)}});function uL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(iE(e),"complex64"===t){const t=uL(e,"float32"),n=uL(e,"float32");return dA(t,n)}const n=sE(CT(e),t);return J_.makeTensor(n,e,t)}function hL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(iE(e),"complex64"===t){const t=hL(e,"float32"),n=uL(e,"float32");return dA(t,n)}const n=rE(CT(e),t);return J_.makeTensor(n,e,t)}function dL(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=lA(e,"x","meshgrid",e instanceof A_?e.dtype:"float32");if(void 0===t)return[r];let s=lA(t,"y","meshgrid",t instanceof A_?t.dtype:"float32");const a=CT(r.shape),i=CT(s.shape);return"xy"===n?(r=SM(r,[1,-1]),s=SM(s,[-1,1]),[KD(hL([i,1],r.dtype),r),KD(s,hL([1,a],s.dtype))]):(r=SM(r,[-1,1]),s=SM(s,[1,-1]),[KD(r,hL([1,i],r.dtype)),KD(hL([a,1],s.dtype),s)])}const pL=hA({minimum_:function(e,t){let n=lA(e,"a","minimum"),r=lA(t,"b","minimum");[n,r]=V_(n,r),"bool"===n.dtype&&(n=UR(n,"int32"),r=UR(r,"int32")),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(uC,s)}});const fL=hA({mirrorPad_:function(e,t,n){TT("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=lA(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");TT(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const s="reflect"===n?1:0;for(let o=0;o<r.rank;o++)TT(2===t[o].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),TT(t[o][0]>=0&&t[o][0]<=r.shape[o]-s&&t[o][1]>=0&&t[o][1]<=r.shape[o]-s,(()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`));const a={paddings:t,mode:n},i={x:r};return J_.runKernel(hC,i,a)}});const mL=hA({mod_:function(e,t){let n=lA(e,"a","mod"),r=lA(t,"b","mod");[n,r]=V_(n,r);const s={a:n,b:r};return J_.runKernel(dC,s)}});const gL=hA({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=$T(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=lA(e,"x","moments")).shape),r=cL(e,n,t);let s=r.shape;t||(s=bP(r.shape,n));const a=YR(gD(UR(e,"float32"),SM(r,s)));return{mean:r,variance:cL(a,n,t)}}});const yL=hA({multiRNNCell_:function(e,t,n,r){const s=lA(t,"data","multiRNNCell"),a=cA(n,"c","multiRNNCell"),i=cA(r,"h","multiRNNCell");let o=s;const l=[];for(let h=0;h<e.length;h++){const t=e[h](o,a[h],i[h]);l.push(t[0]),l.push(t[1]),o=t[1]}const c=[],u=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),u.push(l[h+1]);return[c,u]}});const vL=hA({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=lA(e,"logits","multinomial"),a=s.size,i=s.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const o={logits:1===i?SM(s,[1,-1]):s},l={numSamples:t,seed:n,normalized:r},c=J_.runKernel(pC,o,l);return 1===i?SM(c,[c.size]):c}});const bL=hA({notEqual_:function(e,t){let n=lA(e,"a","notEqual","string_or_numeric"),r=lA(t,"b","notEqual","string_or_numeric");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(gC,s)}});const wL=hA({onesLike_:function(e){const t={x:lA(e,"x","onesLike")};return J_.runKernel(wC,t)}});const xL=hA({outerProduct_:function(e,t){const n=lA(e,"v1","outerProduct"),r=lA(t,"v2","outerProduct");TT(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const s=SM(n,[-1,1]),a=SM(r,[1,-1]);return KD(s,a)}});const kL=hA({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=lA(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:t,constantValue:n},a={x:r};return J_.runKernel(SC,a,s)}});const SL=hA({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return TT(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),kL(e,[t],n)}});const TL=hA({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return TT(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kL(e,t,n)}});const EL=hA({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return TT(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kL(e,t,n)}});const NL=hA({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return TT(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kL(e,t,n)}});const CL=hA({spaceToBatchND_:function(e,t,n){const r=lA(e,"x","spaceToBatchND");TT(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),TT(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),TT(r.shape.reduce(((e,r,s)=>s>0&&s<=t.length?e&&(r+n[s-1][0]+n[s-1][1])%t[s-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const s={x:r},a={blockShape:t,paddings:n};return J_.runKernel(rI,s,a)}});const IL=hA({pool_:function(e,t,n,r,s,a,i){null==s&&(s=[1,1]),null==a&&(a=1),0===r&&(r="valid");const o=lA(e,"x","maxPool");let l=o,c=!1;3===o.rank&&(c=!0,l=SM(o,[1,o.shape[0],o.shape[1],o.shape[2]])),TT(bM(a,s),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${s}'`));const u=cM(l.shape,t,a,s,r),h=[u.dilationHeight,u.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),s=r.map((e=>Math.floor(e/2))),a=r.map(((e,t)=>e-s[t]));return r.map(((e,t)=>[s[t],a[t]]))}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,m]=function(e,t,n){const r=n.map((e=>e[0])),s=n.map((e=>e[1])),a=e.concat(r,s),i=t.map(((e,t)=>(e-a[t]%e)%e)),o=s.map(((e,t)=>e+i[t])),l=t.map(((e,t)=>[r[t],o[t]])),c=t.map(((e,t)=>[0,i[t]]));return[l,c]}([u.inHeight,u.inWidth],h,d),g=p?r:"valid",y=p?l:CL(l,h,f),v=("avg"===n?()=>TM(y,t,a,g,i):()=>iL(y,t,a,g,i))(),b=p?v:RM(v,h,m);return c?SM(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});const _L=hA({prelu_:function(e,t){const n={x:lA(e,"x","prelu"),alpha:lA(t,"alpha","prelu")};return J_.runKernel(NC,n)}});const AL=hA({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=lA(e,"x","prod");"bool"===r.dtype&&(r=UR(r,"int32"));const s={x:r},a={axis:t,keepDims:n};return J_.runKernel(CC,s,a)}});const RL=hA({raggedGather_:function(e,t,n,r){const s={paramsNestedSplits:e.map(((e,t)=>lA(e,`tensors${t}`,"raggedGather","int32"))),paramsDenseValues:lA(t,"paramsDenseValues","raggedGather"),indices:lA(n,"indices","raggedGather","int32")},a={outputRaggedRank:r},i=J_.runKernel(IC,s,a);return{outputNestedSplits:i.slice(0,i.length-1),outputDenseValues:i[i.length-1]}}});const DL=hA({raggedRange_:function(e,t,n){const r=lA(e,"starts","raggedRange"),s={starts:r,limits:lA(t,"limits","raggedRange",r.dtype),deltas:lA(n,"deltas","raggedRange",r.dtype)},a=J_.runKernel(_C,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}});const OL=hA({raggedTensorToTensor_:function(e,t,n,r,s){const a=lA(e,"shape","raggedTensorToTensor","int32"),i=lA(t,"values","raggedTensorToTensor"),o={shape:a,values:i,defaultValue:lA(n,"defaultValue","raggedTensorToTensor",i.dtype),rowPartitionTensors:r.map(((e,t)=>lA(e,`tensors${t}`,"raggedTensorToTensor","int32")))},l={rowPartitionTypes:s};return J_.runKernel(AC,o,l)}});const ML=hA({rand_:function(e,t,n){iE(e);const r=CT(e);let s=null;if(null==n||"float32"===n)s=new Float32Array(r);else if("int32"===n)s=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);s=new Uint8Array(r)}for(let a=0;a<r;a++)s[a]=t();return J_.makeTensor(s,e,n)}});var PL=n(4334);class LL{constructor(e,t,n,r,s){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=s||Math.random();this.random=PL.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,s,a;do{r=2*this.random()-1,s=2*this.random()-1,a=r*r+s*s}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*s*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class FL{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const s=r||Math.random();this.randu=PL.alea(s.toString()),this.randn=new LL(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,s,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),s=this.randu(),s<t||Math.log(s)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class $L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=PL.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const zL=hA({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",s=arguments.length>4?arguments[4]:void 0;if(iE(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const a=new FL(t,n,r,s),i=jR(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}});const jL=hA({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(iE(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const a=new LL(t,n,r,!1,s),i=jR(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}});const UL=hA({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error(`Unsupported data type ${t}`);return jL(e,0,1,t,n)}});const BL=hA({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",s=arguments.length>4?arguments[4]:void 0;iE(e);const a=jR(e,r),i=new $L(t,n,null,s);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}});const VL=hA({randomUniformInt_:function(e,t,n,r){return BL(e,t,n,"int32",r)}});function WL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const s={start:e,stop:t,step:n,dtype:r};return J_.runKernel(RC,{},s)}const HL=hA({reciprocal_:function(e){const t={x:lA(e,"x","reciprocal")};return J_.runKernel(OC,t)}});const GL=hA({relu_:function(e){const t={x:lA(e,"x","relu")};return J_.runKernel(MC,t)}});const qL=hA({relu6_:function(e){const t={x:lA(e,"x","relu6")};return J_.runKernel(jC,t)}});const KL=hA({reverse_:function(e,t){const n={x:lA(e,"x","reverse")},r={dims:t};return J_.runKernel(UC,n,r)}});const YL=hA({reverse1d_:function(e){const t=lA(e,"x","reverse");return TT(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),KL(t,0)}});const XL=hA({reverse2d_:function(e,t){const n=lA(e,"x","reverse");return TT(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),KL(n,t)}});const QL=hA({reverse3d_:function(e,t){const n=lA(e,"x","reverse");return TT(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),KL(n,t)}});const JL=hA({reverse4d_:function(e,t){const n=lA(e,"x","reverse");return TT(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),KL(n,t)}});const ZL=hA({round_:function(e){const t={x:lA(e,"x","round")};return J_.runKernel(BC,t)}});const eF=hA({rsqrt_:function(e){const t={x:lA(e,"x","rsqrt","float32")};return J_.runKernel(VC,t)}});const tF=hA({selu_:function(e){const t={x:lA(e,"x","selu")};return J_.runKernel(KC,t)}});const nF=hA({separableConv2d_:function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const o=lA(e,"x","separableConv2d"),l=lA(t,"depthwiseFilter","separableConv2d"),c=lA(n,"pointwiseFilter","separableConv2d");let u=o,h=!1;if(3===o.rank&&(h=!0,u=SM(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");TT(4===u.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`)),TT(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),TT(4===c.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),TT(1===c.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`)),TT(1===c.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`));const d=l.shape[2],p=l.shape[3];TT(c.shape[2]===d*p,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${c.shape[2]}.`));const f=aP(u,l,r,s,i,a),m=GM(f,c,1,"valid",i);return h?SM(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const rF=async function(e,t){const n=lA(e,"x","setdiff1d"),r=lA(t,"y","setdiff1d");TT(n.dtype===r.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`)),TT(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),TT(1===r.rank,(()=>`y should be 1D tensor, but got y (${r.shape}).`));const s=await n.data(),a=await r.data(),i=new Set(a);let o=0;for(let u=0;u<s.length;u++)i.has(s[u])||o++;const l=new N_([o],n.dtype),c=new N_([o],"int32");for(let u=0,h=0;u<s.length;u++)i.has(s[u])||(l.values[h]=s[u],c.values[h]=u,h++);return[l.toTensor(),c.toTensor()]};const sF=hA({sign_:function(e){const t={x:lA(e,"x","sign")};return J_.runKernel(JC,t)}});const aF=hA({sin_:function(e){const t={x:lA(e,"x","sin","float32")};return J_.runKernel(XC,t)}});const iF=hA({sinh_:function(e){const t={x:lA(e,"x","sinh")};return J_.runKernel(QC,t)}});const oF=hA({slice1d_:function(e,t,n){const r=lA(e,"x","slice1d");return TT(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),IM(r,[t],[n])}});const lF=hA({slice2d_:function(e,t,n){const r=lA(e,"x","slice2d");return TT(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),IM(r,t,n)}});const cF=hA({slice3d_:function(e,t,n){const r=lA(e,"x","slice3d");return TT(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),IM(r,t,n)}});const uF=hA({slice4d_:function(e,t,n){const r=lA(e,"x","slice4d");return TT(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),IM(r,t,n)}});const hF=hA({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=lA(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},s={dim:t};return J_.runKernel(aI,r,s)}});const dF=hA({fft_:function(e){TT("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return J_.runKernel(TN,t)}});const pF=hA({ifft_:function(e){TT("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return J_.runKernel(PN,t)}});const fF=hA({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const s=SM(e,[n,t]);r=pF(s)}else{const s=[n,2*(t-1)],a=SM(JD(e),[n,t]),i=SM(XD(e),[n,t]),o=KL(IM(a,[0,1],[n,t-2]),1),l=qR(KL(IM(i,[0,1],[n,t-2]),1),sD(-1)),c=NM([a,o],1),u=NM([i,l],1),h=SM(dA(c,u),[s[0],s[1]]);r=pF(h)}if(r=JD(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=SM(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const mF=hA({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:lA(e,"x","split")},s={numOrSizeSplits:t,axis:n};return J_.runKernel(sI,r,s)}});const gF=hA({rfft_:function(e,t){TT("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let s;if(null!=t&&t<n){const r=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,s=IM(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,s=NM([e,uL(r)],e.shape.length-1),n=t}else s=e;const a=XR(s),i=SM(dA(s,a),[r,n]),o=dF(i),l=Math.floor(n/2)+1,c=JD(o),u=XD(o),h=mF(c,[l,n-l],c.shape.length-1),d=mF(u,[l,n-l],u.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,SM(dA(h[0],d[0]),p)}});const yF=hA({squaredDifference_:function(e,t){let n=lA(e,"a","squaredDifference"),r=lA(t,"b","squaredDifference");[n,r]=V_(n,r),xD(n.shape,r.shape);const s={a:n,b:r};return J_.runKernel(hI,s,{})}});const vF=hA({squeeze_:function(e,t){const n=lA(e,"x","squeeze","string_or_numeric");return SM(n,zT(n.shape,t).newShape)}});const bF=hA({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=cA(e,"tensors","stack","string_or_numeric");TT(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&TT(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,s={axis:t};return J_.runKernel(kC,r,s)}});const wF=hA({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:lA(e,"x","step")},r={alpha:t};return J_.runKernel(AI,n,r)}});const xF=hA({stridedSlice_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:lA(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return J_.runKernel(fI,c,u)}});const kF=hA({tan_:function(e){const t={x:lA(e,"x","tan","float32")};return J_.runKernel(bI,t)}});function SF(e,t){NT(e);const n=aA(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return pA(e,null,n,t)}function TF(e,t,n){if(NT(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=aA(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return pA(e,t,r,n)}function EF(e,t,n){if(NT(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=aA(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return pA(e,t,r,n)}function NF(e,t,n){if(NT(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=aA(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return pA(e,t,r,n)}function CF(e,t,n){if(NT(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=aA(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return pA(e,t=t||r,r,n)}const IF=hA({tensorScatterUpdate_:function(e,t,n){const r=lA(e,"tensor","tensorScatterupdate"),s=lA(t,"indices","tensorScatterupdate","int32"),a=lA(n,"updates","tensorScatterupdate");if(pO(a,s,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const i={tensor:r,indices:s,updates:a};return J_.runKernel(HC,i,{})}});const _F=hA({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=lA(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${t}`);const a={x:r},i={k:t,sorted:n},[o,l]=J_.runKernel(kI,a,i);return{values:o,indices:l}}});const AF=hA({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(iE(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new LL(t,n,r,!0,s),i=jR(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}});const RF=hA({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=lA(e,"x","unique","string_or_numeric");TT(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},s={axis:t},[a,i]=J_.runKernel(EI,r,s);return{values:a,indices:i}}});const DF=hA({unsortedSegmentSum_:function(e,t,n){const r=lA(e,"x","unsortedSegmentSum"),s=lA(t,"segmentIds","unsortedSegmentSum","int32");TT(RT(n),(()=>"numSegments must be of dtype int"));const a={x:r,segmentIds:s},i={numSegments:n};return J_.runKernel(CI,a,i)}});const OF=hA({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=lA(e,"x","unstack","string_or_numeric");TT(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},s={axis:t};return J_.runKernel(NI,r,s)}});function MF(e,t){return sL(e,t,"right")}function PF(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return J_.makeVariable(e,t,n,r)}function LF(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=jR(e,"int32"),s=jR([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const t=r.indexToLoc(n[a]),i=a*e.length;s.values.set(t,i)}return s.toTensor()}const FF=async function(e){const t=lA(e,"condition","whereAsync","bool"),n=await t.data(),r=LF(t.shape,n);return e!==t&&t.dispose(),r};const $F=async function(e,t,n){const r=lA(e,"tensor","boolMask"),s=lA(t,"mask","boolMask","bool"),a=null==n?0:n,i=s.rank,o=r.shape;TT(i>0,(()=>"mask cannot be scalar")),ET(o.slice(a,a+i),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=a;m<a+i;m++)l*=o[m];const c=o.slice(0,a).concat([l],o.slice(a+i)),u=SM(r,c),h=SM(s,[-1]),d=await FF(h),p=vF(d,[1]),f=LP(u,p,a);return e!==r&&r.dispose(),t!==s&&s.dispose(),p.dispose(),u.dispose(),h.dispose(),d.dispose(),f};const zF=hA({movingAverage_:function(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const a=lA(e,"v","movingAverage"),i=lA(t,"x","movingAverage"),o=lA(n,"decay","movingAverage");W_(a,i),TT(AT(a.shape,i.shape),(()=>"Shape mismatch in v and x"));const l=sD(1),c=gD(l,o);let u=qR(gD(i,a),c);if(s){TT(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=lA(r,"step","movingAverage");u=GR(u,gD(l,mD(o,e)))}return WR(a,u)}});const jF=hA({scatterND_:function(e,t,n){iE(n);const r=lA(e,"indices","scatterND","int32"),s=lA(t,"updates","scatterND");pO(s,r,n);const a={indices:r,updates:s},i={shape:n};return J_.runKernel(WC,a,i)}});const UF=hA({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;iE(n);const s=lA(e,"sparseIndices","sparseToDense","int32"),a=lA(t,"sparseValues","sparseToDense","string_or_numeric"),i=lA(r,"defaultValue","sparseToDense",a.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const s=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==s))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${s}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,a,n,i);const o={sparseIndices:s,sparseValues:a,defaultValue:i},l={outputShape:n};return J_.runKernel(uI,o,l)}});const BF=hA({gatherND_:function(e,t){const n=lA(t,"indices","gatherND","int32"),r={params:lA(e,"x","gatherND","string_or_numeric"),indices:n};return J_.runKernel(RN,r)}});const VF=hA({dropout_:function(e,t,n,r){const s=lA(e,"x","dropout");if(TT("float32"===s.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`)),TT(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof A_?s.clone():s;const a=function(e,t){if(null==t)return e.shape.slice();if(AT(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(s,n),i=1-t,o=GR(PP(WR(BL(a,0,1,"float32",r),i)),i);return qR(s,o)}});function WF(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function HF(e,t,n){const r=1-e%2,s=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+r-1);s[a]=t-n*Math.cos(i)}return SF(s,"float32")}const GF=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=lA(e,"predictions","inTopK"),s=lA(t,"targets","inTopK");TT(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),TT(r.rank-1===s.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`)),ET(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];TT(n>0&&n<=a,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`));const i=await r.data(),o=await s.data(),[l,c]=[i.length/a,a],u=jT("bool",l);for(let h=0;h<l;h++){const e=h*c,t=i.subarray(e,e+c),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort(((e,t)=>t.value-e.value)),u[h]=0;for(let s=0;s<n;s++)if(r[s].index===o[h]){u[h]=1;break}}return e!==r&&r.dispose(),t!==s&&s.dispose(),fA(u,s.shape,"bool")};const qF=hA({conv2DBackpropFilter_:function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=SM(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=SM(t,[1,t.shape[0],t.shape[1],t.shape[2]])),TT(4===o.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`)),TT(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),TT(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const c="NHWC"===a?o.shape[3]:o.shape[1],u="NHWC"===a?l.shape[3]:l.shape[1];TT(c===n[2],(()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`)),TT(u===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`)),kM("conv2dDerFilter",s,i);const h={x:o,dy:l},d={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,filterShape:n};return J_.runKernel(YE,h,d)}});function KF(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return qR(e,wF(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function YF(e,t){let n=t;const r=wD(e.shape,t.shape);return r.length>0&&(n=NP(n,r)),SM(n,e.shape)}function XF(e,t,n,r){if("linear"===t)return e;if("relu"===t)return GL(e);if("elu"===t)return pP(e);if("relu6"===t)return qL(e);if("prelu"===t)return _L(e,n);if("leakyrelu"===t)return BP(e,r);if("sigmoid"===t)return CM(e);throw new Error(`Unknown fused activation ${t}.`)}const QF=(e,t)=>!(e>0)||"linear"===t;const JF=hA({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:s,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(c=c||"linear",!1===QF(J_.state.gradientDepth,c)){TT("NHWC"===a,(()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let e=GM(t,n,r,s,a,i,o);return null!=l&&(e=WR(e,l)),XF(e,c,u,h)}const d=lA(t,"x","conv2d","float32"),p=lA(n,"filter","conv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=SM(d,[1,d.shape[0],d.shape[1],d.shape[2]])),TT(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),TT(4===p.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`)),kM("fused conv2d",s,o);const g="NHWC"===a?f.shape[3]:f.shape[1];TT(p.shape[2]===g,(()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`)),TT(bM(r,i),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`));const y=hM(f.shape,p.shape,r,i,s,o);let v,b;if(null!=l&&(v=lA(l,"bias","fused conv2d"),[v]=V_(v,d),"NHWC"===a?xD(y.outShape,v.shape):(TT(v.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`)),TT(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],(()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)))),null!=u){const e=u.shape;if(TT(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)TT(1===e[0]||e[0]===y.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${y.outChannels}).`));else if(3===e.length)try{xD(e,y.outShape)}catch(jEe){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(n)}b=lA(u,"prelu weights","fused conv2d")}const w=(e,t)=>{TT("NHWC"===a,(()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`));const[n,o,l,u]=t,h=KF(e,l,c);TT(vM(i),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`));const d=[KM(o.shape,h,n,r,s),qF(o,h,n.shape,r,s)];if(null!=u){const e=YF(u,h);d.push(e)}return d},x={x:f,filter:p,bias:v,preluActivationWeights:b},k={strides:r,pad:s,dataFormat:a,dilations:i,dimRoundingMode:o,activation:c,leakyreluAlpha:h};if(null==l){const e=nD(((e,t,n)=>{let r=J_.runKernel(MI,x,k);return n([t,e,r]),m&&(r=SM(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}}));return e(f,p)}{const e=nD(((e,t,n,r)=>{let s=J_.runKernel(MI,x,k);return r([t,e,s,n]),m&&(s=SM(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:w}}));return e(f,p,v)}}});const ZF=hA({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=SM(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=SM(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:s,dimRoundingMode:i,dilations:a,filterShape:n};return J_.runKernel(lN,c,u)}});const e$=hA({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,o=t,l=!1;3===t.rank&&(l=!0,o=SM(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:o,filter:n},u={strides:r,pad:s,dimRoundingMode:i,dilations:a,inputShape:e},h=J_.runKernel(cN,c,u);return l?SM(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const t$=hA({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:s,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(!1===QF(J_.state.gradientDepth,c)){let e=aP(t,n,r,s,a,i,o);return null!=l&&(e=WR(e,l)),XF(e,c,u,h)}const d=lA(t,"x","depthwiseConv2d","float32"),p=lA(n,"filter","depthwiseConv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=SM(d,[1,d.shape[0],d.shape[1],d.shape[2]])),TT(4===f.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`)),TT(4===p.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`)),TT(f.shape[3]===p.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`)),null==i&&(i=[1,1]),TT(bM(r,i),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`)),kM("fused depthwiseConv2d",s,o);const g=hM(f.shape,p.shape,r,i,s,o,!0);let y,v;null!=l&&(y=lA(l,"bias","fused conv2d"),[y]=V_(y,d),xD(g.outShape,y.shape)),null!=u&&(v=lA(u,"prelu weights","fused depthwiseConv2d"));const b=(e,t)=>{TT(vM(i),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`));const[n,a,l,u]=t,h=KF(e,l,c),d=e$(a.shape,h,n,r,s,i,o),p=ZF(a,h,n.shape,r,s,i,o);if(null!=u){return[d,p,YF(y,h)]}return[d,p]},w={x:f,filter:p,bias:y,preluActivationWeights:v},x={strides:r,pad:s,dataFormat:a,dilations:i,dimRoundingMode:o,activation:c,leakyreluAlpha:h};if(null==l){const e=nD(((e,t,n)=>{let r=J_.runKernel(PI,w,x);return n([t,e,r]),m&&(r=SM(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(f,p)}{const e=nD(((e,t,n,r)=>{let s=J_.runKernel(PI,w,x);return r([t,e,s,n]),m&&(s=SM(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:b}}));return e(f,p,y)}}});const n$=hA({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:s=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:l=.2}=e;if(!1===QF(J_.state.gradientDepth,i)){let e=KD(t,n,r,s);return null!=a&&(e=WR(e,a)),XF(e,i,o,l)}let c=lA(t,"a","fused matMul"),u=lA(n,"b","fused matMul");[c,u]=V_(c,u);const h=r?c.shape[c.rank-2]:c.shape[c.rank-1],d=s?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=s?u.shape[u.rank-2]:u.shape[u.rank-1],m=c.shape.slice(0,-2),g=u.shape.slice(0,-2),y=CT(m),v=CT(g);TT(h===d,(()=>`Error in fused matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${c.shape} and ${u.shape} and transposeA=${r} and transposeB=${s} must match.`));const b=xD(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=SM(c,r?[y,h,p]:[y,p,h]),x=SM(u,s?[v,f,d]:[v,d,f]);let k,S;null!=a&&(k=lA(a,"bias","fused matMul"),[k]=V_(k,c),xD(b,k.shape)),null!=o&&(S=lA(o,"prelu weights","fused matMul"));const T=(e,t)=>{const[n,o,l,c]=t,u=KF(SM(e,l.shape),l,i);let h,d;if(r||s?!r&&s?(h=KD(u,o,!1,!1),d=KD(u,n,!0,!1)):r&&!s?(h=KD(o,u,!1,!0),d=KD(n,u,!1,!1)):(h=KD(o,u,!0,!0),d=KD(u,n,!0,!0)):(h=KD(u,o,!1,!0),d=KD(n,u,!0,!1)),null!=a){return[h,d,YF(c,u)]}return[h,d]},E={a:w,b:x,bias:k,preluActivationWeights:S},N={transposeA:r,transposeB:s,activation:i,leakyreluAlpha:l};if(null==a){const e=nD(((e,t,n)=>{const r=J_.runKernel(OI,E,N);return n([e,t,r]),{value:SM(r,b),gradFunc:T}}));return e(w,x)}{const e=nD(((e,t,n,r)=>{const s=J_.runKernel(OI,E,N);return r([e,t,s,n]),{value:SM(s,b),gradFunc:T}}));return e(w,x,k)}}});const r$=hA({hammingWindow_:function(e){return HF(e,.54,.46)}});const s$=hA({hannWindow_:function(e){return HF(e,.5,.5)}});const a$=hA({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=0;const i=[];for(;a+t<=e.size;)i.push(IM(e,a,t)),a+=n;if(r)for(;a<e.size;){const r=a+t-e.size,o=NM([IM(e,a,t-r),pD([r],s)]);i.push(o),a+=n}return 0===i.length?TF([],[0,t]):SM(NM(i),[i.length,t])}});const i$=hA({stft_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s$;null==r&&(r=WF(t));const a=a$(e,t,n),i=qR(a,s(t));return gF(i,r)}});const o$=hA({cropAndResize_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=lA(e,"image","cropAndResize"),o=lA(t,"boxes","cropAndResize","float32"),l=lA(n,"boxInd","cropAndResize","int32"),c=o.shape[0];TT(4===i.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`)),TT(2===o.rank&&4===o.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`)),TT(1===l.rank&&l.shape[0]===c,(()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`)),TT(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),TT(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),TT("bilinear"===s||"nearest"===s,(()=>`method must be bilinear or nearest, but was ${s}`));const u={image:i,boxes:o,boxInd:l},h={method:s,extrapolationValue:a,cropSize:r};return J_.runKernel(sN,u,h)}});const l$=hA({flipLeftRight_:function(e){const t=lA(e,"image","flipLeftRight","float32");TT(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return J_.runKernel(NN,n,{})}});const c$=hA({grayscaleToRGB_:function(e){const t=lA(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];TT(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),TT(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const s=new Array(t.rank);return s.fill(1,0,n),s[n]=3,OP(t,s)}});const u$=hA({rgbToGrayscale_:function(e){const t=lA(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];TT(t.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`)),TT(3===r,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`));const s=t.dtype,a=UR(t,"float32"),i=SF([.2989,.587,.114]);let o;switch(t.rank){case 2:o=dP("ij,j->i",a,i);break;case 3:o=dP("ijk,k->ij",a,i);break;case 4:o=dP("ijkl,l->ijk",a,i);break;case 5:o=dP("ijklm,m->ijkl",a,i);break;case 6:o=dP("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return o=RP(o,-1),UR(o,s)}});const h$=hA({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const s=lA(e,"image","rotateWithOffset","float32");TT(4===s.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`));const a={image:s},i={radians:t,fillValue:n,center:r};return J_.runKernel(DI,a,i)}});function d$(e,t,n,r,s,a){null==r&&(r=.5),null==s&&(s=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return n=Math.min(n,i),TT(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),TT(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),TT(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),TT(1===t.rank,(()=>"scores must be a 1D tensor")),TT(t.shape[0]===i,(()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`)),TT(0<=a&&a<=1,(()=>`softNmsSigma must be in [0, 1], but was '${a}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a}}const p$=hA({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=lA(e,"boxes","nonMaxSuppression","float32"),i=lA(t,"scores","nonMaxSuppression","float32"),o=d$(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return J_.runKernel(yC,{boxes:a,scores:i},l)}});function f$(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,s=e.length,a=0,i=!1;for(;r<s;){a=r+(s-r>>>1);const o=n(t,e[a]);o>0?r=a+1:(s=a,i=!o)}return i?r:-r-1}(e,t,n||m$)}(e,t,n),s=r<0?-(r+1):r;e.splice(s,0,t)}function m$(e,t){return e>t?1:e<t?-1:0}function g$(e,t,n,r,s){return b$(e,t,n,r,s,0)}function y$(e,t,n,r,s,a){return b$(e,t,n,r,s,0,!1,a,!0)}function v$(e,t,n,r,s,a){return b$(e,t,n,r,s,a,!0)}function b$(e,t,n,r,s,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let g=0;g<t.length;g++)t[g]>s&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(k$);const u=a>0?-.5/a:0,h=[],d=[];for(;h.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:a,suppressBeginIndex:i}=t;if(n<s)break;let o=!1;for(let l=h.length-1;l>=i;--l){const n=w$(e,a,h[l]);if(n>=r){o=!0;break}if(t.score=t.score*x$(r,u,n),t.score<=s)break}t.suppressBeginIndex=h.length,o||(t.score===n?(h.push(a),d.push(t.score)):t.score>s&&f$(c,t,k$))}const p=h.length,f=n-p;o&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return i&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function w$(e,t,n){const r=e.subarray(4*t,4*t+4),s=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),p=(o-a)*(l-i),f=(h-c)*(d-u);if(p<=0||f<=0)return 0;const m=Math.max(a,c),g=Math.max(i,u),y=Math.min(o,h),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function x$(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function k$(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const S$=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=lA(e,"boxes","nonMaxSuppressionAsync"),i=lA(t,"scores","nonMaxSuppressionAsync"),o=d$(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:h}=g$(c,u,n,r,s);return a!==e&&a.dispose(),i!==t&&i.dispose(),SF(h,"int32")};const T$=hA({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=lA(e,"boxes","nonMaxSuppression"),o=lA(t,"scores","nonMaxSuppression"),l=d$(i,o,n,r,s,a);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:i,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a},h=J_.runKernel(bC,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}});const E$=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=lA(e,"boxes","nonMaxSuppressionAsync"),o=lA(t,"scores","nonMaxSuppressionAsync"),l=d$(i,o,n,r,s,a);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([i.data(),o.data()]),u=c[0],h=c[1],{selectedIndices:d,selectedScores:p}=v$(u,h,n,r,s,a);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:SF(d,"int32"),selectedScores:SF(p)}};const N$=hA({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=lA(e,"boxes","nonMaxSuppression"),o=lA(t,"scores","nonMaxSuppression"),l=d$(i,o,n,r,s,null),c={boxes:i,scores:o},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:a},h=J_.runKernel(vC,c,u);return{selectedIndices:h[0],validOutputs:h[1]}}});const C$=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=lA(e,"boxes","nonMaxSuppressionAsync"),o=lA(t,"scores","nonMaxSuppressionAsync"),l=d$(i,o,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([i.data(),o.data()]),{selectedIndices:f,validOutputs:m}=y$(d,p,c,u,h,a);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:SF(f,"int32"),validOutputs:sD(m,"int32")}};const I$=hA({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=lA(e,"images","resizeBilinear");TT(3===s.rank||4===s.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`)),TT(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),TT(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=s,i=!1;3===s.rank&&(i=!0,a=SM(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=t,o={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},c=J_.runKernel($C,o,l);return i?SM(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const _$=hA({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=lA(e,"images","resizeNearestNeighbor");TT(3===s.rank||4===s.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`)),TT(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),TT("float32"===s.dtype||"int32"===s.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),TT(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=s,i=!1;3===s.rank&&(i=!0,a=SM(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=t,o={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},c=J_.runKernel(LC,o,l);return i?SM(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const A$=hA({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const s=lA(e,"image","threshold"),a=s.shape[0]*s.shape[1];let i,o,l,c,u=qR(SF([r]),255);if(TT(3===s.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`)),TT(3===s.shape[2]||1===s.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`)),TT("int32"===s.dtype||"float32"===s.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`)),TT("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===s.shape[2]){[i,o,l]=mF(s,[1,1,1],-1);const e=qR(i,.2989),t=qR(o,.587),n=qR(l,.114);c=WR(WR(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,r,s,a,i,o,l=SF([-1]),c=SF([0]),u=SF([0]);for(let h=0;h<e.size-1;h++){n=IM(e,0,h+1),r=IM(e,h+1),i=GR(NP(n),t),o=GR(NP(r),t);const d=NP(qR(n,WL(0,n.size)));s=GR(d,NP(n));const p=pD(r.shape,n.size),f=WR(WL(0,r.size),p),m=qR(r,f);a=GR(NP(m),NP(r));const g=gD(s,a),y=gD(s,a),v=qR(i,o);u=qR(qR(v,g),y);const b=FP(u,c);c=cP(b,u,c),l=cP(b,SF([h]),l)}return l}(LM(UR(ZL(c),"int32"),fA([]),256),a)}const h=n?WP(c,u):FP(c,u);return UR(qR(h,255),"int32")}});const R$=hA({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;const i=lA(e,"image","transform","float32"),o=lA(t,"transforms","transform","float32");TT(4===i.rank,(()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`)),TT(2===o.rank&&(o.shape[0]===i.shape[0]||1===o.shape[0])&&8===o.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),TT(null==a||2===a.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`));const l={image:i,transforms:o},c={interpolation:n,fillMode:r,fillValue:s,outputShape:a};return J_.runKernel(SI,l,c)}});const D$=hA({bandPart_:function(e,t,n){const r=lA(e,"a","bandPart");TT(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const s=r.shape,[a,i]=r.shape.slice(-2);let o,l;"number"===typeof t?(TT(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),TT(t<=a,(()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`)),o=lA(t<0?a:t,"numLower","bandPart")):(TT("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),o=cP(VP(t,0),a,pL(t,a))),"number"===typeof n?(TT(n%1===0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`)),TT(n<=i,(()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`)),l=lA(n<0?i:n,"numUpper","bandPart")):(TT("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=cP(VP(n,0),i,pL(n,i)));const c=SM(WL(0,a,1,"int32"),[-1,1]),u=WL(0,i,1,"int32"),h=gD(c,u),d=ZP(WP(h,o),$P(h,QD(l))),p=uL([a,i],r.dtype);return SM(bF(OF(SM(r,[-1,a,i])).map((e=>cP(d,e,p)))),s)}});const O$=hA({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,TT(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)TT(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=mF(e,e.shape[0],0).map((e=>vF(e,[0])));TT(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let s=0;s<e.length;++s)n.push(J_.tidy((()=>{let e=r[s];if(s>0)for(let t=0;t<s;++t){const r=qR(NP(qR(n[t],e)),n[t]);e=gD(e,r)}return GR(e,IP(e,"euclidean"))})));return t?bF(n,0):n}});function M$(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return J_.tidy((()=>{TT(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let s=MP(n),a=BR(e);const i=TF([[1]],[1,1]);let o=BR(i);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=a,l=o,c=s;[o,a,s]=J_.tidy((()=>{const t=IM(a,[e,e],[n-e,1]),l=IP(t),c=IM(a,[e,e],[1,1]),u=cP(FP(c,0),TF([[-1]]),TF([[1]])),h=gD(c,qR(u,l)),d=GR(t,h);o=1===d.shape[0]?BR(i):NM([i,IM(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=QD(GR(KD(u,h),l)),f=IM(a,[e,0],[n-e,r]),m=qR(p,o),g=ZD(o);if(0===e)a=gD(f,KD(m,KD(g,f)));else{const t=gD(f,KD(m,KD(g,f)));a=NM([IM(a,[0,0],[e,r]),t],0)}const y=ZD(m),v=IM(s,[0,e],[n,s.shape[1]-e]);if(0===e)s=gD(v,KD(KD(v,o),y));else{const t=gD(v,KD(KD(v,o),y));s=NM([IM(s,[0,0],[n,e]),t],1)}return[o,a,s]})),NA([t,l,c])}return!t&&n>r&&(s=IM(s,[0,0],[n,r]),a=IM(a,[0,0],[r,r])),[s,a]}))}const P$=hA({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(TT(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return M$(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=OF(SM(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],a=[];r.forEach((e=>{const[n,r]=M$(e,t);s.push(n),a.push(r)}));return[SM(bF(s,0),e.shape),SM(bF(a,0),e.shape)]}}});var L$;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(L$||(L$={}));const F$=hA({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L$.SUM_BY_NONZERO_WEIGHTS;const r=lA(e,"losses","computeWeightedLoss");let s=null;null!=t&&(s=lA(t,"weights","computeWeightedLoss"));const a=null==s?r:qR(r,s);if(n===L$.NONE)return a;if(n===L$.SUM)return NP(a);if(n===L$.MEAN){if(null==s)return cL(a);{const e=r.size/s.size,t=GR(NP(a),NP(s));return e>1?GR(t,sD(e)):t}}if(n===L$.SUM_BY_NONZERO_WEIGHTS){if(null==s)return GR(NP(a),sD(r.size));{const e=qR(s,hL(r.shape)),t=UR(NP(bL(e,sD(0))),"float32");return GR(NP(a),t)}}throw Error(`Unknown reduction: ${n}`)}});const $$=hA({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L$.SUM_BY_NONZERO_WEIGHTS;const s=lA(e,"labels","absoluteDifference"),a=lA(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=lA(n,"weights","absoluteDifference")),ET(s.shape,a.shape,"Error in absoluteDifference: ");const o=vD(gD(s,a));return F$(o,i,r)}});const z$=hA({cosineDistance_:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L$.SUM_BY_NONZERO_WEIGHTS;const a=lA(e,"labels","cosineDistance"),i=lA(t,"predictions","cosineDistance");let o=null;null!=r&&(o=lA(r,"weights","cosineDistance")),ET(a.shape,i.shape,"Error in cosineDistance: ");const l=sD(1),c=gD(l,NP(qR(a,i),n,!0));return F$(c,o,s)}});const j$=hA({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L$.SUM_BY_NONZERO_WEIGHTS,s=lA(e,"labels","hingeLoss");const a=lA(t,"predictions","hingeLoss");let i=null;null!=n&&(i=lA(n,"weights","hingeLoss")),ET(s.shape,a.shape,"Error in hingeLoss: ");const o=sD(1);s=gD(qR(sD(2),s),o);const l=GL(gD(o,qR(s,a)));return F$(l,i,r)}});const U$=hA({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L$.SUM_BY_NONZERO_WEIGHTS;const a=lA(e,"labels","huberLoss"),i=lA(t,"predictions","huberLoss");let o=null;null!=n&&(o=lA(n,"weights","huberLoss")),ET(a.shape,i.shape,"Error in huberLoss: ");const l=sD(r),c=vD(gD(i,a)),u=pL(c,l),h=gD(c,u),d=WR(qR(sD(.5),YR(u)),qR(l,h));return F$(d,o,s)}});const B$=hA({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L$.SUM_BY_NONZERO_WEIGHTS;const a=lA(e,"labels","logLoss"),i=lA(t,"predictions","logLoss");let o=null;null!=n&&(o=lA(n,"weights","logLoss")),ET(a.shape,i.shape,"Error in logLoss: ");const l=sD(1),c=sD(r),u=QD(qR(a,qP(WR(i,c)))),h=qR(gD(l,a),qP(WR(gD(l,i),c))),d=gD(u,h);return F$(d,o,s)}});const V$=hA({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L$.SUM_BY_NONZERO_WEIGHTS;const s=lA(e,"labels","meanSquaredError"),a=lA(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=lA(n,"weights","meanSquaredError")),ET(s.shape,a.shape,"Error in meanSquaredError: ");const o=yF(s,a);return F$(o,i,r)}});const W$=hA({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L$.SUM_BY_NONZERO_WEIGHTS,a=lA(e,"multiClassLabels","sigmoidCrossEntropy");const i=lA(t,"logits","sigmoidCrossEntropy");let o=null;if(null!=n&&(o=lA(n,"weights","sigmoidCrossEntropy")),ET(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=sD(r),t=sD(1),n=sD(.5);a=WR(qR(a,gD(t,e)),qR(n,e))}const l=function(e,t){const n=lA(e,"labels","sigmoidCrossEntropyWithLogits"),r=lA(t,"logits","sigmoidCrossEntropyWithLogits");ET(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=GL(r),a=qR(r,n),i=KP(AP(QD(vD(r))));return WR(gD(s,a),i)}(a,i);return F$(l,o,s)}});const H$=hA({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L$.SUM_BY_NONZERO_WEIGHTS,a=lA(e,"onehotLabels","softmaxCrossEntropy");const i=lA(t,"logits","softmaxCrossEntropy");let o=null;if(null!=n&&(o=lA(n,"weights","softmaxCrossEntropy")),ET(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=sD(r),t=sD(1),n=sD(a.shape[1]);a=WR(qR(a,gD(t,e)),GR(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=nD(((e,t,r)=>{const s=JP(t,[n],!0),a=gD(UR(t,"float32"),s);r([e,a]);const i=QD(qR(a,e));return{value:NP(i,[n]),gradFunc:(e,t)=>{const[r,s]=t,a=bP(e.shape,[n]);return[qR(SM(e,a),gD(UR(r,"float32"),AP(s))),qR(SM(e,a),gD(AP(s),UR(r,"float32")))]}}}));return r(e,t)}(a,i);return F$(l,o,s)}});const G$=hA({sparseFillEmptyRows_:function(e,t,n,r){const s=lA(e,"indices","sparseFillEmptyRows","int32"),a=lA(t,"values","sparseFillEmptyRows"),i=lA(n,"denseShape","sparseFillEmptyRows","int32"),o=lA(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==s.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${s.shape}`);if(1!==a.rank)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(1!==i.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==o.rank)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:a,denseShape:i,defaultValue:o},c=J_.runKernel(iI,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});const q$=hA({sparseReshape_:function(e,t,n){const r=lA(e,"inputIndices","sparseReshape","int32"),s=lA(t,"inputShape","sparseReshape","int32"),a=lA(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==s.rank)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(1!==a.rank)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:r,inputShape:s,newShape:a},o=J_.runKernel(oI,i);return{outputIndices:o[0],outputShape:o[1]}}});const K$=hA({sparseSegmentMean_:function(e,t,n){const r=lA(e,"data","sparseSegmentMean"),s=lA(t,"indices","sparseSegmentMean","int32"),a=lA(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${s.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return J_.runKernel(lI,i)}});const Y$=hA({sparseSegmentSum_:function(e,t,n){const r=lA(e,"data","sparseSegmentSum"),s=lA(t,"indices","sparseSegmentSum","int32"),a=lA(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${s.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return J_.runKernel(cI,i)}});const X$=hA({stringNGrams_:function(e,t,n,r,s,a,i,o){const l=lA(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=lA(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:s,rightPad:a,padWidth:i,preserveShortSequences:o},h={data:l,dataSplits:c},d=J_.runKernel(mI,h,u);return{nGrams:d[0],nGramsSplits:d[1]}}});const Q$=hA({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=lA(e,"input","stringSplit","string"),s=lA(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==s.rank)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a={skipEmpty:n},i={input:r,delimiter:s},o=J_.runKernel(gI,i,a);return{indices:o[0],values:o[1],shape:o[2]}}});const J$=hA({stringToHashBucketFast_:function(e,t){const n=lA(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return J_.runKernel(yI,s,r)}});const Z$=hA({staticRegexReplace_:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=lA(e,"input","staticRegexReplace","string"),a={pattern:t,rewrite:n,replaceGlobal:r};return J_.runKernel(pI,{x:s},a)}}),ez={fft:dF,ifft:pF,rfft:gF,irfft:fF},tz={hammingWindow:r$,hannWindow:s$,frame:a$,stft:i$},nz={flipLeftRight:l$,grayscaleToRGB:c$,resizeNearestNeighbor:_$,resizeBilinear:I$,rgbToGrayscale:u$,rotateWithOffset:h$,cropAndResize:o$,nonMaxSuppression:p$,nonMaxSuppressionAsync:S$,nonMaxSuppressionWithScore:T$,nonMaxSuppressionWithScoreAsync:E$,nonMaxSuppressionPadded:N$,nonMaxSuppressionPaddedAsync:C$,threshold:A$,transform:R$},rz={bandPart:D$,gramSchmidt:O$,qr:P$},sz={absoluteDifference:$$,computeWeightedLoss:F$,cosineDistance:z$,hingeLoss:j$,huberLoss:U$,logLoss:B$,meanSquaredError:V$,sigmoidCrossEntropy:W$,softmaxCrossEntropy:H$},az={sparseFillEmptyRows:G$,sparseReshape:q$,sparseSegmentMean:K$,sparseSegmentSum:Y$},iz={stringNGrams:X$,stringSplit:Q$,stringToHashBucketFast:J$,staticRegexReplace:Z$},oz=YO,lz="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function cz(){return new Promise((e=>lz((()=>e()))))}function uz(e,t){const n=e[0].length;e.forEach(((e,t)=>{TT(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),TT(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,s)=>{for(let a=0;a<n;a++)TT(a===t||e[a]===r[a],(()=>`Error in concat${n}D: Shape of tensors[${s}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`))}))}function hz(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var dz;function pz(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const a=n[s],i=r[r.length-n.length+s],o=r[i];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${s+e}] = ${a} but shape[${s+e}] = ${o}`)}else r[i]=a}return r}function fz(e){const t={FIRST_DIM_SIZE:dz.FIRST_DIM_SIZE,VALUE_ROWIDS:dz.VALUE_ROWIDS,ROW_LENGTHS:dz.ROW_LENGTHS,ROW_SPLITS:dz.ROW_SPLITS,ROW_LIMITS:dz.ROW_LIMITS,ROW_STARTS:dz.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function mz(e){return 0===e.length?0:e[0]===dz.FIRST_DIM_SIZE?e.length-1:e.length}function gz(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const n=e[s],r=t[s+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${s-e.length}] = ${n} but ragged tensor input.flatValues.shape[${s-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(dz||(dz={}));const yz=30;function vz(e){return e<=yz?e:JT(e,Math.floor(Math.sqrt(e)))}function bz(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function wz(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let s=0;s<n;++s)r=r.concat([e[s+1]/t[s],t[s]]);r=r.concat(e.slice(n+1))}return r}function xz(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],s=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?s.push(n):r.push(n);n.push(...r),n.push(0),n.push(...s)}return n}function kz(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=[];r?s.push(e[0]/n):s.push(e[0]*n);for(let a=1;a<e.length;++a)a<=t.length?r?s.push(t[a-1]*e[a]):s.push(e[a]/t[a-1]):s.push(e[a]);return s}function Sz(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Tz(e,t,n){const r=e.slice(0,1);for(let s=0;s<n;++s)r.push(e[s+1]-t[s][0]-t[s][1]);return r}const Ez=1.7580993408473768,Nz=1.0507009873554805,Cz=.3275911,Iz=.254829592,_z=-.284496736,Az=1.421413741,Rz=-1.453152027,Dz=1.061405429;function Oz(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Mz(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Pz(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let s=0;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}function Lz(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let s=2;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}function Fz(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $z(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function zz(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let s=0;s<Math.ceil(e/2);s++){const a=(t?2:-2)*Math.PI*(s/e);n[s]=Math.cos(a),r[s]=Math.sin(a)}return{real:n,imag:r}}function jz(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const Uz="->",Bz=/->/g,Vz=",",Wz="...";function Hz(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(Bz,"").length)/Uz.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Uz}").`);const[r,s]=e.split(Uz);TT(-1===r.indexOf(Wz),(()=>`The ellipsis notation ("${Wz}") is not supported yet.`));const a=r.split(Vz),i=a.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let h=0;h<s.length;++h){const e=s[h];if(!a.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===o.indexOf(e)&&o.push(e)}for(let h=0;h<r.length;++h){const e=r[h];-1===o.indexOf(e)&&e!==Vz&&o.push(e)}const l=new Array(a.length);for(let h=0;h<i;++h){if(new Set(a[h].split("")).size!==a[h].length)throw new Error(`Found duplicate axes in input component ${a[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let e=0;e<a[h].length;++e)l[h].push(o.indexOf(a[h][e]))}const c=o.length,u=[];for(let h=s.length;h<c;++h)u.push(h);return{allDims:o,summedDims:u,idDims:l}}function Gz(e,t){let n=new Array(e);n.fill(-1);for(let s=0;s<t.length;++s)n[t[s]]=s;const r=[];for(let s=0;s<e;++s)-1===n[s]&&r.push(s);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function qz(e,t,n){const r=new Array(e);for(let s=0;s<n.length;++s){const e=n[s].shape;for(let n=0;n<t[s].length;++n)void 0===r[t[s][n]]?r[t[s][n]]=e[n]:TT(r[t[s][n]]===e[n],(()=>`Expected dimension ${r[t[s][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`))}}function Kz(e,t){const n=e,r=[];let s=0;0===e.length&&n.push(-1),s=e.length+1;for(let i=0;i<s;++i)r.push([]);const a=[];for(let i=0;i<n.length;++i){const e=Xz(t,n[i]);for(const t of e)-1===a.indexOf(t)&&(r[i].push(t),a.push(t))}return{path:n,steps:r}}function Yz(e){return e.every(((e,t)=>e===t))}function Xz(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Qz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)TT(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const s=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);TT(s<=1,(()=>"There should be only one negative value in split array."));const a=t.indexOf(-1);if(-1!==a){const r=t.reduce(((e,t)=>t>0?e+t:e));t[a]=e.shape[n]-r}TT(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function Jz(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function Zz(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function ej(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function tj(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function nj(e,t){return`size ${e} must be non-negative, not ${t}`}function rj(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function sj(e,t){return`Input to reshape is a SparseTensor with ${CT(e)}\n  dense values, but the requested shape requires a multiple of ${CT(t)}. inputShape=${e} outputShape= ${t}`}function aj(e,t){return`Input to reshape is a tensor with ${CT(e)} dense values, but the requested shape has ${CT(t)}. inputShape=${e} outputShape=${t}`}function ij(){return"segment ids must be >= 0"}function oj(){return"segment ids are not increasing"}function lj(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function cj(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function uj(e,t){let n,r=!1;for(e<=yz?(n=e,r=!0):n=JT(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=JT(e,n+1);return n}function hj(e,t,n){const r=[],s=e.length;for(let a=0;a<s;a++)a!==t?r.push(e[a]):r.push(n);return r}function dj(e,t,n,r){const s=t.shape.length,a=e.shape.length;if(0!==r&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const i=e.shape[n],o=[];let l=1,c=1,u=1;for(let h=0;h<r;++h)o.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)o.push(e.shape[h]),c*=e.shape[h];for(let h=r;h<s;h++)o.push(t.shape[h]);for(let h=n+1;h<a;h++)o.push(e.shape[h]),u*=e.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:o}}function pj(e){try{return e.map((e=>m_(e)))}catch(UEe){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${UEe}`)}}function fj(e){return e.map((e=>f_(e)))}!function(){for(const e of CD)cD(e)}();const mj={kernelName:vE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,wF(UR(n,"float32"),-1))}}},gj={kernelName:bE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=YR(UR(n,"float32")),r=KR(gD(sD(1),t));return QD(GR(e,r))}}}},yj={kernelName:wE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=KR(gD(YR(UR(n,"float32")),1));return GR(e,t)}}}},vj={kernelName:xE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{let t=e;const r=wD(n.shape,s);return r.length>0&&(t=NP(t,r)),SM(t,n.shape)},b:()=>{let t=e;const n=wD(r.shape,s);return n.length>0&&(t=NP(t,n)),SM(t,r.shape)}}}},bj={kernelName:kE,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},wj={kernelName:EE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>XR(n)}}},xj={kernelName:NE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>XR(n)}}},kj={kernelName:CE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,KR(gD(sD(1),YR(UR(n,"float32")))))}}},Sj={kernelName:IE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=KR(WR(sD(1),YR(UR(n,"float32"))));return GR(e,t)}}}},Tj={kernelName:RE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{const t=WR(YR(n),YR(r));let a=qR(e,GR(r,t));const i=wD(n.shape,s);return i.length>0&&(a=NP(a,i)),SM(a,n.shape)},b:()=>{const t=WR(YR(n),YR(r));let a=QD(qR(e,GR(n,t)));const i=wD(r.shape,s);return i.length>0&&(a=NP(a,i)),SM(a,r.shape)}}}},Ej={kernelName:_E,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,WR(YR(UR(n,"float32")),1))}}},Nj={kernelName:AE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,gD(sD(1),YR(UR(n,"float32"))))}}};const Cj=hA({avgPool3dGrad_:function(e,t,n,r,s,a){const i=lA(e,"dy","avgPool3dGrad"),o=lA(t,"input","avgPool3dGrad");let l=i,c=o,u=!1;4===o.rank&&(u=!0,l=SM(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=SM(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),TT(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),TT(5===c.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`)),kM("avgPool3dGrad",s,a);const h={dy:l,input:c},d={filterSize:n,strides:r,pad:s,dimRoundingMode:a},p=J_.runKernel(PE,h,d);return u?SM(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),Ij={kernelName:ME,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:s,strides:a,pad:i,dimRoundingMode:o}=n;return{x:()=>Cj(e,r,s,a,i,o)}}};const _j=hA({avgPoolGrad_:function(e,t,n,r,s){const a=lA(e,"dy","avgPoolGrad"),i=lA(t,"input","avgPoolGrad");TT(i.rank===a.rank,(()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`));let o=i,l=a,c=!1;3===i.rank&&(c=!0,o=SM(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=SM(a,[1,a.shape[0],a.shape[1],a.shape[2]])),TT(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),TT(4===o.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`));const u={dy:l,input:o},h={filterSize:n,strides:r,pad:s},d=J_.runKernel(OE,u,h);return c?SM(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Aj={kernelName:DE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:s,strides:a,pad:i}=n;return{x:()=>_j(e,r,s,a,i)}}},Rj={kernelName:LE,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,s]=t,{transposeA:a,transposeB:i}=n;return a||i?!a&&i?{a:()=>KD(e,s,!1,!1),b:()=>KD(e,r,!0,!1)}:a&&!i?{a:()=>KD(s,e,!1,!0),b:()=>KD(r,e,!1,!1)}:{a:()=>KD(s,e,!0,!0),b:()=>KD(e,r,!0,!0)}:{a:()=>KD(e,s,!1,!0),b:()=>KD(r,e,!0,!1)}}},Dj={kernelName:FE,gradFunc:(e,t,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>CL(e,r,s)}}},Oj={kernelName:jE,gradFunc:(e,t,n)=>{const r=n,s=r.inputShape,a=r.shape,i=Array.from(a);for(let l=s.length-1;l>=0;l--)if(s[l]===a[l])i[l]=1;else if(1!==s[l])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${a}].`);const o=[];for(let l=0;l<i.length;l++)i[l]>1&&o.push(l);return{x:()=>NP(e,o,!0)}}},Mj={kernelName:BE,gradFunc:e=>({x:()=>e.clone()})},Pj={kernelName:VE,gradFunc:e=>({x:()=>XR(e)})},Lj={kernelName:WE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:s,clipValueMax:a}=n;return{x:()=>cP(ZP($P(r,s),WP(r,a)),e,XR(e))}}},Fj={kernelName:GE,inputsToSave:["x"],gradFunc:mj.gradFunc},$j={kernelName:qE,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:s}=n,a=$T(s,t[0].shape)[0],i=r.map((e=>e[a]));return mF(e,i,a).map((e=>()=>e))}},zj={kernelName:KE,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,s]=t,{dilations:a,strides:i,pad:o,dataFormat:l}=n;return TT(vM(a),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`)),{x:()=>KM(r.shape,e,s,i,o,l),filter:()=>qF(r,e,s.shape,i,o,l)}}},jj={kernelName:XE,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,s]=t,{strides:a,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>GM(e,s,a,i,o,1,l),filter:()=>qF(e,r,s.shape,a,i,o,l)}}};const Uj=hA({conv3DBackpropFilter_:function(e,t,n,r,s){let a=e;4===e.rank&&(a=SM(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=SM(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),TT(5===a.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`)),TT(5===i.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`)),TT(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),TT(a.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`)),TT(i.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`));const o={x:a,dy:i},l={strides:r,pad:s,filterShape:n};return J_.runKernel(JE,o,l)}}),Bj={kernelName:QE,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:s,pad:a}=n;TT(vM(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[i,o]=t;return{x:()=>QM(i.shape,e,o,s,a),filter:()=>Uj(i,e,o.shape,s,a)}}},Vj={kernelName:eN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(QD(aF(UR(n,"float32"))),e)}}},Wj={kernelName:tN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(iF(UR(n,"float32")),e)}}},Hj={kernelName:rN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:s,exclusive:a,reverse:i}=n;return{x:()=>{const t=xP([s],r.rank);let n=nP(e,s,a,!i);return null!=t&&(n=ZD(n,t)),n}}}},Gj={kernelName:oN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:s,pad:a,dimRoundingMode:i}=n,o=null==r?[1,1]:r;TT(vM(o),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`));const[l,c]=t;return TT(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),TT(4===c.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`)),TT(l.shape[3]===c.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`)),TT(bM(s,o),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`)),kM("depthwiseConv2d",a,i),{x:()=>e$(l.shape,e,c,s,a,o,i),filter:()=>ZF(l,e,c.shape,s,a,o,i)}}},qj={kernelName:hN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,s]=t,a={x:r,filter:s,dy:e},i={x:r,filter:s,dy:e};return{x:()=>J_.runKernel(dN,a,n),filter:()=>J_.runKernel(pN,i,n)}}},Kj={kernelName:yN,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>J_.runKernel(vN,r)}}},Yj={kernelName:bN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=qR(AP(QD(YR(n))),2/Math.sqrt(Math.PI));return{x:()=>qR(e,r)}}},Xj={kernelName:xN,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,n)}}},Qj={kernelName:kN,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>SM(e,n.shape)}}},Jj={kernelName:SN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,AP(n))}}},Zj={kernelName:CN,gradFunc:e=>({x:()=>XR(e)})},eU={kernelName:IN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{const t=GR(e,UR(r,"float32")),a=wD(n.shape,s);return a.length>0?SM(NP(t,a),n.shape):t},b:()=>{let t=qR(e,UR(n,"float32"));const a=wD(r.shape,s);a.length>0&&(t=SM(NP(t,a),r.shape));const i=YR(r);return QD(GR(t,UR(i,"float32")))}}}},tU={kernelName:_N,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[s,a,i,o]=t,l=null==o?sD(1):o,c=wD(a.shape,s.shape),u=[];if(1===a.rank){for(let e=0;e<s.shape.length-1;++e)u.push(s.shape[e]);u.push(1)}const h=gD(s,a),d=qR(e,l),p=eF(WR(i,sD(r))),f=qR(qR(qR(p,p),p),sD(-.5));return{x:()=>1===a.rank?SM(qR(qR(e,OP(SM(p,[1,1,1,a.shape[0]]),u)),l),s.shape):SM(qR(qR(e,p),l),s.shape),mean:()=>{let e=qR(qR(p,sD(-1)),d);return 1===a.rank&&(e=NP(e,c)),SM(e,a.shape)},variance:()=>{let e=qR(qR(f,h),d);return 1===a.rank&&(e=NP(e,c)),SM(e,a.shape)},scale:()=>{const t=qR(h,p);let n=qR(e,t);return 1===a.rank&&(n=NP(n,c)),SM(n,a.shape)},offset:()=>{let t=e;return 1===a.rank&&(t=NP(t,c)),SM(t,a.shape)}}}},nU={kernelName:AN,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,s]=t,{axis:a,batchDims:i}=n,o=$T(a,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,s=t.size,i=r.slice(0,o),l=i.length,c=r.slice(a,r.length).slice(1),u=c.length,h=rU(0,l),d=rU(l+1,l+1+u),p=sU([i,[s],c]),f=SM(n,p),m=SM(t,[s]),g=sU([[l],h,d]),y=ZD(f,g);let v=DF(y,m,e.shape[o]);const b=kP(g);return v=ZD(v,b),v};if(1===i){const t=r.shape[0],n=r.split(t,0);return{x:()=>{const t=bF(n.map(((t,n)=>l(t,s.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)},indices:()=>s}}return{x:l(r,s,e),indices:()=>s}}};function rU(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function sU(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const aU={kernelName:ON,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>XR(n),b:()=>XR(r)}}},iU={kernelName:MN,gradFunc:e=>({x:()=>UR(e,"float32")})},oU={kernelName:FN,gradFunc:e=>({x:()=>XR(e)})},lU={kernelName:$N,gradFunc:e=>({x:()=>XR(e)})},cU={kernelName:zN,gradFunc:e=>({x:()=>XR(e)})},uU={kernelName:jN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:s}=n,a=FP(r,0);return{x:()=>cP(a,e,qR(e,s))}}},hU={kernelName:HN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,WR(n,1))}}},dU={kernelName:WN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,UR(n,"float32"))}}},pU={kernelName:XN,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:s}=n;return{logits:()=>{const t=AP(r);return gD(e,qR(NP(e,s,!0),t))}}}};const fU=hA({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},s={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return J_.runKernel(ZN,r,s)}}),mU={kernelName:JN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,s]=t,{depthRadius:a,bias:i,alpha:o,beta:l}=n;return{x:()=>fU(r,s,e,a,i,o,l)}}};function gU(e,t,n,r){return t.rank<n.rank&&(t=SM(t,bP(t.shape,r))),e.rank<n.rank&&(e=SM(e,bP(e.shape,r))),{x:()=>qR(e,UR(lP(n,t),e.dtype))}}const yU={kernelName:tC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:s}=r,a=t[0],i=gU(e,t[1],a,$T(s,a.shape));return{x:()=>i.x()}}},vU={kernelName:nC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>qR(e,UR($P(n,r),"float32")),b:()=>qR(e,UR(VP(n,r),"float32"))}}};const bU=hA({maxPool3dGrad_:function(e,t,n,r,s,a,i){const o=lA(e,"dy","maxPool3dGrad"),l=lA(t,"input","maxPool3dGrad"),c=lA(n,"output","maxPool3dGrad");let u=o,h=l,d=c,p=!1;4===l.rank&&(p=!0,u=SM(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=SM(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=SM(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),TT(5===u.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`)),TT(5===h.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`)),TT(5===d.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`)),kM("maxPool3dGrad",a,i);const f={dy:u,input:h,output:d},m={filterSize:r,strides:s,pad:a,dimRoundingMode:i},g=J_.runKernel(iC,f,m);return p?SM(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),wU={kernelName:aC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,s]=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>bU(e,r,s,a,i,o,l)}}};const xU=hA({maxPoolGrad_:function(e,t,n,r,s,a,i){const o=lA(e,"dy","maxPoolGrad"),l=lA(t,"input","maxPoolGrad"),c=lA(n,"output","maxPoolGrad");TT(l.rank===o.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`)),TT(4===o.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`)),TT(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),kM("maxPoolGrad",a,i);const u={dy:o,input:l,output:c},h={filterSize:r,strides:s,pad:a,dimRoundingMode:i};return J_.runKernel(sC,u,h)}}),kU={kernelName:rC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,s]=t,{filterSize:a,strides:i,pad:o}=n;return{x:()=>xU(e,r,s,a,i,o)}}},SU={kernelName:lC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:s}=n,a=$T(s,r.shape),i=CT(vP(r.shape,a)[1]);return{x:()=>{const t=r.shape.slice();a.forEach((e=>{t[e]=1}));const n=SM(e,t);return GR(qR(n,hL(r.shape,"float32")),i)}}}},TU={kernelName:cC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:s}=r,[a,i]=t,o=gU(e,i,a,$T(s,a.shape));return{x:()=>o.x()}}},EU={kernelName:hC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:s}=n,a=s.map((e=>e[0]));return{x:()=>IM(e,a,r.shape)}}},NU={kernelName:SC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:s}=n,a=s.map((e=>e[0]));return{x:()=>IM(e,a,r.shape)}}},CU={kernelName:EC,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,s]=t,a=n,i=r,o=xD(a.shape,i.shape);return{a:()=>{const t=UR(i,"float32");let n=qR(e,qR(t,mD(a,gD(t,sD(1)))));const r=wD(a.shape,o);return r.length>0&&(n=NP(n,r)),SM(n,a.shape)},b:()=>{const t=FP(a,0),n=cP(t,qP(a),XR(a));let r=qR(e,qR(s,n));const l=wD(i.shape,o);return l.length>0&&(r=NP(r,l)),SM(r,i.shape)}}}},IU={kernelName:NC,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,s=FP(n,0);return{x:()=>cP(s,e,qR(e,r)),alpha:()=>{let t=cP(s,XR(e),qR(e,n));const a=wD(r.shape,e.shape);return a.length>0&&(t=NP(t,a)),SM(t,r.shape)}}}};function _U(e,t,n){const r=e.shape.length,s=r-n.length,a=xP(n,r);let i=e;null!=a&&(i=ZD(e,a));const o=i.shape.slice(),l=o.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);o.push(l);let c=function(e,t,n){const r=e.shape.slice();r[n]=1;const s=SM(t,r),a=tP(e,n,!0,!1),i=tP(e,n,!0,!0),o=qR(a,i);return qR(s,o)}(i.reshape(o),t,s);if(c=c.reshape(i.shape),null!=a){const e=kP(a);c=ZD(c,e)}return c}const AU={kernelName:CC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:s}=n;let a=[];return a=void 0===s||null===s?r.shape.map(((e,t)=>t)):"number"===typeof s?[s]:s,{x:()=>_U(r,e,a)}}},RU={kernelName:OC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,QD(YR(n)))}}},DU={kernelName:jC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=qR(WP(n,6),wF(n));return{x:()=>qR(e,UR(r,"float32"))}}},OU={kernelName:MC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,UR(wF(n),"float32"))}}},MU={kernelName:PC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>SM(e,n.shape)}}},PU={kernelName:VC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>QD(GR(e,qR(mD(n,1.5),2)))}}},LU={kernelName:KC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=FP(n,sD(0)),r=sD(Ez),s=sD(Nz),a=qR(e,s),i=qR(qR(e,r),AP(UR(n,"float32")));return cP(t,a,i)}}}},FU={kernelName:XC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(ZM(UR(n,"float32")),e)}}},$U={kernelName:QC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(eP(UR(n,"float32")),e)}}},zU={kernelName:YC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:s,size:a}=n,i=r.shape,[o,l]=RO(r,s,a),c=[];for(let u=0;u<e.rank;u++)c.push([o[u],i[u]-o[u]-l[u]]);return{x:()=>kL(e,c)}}},jU={kernelName:eI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,CM(n))}}},UU={kernelName:rI,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>RM(e,r,s)}}},BU={kernelName:sI,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>NM(e,r)}}},VU={kernelName:tI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,qR(KR(UR(n,"float32")),2))}}},WU={kernelName:dI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,qR(UR(n,"float32"),2))}}},HU={kernelName:nI,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,s=r.shape.slice(),{axis:a}=n;$T(a,r.shape).forEach((e=>{s[e]=1}));const i=SM(e,s),o=qR(i,hL(r.shape,"float32"));return{x:()=>o}}},GU={kernelName:bI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>GR(e,YR(ZM(n)))}}},qU={kernelName:xI,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:s}=n;return{x:()=>{let t=XR(r);if(1===r.rank)for(let n=0;n<s[0];++n)t=WR(t,IM(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<s[0];++n)for(let a=0;a<s[1];++a)t=WR(t,IM(e,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<s[0];++n)for(let a=0;a<s[1];++a)for(let i=0;i<s[2];++i)t=WR(t,IM(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<s[0];++n)for(let a=0;a<s[1];++a)for(let i=0;i<s[2];++i)for(let o=0;o<s[3];++o)t=WR(t,IM(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},KU={kernelName:CI,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=kD(t,XR(t)),r=LP(e,n);let s=$P(t,sD(0,"int32"));const a=r.rank-s.rank;for(let o=0;o<a;++o)s=RP(s,o+1);s=ZP(s,hL(r.shape,"bool"));const i=XR(r);return cP(s,r,i)}(e,n)}}};const YU=[mj,gj,yj,vj,bj,wj,xj,kj,Sj,Tj,Ej,Nj,Ij,Aj,Rj,Dj,Oj,Mj,Pj,Lj,Fj,$j,jj,zj,Bj,Vj,Wj,Hj,Gj,qj,{kernelName:mN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{const t=GR(e,UR(r,"float32")),a=wD(n.shape,s);return a.length>0?SM(NP(t,a),n.shape):t},b:()=>{let t=qR(e,UR(n,"float32"));const a=wD(r.shape,s);a.length>0&&(t=SM(NP(t,a),r.shape));const i=YR(r);return QD(GR(t,UR(i,"float32")))}}}},Kj,Yj,Xj,Qj,Jj,eU,Zj,tU,nU,aU,iU,oU,lU,cU,uU,hU,dU,pU,mU,yU,yU,vU,wU,kU,SU,TU,{kernelName:uC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>qR(e,UR(WP(n,r),"float32")),b:()=>qR(e,UR(FP(n,r),"float32"))}}},EU,{kernelName:dC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{const t=wD(n.shape,s);return t.length>0?SM(NP(e,t),n.shape):e},b:()=>{const t=qR(e,QD(PP(GR(n,r)))),a=wD(r.shape,s);return a.length>0?SM(NP(t,a),r.shape):t}}}},{kernelName:fC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{const t=qR(e,UR(r,"float32")),a=wD(n.shape,s);return a.length>0?SM(NP(t,a),n.shape):t},b:()=>{const t=qR(e,UR(n,"float32")),a=wD(r.shape,s);return a.length>0?SM(NP(t,a),r.shape):t}}}},{kernelName:mC,gradFunc:e=>({x:()=>QD(e)})},{kernelName:xC,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>uL(n.shape,"float32")}}},{kernelName:wC,gradFunc:e=>({x:()=>XR(e)})},{kernelName:kC,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return OF(e,r).map((e=>()=>e))}},NU,NU,CU,IU,AU,RU,DU,OU,MU,{kernelName:$C,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,s={dy:e,images:r};return{images:()=>J_.runKernel(zC,s,n)}}},{kernelName:LC,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,s={dy:e,images:r};return{images:()=>J_.runKernel(FC,s,n)}}},{kernelName:UC,gradFunc:(e,t,n)=>{const{dims:r}=n,s=$T(r,e.shape);return{x:()=>KL(e,s)}}},{kernelName:BC,gradFunc:e=>({x:()=>XR(e)})},PU,{kernelName:qC,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>UR(XR(n),"float32"),t:()=>qR(e,UR(n,e.dtype)),e:()=>qR(e,UR(eL(n),e.dtype))}}},LU,{kernelName:ZC,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(e,qR(n,gD(sD(1),n)))}}},{kernelName:JC,gradFunc:e=>({x:()=>XR(e)})},FU,$U,zU,{kernelName:aI,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:s}=n,a=qR(e,r);return{logits:()=>gD(a,qR(NP(a,[s],true),r))}}},jU,UU,UU,BU,BU,VU,{kernelName:hI,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=sD(2);return{a:()=>qR(e,qR(s,gD(n,r))),b:()=>qR(e,qR(s,gD(r,n)))}}},WU,{kernelName:AI,gradFunc:e=>({x:()=>XR(e)})},{kernelName:vI,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,s=xD(n.shape,r.shape);return{a:()=>{let t=e;const r=wD(n.shape,s);return r.length>0&&(t=NP(t,r)),SM(t,n.shape)},b:()=>{let t=e;const n=wD(r.shape,s);return n.length>0&&(t=NP(t,n)),SM(QD(t),r.shape)}}}},HU,GU,{kernelName:wI,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qR(gD(sD(1),YR(n)),e)}}},qU,{kernelName:TI,gradFunc:(e,t,n)=>{const r=n,{perm:s}=r,a=kP(s);return{x:()=>ZD(e,a)}}},{kernelName:NI,gradFunc:(e,t,n)=>{const r=n,{axis:s}=r;return{value:()=>bF(e,s)}}},KU,{kernelName:_I,gradFunc:e=>({x:()=>XR(e)})}];for(const n of YU)WI(n);R_().prototype.abs=function(){return this.throwIfDisposed(),vD(this)},R_().prototype.acos=function(){return this.throwIfDisposed(),XO(this)},R_().prototype.acosh=function(){return this.throwIfDisposed(),QO(this)},R_().prototype.add=function(e){return this.throwIfDisposed(),WR(this,e)},R_().prototype.all=function(e,t){return this.throwIfDisposed(),ZO(this,e,t)},R_().prototype.any=function(e,t){return this.throwIfDisposed(),eM(this,e,t)},R_().prototype.argMax=function(e){return this.throwIfDisposed(),tM(this,e)},R_().prototype.argMin=function(e){return this.throwIfDisposed(),nM(this,e)},R_().prototype.asScalar=function(){return this.throwIfDisposed(),TT(1===this.size,(()=>"The array must have only 1 element.")),SM(this,[])},R_().prototype.asType=function(e){return this.throwIfDisposed(),UR(this,e)},R_().prototype.as1D=function(){return this.throwIfDisposed(),SM(this,[this.size])},R_().prototype.as2D=function(e,t){return this.throwIfDisposed(),SM(this,[e,t])},R_().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),SM(this,[e,t,n])},R_().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),SM(this,[e,t,n,r])},R_().prototype.as5D=function(e,t,n,r,s){return this.throwIfDisposed(),SM(this,[e,t,n,r,s])},R_().prototype.asin=function(){return this.throwIfDisposed(),rM(this)},R_().prototype.asinh=function(){return this.throwIfDisposed(),sM(this)},R_().prototype.atan=function(){return this.throwIfDisposed(),aM(this)},R_().prototype.atan2=function(e){return this.throwIfDisposed(),iM(this,e)},R_().prototype.atanh=function(){return this.throwIfDisposed(),oM(this)},R_().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),TM(this,e,t,n,r)},R_().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),RM(this,e,t)},R_().prototype.batchNorm=function(e,t,n,r,s){return this.throwIfDisposed(),DM(this,e,t,n,r,s)},R_().prototype.broadcastTo=function(e){return this.throwIfDisposed(),zM(this,e)},R_().prototype.cast=function(e){return this.throwIfDisposed(),UR(this,e)},R_().prototype.ceil=function(){return this.throwIfDisposed(),jM(this)},R_().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),UM(this,e,t)},R_().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof A_&&(e=[e]),NM([this,...e],t)},R_().prototype.conv1d=function(e,t,n,r,s,a){return this.throwIfDisposed(),qM(this,e,t,n,r,s,a)},R_().prototype.conv2dTranspose=function(e,t,n,r,s){return this.throwIfDisposed(),YM(this,e,t,n,r,s)},R_().prototype.conv2d=function(e,t,n,r,s,a){return this.throwIfDisposed(),GM(this,e,t,n,r,s,a)},R_().prototype.cos=function(){return this.throwIfDisposed(),ZM(this)},R_().prototype.cosh=function(){return this.throwIfDisposed(),eP(this)},R_().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),tP(this,e,t,n)},R_().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),nP(this,e,t,n)},R_().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),sP(this,e,t)},R_().prototype.depthwiseConv2d=function(e,t,n,r,s,a){return this.throwIfDisposed(),aP(this,e,t,n,r,s,a)},R_().prototype.dilation2d=function(e,t,n,r,s){return this.throwIfDisposed(),oP(this,e,t,n,r,s)},R_().prototype.divNoNan=function(e){return this.throwIfDisposed(),uP(this,e)},R_().prototype.div=function(e){return this.throwIfDisposed(),GR(this,e)},R_().prototype.dot=function(e){return this.throwIfDisposed(),hP(this,e)},R_().prototype.elu=function(){return this.throwIfDisposed(),pP(this)},R_().prototype.equal=function(e){return this.throwIfDisposed(),lP(this,e)},R_().prototype.erf=function(){return this.throwIfDisposed(),mP(this)},R_().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),_P(this,e,t)},R_().prototype.exp=function(){return this.throwIfDisposed(),AP(this)},R_().prototype.expandDims=function(e){return this.throwIfDisposed(),RP(this,e)},R_().prototype.expm1=function(){return this.throwIfDisposed(),DP(this)},R_().prototype.fft=function(){return this.throwIfDisposed(),dF(this)},R_().prototype.flatten=function(){return this.throwIfDisposed(),SM(this,[this.size])},R_().prototype.floor=function(){return this.throwIfDisposed(),PP(this)},R_().prototype.floorDiv=function(e){return this.throwIfDisposed(),HR(this,e)},R_().prototype.gather=function(e,t,n){return this.throwIfDisposed(),LP(this,e,t,n)},R_().prototype.greaterEqual=function(e){return this.throwIfDisposed(),$P(this,e)},R_().prototype.greater=function(e){return this.throwIfDisposed(),FP(this,e)},R_().prototype.ifft=function(){return this.throwIfDisposed(),pF(this)},R_().prototype.irfft=function(){return this.throwIfDisposed(),fF(this)},R_().prototype.isFinite=function(){return this.throwIfDisposed(),zP(this)},R_().prototype.isInf=function(){return this.throwIfDisposed(),jP(this)},R_().prototype.isNaN=function(){return this.throwIfDisposed(),UP(this)},R_().prototype.leakyRelu=function(e){return this.throwIfDisposed(),BP(this,e)},R_().prototype.lessEqual=function(e){return this.throwIfDisposed(),WP(this,e)},R_().prototype.less=function(e){return this.throwIfDisposed(),VP(this,e)},R_().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),GP(this,e,t,n,r)},R_().prototype.logSigmoid=function(){return this.throwIfDisposed(),XP(this)},R_().prototype.logSoftmax=function(e){return this.throwIfDisposed(),QP(this,e)},R_().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),JP(this,e,t)},R_().prototype.log=function(){return this.throwIfDisposed(),qP(this)},R_().prototype.log1p=function(){return this.throwIfDisposed(),KP(this)},R_().prototype.logicalAnd=function(e){return this.throwIfDisposed(),ZP(this,e)},R_().prototype.logicalNot=function(){return this.throwIfDisposed(),eL(this)},R_().prototype.logicalOr=function(e){return this.throwIfDisposed(),tL(this,e)},R_().prototype.logicalXor=function(e){return this.throwIfDisposed(),nL(this,e)},R_().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),KD(this,e,t,n)},R_().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),iL(this,e,t,n,r)},R_().prototype.max=function(e,t){return this.throwIfDisposed(),TP(this,e,t)},R_().prototype.maximum=function(e){return this.throwIfDisposed(),kD(this,e)},R_().prototype.mean=function(e,t){return this.throwIfDisposed(),cL(this,e,t)},R_().prototype.min=function(e,t){return this.throwIfDisposed(),EP(this,e,t)},R_().prototype.minimum=function(e){return this.throwIfDisposed(),pL(this,e)},R_().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),fL(this,e,t)},R_().prototype.mod=function(e){return this.throwIfDisposed(),mL(this,e)},R_().prototype.mul=function(e){return this.throwIfDisposed(),qR(this,e)},R_().prototype.neg=function(){return this.throwIfDisposed(),QD(this)},R_().prototype.norm=function(e,t,n){return this.throwIfDisposed(),IP(this,e,t,n)},R_().prototype.notEqual=function(e){return this.throwIfDisposed(),bL(this,e)},R_().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),YD(this,e,t,n)},R_().prototype.onesLike=function(){return this.throwIfDisposed(),wL(this)},R_().prototype.pad=function(e,t){return this.throwIfDisposed(),kL(this,e,t)},R_().prototype.pool=function(e,t,n,r,s,a){return this.throwIfDisposed(),IL(this,e,t,n,r,s,a)},R_().prototype.pow=function(e){return this.throwIfDisposed(),mD(this,e)},R_().prototype.prelu=function(e){return this.throwIfDisposed(),_L(this,e)},R_().prototype.prod=function(e,t){return this.throwIfDisposed(),AL(this,e,t)},R_().prototype.reciprocal=function(){return this.throwIfDisposed(),HL(this)},R_().prototype.relu=function(){return this.throwIfDisposed(),GL(this)},R_().prototype.relu6=function(){return this.throwIfDisposed(),qL(this)},R_().prototype.reshapeAs=function(e){return this.throwIfDisposed(),SM(this,e.shape)},R_().prototype.reshape=function(e){return this.throwIfDisposed(),SM(this,e)},R_().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),I$(this,e,t,n)},R_().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),_$(this,e,t,n)},R_().prototype.reverse=function(e){return this.throwIfDisposed(),KL(this,e)},R_().prototype.rfft=function(){return this.throwIfDisposed(),gF(this)},R_().prototype.round=function(){return this.throwIfDisposed(),ZL(this)},R_().prototype.rsqrt=function(){return this.throwIfDisposed(),eF(this)},R_().prototype.selu=function(){return this.throwIfDisposed(),tF(this)},R_().prototype.separableConv2d=function(e,t,n,r,s,a){return this.throwIfDisposed(),nF(this,e,t,n,r,s,a)},R_().prototype.sigmoid=function(){return this.throwIfDisposed(),CM(this)},R_().prototype.sign=function(){return this.throwIfDisposed(),sF(this)},R_().prototype.sin=function(){return this.throwIfDisposed(),aF(this)},R_().prototype.sinh=function(){return this.throwIfDisposed(),iF(this)},R_().prototype.slice=function(e,t){return this.throwIfDisposed(),IM(this,e,t)},R_().prototype.softmax=function(e){return this.throwIfDisposed(),hF(this,e)},R_().prototype.softplus=function(){return this.throwIfDisposed(),YP(this)},R_().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),CL(this,e,t)},R_().prototype.split=function(e,t){return this.throwIfDisposed(),mF(this,e,t)},R_().prototype.sqrt=function(){return this.throwIfDisposed(),KR(this)},R_().prototype.square=function(){return this.throwIfDisposed(),YR(this)},R_().prototype.squaredDifference=function(e){return this.throwIfDisposed(),yF(this,e)},R_().prototype.squeeze=function(e){return this.throwIfDisposed(),vF(this,e)},R_().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof A_?[this,e]:[this,...e];return bF(n,t)},R_().prototype.step=function(e){return this.throwIfDisposed(),wF(this,e)},R_().prototype.stridedSlice=function(e,t,n,r,s,a,i,o){return this.throwIfDisposed(),xF(this,e,t,n,r,s,a,i,o)},R_().prototype.sub=function(e){return this.throwIfDisposed(),gD(this,e)},R_().prototype.sum=function(e,t){return this.throwIfDisposed(),NP(this,e,t)},R_().prototype.tan=function(){return this.throwIfDisposed(),kF(this)},R_().prototype.tanh=function(){return this.throwIfDisposed(),_M(this)},R_().prototype.tile=function(e){return this.throwIfDisposed(),OP(this,e)},R_().prototype.toBool=function(){return this.throwIfDisposed(),UR(this,"bool")},R_().prototype.toFloat=function(){return this.throwIfDisposed(),UR(this,"float32")},R_().prototype.toInt=function(){return this.throwIfDisposed(),UR(this,"int32")},R_().prototype.topk=function(e,t){return this.throwIfDisposed(),_F(this,e,t)},R_().prototype.transpose=function(e){return this.throwIfDisposed(),ZD(this,e)},R_().prototype.unique=function(e){return this.throwIfDisposed(),RF(this,e)},R_().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),DF(this,e,t)},R_().prototype.unstack=function(e){return this.throwIfDisposed(),OF(this,e)},R_().prototype.where=function(e,t){return this.throwIfDisposed(),cP(e,this,t)},R_().prototype.zerosLike=function(){return this.throwIfDisposed(),XR(this)};class XU extends Error{constructor(e){super(e),Object.setPrototypeOf(this,XU.prototype)}}class QU extends Error{constructor(e){super(e),Object.setPrototypeOf(this,QU.prototype)}}class JU extends Error{constructor(e){super(e),Object.setPrototypeOf(this,JU.prototype)}}class ZU extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ZU.prototype)}}class eB extends Error{constructor(e){super(e),Object.setPrototypeOf(this,eB.prototype)}}Error;class tB{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function nB(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function rB(e,t){if(!e)throw new eB(t)}function sB(e,t){let n=0;for(const r of e)r===t&&n++;return n}function aB(e){return 1===e.length?e[0]:e}function iB(e){return Array.isArray(e)?e:[e]}function oB(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function lB(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let cB={};function uB(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function hB(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>hB(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?hB(t):e[n]=t.value)}}}function dB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const s=e;let a;if(s in n)a=n[s];else if(s in cB)a=cB[s];else if(a=t[s],null==a)throw new JU(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{const a=e;if(null==a.className||null==a.config)throw new JU(`${r}: Improper config format: ${JSON.stringify(a)}.\n'className' and 'config' must set.`);const i=a.className;let o,l;if(i in n?[o,l]=n[i]:i in cB?[o,l]=cB.className:i in t&&([o,l]=t[i]),null==o)throw new JU(`Unknown ${r}: ${i}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const n of Object.keys(cB))e[n]=cB[n];for(const s of Object.keys(n))e[s]=n[s];a.config.customObjects=e;const t=Object.assign({},cB);for(const s of Object.keys(n))cB[s]=n[s];hB(a.config);const r=l(o,a.config,n,s);return cB=Object.assign({},t),r}{const e=Object.assign({},cB);for(const r of Object.keys(n))cB[r]=n[r];const t=new o(a.config);return cB=Object.assign({},e),t}}}function pB(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function fB(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function mB(e){if(null==e)throw new JU(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function gB(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new JU(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function yB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return rB(n>=0),rB(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function vB(e,t){Array.isArray(e)?(TT(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>vB(e,`element ${n+1} of ${t}`)))):TT(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${bB(e)}.`))}function bB(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>bB(e))).join(",")+"]":"string"===typeof e?`"${e}"`:`${e}`}function wB(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let xB=0;function kB(){return xB++}const SB={};function TB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in SB||(SB[e]=0),SB[e]+=1,e+SB[e].toString()}const EB=["channelsFirst","channelsLast"],NB=["nearest","bilinear"],CB=["valid","same","causal"],IB=["max","avg"],_B=["sum","mul","concat","ave"],AB=new Map;function RB(e){gB(EB,"DataFormat",e)}function DB(e){gB(CB,"PaddingMode",e)}function OB(e){gB(IB,"PoolMode",e)}const MB=[];function PB(e,t){MB.push(e);try{const e=t();return MB.pop(),e}catch(jEe){throw MB.pop(),jEe}}function LB(e){if(!zB(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===MB.length?"":MB.join("/")+"/")+e}function FB(e){if(!zB(e))throw new Error("Not a valid tensor name: '"+e+"'");AB.has(e)||AB.set(e,0);const t=AB.get(e);if(AB.set(e,AB.get(e)+1),t>0){const n=`${e}_${t}`;return AB.set(n,1),n}return e}const $B=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function zB(e){return!!e.match($B)}function jB(e){return e===parseInt(e.toString(),10)}function UB(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let s=t;s<n;++s)r*=e[s];return r}function BB(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function VB(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function WB(e,t){if(t<e)throw new JU(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}let HB;function GB(){return null==HB&&(HB=LA().epsilon()),HB}function qB(e,t){return UR(e,t)}function KB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),SM(e,n)}function YB(e,t,n){return EA((()=>{switch(e.rank){case 1:return oF(e,t,n);case 2:return lF(e,[t,0],[n,e.shape[1]]);case 3:return cF(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return uF(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return IM(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return IM(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new JU(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function XB(e,t,n){return EA((()=>{switch(e.rank){case 1:return oF(e,t,n);case 2:return lF(e,[0,t],[e.shape[0],n]);case 3:return cF(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return uF(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new JU(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function QB(e,t,n,r){return EA((()=>{switch(e.rank){case 1:return oF(e,t,n);case 2:switch(r){case 1:return YB(e,t,n);case 2:return XB(e,t,n);default:throw new JU(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return YB(e,t,n);case 2:return cF(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return XB(e,t,n);default:throw new JU(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return YB(e,t,n);case 2:return uF(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return uF(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return XB(e,t,n);default:throw new JU(`The axis is not within the rank of the tensor ${r}`)}default:throw new JU(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function JB(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),NM(e,n)}function ZB(e,t){switch(e.rank){case 1:return BM([e,t]);case 2:return VM([e,t],0);case 3:return WM([e,t],0);case 4:return HM([e,t],0);default:throw new JU(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function eV(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new JU(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return OP(e,t)}function tV(e){return jL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function nV(e,t,n,r){if(e.rank<2||t.rank<2)throw new ZU(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new ZU(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){return n$({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?aV(e.rank,r,"channelsLast"):null,activation:n})}{const s=e.shape.slice(),a=s.pop();e=SM(e,[-1,a]);const i=t.shape.slice(),o=i.pop(),l=i.pop(),c=[...i,o],u=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=SM(ZD(t,u),[l,-1]);const h=[...s,...c];return SM(n$({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?aV(e.rank,r,"channelsLast"):null,activation:n}),h)}}function rV(e,t,n){return EA((()=>(t=Array.isArray(t)?SF(t,"int32"):UR(t,"int32"),LP(e,t,n))))}function sV(e){return qR(e,e)}function aV(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new JU(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?SM(t,[1,r[0],1,1,1]):SM(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?SM(t,[1,1,1,1,r[0]]):SM(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?SM(t,[1,r[0],1,1]):SM(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?SM(t,[1,1,1,r[0]]):SM(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?SM(t,[1,r[0],1]):SM(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?SM(t,[1,1,r[0]]):SM(t,[1].concat(r))}else if(e<3)return t;throw new JU(`Unsupported input rank by biasAdd: ${t.rank}`)}function iV(e,t,n){return EA((()=>(null==n&&(n="channelsLast"),RB(n),WR(e,aV(e.rank,t,n)))))}function oV(e,t,n,r){return EA((()=>VF(e,t,n,r)))}function lV(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const cV=["fanIn","fanOut","fanAvg"],uV=["normal","uniform","truncatedNormal"];class hV extends oD{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class dV extends hV{apply(e,t){return uL(e,t)}}dV.className="Zeros",cD(dV);class pV extends hV{apply(e,t){return hL(e,t)}}pV.className="Ones",cD(pV);class fV extends hV{constructor(e){if(super(),"object"!==typeof e)throw new JU(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new JU(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return EA((()=>qR(sD(this.value),hL(e,t))))}getConfig(){return{value:this.value}}}fV.className="Constant",cD(fV);class mV extends hV{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return BL(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}mV.className="RandomUniform",cD(mV);class gV extends hV{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new ZU(`randomNormal does not support dType ${t}.`);return tV(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}gV.className="RandomNormal",cD(gV);class yV extends hV{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new ZU(`truncatedNormal does not support dType ${t}.`);return AF(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}yV.className="TruncatedNormal",cD(yV);class vV extends hV{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return EA((()=>{if(2!==e.length||e[0]!==e[1])throw new JU("Identity matrix initializer can only be used for 2D square matrices.");return qR(this.gain,MP(e[0]))}))}getConfig(){return{gain:this.gain}}}vV.className="Identity",cD(vV);class bV extends hV{constructor(e){if(super(),e.scale<0)throw new JU(`scale must be a positive float. Got: ${e.scale}`);var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,gB(cV,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){gB(uV,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(RB(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=UB(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=UB(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=UB(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],s=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,s):a/=Math.max(1,(r+s)/2),"normal"===this.distribution){const n=Math.sqrt(a);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new ZU(`${this.getClassName()} does not support dType ${t}.`);return AF(e,0,n,t,this.seed)}{const n=Math.sqrt(3*a);return BL(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}bV.className="VarianceScaling",cD(bV);class wV extends bV{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return bV.className}}wV.className="GlorotUniform",cD(wV);class xV extends bV{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return bV.className}}xV.className="GlorotNormal",cD(xV);class kV extends bV{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return bV.className}}kV.className="HeNormal",cD(kV);class SV extends bV{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return bV.className}}SV.className="HeUniform",cD(SV);class TV extends bV{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return bV.className}}TV.className="LeCunNormal",cD(TV);class EV extends bV{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return bV.className}}EV.className="LeCunUniform",cD(EV);class NV extends hV{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return EA((()=>{if(e.length<2)throw new ZU("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);const n=CT(e.slice(0,-1)),r=e[e.length-1],s=n*r;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const a=tV([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),i=rz.qr(a,!1);let o=i[0];const l=i[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return o=qR(o,l.sign()),n<r&&(o=o.transpose()),qR(sD(this.gain),o.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}NV.className="Orthogonal",cD(NV);const CV={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function IV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dB(e,lD.getMap().classNameMap,t,"initializer")}function _V(e){return uB(e)}function AV(e){if("string"===typeof e){const t=e in CV?CV[e]:e;if("GlorotNormal"===t)return new xV;if("GlorotUniform"===t)return new wV;if("HeNormal"===t)return new kV;if("HeUniform"===t)return new SV;if("LeCunNormal"===t)return new TV;if("LeCunUniform"===t)return new EV;{const e={};return e.className=t,e.config={},IV(e)}}return e instanceof hV?e:IV(e)}function RV(e){return Array.isArray(e)&&Array.isArray(e[0])}function DV(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function OV(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new JU(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function MV(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new JU(`Expected exactly 1 Shape; got ${e.length}`)}return e}function PV(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const LV="Variable";class FV{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LV,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=kB(),n=null==n?LV:n,this.originalName=LB(n),this.name=FB(this.originalName),this.trainable_=r,this.constraint=s,this.val=PF(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function $V(e){return e.map((e=>e.read()))}function zV(e){e.forEach((e=>{e[0].write(e[1])}))}class jV{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class UV{constructor(e,t,n,r,s,a,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=s,this.outputTensorIndex=i,this.id=kB(),null!=a&&(this.originalName=LB(a),this.name=FB(this.originalName)),this.rank=t.length}}let BV=0;class VV{constructor(e,t){this.callArgs=t,this.id=BV++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let WV=0;class HV extends oD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=WV++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=oB(e)+"_"+TB(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new QU(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new JU(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return aB(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return aB(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new XU(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new XU(`Layer ${this.name} is not connected, no input to return.`);return aB(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new XU(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new XU(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return aB(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=iB(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=iB(this.inputSpec);if(t.length!==n.length)throw new JU(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let r=0;r<t.length;r++){const e=t[r],s=n[r];if(null==s)continue;const a=e.rank;if(null!=s.ndim&&a!==s.ndim)throw new JU(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(null!=s.maxNDim&&a>s.maxNDim)throw new JU(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(null!=s.minNDim&&a<s.minNDim)throw new JU(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(null!=s.dtype&&e.dtype!==s.dtype)throw new JU(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${e.dtype}.`);if(s.axes){const t=e.shape;for(const e in s.axes){const n=Number(e),a=s.axes[e],i=n>=0?t[n]:t[t.length+n];if(null!=a&&-1===[a,null].indexOf(i))throw new JU(`Input ${r} is incompatible with layer ${this.name}: expected axis ${n} of input shape to have value ${a} but got shape ${t}.`)}}if(null!=s.shape)for(let t=0;t<s.shape.length;++t){const n=s.shape[t],a=e.shape[t];if(null!=n&&null!=a&&n!==a)throw new JU(`Input ${r} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${e.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=iB(e),r=function(e){let t=!0;for(const n of iB(e))if(!(n instanceof UV)){t=!1;break}return t}(e),s=function(e){let t=!0;for(const n of iB(e))if(n instanceof UV){t=!1;break}return t}(e);if(r===s)throw new JU("Arguments to apply() must be all SymbolicTensors or all Tensors");return PB(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of iB(e))t.push(n.shape);this.build(aB(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const s=iB(r),a=[];for(let e of s)-1!==n.indexOf(e)&&(e=e.clone()),a.push(e);if(r=aB(a),null!=this.activityRegularizer)throw new ZU("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=iB(e);const t=[];for(const n of e)t.push(n.shape);return aB(t)}(e),r=this.computeOutputShape(n);let s;const a="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),s=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new UV(a,n,this,iB(e),t,this.name,r))):new UV(a,r,this,iB(e),t,this.name),this.addInboundNode(e,s,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new ZU("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new XU(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new XU(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new QU(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return PV(this.weights)}build(e){this.built=!0}getWeights(){return $V(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){EA((()=>{const t=this.weights;if(t.length!==e.length)throw new JU(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=$V(t);for(let s=0;s<r.length;++s){const a=r[s],i=t[s],o=e[s];if(!AT(a.shape,o.shape))throw new JU(`Layer weight shape ${a.shape} not compatible with provided weight shape ${o.shape}`);n.push([i,o])}zV(n)}))}addWeight(e,t,n,r,s,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new JU(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=o?o():AV("zeros"));const l=r.apply(t,n),c=new FV(l,n,e,a,i);return l.dispose(),null!=s&&this.addLoss((()=>s.apply(c.read()))),null==a&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=iB(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),s=iB(t),a=iB(r);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let i=0;i<s.length;i++)s[i].kerasMask=a[i]}addInboundNode(e,t,n,r,s,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const o=iB(e);t=iB(t),n=iB(n),r=iB(r),s=DV(s),a=DV(a);const l=[],c=[],u=[];for(const h of o)l.push(h.sourceLayer),c.push(h.nodeIndex),u.push(h.tensorIndex);new VV({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:s,outputShapes:a},i);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function GV(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=GV(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class qV extends HV{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:TB("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new JU("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new JU("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new JU("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new UV(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new VV({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new JU(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function KV(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new JU("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");return new qV({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}qV.className="InputLayer",cD(qV);class YV{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof YV)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new JU(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return UR(t,e.dtype)}catch(UEe){throw new JU(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof UV){if(null==this.id2Value[e.id])throw new JU(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new JU(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof UV){if(null==this.id2Value[e.id])throw new JU(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new JU(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&NA(this.id2Mask)}}const XV=new tB,QV=new tB;function JV(e,t,n,r){const s=null!=n&&n.training,a=Array.isArray(e),i=a?e:[e],o=i.map((e=>e.name)),l=[],c=t.names();for(const f of o)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=o.join(",")+"|"+t.names().sort().join(",");let h,d=XV.get(u);if(null==d){const e=function(e,t){TT(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const s=eW(e[0],t);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const a of e){const{sorted:e,recipientMap:i}=eW(a,t);for(const t of e)s.has(t.name)||(n.push(t),s.add(t.name));for(const t in i)null==r[t]&&(r[t]=new Set),i[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:ZV(r)}}(i,t);d=e.sorted,h=e.recipientCounts,XV.put(u,d),QV.put(u,h)}h={},s||Object.assign(h,QV.get(u));const p=new YV(t);for(let f=0;f<d.length;++f){if(null!=r){const e=SA().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=d[f],a=e.sourceLayer;if(a instanceof qV)continue;const i=[],c=[],u=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);i.push(e),c.push(r),null!=r&&(m=!0),s||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==o.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}m&&((n=n||{}).mask=c[0]);const g=iB(a.apply(i,n));let y=null;a.supportsMasking&&(y=a.computeMask(i,c));const v=tW(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){p.hasKey(b[t])||p.add(b[t],g[t],Array.isArray(y)?y[0]:y);const e=o.indexOf(b[t].name);-1!==e&&(l[e]=g[t])}s||NA(u)}return p.disposeMasks(),a?l:l[0]}function ZV(e){const t={};for(const n in e)t[n]=e[n].size;return t}function eW(e,t){const n=new Set,r=[],s={};for(const o of t.names())n.add(o);const a=[],i=[];for(a.push(e);a.length>0;){const e=a[a.length-1];if(n.has(e.name)){a.pop();continue}const t=i[i.length-1]===a.length-1;if(0===e.inputs.length||t)a.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(a.length-1);for(const t of e.inputs)null==s[t.name]&&(s[t.name]=new Set),s[t.name].add(e.name),n.has(t.name)||a.push(t)}}return{sorted:r,recipientMap:s}}function tW(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function nW(e,t){return EA((()=>KR(NP(qR(e,e),t,!0))))}pE().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=XV&&XV.setMaxEntries(e),null!=QV&&QV.setMaxEntries(e)}));class rW extends oD{getConfig(){return{}}}class sW extends rW{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return EA((()=>{const t=nW(e,this.axis),n=UM(t,0,this.maxValue);return qR(e,GR(n,WR(GB(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}sW.className="MaxNorm",cD(sW);class aW extends rW{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return EA((()=>GR(e,WR(GB(),nW(e,this.axis)))))}getConfig(){return{axis:this.axis}}}aW.className="UnitNorm",cD(aW);class iW extends rW{apply(e){return GL(e)}}iW.className="NonNeg",cD(iW);class oW extends rW{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return EA((()=>{const t=nW(e,this.axis),n=WR(qR(this.rate,UM(t,this.minValue,this.maxValue)),qR(1-this.rate,t));return qR(e,GR(n,WR(GB(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}oW.className="MinMaxNorm",cD(oW);const lW={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function cW(e){return uB(e)}function uW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dB(e,lD.getMap().classNameMap,t,"constraint")}function hW(e){if(null==e)return null;if("string"===typeof e){return uW({className:e in lW?lW[e]:e,config:{}})}return e instanceof rW?e:uW(e)}function dW(e){return new sW(e)}function pW(e){return new aW(e)}function fW(){return new iW}function mW(e){return new oW(e)}function gW(){return new dV}function yW(){return new pV}function vW(e){return new fV(e)}function bW(e){return new mV(e)}function wW(e){return new gV(e)}function xW(e){return new yV(e)}function kW(e){return new vV(e)}function SW(e){return new bV(e)}function TW(e){return new wV(e)}function EW(e){return new xV(e)}function NW(e){return new kV(e)}function CW(e){return new SV(e)}function IW(e){return new TV(e)}function _W(e){return new EV(e)}function AW(e){return new NV(e)}async function RW(e){if(null==e)return;const t=[],n=[],r=[];for(const s in e){const a=e[s];if("number"!==typeof a){const e=a;t.push(e.data()),n.push(s),r.push(e)}}if(t.length>0){const s=await Promise.all(t);for(let t=0;t<s.length;++t)e[n[t]]=s[t][0];NA(r)}}function DW(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var OW;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(OW||(OW={}));class MW{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class PW{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class LW extends MW{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const s=EA((()=>WR(this.totals[r],qR(e,n))));this.totals[r]=s,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:EA((()=>{const e=qR(GR(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),CA(t[n])})))}}class FW extends MW{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const s in this.history){const r=this.history[s];for(let a=0;a<r.length;++a)if("number"!==typeof r[a]){const i=r[a];e.push(i.data()),t.push(s),n.push(a)}}const r=await Promise.all(e);for(let s=0;s<r.length;++s){this.history[t[s]][n[s]].dispose(),this.history[t[s]][n[s]]=r[s][0]}}}class $W extends MW{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||cz,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");YT(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,s=null!=n?n():d_();return function(){const a=null!=n?n():d_();return a-s<t||(s=a,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await RW(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await RW(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await RW(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await RW(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await RW(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):YT(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await RW(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await RW(e),await this.trainEnd(e))}}function zW(e,t){if(null==e&&(e={}),e instanceof MW)return[e];if(Array.isArray(e)&&e[0]instanceof MW)return e;return iB(e).map((e=>new $W(e,t)))}class jW{constructor(){}static registerCallbackConstructor(e,t){TT(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),jW.checkForDuplicate(t),null==jW.constructors[e]&&(jW.constructors[e]=[]),jW.constructors[e].push(t)}static checkForDuplicate(e){for(const t in jW.constructors){jW.constructors[+t].forEach((t=>{if(t===e)throw new JU("Duplicate callback constructor.")}))}}static clear(){jW.constructors={}}static createCallbacks(e){const t=[];for(const n in jW.constructors){const r=+n;e>=r&&t.push(...jW.constructors[r])}return t.map((e=>new e))}}function UW(e,t,n,r,s,a,i,o,l){const c=new FW,u=[new LW,...jW.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const h=new PW(u);return h.setParams({epochs:n,initialEpoch:r,samples:s,steps:a,batchSize:i,verbose:t,doValidation:o,metrics:l}),{callbackList:h,history:c}}function BW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return dB(e,lD.getMap().classNameMap,t,"layer",n)}function VW(e,t){return EA((()=>{"float32"!==e.dtype&&(e=UR(e,"float32"));const n=NP(sV(e),t,!0),r=pD(n.shape,GB()),s=KR(kD(n,r));return GR(e,s)}))}function WW(e,t){return EA((()=>cL(sV(gD(t,e)),-1)))}function HW(e,t){return EA((()=>cL(vD(gD(t,e)),-1)))}function GW(e,t){return EA((()=>{const n=gD(e,t),r=UM(vD(e),GB(),Number.MAX_VALUE),s=vD(GR(n,r));return qR(100,cL(s,-1))}))}function qW(e,t){return EA((()=>{const n=UM(t,GB(),Number.MAX_VALUE),r=qP(WR(1,n)),s=UM(e,GB(),Number.MAX_VALUE),a=qP(WR(1,s));return cL(sV(gD(r,a)),-1)}))}function KW(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EA((()=>{if(n)t=hF(t);else{const e=NP(t,t.shape.length-1,!0);t=GR(t,e)}return t=UM(t,GB(),1-GB()),QD(NP(qR(UR(e,"float32"),qP(t)),t.shape.length-1))}))}function YW(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EA((()=>{const r=UR(PP(function(e){const t=[UB(e.shape)];return SM(e,t)}(e)),"int32"),s=(t=UM(t,GB(),1-GB())).shape;return KW(SM(YD(r,s[s.length-1]),s),t,n)}))}function XW(e,t){return EA((()=>{let n;return n=UM(t,GB(),1-GB()),n=qP(GR(n,gD(1,n))),cL(function(e,t){if(!AT(e.shape,t.shape))throw new JU(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return EA((()=>{const n=GL(t),r=QD(vD(t));return WR(gD(n,qR(t,e)),KP(AP(r)))}))}(e,n),-1)}))}function QW(e,t){return EA((()=>{const n=UM(e,GB(),1),r=UM(t,GB(),1);return NP(qR(e,qP(GR(n,r))),-1)}))}function JW(e,t){return EA((()=>{const n=VW(e,-1),r=VW(t,-1),s=qR(n,r);return QD(NP(s,-1))}))}jW.constructors={};const ZW={meanSquaredError:WW,meanAbsoluteError:HW,meanAbsolutePercentageError:GW,meanSquaredLogarithmicError:qW,squaredHinge:function(e,t){return EA((()=>{const n=kD(0,gD(1,qR(e,t)));return cL(sV(n),-1)}))},hinge:function(e,t){return EA((()=>{const n=kD(0,gD(1,qR(e,t)));return cL(n,-1)}))},categoricalHinge:function(e,t){return EA((()=>{const n=NP(qR(e,t),-1),r=TP(qR(gD(1,e),t),-1);return kD(0,WR(1,gD(r,n)))}))},logcosh:function(e,t){return EA((()=>{const n=Math.log(2),r=gD(t,e),s=gD(WR(r,YP(qR(-2,r))),n);return cL(s,-1)}))},categoricalCrossentropy:KW,sparseCategoricalCrossentropy:YW,binaryCrossentropy:XW,kullbackLeiblerDivergence:QW,poisson:function(e,t){return EA((()=>{const n=qP(WR(GB(),t));return cL(gD(t,qR(e,n)),-1)}))},cosineProximity:JW};function eH(e){if("string"===typeof e){if(e in ZW)return ZW[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new JU(t)}return e}function tH(e,t){return EA((()=>{const n=qR(.5,wL(t)),r=qB(FP(t,n),e.dtype);return cL(lP(e,r),-1)}))}function nH(e,t){return EA((()=>qB(lP(tM(e,-1),tM(t,-1)),"float32")))}function rH(e,t){return EA((()=>UR(NP(ZP(lP(e,1),lP(t,1))),"float32")))}function sH(e,t){return EA((()=>{const n=rH(e,t),r=function(e,t){return EA((()=>UR(NP(ZP(lP(e,0),lP(t,1))),"float32")))}(e,t),s=WR(n,r);return UR(cP(FP(s,0),GR(n,s),0),"float32")}))}function aH(e,t){return EA((()=>{const n=rH(e,t),r=function(e,t){return EA((()=>UR(NP(ZP(lP(e,1),lP(t,0))),"float32")))}(e,t),s=WR(n,r);return UR(cP(FP(s,0),GR(n,s),0),"float32")}))}function iH(e,t){return XW(e,t)}function oH(e,t){return e.rank===t.rank&&(e=vF(e,[e.rank-1])),(t=tM(t,-1)).dtype!==e.dtype&&(t=UR(t,e.dtype)),UR(lP(e,t),"float32")}const lH=KW,cH=YW,uH={binaryAccuracy:tH,categoricalAccuracy:nH,precision:sH,categoricalCrossentropy:lH,sparseCategoricalCrossentropy:cH,mse:WW,MSE:WW,mae:HW,MAE:HW,mape:GW,MAPE:GW,cosine:JW};function hH(e){if("string"===typeof e&&e in uH)return uH[e];if("string"!==typeof e&&null!=e)return e;throw new JU(`Unknown metric ${e}`)}function dH(e){if(rB(null!==e,`Unknown LossOrMetricFn ${e}`),"string"===typeof e)return e;{let t;for(const n of Object.keys(ZW))if(ZW[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(uH))if(uH[n]===e){t=n;break}return void 0!==t?t:e.name}}const pH=1048576;function fH(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!mH(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>pH&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function mH(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!mH(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!mH(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function gH(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const s=function(e){let t=!0;const n=[],r=[];for(const s in e.nodesByDepth)n.push(e.nodesByDepth[s]);for(const s of n){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push(...s)}if(t)for(const s of e.layers){let e=!1;for(const n of s.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(s?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!s){a.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),yH(a,n,r),r("=".repeat(t));const o=e.layers;for(let u=0;u<o.length;++u)s?vH(o[u],n,r):bH(o[u],n,i,r),r((u===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?PV(e.collectedTrainableWeights):PV(e.trainableWeights);return t}(e),c=PV(e.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(t))}function yH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let s=0;s<e.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=e[s],r=r.slice(0,t[s]),r+=" ".repeat(t[s]-r.length);n(r)}function vH(e,t,n){let r,s;try{s=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(UEe){s="multiple"}try{r=JSON.stringify(e.outputShape)}catch(UEe){r="multiple"}yH([`${e.name} (${e.getClassName()})`,s,r,e.countParams().toString()],t,n)}function bH(e,t,n,r){let s,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(UEe){a="multiple"}try{s=JSON.stringify(e.outputShape)}catch(UEe){s="multiple"}const i=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];i.push(`${t}[${n}][${r}]`)}const o=e.name,l=e.getClassName(),c=0===i.length?"":i[0];yH([`${o} (${l})`,a,s,e.countParams().toString(),c],t,r);for(let u=1;u<i.length;++u)yH(["","","","",i[u]],t,r)}function wH(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function xH(e,t){if(null===e)return null;if("string"===typeof e)return lB(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let s=0;s<r;++s){const r=e[s];wH(t,s,r)?n.push(r):n.push(xH(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=lB(n);t[e]=xH(r,e)}}return t}}function kH(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return oB(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let s=0;s<r;++s){const r=e[s];wH(t,s,r)?n.push(r):n.push(kH(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],s=oB(n);t[s]="name"!==n&&"className"!==n||"string"!==typeof r?kH(r,n):r}return t}}const SH="4.22.0";class TH extends HV{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=TB(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],fB(this.inputs).length!==this.inputs.length)throw new JU(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);fB(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;rB(0===t,"input layer has >1 nodes"),rB(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof qV))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},s={},a={},i=[],o=(e,t,n,r,s,l)=>{null!=r&&null!=s&&null!=l||(r=e.sourceLayer,s=e.nodeIndex,l=e.tensorIndex);const c=r.inboundNodes[s];if(-1!==n.indexOf(c))throw new QU(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(c))return;this.containerNodes.add(TH.nodeKey(r,s)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let a=0;a<u;a++){const e=c.inputTensors[a],r=c.inboundLayers[a],s=c.nodeIndices[a],i=c.tensorIndices[a];o(e,t,n,r,s,i)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);i.push(c)},l=[],c=[];for(const y of this.outputs)o(y,l,c);const u=i.slice().reverse();for(const y of u){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const a=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,a),r[y.outboundLayer.id]=e,s[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const s=y.inboundLayers[r],a=y.nodeIndices[r],i=s.inboundNodes[a],o=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(e+1,o),n[i.id]=i}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(s[y])}let p=Object.keys(d).map((e=>parseInt(e,10))).sort(pB);this.layers=[];for(const y of p){const e=d[y];e.sort(((e,t)=>{const n=a[e.id],r=a[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof TH&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map((e=>parseInt(e,10))).sort(pB);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new QU(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${m}`);for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=h;const g=this.layers.map((e=>e.name));for(const y of g){const e=g.filter((e=>e===y)).length;if(1!==e)throw new QU(`The name "${y}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new VV({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new JU("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const s=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);s&&this.parseWeights(e);for(const i of this.layers)for(const[e,t]of i.weights.entries()){const a=s?`${t.name.split("/").slice(0,-1).join("/")+"/"}${e}`:t.originalName;if(null!=n[a])throw new JU(`Duplicate weight name: ${a}`);n[a]=t,r++}const a=[];for(const i in e){let r=i;if(null==n[i]){const e=i.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])a.push([n[r],e[i]]);else if(t)throw new JU(`Provided weight data has no target variable: ${i}`);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new JU(`${e.length} of ${r} weights are not set: ${e}`)}zV(a)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],s=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");s!==t&&(e[s]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${SH}`,t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=kH(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return EA((()=>{e=iB(e);const n=new YV;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return JV(this.outputs,n,t)}))}computeMask(e,t){return EA((()=>{let n;return e=iB(e),n=null==t?nB(null,e.length):iB(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=DV(e);if(t.length!==this.inputLayers.length)throw new JU(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let i=0;i<t.length;i++){const e=this.inputLayers[i],r=t[i];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(pB);if(r.length>1)for(const i of r){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let i=0;i<t.inboundLayers.length;i++){const e=t.inboundLayers[i],s=t.nodeIndices[i],a=t.tensorIndices[i],o=n[`${e.name}_${s}_${a}`];r.push(o)}const s=DV(e.computeOutputShape(aB(r))),a=e.inboundNodes.indexOf(t);for(let t=0;t<s.length;t++){n[`${e.name}_${a}_${t}`]=s[t]}}}const s=[],a=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],t=this.outputLayersNodeIndices[i],n=this.outputLayersTensorIndices[i],r=`${e.name}_${t}_${n}`;a.push(r)}for(let i=0;i<a.length;i++){const e=a[i];rB(e in n),s.push(n[e])}return aB(s)}runInternalGraph(e,t){null==t&&(t=nB(null,e.length));const n={};for(let o=0;o<this.inputs.length;++o){const r=this.inputs[o],s=e[o],a=t[o];n[r.id]=[s,a]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(pB);for(const o of r){const e=this.nodesByDepth[o];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,s=t.outputTensors,a=new Array;for(const t of r)t.id in n&&a.push(n[t.id]);if(a.length===r.length){let r,i,o,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===a.length){const[t,n]=a[0];null==c.mask&&(c.mask=n),o=iB(e.call(t,c)),l=iB(e.computeMask(t,n)),r=[t],i=[n]}else r=a.map((e=>e[0])),i=a.map((e=>e[1])),null==c.mask&&(c.mask=i),o=iB(e.call(r,c)),l=iB(e.computeMask(r,i));if(e.activityRegularizer)throw new ZU("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<s.length;++e){const t=s[e],r=o[e],a=l[e];n[t.id]=[r,a]}}}}const s=[],a=[],i=[];for(const o of this.outputs){rB(o.id in n,`Could not compute output ${o.name} : ${o.id}`);const[e,t]=n[o.id];i.push(e.shape),s.push(e),a.push(t)}return[s,a,i]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof TH?1:0;for(let e=0;e<r.inboundNodes.length;e++){const s=TH.nodeKey(r,e);this.containerNodes.has(s)&&(t[s]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new JU("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new JU(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new JU(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return EA((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=TH.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const a of this.layers){const e=a.getClassName(),r=a.getConfig(),s=[];for(let n=0;n<a.inboundNodes.length;n++){const e=a.inboundNodes[n],r=TH.nodeKey(a,n);let i={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(UEe){console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),i={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const s=e.inboundLayers[r],a=e.nodeIndices[r],o=e.tensorIndices[r];let l=t[TH.nodeKey(s,a)];null==l&&(l=0),n.push([s.name,l,o,i])}s.push(n)}}}const i={};i.name=a.name,i.className=e,i.config=r,i.inboundNodes=s,n.push(i)}e.layers=n;const r=[];for(let a=0;a<this.inputLayers.length;a++){const e=this.inputLayers[a],n=this.inputLayersNodeIndices[a],s=TH.nodeKey(e,n);if(!this.containerNodes.has(s))continue;let i=t[s];null!==i&&void 0!==i||(i=0);const o=this.inputLayersTensorIndices[a];r.push([e.name,i,o])}e.inputLayers=r;const s=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],n=this.outputLayersNodeIndices[a],r=TH.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let i=t[r];null!==i&&void 0!==i||(i=0);const o=this.outputLayersTensorIndices[a];s.push([e.name,i,o])}return e.outputLayers=s,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},s={};function a(e,t){e.name in s?s[e.name].push(t):s[e.name]=[t]}function i(e,t){const n=[];let s;for(const i of t){const o=i[0],l=i[1],c=i[2];if(s=null==i[3]?{}:i[3],!(o in r))return void a(e,t);const u=r[o];if(u.inboundNodes.length<=l)return void a(e,t);const h=u.inboundNodes[l];n.push(h.outputTensors[c])}n.length>0&&e.apply(aB(n),s)}function o(e){const s=e.name,i=BW(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[s]=i;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new JU(`Corrupted configuration, expected array for nodeData: ${e}`);a(i,e)}))}const l=t.name,c=t.layers;for(const f of c)o(f);for(;!mB(s);)for(const e of c){const t=r[e.name];if(t.name in s){const e=s[t.name];delete s[t.name];for(const n of e)i(t,n)}}const u=[],h=[],d=t.inputLayers;for(const f of d){const e=f[0],t=f[1],n=f[2];rB(e in r);const s=r[e].inboundNodes[t].outputTensors;u.push(s[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];rB(e in r);const s=r[e].inboundNodes[t].outputTensors;h.push(s[n])}return new e({inputs:u,outputs:h,name:l})}get stateful(){if(this._stateful)throw new JU("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){EA((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function EH(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function NH(e,t){return EH(e,t,"classWeight")}async function CH(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=EA((()=>{if(1===e.shape.length)return BR(e);if(2===e.shape.length){if(e.shape[1]>1){return tM(e,1)}if(1===e.shape[1])return SM(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());NA(t);const s=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);s.push(n[e])})),SF(s,"float32")}return null}function IH(e,t){return qR(e,t)}function _H(e,t){let n,r;const s=t;n=s.xs,r=s.ys,TT(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const a=AH("input",e.inputNames,n),i=AH("output",e.outputNames,r),o=a[0].shape[0];TT(a.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),TT(i.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let l=0;l<a.length;l++)TT(a[l].shape[0]===o,(()=>`Batch size mismatch: input ${e.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`));for(let l=0;l<i.length;l++)TT(i[l].shape[0]===o,(()=>`Batch size mismatch: output ${e.outputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`));return{xs:a,ys:i}}function AH(e,t,n){if(n instanceof A_)return[n];if(Array.isArray(n))return TT(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const s of t){if(null==n[s])throw new JU(`The feature data generated by the dataset lacks the required ${e} key '${s}'.`);r.push(n[s])}return r}}async function RH(e,t,n){const r=null!=n.batchesPerEpoch;if(TT(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),TT(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),TT(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),TT(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),TT(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const s=null!=n.validationData;let a,i;if(s)if(DH(n.validationData))TT(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new ZU("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,i=e.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=s?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const u=zW(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=UW(u,h,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,s,c);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const c={};await d.onEpochBegin(f);let u=0,h=0;for(r||(m=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${u} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:s}=_H(e,t.value),a={};a.batch=h,a.size=r[0].shape[0],await d.onBatchBegin(h,a);const i=[];if(null!=n.classWeight){const t=NH(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await CH(s[e],null,t[e]))}const c=r.concat(s).concat(i),p=o(c);NA(c);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];a[t]=n,CA(n)}await d.onBatchEnd(h,a),DW(a),h++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(s){let t;t=DH(n.validationData)?iB(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):iB(e.evaluate(a,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,c),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function DH(e){return"function"===typeof e.iterator}function OH(e){TT(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function MH(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>YB(e,t,n-t))):YB(e,t,n-t)}function PH(e,t){return EA((()=>null==e?null:Array.isArray(e)?e.map((e=>PH(e,t))):rV(e,"int32"===t.dtype?t:UR(t,"int32"))))}function LH(e,t){const n=[];let r=0,s=null;for(;r<e;)s=r+t,s>=e&&(s=e),n.push([r,s]),r=s;return n}function FH(e){const t=[];e instanceof A_&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(KB(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function $H(e,t){if(null==e)return;const n=[];if(t instanceof A_)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const s in t){const e=t[s];n.push(e.id)}const r=[];if(e instanceof A_)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const s in e){const t=e[s];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function zH(e){return Array.isArray(e)}function jH(e){return!function(e){return e instanceof A_}(e)&&!zH(e)}function UH(e,t,n){let r,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(zH(e)&&e.length>0)t=!0;else if(jH(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new JU(`Error when checking model ${a} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));if(jH(e)){r=[];for(const n of t){if(null==e[n])throw new JU(`No data provided for "${n}". Need data for each key in: ${t}`);r.push(e[n])}}else if(zH(e)){if(e.length!==t.length)throw new JU(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(t.length>1)throw new JU(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=FH(r),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new JU(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${e.shape}`);for(let t=0;t<n[i].length;++t){if(0===t&&!s)continue;const r=e.shape[t],o=n[i][t];if(null!=o&&o>=0&&r!==o)throw new JU(`${a} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${a} received an input with ${e.shape[0]} examples, each with shape [${e.shape.slice(1,e.shape.length)}] (tensor shape [${e.shape}])`)}}return r}function BH(e,t,n){let r,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new JU(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new JU(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new JU(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let r=0;r<n[i].length;++r){if(0===r&&!s)continue;const o=e.shape[r],l=n[i][r];if(null!=l&&l!==o)throw new JU(`Error when checking ${a}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}class VH extends TH{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new JU("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");gH(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>oz.adagrad(.01),Adadelta:()=>oz.adadelta(1,.95,GB()),Adam:()=>oz.adam(.001,.9,.999,GB()),Adamax:()=>oz.adamax(.002,.9,.999,GB(),0),RMSProp:()=>oz.rmsprop(.001,.9,0,GB()),SGD:()=>oz.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new JU(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof hD))throw new JU("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new JU(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>eH(e)))}else{const n=eH(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new JU(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(eH(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const e=this.internalOutputShapes[a],t=this.outputNames[a];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[a])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],PB("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),s=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};PB("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,a;for(const i of t){if("string"===typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let s;1===t[t.length-1]||this.lossFunctions[e]===XW?-1!==["accuracy","acc"].indexOf(i)?r=tH:-1!==["crossentropy","ce"].indexOf(i)&&(r=iH):this.lossFunctions[e]===YW?-1!==["accuracy","acc"].indexOf(i)?r=oH:-1!==["crossentropy","ce"].indexOf(i)&&(r=cH):-1!==["accuracy","acc"].indexOf(i)?r=nH:-1!==["crossentropy","ce"].indexOf(i)&&(r=lH),-1!==["accuracy","acc"].indexOf(i)?s="acc":-1!==["crossentropy","ce"].indexOf(i)&&(s="ce"),a=r,n=""+s}else{const e=hH(i);a=e,n=""+dH(i)}let t;PB(n,(()=>{t=a})),s(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;OH(r);const s=this.standardizeUserDataXY(e,t,!0,r);try{const e=s[0].concat(s[1]);this.makeTestFunction();const t=this.testFunction;return aB(this.testLoop(t,e,r,n.verbose,n.steps))}finally{$H(s[0],e),$H(s[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,s=e.testFunction;let a=[];if(n.verbose>0)throw new ZU("Verbose mode is not implemented yet.");TT(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const i="function"===typeof t.next?t:await t.iterator();let o=0,l=0;for(;!r||l<n.batches;){const t=await i.next();if(a=EA((()=>{if(t.value){const{xs:n,ys:r}=_H(e,t.value),i=n.concat(r),c=EA((()=>s(i)));if(NA(i),0===l)for(let e=0;e<c.length;++e)a.push(sD(0));const u=i[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=a[e];a[e]=EA((()=>WR(a[e],qR(u,t)))),l>0&&NA(n)}NA(c),o+=u,++l}return a})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const e=a[c];a[c]=GR(a[c],o),NA(e)}return aB(a)}(this,e,t)}checkNumSamples(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new JU(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new JU(`Either the input data should have a defined shape, or ${s} shoud be specified.`);r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new JU("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],s=this.retrieveSymbolicTensors(r),a=new YV;if(e instanceof A_&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new JU(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(const o of this.inputs){const t=e[o.name];if(null==t)throw new JU(`No value is provided for the model's input ${o.name}`);a.add(o,t)}const i=JV(s,a);return n?i:i[0]}retrieveSymbolicTensors(e){const t=nB(null,e.length);let n=e.length;for(const r of this.layers){const s=Array.isArray(r.output)?r.output:[r.output],a=s.map((e=>e.name));for(let r=0;r<e.length;++r){const i=a.indexOf(e[r]);if(-1!==i&&(t[r]=s[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new JU(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EA((()=>{const r=this.checkNumSamples(e);if(n)throw new ZU("Verbose predictLoop() is not implemented yet.");const s=LH(r,t),a=this.outputs.map((e=>[]));for(let t=0;t<s.length;++t){EA((()=>{const n=s[t][0],r=s[t][1],a=MH(e,n,r),i=[];if(Array.isArray(a))for(let e=0;e<a.length;++e)i.push({key:this.inputs[e],value:a[e]});else i.push({key:this.inputs[0],value:a});const o=new YV(i);return JV(this.outputs,o)})).forEach(((e,t)=>a[t].push(e)))}return aB(a.map((e=>NM(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=FH(e);BH(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return OH(e),this.predictLoop(n,e)}finally{$H(n,e)}}predictOnBatch(e){BH(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new QU("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let s=0;s<this.feedOutputShapes.length;++s){const e=this.feedOutputShapes[s];this.feedLossFns[s]===YW?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=fB(e.map((e=>e.shape[0])));n.sort();const r=fB(t.map((e=>e.shape[0])));if(r.sort(),n.length>1)throw new JU(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new JU(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(n.length>0&&r.length>0&&!AT(n,r))throw new JU(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=UH(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=UH(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[WW,XW,KW];for(let s=0;s<e.length;++s){const a=e[s],i=t[s],o=n[s];if(null!=i){if(i===KW&&1===a.shape[a.shape.length-1])throw new JU(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(i)){const e=a.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){const r=e[n],s=t[n];if(null!=s&&r!==s)throw new JU(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new JU(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${n}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0;const[i,o]=this.standardizeUserDataXY(e,t,s,a);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=NH(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await CH(o[t],null,e[t]))}return[i,o,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0;return EA((()=>{const a=this.checkNumSamples(t,n,s,"steps"),i=[];if(r>0)throw new ZU("Verbose mode is not implemented yet.");if(null!=s)throw new ZU("steps mode in testLoop() is not implemented yet");{const r=LH(a,n),s=SF(WB(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],o=r[n][1],l=YB(s,a,o-a),c=PH(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)i.push(sD(0));for(let e=0;e<u.length;++e){const t=u[e];i[e]=WR(i[e],qR(o-a,t))}}for(let e=0;e<i.length;++e)i[e]=GR(i[e],a)}return i}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let s=r;if(sB(e,r)>1){s+=`_${sB(e.slice(0,n),r)}`}t.push(s)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],i=this.collectedTrainableWeights.map((e=>e.read()));return[this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new YV(e),o=JV(this.outputs,i,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],o[n]);null!=s[n]&&(e=IH(e,s[n]));const a=cL(e);t.push(a),l=0===n?e:WR(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],s=this.metricsTensors[n][1];e=cL(t(r[s],o[s]))}CA(e),a.push(e)}return l=cL(l),this.calculateLosses().forEach((e=>{l=WR(l,e)})),l}),!0,i)].concat(a)}}makeTestFunction(){this.testFunction=e=>EA((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let e=0;e<this.inputs.length;++e)a.push({key:this.inputs[e],value:r[e]});const i=new YV(a),o=JV(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],a=cL(r(s[e],o[e]));n=0===e?a:WR(n,a),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],a=cL(n(s[r],o[r]));t.push(a)}return t}))}async fit(e,t){let n,r,s,a,i,o,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const d=null==h.batchSize?32:h.batchSize;OH(d);const p=!1,f=await this.standardizeUserData(e,t,h.sampleWeight,h.classWeight,p,d);n=f[0],r=f[1],u=f[2];let m,g=!1;if(null!=h.validationData&&h.validationData.length>0){if(g=!0,2!==h.validationData.length)throw 3===h.validationData.length?new ZU("validationData including sample weights is not supported yet."):new JU(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${h.validationData} is invalid.`);i=h.validationData[0],o=h.validationData[1];const e=!0,t=await this.standardizeUserData(i,o,null,null,e,d);l=t[0],c=t[1],m=l.concat(c)}else if(null!=h.validationSplit&&h.validationSplit>0&&h.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-h.validationSplit)),t=n[0].shape[0];l=MH(n,e,t),s=n,n=MH(n,0,e),c=MH(r,e,t),a=r,r=MH(r,0,e),m=l.concat(c)}else null!=h.validationSteps&&(g=!0);const y=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,x;g?(this.makeTestFunction(),w=this.testFunction,x=b.slice().concat(b.map((e=>"val_"+e)))):(w=null,m=[],x=b.slice());const k=zW(h.callbacks,h.yieldEvery);return await this.fitLoop(v,y,b,d,h.epochs,h.verbose,k,w,m,h.shuffle,x,h.initialEpoch,null,null)}finally{this.isTraining=!1,$H(n,e),$H(r,t),$H(s,e),$H(a,t),$H(l,i),$H(c,o),null!=u&&NA(u)}}async fitLoop(e,t,n,r,s,a,i,o,l,c,u,h,d,p){null==r&&(r=32),null==s&&(s=1),null==c&&(c=!0),null==h&&(h=0);let f=!1;if(null!=o&&null!=l&&(f=!0),null!=p&&(f=!0,null==d))throw new JU("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,d,"steps_per_epoch");let g;null!=m&&(g=WB(0,m)),null==a&&(a=1);const{callbackList:y,history:v}=UW(i,a,s,h,m,d,r,f,u);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<s;++b){await y.onEpochBegin(b);const s={};if(null!=d)throw new ZU("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new ZU("batch shuffling is not implemneted yet");c&&gT(g);const a=SF(g),i=LH(m,r);for(let c=0;c<i.length;++c){const u={};if(await y.onBatchBegin(c,u),EA((()=>{const h=i[c][0],d=i[c][1],p=YB(a,h,d-h);u.batch=c,u.size=d-h;const m=PH(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];u[t]=r,CA(r)}if(c===i.length-1&&f){const e=this.testLoop(o,l,r);for(let t=0;t<n.length;++t){const r=n[t],a=e[t];CA(a),s["val_"+r]=a}}})),await y.onBatchEnd(c,u),DW(u),this.stopTraining_)break}a.dispose()}if(await y.onEpochEnd(b,s),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return RH(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],s=n[1],a=this.makeTrainFunction()(r.concat(s)),i=[];for(const o of a){const e=await o.data();i.push(e[0])}return NA(a),$H(n[0],e),$H(n[1],t),aB(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,s=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||t.push({name:r[a].originalName,tensor:s[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=SA().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-SA().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=oB(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>oB(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=oB(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[oB(dH(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>oB(dH(e))));{const e={};for(const t in this.metrics)e[t]=oB(dH(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=BW(xH(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=lB(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>lB(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=lB(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>lB(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=lB(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=aR(e);if(0===t.length)throw new JU(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new JU(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new JU("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await zA(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${SH}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:s}=await zA(await this.optimizer.getWeights(),e);n.specs.push(...s),n.data=YA([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;fH(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){fH(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}VH.className="Model",cD(VH);class WH extends VH{}async function HH(e,t){"modelTopology"in e||(e={modelTopology:e});let n=e.modelTopology;null!=n.model_config&&(n=n.model_config);const r=BW(xH(n),t);if(null!=e.weightsManifest){const t=await MD(e.weightsManifest,e.pathPrefix,r.weights.map((e=>e.originalName))),n={};for(const e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),NA(t)}return r}async function GH(e,t){if(null==t&&(t={}),"string"===typeof e){const n=iR(e,t);if(0===n.length)n.push(jD(e,t));else if(n.length>1)throw new JU(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return async function(e,t,n){null==n&&(n={});if(null==e.load)throw new JU("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await e.load();let s=r.modelTopology;null!=s.model_config&&(s=s.model_config);const a=null==n.strict||n.strict,i=null!=r.weightData&&null!=r.weightSpecs&&a,o=BW(xH(s),t,i),l=r.trainingConfig;null!=l&&o.loadTrainingConfig(l);null!=r.userDefinedMetadata&&o.setUserDefinedMetadata(r.userDefinedMetadata);if(null!=r.weightData){if(null==r.weightSpecs)throw new JU("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:e,optimizerWeights:t}=function(e,t){const n=jA(e,t),r={},s=[];return t.forEach((e=>{"optimizer"===e.group?s.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:s}}(r.weightData,r.weightSpecs);o.loadWeights(e,a),null!=o.optimizer&&t.length>0&&await o.optimizer.setWeights(t),NA(e),NA(t.map((e=>e.tensor)))}return o}(e,void 0,t)}WH.className="Functional",cD(WH);class qH extends VH{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:TB("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new JU(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof qH||e instanceof VH;let n;if(t){if(n=e,1!==n.outputs.length)throw new JU("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new JU("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new JU("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=KV({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new JU(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new JU("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=GV(this.outputs[0])}this.inboundNodes=[],new VV({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:nB(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(MV(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new VH({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new QU("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new QU("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new QU("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new QU("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new JU("Legacy serialization format not supported yet.");n=t}else TT(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,s=t;const a=new e(s);if(!(a instanceof qH))throw new ZU(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const i of n){const e=BW(i,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),a.add(e)}return a}set stopTraining(e){if(null==this.model)throw new JU("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new JU("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}function KH(e){return new VH(e)}function YH(e){return new qH(e)}function XH(e){return KV(e)}function QH(e,t){jW.registerCallbackConstructor(e,t)}qH.className="Sequential",cD(qH);class JH extends oD{getConfig(){return{}}}class ZH extends JH{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new ZU(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return pP(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}ZH.className="elu",cD(ZH);class eG extends JH{apply(e){return tF(e)}}eG.className="selu",cD(eG);class tG extends JH{apply(e){return GL(e)}}tG.className="relu",cD(tG);class nG extends JH{apply(e){return EA((()=>pL(6,GL(e))))}}nG.className="relu6",cD(nG);class rG extends JH{apply(e){return e}}rG.className="linear",cD(rG);class sG extends JH{apply(e){return CM(e)}}sG.className="sigmoid",cD(sG);class aG extends JH{apply(e){return function(e){return EA((()=>{const t=WR(.5,qR(.2,e));return UM(t,0,1)}))}(e)}}aG.className="hardSigmoid",cD(aG);class iG extends JH{apply(e){return YP(e)}}iG.className="softplus",cD(iG);class oG extends JH{apply(e){return function(e){return EA((()=>GR(e,WR(vD(e),1))))}(e)}}oG.className="softsign",cD(oG);class lG extends JH{apply(e){return _M(e)}}lG.className="tanh",cD(lG);class cG extends JH{apply(e){return hF(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}cG.className="softmax",cD(cG);class uG extends JH{apply(e){return QP(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}uG.className="logSoftmax",cD(uG);class hG extends JH{apply(e){return EA((()=>EA((()=>{const t=Math.sqrt(2),n=qR(.5,WR(1,mP(GR(e,t))));return qR(e,n)}))))}}hG.className="gelu",cD(hG);class dG extends JH{apply(e){return EA((()=>qR(.5,qR(e,WR(1,_M(qR(KR(GR(2,Math.PI)),WR(e,qR(.044715,mD(e,3))))))))))}}dG.className="gelu_new",cD(dG);class pG extends JH{apply(e){return EA((()=>qR(e,_M(YP(e)))))}}pG.className="mish",cD(pG);class fG extends JH{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return EA((()=>qR(CM(qR(e,t)),e)))}}function mG(e){return e.getClassName()}function gG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dB(e,lD.getMap().classNameMap,t,"activation")}function yG(e){if(null==e){const e={className:"linear",config:{}};return gG(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},gG(t)}return e instanceof JH?e:gG(e)}function vG(e){if(null!=e&&"object"!==typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}fG.className="swish",cD(fG);class bG extends oD{}class wG extends bG{constructor(e){super(),vG(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return EA((()=>{let t=uL([1]);return this.hasL1&&(t=WR(t,NP(qR(this.l1,vD(e))))),this.hasL2&&(t=WR(t,NP(qR(this.l2,sV(e))))),SM(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}wG.className="L1L2",cD(wG);const xG={l1l2:"L1L2"};function kG(e){return uB(e)}function SG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dB(e,lD.getMap().classNameMap,t,"regularizer")}function TG(e){if(null==e)return null;if("string"===typeof e){return SG({className:e in xG?xG[e]:e,config:{}})}return e instanceof bG?e:SG(e)}class EG extends HV{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=OV(e);let n=GL(e);return null!=this.maxValue&&(n=UM(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}EG.className="ReLU",cD(EG);class NG extends HV{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=OV(e);return BP(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}NG.className="LeakyReLU",cD(NG);class CG extends HV{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=AV(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=TG(e.alphaRegularizer),this.alphaConstraint=hW(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new JU(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=MV(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new jV({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=OV(e),_L(e,this.alpha.read())}getConfig(){const e={alphaInitializer:_V(this.alphaInitializer),alphaRegularizer:kG(this.alphaRegularizer),alphaConstraint:cW(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}CG.className="PReLU",cD(CG);class IG extends HV{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new ZU(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=OV(e);return pP(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}IG.className="ELU",cD(IG);class _G extends HV{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=OV(e);return qR(n,UR(FP(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}_G.className="ThresholdedReLU",cD(_G);class AG extends HV{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new cG).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return EA((()=>{let n=OV(e);const r=t.mask;if(null!=r){const e=qR(gD(hL(n.shape),UR(r,n.dtype)),sD(-1e9));n=WR(n,e)}return this.axis instanceof Array?this.axis.length>1?AP(gD(n,JP(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function RG(e,t,n){if("number"===typeof e)return nB(e,t);if(e.length!==t)throw new JU(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const s=e[r];if(!jB(s))throw new JU(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${s}`)}return e}function DG(e,t,n,r){if(null==e)return e;let s;return s="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((s+r-1)/r)}function OG(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+VB([n-t,0]);else{if("same"!==r)throw new JU(`Unsupport padding mode: ${r}.`);e*=t}return e}function MG(e,t){return EA((()=>(RB(t),"channelsFirst"===t?ZD(e,[0,2,3,1]):e)))}function PG(e,t){return EA((()=>(RB(t),"channelsFirst"===t?ZD(e,[0,2,3,4,1]):e)))}function LG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return EA((()=>{if(null==a&&(a="channelsLast"),RB(a),3!==e.shape.length)throw new JU(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new JU(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new JU(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===a&&(e=ZD(e,[0,2,1])),"causal"===s)throw new ZU("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=qM(e,t,r,"same"===s?"same":"valid","NWC",i);return null!=n&&(o=iV(o,n)),o}))}function FG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return EA((()=>{if(null==a&&(a="channelsLast"),RB(a),3!==e.rank&&4!==e.rank)throw new JU(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new JU(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=MG(e,a);if("causal"===s)throw new ZU("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=JF({x:l,filter:t,strides:r,pad:"same"===s?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===a&&(l=ZD(l,[0,3,1,2])),l}))}function $G(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return EA((()=>{if(null==a&&(a="channelsLast"),RB(a),4!==e.rank&&5!==e.rank)throw new JU(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new JU(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=PG(e,a);if("causal"===s)throw new ZU("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=XM(o,t,r,"same"===s?"same":"valid","NDHWC",i),null!=n&&(o=iV(o,n)),"channelsFirst"===a&&(o=ZD(o,[0,4,1,2,3])),o}))}AG.className="Softmax",cD(AG);class zG extends HV{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",zG.verifyArgs(t),this.rank=e,vB(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new ZU(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=RG(t.kernelSize,e,"kernelSize"),this.strides=RG(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,DB(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,RB(this.dataFormat),this.activation=yG(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=AV(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=hW(t.biasConstraint),this.biasRegularizer=TG(t.biasRegularizer),this.activityRegularizer=TG(t.activityRegularizer),this.dilationRate=RG(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new JU(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new JU(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new JU(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(rB("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!yB(e.kernelSize,"number",1,3))throw new JU(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:mG(this.activation),useBias:this.useBias,biasInitializer:_V(this.biasInitializer),biasRegularizer:kG(this.biasRegularizer),activityRegularizer:kG(this.activityRegularizer),biasConstraint:cW(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class jG extends zG{constructor(e,t){super(e,t),this.kernel=null,jG.verifyArgs(t),this.filters=t.filters,vB(this.filters,"filters"),this.kernelInitializer=AV(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=hW(t.kernelConstraint),this.kernelRegularizer=TG(t.kernelRegularizer)}build(e){e=MV(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new JU(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return EA((()=>{let t;e=OV(e);const n=null==this.bias?null:this.bias.read(),r=wB(this.activation.getClassName());if(null!=r&&2===this.rank)t=FG(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=LG(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=FG(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new ZU("convolutions greater than 3D are not implemented yet.");t=$G(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=MV(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<n.length;++s){const e=DG(n[s],this.kernelSize[s],this.padding,this.strides[s],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[s]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:_V(this.kernelInitializer),kernelRegularizer:kG(this.kernelRegularizer),kernelConstraint:cW(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new JU(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class UG extends jG{constructor(e){super(2,e),UG.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!yB(e.kernelSize,"number",1,2))throw new JU(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}UG.className="Conv2D",cD(UG);class BG extends jG{constructor(e){super(3,e),BG.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new JU(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}BG.className="Conv3D",cD(BG);class VG extends UG{constructor(e){if(super(e),this.inputSpec=[new jV({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new JU(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=MV(e)).length)throw new JU("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new JU("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new jV({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return EA((()=>{let t=OV(e);if(4!==t.shape.length)throw new JU(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let s,a;"channelsFirst"===this.dataFormat?(s=2,a=3):(s=1,a=2);const i=n[s],o=n[a],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],h=this.strides[1],d=[r,OG(i,u,l,this.padding),OG(o,h,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=ZD(t,[0,2,3,1]));let p=YM(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=ZD(p,[0,3,1,2])),null!=this.bias&&(p=iV(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p}))}computeOutputShape(e){const t=(e=MV(e)).slice();let n,r,s;"channelsFirst"===this.dataFormat?(n=1,r=2,s=3):(n=3,r=1,s=2);const a=this.kernelSize[0],i=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=OG(t[r],o,a,this.padding),t[s]=OG(t[s],l,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}VG.className="Conv2DTranspose",cD(VG);class WG extends BG{constructor(e){if(super(e),this.inputSpec=[new jV({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new JU(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=MV(e)).length)throw new JU("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new JU("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new jV({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return EA((()=>{let t=OV(e);if(5!==t.shape.length)throw new JU(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let s,a,i;"channelsFirst"===this.dataFormat?(i=2,s=3,a=4):(i=1,s=2,a=3);const o=n[i],l=n[s],c=n[a],u=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,OG(o,p,u,this.padding),OG(l,f,h,this.padding),OG(c,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=ZD(t,[0,2,3,4,1]));let y=JM(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=ZD(y,[0,4,1,2,3])),null!==this.bias&&(y=iV(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y}))}computeOutputShape(e){const t=(e=MV(e)).slice();let n,r,s,a;"channelsFirst"===this.dataFormat?(n=1,r=2,s=3,a=4):(n=4,r=1,s=2,a=3);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[r]=OG(t[r],c,i,this.padding),t[s]=OG(t[s],u,o,this.padding),t[a]=OG(t[a],h,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}WG.className="Conv3DTranspose",cD(WG);class HG extends jG{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new JU("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new JU("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new JU(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=AV(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=TG(t.depthwiseRegularizer),this.depthwiseConstraint=hW(t.depthwiseConstraint),this.pointwiseInitializer=AV(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=TG(t.pointwiseRegularizer),this.pointwiseConstraint=hW(t.pointwiseConstraint)}build(e){if((e=MV(e)).length<this.rank+2)throw new JU(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new JU(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),s=[];for(let i=0;i<this.rank;++i)s.push(1);s.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new jV({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return EA((()=>{let t;if(e=OV(e),1===this.rank)throw new ZU("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=ZD(e,[0,2,3,1])),t=nF(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=iV(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=ZD(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=_V(this.depthwiseInitializer),e.pointwiseInitializer=_V(this.pointwiseInitializer),e.depthwiseRegularizer=kG(this.depthwiseRegularizer),e.pointwiseRegularizer=kG(this.pointwiseRegularizer),e.depthwiseConstraint=cW(this.depthwiseConstraint),e.pointwiseConstraint=cW(this.pointwiseConstraint),e}}HG.className="SeparableConv";class GG extends HG{constructor(e){super(2,e)}}GG.className="SeparableConv2D",cD(GG);class qG extends jG{constructor(e){super(1,e),qG.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!yB(e.kernelSize,"number",1,1))throw new JU(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}qG.className="Conv1D",cD(qG);class KG extends HV{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return EA((()=>{if(e=OV(e),"channelsLast"===this.dataFormat){const t=QB(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return QB(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=QB(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return QB(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}KG.className="Cropping2D",cD(KG);class YG extends HV{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,RB(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,gB(NB,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return EA((()=>{let t=OV(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=ZD(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],s="nearest"===this.interpolation?nz.resizeNearestNeighbor(t,[e,r]):nz.resizeBilinear(t,[e,r]);return ZD(s,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?nz.resizeNearestNeighbor(t,[e,r]):nz.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}YG.className="UpSampling2D",cD(YG);class XG extends zG{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=AV(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=hW(e.depthwiseConstraint),this.depthwiseRegularizer=TG(e.depthwiseRegularizer)}build(e){if((e=MV(e)).length<4)throw new JU(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new JU(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return EA((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return EA((()=>{null==s&&(s="channelsLast"),RB(s);let i=MG(e,s);if(4!==e.rank)throw new JU(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new JU(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=aP(i,t,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===s&&(i=ZD(i,[0,3,1,2])),i}))}(e=OV(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=iV(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=MV(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=DG(t,this.kernelSize[0],this.padding,this.strides[0]),a=DG(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,s,a]:[e[0],s,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=_V(this.depthwiseInitializer),e.depthwiseRegularizer=kG(this.depthwiseRegularizer),e.depthwiseConstraint=cW(this.depthwiseRegularizer),e}}function QG(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new JU("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function s(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=s(t),constants:n=s(n)}}function JG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return EA((()=>{const l=t.shape.length;if(l<3)throw new JU(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(WB(2,l));if(t=ZD(t,c),null!=a)throw new ZU("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=s&&(s=UR(UR(s,"bool"),"float32"),s.rank===l-1&&(s=RP(s,-1)),s=ZD(s,c)),r&&(t=KL(t,0),null!=s&&(s=KL(s,0)));const u=[];let h,d=n;const p=t.shape[0],f=OF(t);let m,g;null!=s&&(m=OF(s));for(let t=0;t<p;++t){const n=f[t],r=EA((()=>e(n,d)));if(null==s)h=r[0],d=r[1];else{const e=EA((()=>{const e=m[t],n=gD(wL(e),e);return{output:WR(qR(r[0],e),qR(d[0],n)),newStates:d.map(((t,s)=>WR(qR(r[1][s],e),qR(t,n))))}}));h=e.output,d=e.newStates}o&&u.push(h)}if(o){g=bF(u,1)}return[h,g,d]}))}XG.className="DepthwiseConv2D",cD(XG);class ZG extends HV{constructor(e){let t;if(super(e),null==e.cell)throw new JU("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new oq({cells:e.cell}):e.cell,null==t.stateSize)throw new JU("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new jV({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return WB(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){RV(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return EA((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new ZU("Constants support is not implemented in RNN yet.");RV(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new jV({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let s;if(this.cell.build(r),s=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!AT(this.stateSpec.map((e=>e.shape[e.shape.length-1])),s))throw new JU(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map((e=>new jV({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];EA((()=>{if(!this.stateful)throw new XU("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new JU("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>uL([n,e]))):this.states_=[uL([n,this.cell.stateSize])];else if(null==e)NA(this.states_),null!=this.keptStates&&(NA(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>uL([n,e]))):this.states_[0]=uL([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new JU(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):NA(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,a=[n,s];if(!AT(r.shape,a))throw new JU(`State ${t} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>CA(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const s=QG(e,n,r,this.numConstants);e=s.inputs,n=s.initialState,r=s.constants;let a=[],i=[];if(null!=n){t.initialState=n,a=a.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new jV({shape:e.shape}));i=i.concat(this.stateSpec)}null!=r&&(t.constants=r,a=a.concat(r),this.numConstants=r.length);if(a[0]instanceof UV){const n=[e].concat(a),r=this.inputSpec.concat(i),s=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=s,o}return super.apply(e,t)}call(e,t){return EA((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let s=null==t?null:t.initialState;e=OV(e),null==s&&(s=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new JU(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},o=JG(((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]}),e,s,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],c=o[1],u=o[2];this.stateful&&this.resetStates(u,r);const h=this.returnSequences?c:l;return this.returnState?[h].concat(u):h}))}getInitialState(e){return EA((()=>{let t=uL(e.shape);return t=NP(t,[1,2]),t=KB(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?eV(t,[1,e]):t)):this.cell.stateSize>1?[eV(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===ZG.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=BW(t.cell,n);return new e(Object.assign(t,{cell:r}))}}ZG.className="RNN",cD(ZG);class eq extends HV{}class tq extends eq{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,vB(this.units,"units"),this.activation=yG(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=AV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=AV(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=AV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=TG(e.kernelRegularizer),this.recurrentRegularizer=TG(e.recurrentRegularizer),this.biasRegularizer=TG(e.biasRegularizer),this.kernelConstraint=hW(e.kernelConstraint),this.recurrentConstraint=hW(e.recurrentConstraint),this.biasConstraint=hW(e.biasConstraint),this.dropout=BB([1,VB([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=BB([1,VB([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=MV(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return EA((()=>{if(2!==e.length)throw new JU(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let s;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=lq({ones:()=>wL(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=lq({ones:()=>wL(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;s=nV(null!=a?qR(e,a):e,this.kernel.read()),null!=this.bias&&(s=iV(s,this.bias.read())),null!=i&&(n=qR(n,i));let o=WR(s,nV(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:mG(this.activation),useBias:this.useBias,kernelInitializer:_V(this.kernelInitializer),recurrentInitializer:_V(this.recurrentInitializer),biasInitializer:_V(this.biasInitializer),kernelRegularizer:kG(this.kernelRegularizer),recurrentRegularizer:kG(this.recurrentRegularizer),biasRegularizer:kG(this.biasRegularizer),activityRegularizer:kG(this.activityRegularizer),kernelConstraint:cW(this.kernelConstraint),recurrentConstraint:cW(this.recurrentConstraint),biasConstraint:cW(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}tq.className="SimpleRNNCell",cD(tq);class nq extends ZG{constructor(e){e.cell=new tq(e),super(e)}call(e,t){return EA((()=>{null!=this.cell.dropoutMask&&(NA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(NA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,s=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:s})}))}static fromConfig(e,t){return new e(t)}}nq.className="SimpleRNN",cD(nq);class rq extends eq{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new JU("GRUCell does not support reset_after parameter set to true.");this.units=e.units,vB(this.units,"units"),this.activation=yG(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=yG(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=AV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=AV(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=AV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=TG(e.kernelRegularizer),this.recurrentRegularizer=TG(e.recurrentRegularizer),this.biasRegularizer=TG(e.biasRegularizer),this.kernelConstraint=hW(e.kernelConstraint),this.recurrentConstraint=hW(e.recurrentConstraint),this.biasConstraint=hW(e.biasConstraint),this.dropout=BB([1,VB([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=BB([1,VB([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=MV(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return EA((()=>{if(2!==e.length)throw new JU(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=lq({ones:()=>wL(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=lq({ones:()=>wL(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let i,o,l;0<this.dropout&&this.dropout<1&&(e=qR(e,s[0]));let c=nV(e,this.kernel.read());this.useBias&&(c=iV(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=qR(r,a[0]));const u=this.recurrentKernel.read(),[h,d]=mF(u,[2*this.units,this.units],u.rank-1),p=nV(r,h),[f,m,g]=mF(c,3,c.rank-1),[y,v]=mF(p,2,p.rank-1);i=this.recurrentActivation.apply(WR(f,y)),o=this.recurrentActivation.apply(WR(m,v));const b=nV(qR(o,r),d);l=this.activation.apply(WR(g,b));const w=WR(qR(i,r),qR(WR(1,QD(i)),l));return[w,w]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:mG(this.activation),recurrentActivation:mG(this.recurrentActivation),useBias:this.useBias,kernelInitializer:_V(this.kernelInitializer),recurrentInitializer:_V(this.recurrentInitializer),biasInitializer:_V(this.biasInitializer),kernelRegularizer:kG(this.kernelRegularizer),recurrentRegularizer:kG(this.recurrentRegularizer),biasRegularizer:kG(this.biasRegularizer),activityRegularizer:kG(this.activityRegularizer),kernelConstraint:cW(this.kernelConstraint),recurrentConstraint:cW(this.recurrentConstraint),biasConstraint:cW(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}rq.className="GRUCell",cD(rq);class sq extends ZG{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new rq(e),super(e)}call(e,t){return EA((()=>{null!=this.cell.dropoutMask&&(NA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(NA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,s=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:s})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}sq.className="GRU",cD(sq);class aq extends eq{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,vB(this.units,"units"),this.activation=yG(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=yG(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=AV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=AV(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=AV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=TG(e.kernelRegularizer),this.recurrentRegularizer=TG(e.recurrentRegularizer),this.biasRegularizer=TG(e.biasRegularizer),this.kernelConstraint=hW(e.kernelConstraint),this.recurrentConstraint=hW(e.recurrentConstraint),this.biasConstraint=hW(e.biasConstraint),this.dropout=BB([1,VB([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=BB([1,VB([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=MV(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends hV{apply(t,r){const s=e.apply([n]),a=(new pV).apply([n]),i=e.apply([2*n]);return ZB(ZB(s,a),i)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return EA((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new JU(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=lq({ones:()=>wL(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=lq({ones:()=>wL(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,c,u;0<this.dropout&&this.dropout<1&&(e=qR(e,a[0]));let h=nV(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=qR(r,i[0])),h=WR(h,nV(r,this.recurrentKernel.read())),this.useBias&&(h=iV(h,this.bias.read()));const[d,p,f,m]=mF(h,4,h.rank-1);o=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),c=WR(qR(l,s),qR(o,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const g=qR(u,this.activation.apply(c));return[g,g,c]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:mG(this.activation),recurrentActivation:mG(this.recurrentActivation),useBias:this.useBias,kernelInitializer:_V(this.kernelInitializer),recurrentInitializer:_V(this.recurrentInitializer),biasInitializer:_V(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:kG(this.kernelRegularizer),recurrentRegularizer:kG(this.recurrentRegularizer),biasRegularizer:kG(this.biasRegularizer),activityRegularizer:kG(this.activityRegularizer),kernelConstraint:cW(this.kernelConstraint),recurrentConstraint:cW(this.recurrentConstraint),biasConstraint:cW(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}aq.className="LSTMCell",cD(aq);class iq extends ZG{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new aq(e),super(e)}call(e,t){return EA((()=>{null!=this.cell.dropoutMask&&(NA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(NA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,s=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:s})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}iq.className="LSTM",cD(iq);class oq extends eq{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return EA((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const s=[];let a;for(let i=0;i<this.cells.length;++i){const o=this.cells[i];n=r[i],a=0===i?[e[0]].concat(n):[a[0]].concat(n),a=o.call(a,t),s.push(a.slice(1))}n=[];for(const e of s.slice().reverse())n.push(...e);return[a[0]].concat(n)}))}build(e){let t;RV(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{PB(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const s of t.cells)r.push(BW(s,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return $V(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,s=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],s[e]])}zV(t)}}function lq(e){const{ones:t,rate:n,training:r=!1,count:s=1,dropoutFunc:a}=e,i=()=>null!=a?a(t(),n):oV(t(),n),o=()=>lV(i,t,r);if(!s||s<=1)return CA(o().clone());return Array(s).fill(void 0).map(o).map((e=>CA(e.clone())))}oq.className="StackedRNNCells",cD(oq);var cq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class uq extends ZG{constructor(e){if(e.unroll)throw new ZU("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ZU("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new jV({ndim:5})]}call(e,t){return EA((()=>{if(null!=this.cell.dropoutMask&&(NA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(NA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new JU("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,s=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:s})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return EA((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),s=uL([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(s):[s]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];EA((()=>{if(!this.stateful)throw new XU("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),s=[r[0],...r.slice(2)];if(null==n[0])throw new JU("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>uL(s))):this.states_=[uL(s)];else if(null==e)NA(this.states_),null!=this.keptStates&&(NA(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>uL(s))):this.states_[0]=uL(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new JU(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):NA(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=s;if(!AT(n.shape,r))throw new JU(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>CA(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:s,strides:a,dilationRate:i}=this.cell,o="channelsFirst"===t,l=e[o?3:2],c=e[o?4:3],u=DG(l,r[0],s,a[0],i[0]),h=DG(c,r[1],s,a[1],i[1]);return[...e.slice(0,2),...o?[n,u,h]:[u,h,n]]}}uq.className="ConvRNN2D";class hq extends aq{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:s,dataFormat:a,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,vB(this.filters,"filters"),this.kernelSize=RG(n,2,"kernelSize"),this.kernelSize.forEach((e=>vB(e,"kernelSize"))),this.strides=RG(r||1,2,"strides"),this.strides.forEach((e=>vB(e,"strides"))),this.padding=s||"valid",DB(this.padding),this.dataFormat=a||"channelsLast",RB(this.dataFormat),this.dilationRate=RG(i||1,2,"dilationRate"),this.dilationRate.forEach((e=>vB(e,"dilationRate")))}build(e){var t;e=MV(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new JU(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends hV{apply(e,t){return JB([n.apply([r]),hL([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return EA((()=>{if(3!==e.length)throw new JU(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],s=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=lq({ones:()=>wL(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=(e,t,n)=>t&&t[n]?qR(t[n],e):e;let l=o(r,i,0),c=o(r,i,1),u=o(r,i,2),h=o(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=lq({ones:()=>wL(s),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let p=o(s,d,0),f=o(s,d,1),m=o(s,d,2),g=o(s,d,3);const[y,v,b,w]=mF(this.kernel.read(),4,3),[x,k,S,T]=this.useBias?mF(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,x,this.padding),c=this.inputConv(c,v,k,this.padding),u=this.inputConv(u,b,S,this.padding),h=this.inputConv(h,w,T,this.padding);const[E,N,C,I]=mF(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,E),f=this.recurrentConv(f,N),m=this.recurrentConv(m,C),g=this.recurrentConv(g,I);const _=this.recurrentActivation.apply(WR(l,p)),A=this.recurrentActivation.apply(WR(c,f)),R=WR(qR(A,a),qR(_,this.activation.apply(WR(u,m)))),D=qR(this.recurrentActivation.apply(WR(h,g)),this.activation.apply(R));return[D,D,R]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=cq(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const s=GM(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?iV(s,n,this.dataFormat):s}recurrentConv(e,t){return GM(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}hq.className="ConvLSTM2DCell",cD(hq);class dq extends uq{constructor(e){const t=new hq(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}dq.className="ConvLSTM2D",cD(dq);class pq extends HV{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return lV((()=>oV(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}pq.className="Dropout",cD(pq);class fq extends pq{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}fq.className="SpatialDropout1D",cD(fq);class mq extends HV{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,vB(this.units,"units"),this.activation=yG(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=AV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=AV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=hW(e.kernelConstraint),this.biasConstraint=hW(e.biasConstraint),this.kernelRegularizer=TG(e.kernelRegularizer),this.biasRegularizer=TG(e.biasRegularizer),this.activityRegularizer=TG(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=MV(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=MV(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e),r=wB(this.activation.getClassName());let s;return null!=r?s=nV(n,this.kernel.read(),r,this.bias?this.bias.read():null):(s=nV(n,this.kernel.read()),null!=this.bias&&(s=iV(s,this.bias.read())),null!=this.activation&&(s=this.activation.apply(s))),s}))}getConfig(){const e={units:this.units,activation:mG(this.activation),useBias:this.useBias,kernelInitializer:_V(this.kernelInitializer),biasInitializer:_V(this.biasInitializer),kernelRegularizer:kG(this.kernelRegularizer),biasRegularizer:kG(this.biasRegularizer),activityRegularizer:kG(this.activityRegularizer),kernelConstraint:cW(this.kernelConstraint),biasConstraint:cW(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}mq.className="Dense",cD(mq);class gq extends HV{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=MV(e);for(const t of e.slice(1))if(null==t)throw new JU(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],UB(e,1)]}call(e,t){return EA((()=>{this.invokeCallHook(e,t);let n=OV(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=ZD(n,e)}return function(e){if(e.rank<=1)throw new JU(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],UB(e.shape,1)];return SM(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}gq.className="Flatten",cD(gq);class yq extends HV{constructor(e){super(e),this.supportsMasking=!0,this.activation=yG(e.activation)}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e);return this.activation.apply(n)}))}getConfig(){const e={activation:mG(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}yq.className="Activation",cD(yq);class vq extends HV{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return EA((()=>function(e,t){return EA((()=>{if(2!==e.shape.length)throw new JU(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return eV(KB(e,1),[1,t,1])}))}(e=OV(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}vq.className="RepeatVector",cD(vq);class bq extends HV{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let s=1,a=null;for(let o=0;o<r.length;++o){const e=r[o];if(this.isUnknown(e)){if(null!==a)throw new JU("Can only specifiy one unknown dimension.");a=o}else s*=e}const i=UB(e);if(null!==a){if(0===s||i%s!==0)throw new JU(n);r[a]=i/s}else if(i!==s)throw new JU(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e),r=n.shape,s=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return SM(n,s)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}bq.className="Reshape",cD(bq);class wq extends HV{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=WB(1,e.dims.length+1);if(!AT(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new jV({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=MV(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return ZD(OV(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}wq.className="Permute",cD(wq);class xq extends HV{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=OV(e);return eM(bL(n,this.maskValue),-1)}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e),r=eM(bL(n,this.maskValue),-1,!0);return qR(n,UR(r,n.dtype))}))}}xq.className="Masking",cD(xq);class kq extends HV{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(iB(e.inputLength))}this.inputDim=e.inputDim,vB(this.inputDim,"inputDim"),this.outputDim=e.outputDim,vB(this.outputDim,"outputDim"),this.embeddingsInitializer=AV(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=TG(e.embeddingsRegularizer),this.activityRegularizer=TG(e.activityRegularizer),this.embeddingsConstraint=hW(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return EA((()=>this.maskZero?(e=OV(e),bL(e,XR(e))):null))}computeOutputShape(e){if(e=MV(e),null==this.inputLength)return[...e,this.outputDim];const t=iB(this.inputLength);if(t.length!==e.length-1)throw new JU(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const s=t[r],a=e[r+1];if(null!=s&&null!=a&&s!==a)throw new JU(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==s&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return EA((()=>{this.invokeCallHook(e,t);let n=OV(e);"int32"!==n.dtype&&(n=qB(n,"int32"));const r=rV(this.embeddings.read(),SM(n,[n.size]));return SM(r,MV(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:_V(this.embeddingsInitializer),embeddingsRegularizer:kG(this.embeddingsRegularizer),activityRegularizer:kG(this.activityRegularizer),embeddingsConstraint:cW(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}kq.className="Embedding",cD(kq);class Sq extends HV{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ZU}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const s=e[e.length-t.length+r],a=t[r];if(null==s||null==a||s<0||a<0)n.push(null);else if(1===s)n.push(a);else if(1===a)n.push(s);else{if(s!==a)throw new JU("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(s)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[MV(e)]),e.length<2)throw new JU(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const s of e)null!=s&&null!==s[0]&&t.push(s[0]);if(t=fB(t),t.length>1)throw new JU(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let s=1;s<e.length;++s){const t=null==e[s]?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===fB(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return EA((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=VB(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=KB(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const a of e){const e=a.rank;if(null==e){const e=a.shape,r=e[0],s=e.slice(1).concat([r]);let i=SM(a,[r].concat(UB(e.slice(1))));i=ZD(i,[1,0]),i=SM(i,s),t.push(i),n=!0}else if(e>1){const r=WB(1,e).concat([0]);t.push(ZD(a,r)),n=!0}else t.push(a)}let r=this.mergeFunction(t);const s=r.rank;if(n)if(null==s){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=SM(ZD(SM(r,[-1,t]),[1,0]),n)}else if(s>1){const e=[s-1].concat(WB(0,s-1));r=ZD(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=fB(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return EA((()=>{if(null==t)return null;if(!Array.isArray(t))throw new JU("`mask` should be an Array");if(!Array.isArray(e))throw new JU("`inputs` should be an Array");if(t.length!==e.length)throw new JU(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:RP(e,0))))[0];for(let e=1;e<t.length-1;++e)n=ZP(n,t[e]);return n}))}}class Tq extends Sq{constructor(e){super(e)}mergeFunction(e){return EA((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=WR(t,e[n]);return t}))}}Tq.className="Add",cD(Tq);class Eq extends Sq{constructor(e){super(e)}mergeFunction(e){return EA((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=qR(t,e[n]);return t}))}}Eq.className="Multiply",cD(Eq);class Nq extends Sq{constructor(e){super(e)}mergeFunction(e){return EA((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=WR(t,e[n]);return qR(1/e.length,t)}))}}Nq.className="Average",cD(Nq);class Cq extends Sq{constructor(e){super(e)}mergeFunction(e){return EA((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=kD(t,e[n]);return t}))}}Cq.className="Maximum",cD(Cq);class Iq extends Sq{constructor(e){super(e)}mergeFunction(e){return EA((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=pL(t,e[n]);return t}))}}Iq.className="Minimum",cD(Iq);class _q extends Sq{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new JU("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let s=!1;for(const e of n)if(AT(e,t)){s=!0;break}s||n.push(t)}if(n.length>1)throw new JU("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return EA((()=>JB(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new JU("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const s of t.slice(1)){if(null==n[r]||null==s[r]){n[r]=null;break}n[r]+=s[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new JU("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new JU("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new JU(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return EA((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let a=0;a<e.length;++a)null==t[a]?r.push(UR(wL(e[a]),"bool")):t[a].rank<e[a].rank?r.push(RP(t[a],-1)):r.push(t[a]);const s=NM(r,this.axis);return ZO(s,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Aq(e,t){for(;e<0;)e+=t;return e}_q.className="Concatenate",cD(_q);class Rq extends Sq{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){TT(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new ZU("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new JU(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new JU(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>Aq(t,e[n].shape.length))):[Aq(this.axes,n.shape.length),Aq(this.axes,r.shape.length)],this.normalize&&(n=VW(n,t[0]),r=VW(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new ZU("batchDot is not implemented for tensors of 4D or higher rank yet");if(TT(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),TT(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new ZU("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,s=t.shape.length;null==n&&(n=[r-1,s-2]);const a=n;return EA((()=>{let n,i;if(r>s){n=r-s;const e=[];for(let t=0;t<n;++t)e.push(1);t=SM(t,t.shape.concat(e))}else if(s>r){n=s-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=SM(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=a[0]===a[1]?NP(qR(e,t),a[0]):NP(qR(ZD(e,[1,0]),t),a[1]);else{const n=a[0]!==e.shape.length-1,r=a[1]===t.shape.length-1;i=KD(e,t,n,r)}if(n>0){let e;e=r>s?r+s-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=vF(i,t)}return 1===i.shape.length&&(i=RP(i,1)),i}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[Aq(this.axes,e.length),Aq(this.axes,t.length)],n}computeOutputShape(e){TT(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new ZU("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const s=t.concat(n);return 1===s.length&&s.push(1),s}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}Rq.className="Dot",cD(Rq);class Dq extends HV{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e);return lV((()=>WR(tV(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}Dq.className="GaussianNoise",cD(Dq);class Oq extends HV{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return EA((()=>{this.invokeCallHook(e,t);const n=OV(e);if(this.rate>0&&this.rate<1){return lV((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return qR(n,tV(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}Oq.className="GaussianDropout",cD(Oq);class Mq extends HV{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||OV(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return EA((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=OV(e),r=-1.7580993408473766;let s=$P(BL(n),this.rate);s=qB(s,"float32");const a=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-a*r*this.rate,o=WR(qR(t,s),qR(WR(s,-1),r));return WR(qR(o,a),i)};return lV(r,(()=>OV(e)),t.training||!1)}return e}))}}function Pq(e,t,n,r,s){let a,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)a=OM(e,t,n,r,s,i);else if(3===e.rank)a=MM(e,t,n,r,s,i);else{if(4!==e.rank)throw new ZU(`batchNormalization is not implemented for array of rank ${e.rank} yet`);a=PM(e,t,n,r,s,i)}return a}function Lq(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return AT(r.slice().sort(),WB(0,e.rank-1))?function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return EA((()=>{const a=gL(e,r),i=a.mean,o=a.variance;return[Pq(e,i,o,n,t,s),i,o]}))}(e,t,n,r,s):function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return EA((()=>{const a=gL(e,r),i=a.mean,o=a.variance,l=[];for(const t of WB(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=SM(i,l),u=SM(o,l),h=null==t?null:SM(t,l),d=null==n?null:SM(n,l);return[Pq(e,c,u,d,h,s),i,o]}))}(e,t,n,r,s)}Mq.className="AlphaDropout",cD(Mq);class Fq extends HV{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=AV(e.betaInitializer||"zeros"),this.gammaInitializer=AV(e.gammaInitializer||"ones"),this.movingMeanInitializer=AV(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=AV(e.movingVarianceInitializer||"ones"),this.betaConstraint=hW(e.betaConstraint),this.gammaConstraint=hW(e.gammaConstraint),this.betaRegularizer=TG(e.betaRegularizer),this.gammaRegularizer=TG(e.gammaRegularizer)}build(e){e=MV(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new JU(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new jV({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return EA((()=>{const n=null!=t.training&&t.training,r=OV(e),s=r.shape,a=s.length,i=WB(0,a),o=this.axis>=0?this.axis:this.axis+a;i.splice(o,1);const l=nB(1,a);l[o]=s[o];const c=i.slice();c.sort();const u=!AT(c,WB(0,a).slice(0,a-1));if(!n)return(()=>{if(u){const e=SM(this.movingMean.read(),l),t=SM(this.movingVariance.read(),l),n=this.center?SM(this.beta.read(),l):null,s=this.scale?SM(this.gamma.read(),l):null;return Pq(r,e,t,n,s,this.epsilon)}return Pq(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[h,d,p]=Lq(r,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{EA((()=>{const r=1-n,s=e.read(),a=qR(gD(s,t),r);e.write(gD(s,a))}))};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),h}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:_V(this.betaInitializer),gammaInitializer:_V(this.gammaInitializer),movingMeanInitializer:_V(this.movingMeanInitializer),movingVarianceInitializer:_V(this.movingVarianceInitializer),betaRegularizer:kG(this.betaRegularizer),gammaRegularizer:kG(this.gammaRegularizer),betaConstraint:cW(this.betaConstraint),gammaConstraint:cW(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Fq.className="BatchNormalization",cD(Fq);class $q extends HV{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=AV(e.betaInitializer||"zeros"),this.gammaInitializer=AV(e.gammaInitializer||"ones"),this.betaRegularizer=TG(e.betaRegularizer),this.gammaRegularizer=TG(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=MV(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=t);for(const s of this.axis)if(s<0||s>=t)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==fB(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=OV(e),r=n.shape,s=r.length;return EA((()=>{let{mean:e,variance:t}=gL(n,this.axis,!0);const a=nB(1,s);for(const n of this.axis)a[n]=r[n];const i=e=>null!=e&&e.shape.length!==s?SM(e,a):e;let o=this.scale?i(this.gamma.read()):null,l=this.center?i(this.beta.read()):null;const c=[],u=[];for(let n=0;n<s;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=OP(e,c),t=OP(t,c),null!=o&&(o=OP(o,u)),null!=l&&(l=OP(l,u)),Pq(n,e,t,l,o,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:_V(this.betaInitializer),gammaInitializer:_V(this.gammaInitializer),betaRegularizer:kG(this.betaRegularizer),gammaRegularizer:kG(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}$q.className="LayerNormalization",cD($q);class zq extends HV{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new JU(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new JU(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new JU(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new jV({ndim:4})]}computeOutputShape(e){let t,n;return e=MV(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return EA((()=>function(e,t,n){return EA((()=>{if(4!==e.rank)throw new JU(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new JU("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new JU(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],kL(e,r)}))}(OV(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function jq(e,t,n,r,s,a){return EA((()=>{let i;RB(s),OB(a),DB(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==s&&(s="channelsLast"),null==a&&(a="max"),e=MG(e,s);const o="same"===r?"same":"valid";return i="max"===a?iL(e,t,n,o):TM(e,t,n,o),"channelsFirst"===s&&(i=ZD(i,[0,3,1,2])),i}))}function Uq(e,t,n,r,s,a){return EA((()=>{let i;RB(s),OB(a),DB(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==s&&(s="channelsLast"),null==a&&(a="max"),e=PG(e,s);const o="same"===r?"same":"valid";return i="max"===a?oL(e,t,n,o):EM(e,t,n,o),"channelsFirst"===s&&(i=ZD(i,[0,4,1,2,3])),i}))}zq.className="ZeroPadding2D",cD(zq);class Bq extends HV{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new JU(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(vB(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new JU(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}vB(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,DB(this.padding),this.inputSpec=[new jV({ndim:3})]}computeOutputShape(e){const t=DG((e=MV(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return EA((()=>{this.invokeCallHook(e,t),e=KB(OV(e),2);const n=this.poolingFunction(OV(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return vF(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Vq extends Bq{constructor(e){super(e)}poolingFunction(e,t,n,r,s){return RB(s),DB(r),jq(e,t,n,r,s,"max")}}Vq.className="MaxPooling1D",cD(Vq);class Wq extends Bq{constructor(e){super(e)}poolingFunction(e,t,n,r,s){return RB(s),DB(r),jq(e,t,n,r,s,"avg")}}Wq.className="AveragePooling1D",cD(Wq);class Hq extends HV{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new JU(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];vB(this.poolSize,"poolSize"),vB(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,RB(this.dataFormat),DB(this.padding),this.inputSpec=[new jV({ndim:4})]}computeOutputShape(e){e=MV(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=DG(t,this.poolSize[0],this.padding,this.strides[0]),n=DG(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return EA((()=>(this.invokeCallHook(e,t),this.poolingFunction(OV(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Gq extends Hq{constructor(e){super(e)}poolingFunction(e,t,n,r,s){return RB(s),DB(r),jq(e,t,n,r,s,"max")}}Gq.className="MaxPooling2D",cD(Gq);class qq extends Hq{constructor(e){super(e)}poolingFunction(e,t,n,r,s){return RB(s),DB(r),jq(e,t,n,r,s,"avg")}}qq.className="AveragePooling2D",cD(qq);class Kq extends HV{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new JU(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];vB(this.poolSize,"poolSize"),vB(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,RB(this.dataFormat),DB(this.padding),this.inputSpec=[new jV({ndim:5})]}computeOutputShape(e){e=MV(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=DG(t,this.poolSize[0],this.padding,this.strides[0]),n=DG(n,this.poolSize[1],this.padding,this.strides[1]),r=DG(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return EA((()=>(this.invokeCallHook(e,t),this.poolingFunction(OV(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Yq extends Kq{constructor(e){super(e)}poolingFunction(e,t,n,r,s){return RB(s),DB(r),Uq(e,t,n,r,s,"max")}}Yq.className="MaxPooling3D",cD(Yq);class Xq extends Kq{constructor(e){super(e)}poolingFunction(e,t,n,r,s){return RB(s),DB(r),Uq(e,t,n,r,s,"avg")}}Xq.className="AveragePooling3D",cD(Xq);class Qq extends HV{constructor(e){super(e),this.inputSpec=[new jV({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new ZU}}class Jq extends Qq{constructor(e){super(e||{})}call(e,t){return EA((()=>{const t=OV(e);return cL(t,1)}))}}Jq.className="GlobalAveragePooling1D",cD(Jq);class Zq extends Qq{constructor(e){super(e||{})}call(e,t){return EA((()=>{const t=OV(e);return TP(t,1)}))}}Zq.className="GlobalMaxPooling1D",cD(Zq);class eK extends HV{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,RB(this.dataFormat),this.inputSpec=[new jV({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new ZU}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class tK extends eK{call(e,t){return EA((()=>{const t=OV(e);return"channelsLast"===this.dataFormat?cL(t,[1,2]):cL(t,[2,3])}))}}tK.className="GlobalAveragePooling2D",cD(tK);class nK extends eK{call(e,t){return EA((()=>{const t=OV(e);return"channelsLast"===this.dataFormat?TP(t,[1,2]):TP(t,[2,3])}))}}nK.className="GlobalMaxPooling2D",cD(nK);class rK extends HV{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=BW(t.layer,n);delete t.layer;const s={layer:r};return Object.assign(s,t),new e(s)}}class sK extends rK{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=MV(e)).length<3)throw new JU(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=MV(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return EA((()=>JG(((e,n)=>[OV(this.layer.call(e,t)),[]]),e=OV(e),[],!1,null,null,!1,!0)[1]))}}sK.className="TimeDistributed",cD(sK);class aK extends rK{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=BW(n),t.goBackwards=!0!==t.goBackwards;const r={};var s;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=BW(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,s=this.mergeMode,gB(_B,"BidirectionalMergeMode",s),e.weights)throw new ZU("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,s=this.forwardLayer.computeOutputShape(e);return Array.isArray(s)&&Array.isArray(s[0])||(s=[s]),this.returnState?(r=s.slice(1),t=s[0]):t=s[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):aB(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const s=QG(e,n,r,this.numConstants);if(e=s.inputs,n=s.initialState,r=s.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const a=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new JU("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);const r=n.map((e=>new jV({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new ZU("Support for constants in Bidirectional layers is not implemented yet.");const o=a[0]instanceof UV;for(const l of a)if(l instanceof UV!==o)throw new JU("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[e].concat(a),r=this.inputSpec.concat(i),s=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=s,o}return super.apply(e,t)}call(e,t){return EA((()=>{const n=t.initialState;let r,s,a,i;if(null==n)r=this.forwardLayer.call(e,t),s=this.backwardLayer.call(e,t);else{const a=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),s=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(s.slice(1))),r=r[0],s=s[0]),this.returnSequences&&(s=KL(s,1)),"concat"===this.mergeMode?i=JB([r,s]):"sum"===this.mergeMode?i=WR(r,s):"ave"===this.mergeMode?i=qR(.5,WR(r,s)):"mul"===this.mergeMode?i=qR(r,s):null==this.mergeMode&&(i=[r,s]),this.returnState?null==this.mergeMode?i.concat(a):[i].concat(a):i}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){PB(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),PB(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=BW(t.layer);if(delete t.layer,null!=t.numConstants)throw new ZU("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}aK.className="Bidirectional",cD(aK);class iK extends HV{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return EA((()=>("float32"!==(e=OV(e)).dtype&&(e=qB(e,"float32")),WR(qR(e,this.scale),this.offset))))}}iK.className="Rescaling",cD(iK);const{resizeBilinear:oK,cropAndResize:lK}=nz;class cK extends HV{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,s,a,i,o){return EA((()=>{let l,c=!1;const u=[t/a,n/i,(r+t)/a,(s+n)/i],h=[];3===e.rank?(c=!0,l=bF([e])):l=e;for(let e=0;e<l.shape[0];e++)h.push(u);const d=fA(h,[h.length,4]),p=WL(0,h.length,1,"int32"),f=lK(l,d,p,[r,s],"nearest");return qB(c?OV(OF(f)):f,o)}))}upsize(e,t,n,r){return EA((()=>qB(oK(e,[t,n]),r)))}call(e,t){return EA((()=>{const t=OV(e),n=t.dtype,r=t.shape,s=r[r.length-3],a=r[r.length-2];let i=0;s!==this.height&&(i=Math.floor((s-this.height)/2));let o=0;return a!==this.width&&(o=Math.floor((a-this.width)/2),0===o&&(o=1)),i>=0&&o>=0?this.centerCrop(t,i,o,this.height,this.width,s,a,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=MV(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}cK.className="CenterCrop",cD(cK);class uK extends HV{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=MV(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return EA((()=>{let n;if("int32"!==(e=OV(e)).dtype&&(e=qB(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new JU(`countWeights is not used when outputMode !== count.\n              Received countWeights=${t.countWeights}`);n=OV(t.countWeights)}const r=TP(e),s=EP(e),a=FP(this.numTokens,r).bufferSync().get(0),i=$P(s,0).bufferSync().get(0);if(!a||!i)throw new JU(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let s=OV(e);if("int32"!==s.dtype&&(s=qB(s,"int32")),"int"===t)return s;const a=s.shape;if(0===s.rank&&(s=RP(s,-1)),"oneHot"===t&&1!==s.shape[s.shape.length-1]&&(s=RP(s,-1)),s.rank>2)throw new JU(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${a} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(t),o=s;let l;if(l=rP(o,"undefined"!==typeof r&&"count"===t?r:[],n,i),"tfIdf"!==t)return l;if(r)return qR(l,r);throw new JU("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}uK.className="CategoryEncoding",cD(uK);const hK=new Set(["bilinear","nearest"]);class dK extends HV{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!hK.has(e.interpolation))throw new JU(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=MV(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return EA((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return nz.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return nz.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...hK]} are supported`)}))}}dK.className="Resizing",cD(dK);class pK{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}pK.className="RandomSeed";class fK extends HV{constructor(e){super(e),this.randomGenerator=new pK(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}fK.className="BaseRandomLayer";const mK=new Set(["bilinear","nearest"]);class gK extends fK{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new JU(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new JU(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new JU(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!mK.has(n))throw new JU(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=MV(e))[2];return[this.imgHeight,-1,t]}call(e,t){return EA((()=>{const t=OV(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=BL([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const s=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return nz.resizeBilinear(e,s);case"nearest":return nz.resizeNearestNeighbor(e,s);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...mK]} are supported`)}}))}}function yK(e){return new qV(e)}function vK(e){return new IG(e)}function bK(e){return new EG(e)}function wK(e){return new NG(e)}function xK(e){return new CG(e)}function kK(e){return new AG(e)}function SK(e){return new _G(e)}function TK(e){return new qG(e)}function EK(e){return new UG(e)}function NK(e){return new VG(e)}function CK(e){return new BG(e)}function IK(e){return new WG(e)}function _K(e){return new GG(e)}function AK(e){return new KG(e)}function RK(e){return new YG(e)}function DK(e){return new XG(e)}function OK(e){return new yq(e)}function MK(e){return new mq(e)}function PK(e){return new pq(e)}function LK(e){return new fq(e)}function FK(e){return new gq(e)}function $K(e){return new vq(e)}function zK(e){return new bq(e)}function jK(e){return new wq(e)}function UK(e){return new kq(e)}function BK(e){return new Tq(e)}function VK(e){return new Nq(e)}function WK(e){return new _q(e)}function HK(e){return new Cq(e)}function GK(e){return new Iq(e)}function qK(e){return new Eq(e)}function KK(e){return new Rq(e)}function YK(e){return new Fq(e)}function XK(e){return new $q(e)}function QK(e){return new zq(e)}function JK(e){return new Wq(e)}function ZK(e){return JK(e)}function eY(e){return JK(e)}function tY(e){return new qq(e)}function nY(e){return tY(e)}function rY(e){return tY(e)}function sY(e){return new Xq(e)}function aY(e){return sY(e)}function iY(e){return sY(e)}function oY(e){return new Jq(e)}function lY(e){return new tK(e)}function cY(e){return new Zq(e)}function uY(e){return new nK(e)}function hY(e){return new Vq(e)}function dY(e){return new Gq(e)}function pY(e){return new Yq(e)}function fY(e){return new sq(e)}function mY(e){return new rq(e)}function gY(e){return new iq(e)}function yY(e){return new aq(e)}function vY(e){return new nq(e)}function bY(e){return new tq(e)}function wY(e){return new dq(e)}function xY(e){return new hq(e)}function kY(e){return new ZG(e)}function SY(e){return new oq(e)}function TY(e){return new aK(e)}function EY(e){return new sK(e)}gK.className="RandomWidth",cD(gK);const NY=cY,CY=uY,IY=hY,_Y=dY;function AY(e){return new Dq(e)}function RY(e){return new Oq(e)}function DY(e){return new Mq(e)}function OY(e){return new xq(e)}function MY(e){return new iK(e)}function PY(e){return new cK(e)}function LY(e){return new dK(e)}function FY(e){return new uK(e)}function $Y(e){return new gK(e)}function zY(e,t){return tH(e,t)}function jY(e,t){return iH(e,t)}function UY(e,t){return oH(e,t)}function BY(e,t){return nH(e,t)}function VY(e,t){return lH(e,t)}function WY(e,t){return sH(e,t)}function HY(e,t){return aH(e,t)}function GY(e,t){return JW(e,t)}function qY(e,t){return HW(e,t)}function KY(e,t){return GW(e,t)}function YY(e,t){return GW(e,t)}function XY(e,t){return GW(e,t)}function QY(e,t){return WW(e,t)}function JY(e,t){return WW(e,t)}function ZY(e,t){return WW(e,t)}function eX(e,t){return function(e,t){return EA((()=>{const n=e.sub(t).square().sum(),r=e.sub(e.mean()).square().sum();return sD(1).sub(n.div(r))}))}(e,t)}function tX(e){return new wG(e)}function nX(e){return vG(t=e),new wG({l1:null!=t?t.l1:null,l2:0});var t}function rX(e){return vG(t=e),new wG({l2:null!=t?t.l2:null,l1:0});var t}class sX extends MW{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof VH))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}function aX(e,t){return e<t}function iX(e,t){return e>t}class oX extends sX{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new ZU("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=aX:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=iX:this.monitorFunc=aX,this.monitorFunc===aX&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===aX?1/0:-1/0}async onEpochEnd(e,t){await RW(t);const n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});const t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}}const lX={earlyStopping:function(e){return new oX(e)}};var cX,uX;pE().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(cX||(cX={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(uX||(uX={}));const hX={};function dX(e,t){const n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};hX[e]=n}function pX(e){return hX[e]}function fX(e){delete hX[e]}function mX(e,t,n,r,s){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,i=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd,o=e<0?t.inputNames.length+e:e;if("tensor"===a.type)return gX(t.inputNames[o],n,r,s);if("tensors"===a.type){const a=t.inputs.slice(e,i),o=t.inputNames.slice(e,i).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=a[t])||void 0===n?void 0:n.op)}));return o.map((e=>gX(e,n,r,s)))}const l=gX(t.inputNames[o],n,r,s),c=l.dataSync();return"number"===a.type?c[0]:tE(l.shape,c)}const i=t.attrParams[e];return i&&i.value}function gX(e,t,n,r){const[s,a]=wX(e,n);if(null!=r){const e=r.getHashTableHandleByName(s);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[bX(s,e)]));return void 0!==i?t[bX(s,i)][a]:void 0}function yX(e,t,n){return t[bX(e,n.currentContextId)]}function vX(e,t){const[n,r,s]=wX(e,t);return[bX(n,t&&t.currentContextId),r,s]}function bX(e,t){return t?`${e}-${t}`:e}function wX(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let s;if(1===r.length)s=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;s=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,s),s}function xX(e,t,n){let r=mX("pad",e,t,n);if("explicit"===r){r=mX("explicitPaddings",e,t,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)s[e][0]=r[2*e],s[e][1]=r[2*e+1];return s}return r}function kX(e){return e.kept?e:BR(e)}const SX=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],TX=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],EX=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],NX=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],CX=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],IX=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_X=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],AX=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],RX=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],DX=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],OX=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],MX=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],PX=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],LX=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],FX=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$X=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],zX=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],jX=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],UX=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class BX{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[S,T,E,N,C,I,_,A,R,D,O,M,P,L,F,z,j,U,B].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,r=[],s=[],a=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?s.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let o=[];const l=[];let c={},u={};null!=t&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const h=Object.keys(i);h.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[r,,s]=vX(e),a=i[r];if(null!=a.outputs){const e=a.outputs.indexOf(s);if(-1!==e){const s=`${r}:${e}`;t.inputNames[n]=s}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(u).length?h.forEach((e=>{const t=i[e];0===t.children.length&&l.push(t)})):Object.keys(u).forEach((e=>{const[t]=vX(e),n=i[t];null!=n&&(n.signatureKey=u[e],l.push(n))})),Object.keys(c).length>0?Object.keys(c).forEach((e=>{const[t]=vX(e),n=i[t];n&&(n.signatureKey=c[e],o.push(n))})):o=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const p={nodes:i,inputs:o,outputs:l,weights:s,placeholders:r,signature:t,functions:d};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=pX(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let s;switch(n.type){case"string":s=WX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=WX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":s=eQ(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=eQ(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":s=GX(e.attr,n.tfName,n.defaultValue||0),void 0===s&&n.tfDeprecatedName&&(s=GX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":s=ZX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=ZX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":s=HX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=HX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":s=nQ(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=nQ(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":s=JX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=JX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":s=tQ(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=tQ(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":s=YX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=YX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":s=XX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=XX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":s=KX(e.attr,n.tfName,n.defaultValue),void 0===s&&n.tfDeprecatedName&&(s=KX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:s,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const s=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=vX(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:qX(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,s.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[s,,a]=vX(e),i=r[s];if(null!=i.outputs){const e=i.outputs.indexOf(a);if(-1!==e){const r=`${s}:${e}`;t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=vX(i[e.name]),s=r[t];null!=s&&(s.defaultOutput=n,a.push(s))}));const o=this.mapArgsToSignature(e);return{nodes:r,inputs:s,outputs:a,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function VX(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=pE().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function WX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e[t];return null!=s?VX(s.s,r):n}function HX(e,t,n){const r=e[t];return r?r.b:n}function GX(e,t,n){const r=e[t]||{},s=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof s?s:parseInt(s,10)}function qX(e){switch("string"===typeof e&&(e=cX[e]),e){case cX.DT_FLOAT:case cX.DT_HALF:return"float32";case cX.DT_INT32:case cX.DT_INT64:case cX.DT_INT8:case cX.DT_UINT8:return"int32";case cX.DT_BOOL:return"bool";case cX.DT_DOUBLE:return"float32";case cX.DT_STRING:return"string";case cX.DT_COMPLEX64:case cX.DT_COMPLEX128:return"complex64";default:return null}}function KX(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function YX(e,t,n){const r=e[t];return r&&r.type?qX(r.type):n}function XX(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>qX(e))):n}function QX(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"===typeof e.size?e.size:parseInt(e.size,10))):[]}function JX(e,t,n){const r=e[t];return r&&r.shape?QX(r.shape):n}function ZX(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"===typeof e?e:parseInt(e,10))):n}function eQ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e[t];return s&&s.list&&s.list.s?s.list.s.map((e=>VX(e,r))):n}function tQ(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>QX(e))):n}function nQ(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class rQ{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return gX(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return gX(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return GX(this.node.rawAttrs,e,t);if(null!=n.s)return WX(this.node.rawAttrs,e,t);if(null!=n.b)return HX(this.node.rawAttrs,e,t);if(null!=n.shape)return JX(this.node.rawAttrs,e,t);if(null!=n.type)return YX(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return ZX(this.node.rawAttrs,e,t);if(null!=n.list.s)return eQ(this.node.rawAttrs,e,t);if(null!=n.list.shape)return tQ(this.node.rawAttrs,e,t);if(null!=n.list.b)return nQ(this.node.rawAttrs,e,t);if(null!=n.list.type)return XX(this.node.rawAttrs,e,t)}return t}}function sQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){TT(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const s=e[r],a=t[r];TT(s<0||a<0||s===a,(()=>n+` Shapes ${e} and ${t} must match`))}}}function aQ(e){return"number"!==typeof e&&!e.some((e=>e<0))}function iQ(e,t,n){let r=oQ(e,n);const s=!aQ(r);if(s&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&t.forEach((e=>{r=oQ(e.shape,r)})),!aQ(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function oQ(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const s=e[r],a=t[r];if(s>=0&&a>=0&&s!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=s>=0?s:a}return n}class lQ{constructor(e,t,n,r,s,a,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=s,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=sD(0),CA(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),sQ(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,CA(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return fA([],[0].concat(this.elementShape));const n=this.readMany(e);return sQ(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),bF(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return fA([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return sQ(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),NM(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,OF(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=0===n?0:t.size/n,a=[];EA((()=>{t=SM(t,[1,n,s]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],o=[1,e[n],s];a[n]=SM(IM(t,i,o),this.elementShape)}return a}));const i=[];for(let o=0;o<e.length;o++)i[o]=o;this.writeMany(i,a)}}class cQ{get id(){return this.idTensor.id}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);sQ(t,e.shape,"TensorList shape mismatch: "),CA(e)})),this.idTensor=sD(0),this.maxNumElements=r,CA(this.idTensor)}copy(){return new cQ([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);sQ(e,this.elementShape,"TensorList shape mismatch: ");const r=iQ(this.elementShape,this.tensors,e);return EA((()=>{const e=this.tensors.map((e=>SM(e,r)));return bF(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=iQ(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,sQ(r.shape,e,"TensorList shape mismatch: "),SM(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(sQ(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");CA(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new cQ([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);sQ(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=iQ(this.elementShape,this.tensors,t);return SM(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);sQ(this.elementShape,t.shape,"TensorList shape mismatch: "),CA(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);sQ(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=iQ(this.elementShape,this.tensors,n);return 0===e.length?fA([],[0].concat(r)):EA((()=>{const t=e.map((e=>SM(this.tensors[e],r)));return bF(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);sQ(this.elementShape,t,"TensorList shape mismatch: ");const n=iQ(this.elementShape,this.tensors,t);return 0===this.size()?fA([],[0].concat(n)):EA((()=>{const e=this.tensors.map((e=>SM(e,n)));return NM(e,0)}))}}const uQ=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=mX("thenBranch",e,t,n),s=mX("elseBranch",e,t,n),a=mX("cond",e,t,n),i=mX("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=mX("body",e,t,n),s=mX("cond",e,t,n),a=mX("args",e,t,n),i=await n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),o=a.map((e=>e.id));let l=await i[0].data();i.forEach((e=>{e.kept||-1!==o.indexOf(e.id)||e.dispose()}));let c=a;for(;l[0];){const e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const t=c.map((e=>e.id));e.forEach((e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await a[0].data(),a.forEach((e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return c}case"LoopCond":return[kX(mX("pred",e,t,n))];case"Switch":{const r=mX("pred",e,t,n);let s=mX("data",e,t,n);return s.kept||(s=kX(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==gX(e,t,n)));if(r){return[kX(gX(r,t,n))]}return}case"Enter":{const r=mX("frameName",e,t,n),s=mX("tensor",e,t,n);return n.enterFrame(r),[kX(s)]}case"Exit":{const r=mX("tensor",e,t,n);return n.exitFrame(),[kX(r)]}case"NextIteration":{const r=mX("tensor",e,t,n);return n.nextIteration(),[kX(r)]}case"TensorArrayV3":{const r=mX("size",e,t,n),s=mX("dtype",e,t,n),a=mX("elementShape",e,t,n),i=mX("dynamicSize",e,t,n),o=mX("clearAfterRead",e,t,n),l=mX("identicalElementShapes",e,t,n),c=mX("name",e,t,n),u=new lQ(c,s,r,a,l,i,o);return n.addTensorArray(u),[u.idTensor,sD(1)]}case"TensorArrayWriteV3":{const r=mX("tensorArrayId",e,t,n),s=mX("index",e,t,n),a=mX("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(s,a),[i.idTensor]}case"TensorArrayReadV3":{const r=mX("tensorArrayId",e,t,n),s=mX("index",e,t,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=mX("tensorArrayId",e,t,n),s=mX("indices",e,t,n),a=mX("dtype",e,t,n);return[n.getTensorArray(r.id).gather(s,a)]}case"TensorArrayScatterV3":{const r=mX("tensorArrayId",e,t,n),s=mX("indices",e,t,n),a=mX("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(s,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=mX("tensorArrayId",e,t,n),s=n.getTensorArray(r.id),a=mX("dtype",e,t,n);return[s.concat(a)]}case"TensorArraySplitV3":{const r=mX("tensorArrayId",e,t,n),s=mX("tensor",e,t,n),a=mX("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(a,s),[i.idTensor]}case"TensorArraySizeV3":{const r=mX("tensorArrayId",e,t,n);return[sD(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=mX("tensorArrayId",e,t,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=mX("tensorListId",e,t,n),s=mX("index",e,t,n),a=mX("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(s,a),[i.idTensor]}case"TensorListGetItem":{const r=mX("tensorListId",e,t,n),s=mX("index",e,t,n),a=mX("elementShape",e,t,n),i=mX("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(s,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=mX("indices",e,t,n),s=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const s=Math.max(...t);if(null!=r&&-1!==r&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const a=new cQ([],n,e.dtype,r),i=OF(e,0);return t.forEach(((e,t)=>{a.setItem(e,i[t])})),a}(mX("tensor",e,t,n),r,mX("elementShape",e,t,n),mX("numElements",e,t,n));return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=mX("elementShape",e,t,n),s=mX("elementDType",e,t,n);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=mX(a,e,t,n),o=function(e,t,n,r){return new cQ([],e,t,r)}(r,s,0,"TensorListReserve"===e.op?-1:i);return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=mX("tensorListId",e,t,n),s=mX("indices",e,t,n),a=mX("elementShape",e,t,n),i=mX("elementDType",e,t,n);return[n.getTensorList(r.id).gather(s,i,a)]}case"TensorListStack":{const r=mX("tensorListId",e,t,n),s=mX("elementShape",e,t,n),a=mX("elementDType",e,t,n),i=mX("numElements",e,t,n);return[n.getTensorList(r.id).stack(s,a,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);sQ(e.shape.slice(1),t,"TensorList shape mismatch: ");const s=OF(e);return new cQ(s,t,r)}(mX("tensor",e,t,n),mX("elementShape",e,t,n),mX("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=mX("tensorListId",e,t,n),s=n.getTensorList(r.id),a=mX("dtype",e,t,n),i=mX("elementShape",e,t,n);return[s.concat(a,i)]}case"TensorListPushBack":{const r=mX("tensorListId",e,t,n),s=mX("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(s),[a.idTensor]}case"TensorListPopBack":{const r=mX("tensorListId",e,t,n),s=mX("elementShape",e,t,n),a=mX("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(s,a)]}case"TensorListSplit":{const r=mX("tensor",e,t,n),s=mX("elementShape",e,t,n),a=function(e,t,n){let r=0;const s=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const a=oQ(e.shape.slice(1),n),i=0===r?0:e.size/r,o=EA((()=>{const n=[];e=SM(e,[1,r,i]);for(let r=0;r<t.length;++r){const o=[0,0===r?0:s[r-1],0],l=[1,t[r],i];n[r]=SM(IM(e,o,l),a)}return e.dispose(),n})),l=new cQ([],n,e.dtype,t.length);for(let c=0;c<o.length;c++)l.setItem(c,o[c]);return l}(r,mX("lengths",e,t,n),s);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=mX("tensorListId",e,t,n);return[sD(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=mX("tensorListId",e,t,n),s=mX("size",e,t,n),a=n.getTensorList(r.id).resize(s);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function hQ(e,t,n){const[r,s]=mX("fusedOps",e,t,n),a="biasadd"===r,i=!a,o="prelu"===s,l="fusedbatchnorm"===r,c=mX("numArgs",e,t,n);if(a){if(o&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=mX("strides",e,t,n),h=xX(e,t,n),d=mX("dataFormat",e,t,n).toUpperCase(),p=mX("dilations",e,t,n);let[f,m]=mX("args",e,t,n);i&&(m=f,f=void 0);return{stride:u,pad:h,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:s,leakyreluAlpha:mX("leakyreluAlpha",e,t,n)}}function dQ(e,t,n){return{boxes:mX("boxes",e,t,n),scores:mX("scores",e,t,n),maxOutputSize:mX("maxOutputSize",e,t,n),iouThreshold:mX("iouThreshold",e,t,n),scoreThreshold:mX("scoreThreshold",e,t,n),softNmsSigma:mX("softNmsSigma",e,t,n)}}class pQ{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=sD(0),this.tensorMap=new Map,CA(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return sD(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),EA((()=>{const e=OF(t),r=n.length,s=e.length;TT(r===s,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${s} elements.`));for(let t=0;t<r;t++){const r=n[t],s=e[t];CA(s),this.tensorMap.set(r,s)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return EA((()=>{const e=[];for(let r=0;r<n.length;r++){const s=n[r],a=this.findWithDefault(s,t);e.push(a)}return bF(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function fQ(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:EA;const a=((e,t,n)=>{switch(e.category){case"arithmetic":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(mX("a",e,t,n),mX("b",e,t,n))];case"AddN":return[r.addN(mX("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(mX("a",e,t,n),mX("b",e,t,n))];case"Mul":return[r.mul(mX("a",e,t,n),mX("b",e,t,n))];case"RealDiv":case"Div":return[r.div(mX("a",e,t,n),mX("b",e,t,n))];case"DivNoNan":return[r.divNoNan(mX("a",e,t,n),mX("b",e,t,n))];case"FloorDiv":return[r.floorDiv(mX("a",e,t,n),mX("b",e,t,n))];case"Sub":return[r.sub(mX("a",e,t,n),mX("b",e,t,n))];case"Minimum":return[r.minimum(mX("a",e,t,n),mX("b",e,t,n))];case"Maximum":return[r.maximum(mX("a",e,t,n),mX("b",e,t,n))];case"Pow":return[r.pow(mX("a",e,t,n),mX("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(mX("a",e,t,n),mX("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"basic_math":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(mX("x",e,t,n))];case"Acos":return[r.acos(mX("x",e,t,n))];case"Acosh":return[r.acosh(mX("x",e,t,n))];case"Asin":return[r.asin(mX("x",e,t,n))];case"Asinh":return[r.asinh(mX("x",e,t,n))];case"Atan":return[r.atan(mX("x",e,t,n))];case"Atan2":return[r.atan2(mX("x",e,t,n),mX("y",e,t,n))];case"Atanh":return[r.atanh(mX("x",e,t,n))];case"Ceil":return[r.ceil(mX("x",e,t,n))];case"Complex":return[r.complex(mX("real",e,t,n),mX("imag",e,t,n))];case"Cos":return[r.cos(mX("x",e,t,n))];case"Cosh":return[r.cosh(mX("x",e,t,n))];case"Elu":return[r.elu(mX("x",e,t,n))];case"Erf":return[r.erf(mX("x",e,t,n))];case"Exp":return[r.exp(mX("x",e,t,n))];case"Expm1":return[r.expm1(mX("x",e,t,n))];case"Floor":return[r.floor(mX("x",e,t,n))];case"Log":return[r.log(mX("x",e,t,n))];case"Log1p":return[r.log1p(mX("x",e,t,n))];case"Imag":return[r.imag(mX("x",e,t,n))];case"Neg":return[r.neg(mX("x",e,t,n))];case"Reciprocal":return[r.reciprocal(mX("x",e,t,n))];case"Real":return[r.real(mX("x",e,t,n))];case"Relu":return[r.relu(mX("x",e,t,n))];case"Round":return[r.round(mX("x",e,t,n))];case"Selu":return[r.selu(mX("x",e,t,n))];case"Sigmoid":return[r.sigmoid(mX("x",e,t,n))];case"Sin":return[r.sin(mX("x",e,t,n))];case"Sign":return[r.sign(mX("x",e,t,n))];case"Sinh":return[r.sinh(mX("x",e,t,n))];case"Softplus":return[r.softplus(mX("x",e,t,n))];case"Sqrt":return[r.sqrt(mX("x",e,t,n))];case"Square":return[r.square(mX("x",e,t,n))];case"Tanh":return[r.tanh(mX("x",e,t,n))];case"Tan":return[r.tan(mX("x",e,t,n))];case"ClipByValue":return[r.clipByValue(mX("x",e,t,n),mX("clipValueMin",e,t,n),mX("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(mX("x",e,t,n))];case"Rsqrt":return[r.rsqrt(gX(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(mX("x",e,t,n),mX("alpha",e,t,n))];case"Prelu":return[r.prelu(mX("x",e,t,n),mX("alpha",e,t,n))];case"IsNan":return[r.isNaN(gX(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(gX(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(gX(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"control":return uQ(e,t,n);case"convolution":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Conv1D":{const s=mX("stride",e,t,n),a=mX("pad",e,t,n),i=mX("dataFormat",e,t,n).toUpperCase(),o=mX("dilation",e,t,n);return[r.conv1d(mX("x",e,t,n),mX("filter",e,t,n),s,a,i,o)]}case"Conv2D":{const s=mX("strides",e,t,n),a=xX(e,t,n),i=mX("dataFormat",e,t,n).toUpperCase(),o=mX("dilations",e,t,n);return[r.conv2d(mX("x",e,t,n),mX("filter",e,t,n),[s[1],s[2]],a,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=hQ(e,t,n);return[r.fused.conv2d({x:mX("x",e,t,n),filter:mX("filter",e,t,n),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=hQ(e,t,n);return[r.fused.depthwiseConv2d({x:mX("x",e,t,n),filter:mX("filter",e,t,n),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=mX("outputShape",e,t,n),a=mX("strides",e,t,n),i=xX(e,t,n);return[r.conv2dTranspose(mX("x",e,t,n),mX("filter",e,t,n),s,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=mX("strides",e,t,n),a=xX(e,t,n),i=mX("dilations",e,t,n),o=mX("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(mX("input",e,t,n),mX("filter",e,t,n),[s[1],s[2]],a,o,[i[1],i[2]])]}case"Conv3D":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("dataFormat",e,t,n).toUpperCase(),o=mX("dilations",e,t,n);return[r.conv3d(mX("x",e,t,n),mX("filter",e,t,n),[s[1],s[2],s[3]],a,i,[o[1],o[2],o[3]])]}case"AvgPool":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("kernelSize",e,t,n);return[r.avgPool(mX("x",e,t,n),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPool":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("kernelSize",e,t,n);return[r.maxPool(mX("x",e,t,n),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPoolWithArgmax":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("kernelSize",e,t,n),o=mX("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(mX("x",e,t,n),[i[1],i[2]],[s[1],s[2]],a,o);return[l,c]}case"AvgPool3D":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("kernelSize",e,t,n);return[r.avgPool3d(mX("x",e,t,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"MaxPool3D":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("kernelSize",e,t,n);return[r.maxPool3d(mX("x",e,t,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"Dilation2D":{const s=mX("strides",e,t,n),a=mX("pad",e,t,n),i=mX("dilations",e,t,n),o=s[1],l=s[2],c=i[1],u=i[2];return[r.dilation2d(mX("x",e,t,n),mX("filter",e,t,n),[o,l],a,[c,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"creation":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Fill":{const s=mX("shape",e,t,n),a=mX("dtype",e,t,n),i=mX("value",e,t,n);return[r.fill(s,i,a)]}case"LinSpace":{const s=mX("start",e,t,n),a=mX("stop",e,t,n),i=mX("num",e,t,n);return[r.linspace(s,a,i)]}case"Multinomial":{const s=mX("logits",e,t,n),a=mX("numSamples",e,t,n),i=mX("seed",e,t,n);return[r.multinomial(s,a,i)]}case"OneHot":{const s=mX("indices",e,t,n),a=mX("depth",e,t,n),i=mX("onValue",e,t,n),o=mX("offValue",e,t,n),l=mX("dtype",e,t,n);return[r.oneHot(s,a,i,o,l)]}case"Ones":return[r.ones(mX("shape",e,t,n),mX("dtype",e,t,n))];case"OnesLike":return[r.onesLike(mX("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(mX("shape",e,t,n),mX("dtype",e,t,n),mX("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(mX("shape",e,t,n),mX("minval",e,t,n),mX("maxval",e,t,n),mX("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(mX("shape",e,t,n),mX("minval",e,t,n),mX("maxval",e,t,n),mX("seed",e,t,n))];case"Range":{const s=mX("start",e,t,n),a=mX("stop",e,t,n),i=mX("step",e,t,n);return[r.range(s,a,i,mX("dtype",e,t,n))]}case"TruncatedNormal":{const s=mX("shape",e,t,n),a=mX("mean",e,t,n),i=mX("stdDev",e,t,n),o=mX("seed",e,t,n);return[r.truncatedNormal(s,a,i,mX("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(mX("shape",e,t,n),mX("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(mX("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"dynamic":return async function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:V;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=dQ(e,t,n),u=await s.image.nonMaxSuppressionWithScoreAsync(r,a,i,o,l,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=dQ(e,t,n),c=mX("padToMaxOutputSize",e,t,n),u=await s.image.nonMaxSuppressionPaddedAsync(r,a,i,o,l,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=dQ(e,t,n);return[await s.image.nonMaxSuppressionAsync(r,a,i,o,l)]}case"Where":{const r=s.cast(mX("condition",e,t,n),"bool"),a=[await s.whereAsync(r)];return r.dispose(),a}case"ListDiff":return s.setdiff1dAsync(mX("x",e,t,n),mX("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n);case"evaluation":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"LowerBound":{const s=mX("sortedSequence",e,t,n),a=mX("values",e,t,n);return[r.lowerBound(s,a)]}case"TopKV2":{const s=mX("x",e,t,n),a=mX("k",e,t,n),i=mX("sorted",e,t,n),o=r.topk(s,a,i);return[o.values,o.indices]}case"UpperBound":{const s=mX("sortedSequence",e,t,n),a=mX("values",e,t,n);return[r.upperBound(s,a)]}case"Unique":{const s=mX("x",e,t,n),a=r.unique(s);return[a.values,a.indices]}case"UniqueV2":{const s=mX("x",e,t,n),a=mX("axis",e,t,n),i=r.unique(s,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"image":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"ResizeBilinear":{const s=mX("images",e,t,n),a=mX("size",e,t,n),i=mX("alignCorners",e,t,n),o=mX("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(s,[a[0],a[1]],i,o)]}case"ResizeNearestNeighbor":{const s=mX("images",e,t,n),a=mX("size",e,t,n),i=mX("alignCorners",e,t,n),o=mX("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(s,[a[0],a[1]],i,o)]}case"CropAndResize":{const s=mX("image",e,t,n),a=mX("boxes",e,t,n),i=mX("boxInd",e,t,n),o=mX("cropSize",e,t,n),l=mX("method",e,t,n),c=mX("extrapolationValue",e,t,n);return[r.image.cropAndResize(s,a,i,o,l,c)]}case"ImageProjectiveTransformV3":{const s=mX("images",e,t,n),a=mX("transforms",e,t,n),i=mX("outputShape",e,t,n),o=mX("fillValue",e,t,n),l=mX("interpolation",e,t,n),c=mX("fillMode",e,t,n);return[r.image.transform(s,a,l.toLowerCase(),c.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"graph":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const s=mX("default",e,t,n);return[gX(e.name,t,n)||s];case"Placeholder":return[gX(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[kX(mX("x",e,t,n))];case"IdentityN":return mX("x",e,t,n).map((e=>kX(e)));case"Shape":return[r.tensor1d(mX("x",e,t,n).shape,"int32")];case"ShapeN":return mX("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(mX("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(mX("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=mX("x",e,t,n),i=mX("data",e,t,n),o=mX("message",e,t,n),l=mX("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,l));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"logical":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Equal":return[r.equal(mX("a",e,t,n),mX("b",e,t,n))];case"NotEqual":return[r.notEqual(mX("a",e,t,n),mX("b",e,t,n))];case"Greater":return[r.greater(mX("a",e,t,n),mX("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(mX("a",e,t,n),mX("b",e,t,n))];case"Less":return[r.less(mX("a",e,t,n),mX("b",e,t,n))];case"LessEqual":return[r.lessEqual(mX("a",e,t,n),mX("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(mX("a",e,t,n),mX("b",e,t,n))];case"LogicalNot":return[r.logicalNot(mX("a",e,t,n))];case"LogicalOr":return[r.logicalOr(mX("a",e,t,n),mX("b",e,t,n))];case"Select":case"SelectV2":return[r.where(mX("condition",e,t,n),mX("a",e,t,n),mX("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(mX("a",e,t,n),mX("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"matrices":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(mX("a",e,t,n),mX("b",e,t,n),mX("transposeA",e,t,n),mX("transposeB",e,t,n))];case"Einsum":return[r.einsum(mX("equation",e,t,n),...mX("tensors",e,t,n))];case"Transpose":return[r.transpose(mX("x",e,t,n),mX("perm",e,t,n))];case"_FusedMatMul":const[s,a]=mX("fusedOps",e,t,n),i="biasadd"===s,o="prelu"===a,l=mX("numArgs",e,t,n),c=mX("leakyreluAlpha",e,t,n);if(i){if(o&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=mX("args",e,t,n);return[r.fused.matMul({a:mX("a",e,t,n),b:mX("b",e,t,n),transposeA:mX("transposeA",e,t,n),transposeB:mX("transposeB",e,t,n),bias:u,activation:a,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(mX("a",e,t,n),mX("numLower",e,t,n),mX("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"normalization":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(mX("x",e,t,n),mX("axis",e,t,n),mX("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(mX("x",e,t,n),mX("mean",e,t,n),mX("variance",e,t,n),mX("offset",e,t,n),mX("scale",e,t,n),mX("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(mX("x",e,t,n),mX("radius",e,t,n),mX("bias",e,t,n),mX("alpha",e,t,n),mX("beta",e,t,n))];case"Softmax":return[r.softmax(mX("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(mX("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"ragged":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:a}=r.raggedGather(mX("paramsNestedSplits",e,t,n),mX("paramsDenseValues",e,t,n),mX("indices",e,t,n),mX("outputRaggedRank",e,t,n));return s.concat(a)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:a}=r.raggedRange(mX("starts",e,t,n),mX("limits",e,t,n),mX("splits",e,t,n));return[s,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(mX("shape",e,t,n),mX("values",e,t,n),mX("defaultValue",e,t,n),mX("rowPartitionTensors",e,t,n),mX("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"reduction":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Max":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.max(mX("x",e,t,n),s,a)]}case"Mean":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.mean(mX("x",e,t,n),s,a)]}case"Min":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.min(mX("x",e,t,n),s,a)]}case"Sum":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.sum(mX("x",e,t,n),s,a)]}case"All":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.all(mX("x",e,t,n),s,a)]}case"Any":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.any(mX("x",e,t,n),s,a)]}case"ArgMax":{const s=mX("axis",e,t,n);return[r.argMax(mX("x",e,t,n),s)]}case"ArgMin":{const s=mX("axis",e,t,n);return[r.argMin(mX("x",e,t,n),s)]}case"Prod":{const s=mX("axis",e,t,n),a=mX("keepDims",e,t,n);return[r.prod(mX("x",e,t,n),s,a)]}case"Cumprod":{const s=mX("axis",e,t,n),a=mX("exclusive",e,t,n),i=mX("reverse",e,t,n);return[r.cumprod(mX("x",e,t,n),s,a,i)]}case"Cumsum":{const s=mX("axis",e,t,n),a=mX("exclusive",e,t,n),i=mX("reverse",e,t,n);return[r.cumsum(mX("x",e,t,n),s,a,i)]}case"Bincount":const s=mX("x",e,t,n),a=mX("weights",e,t,n),i=mX("size",e,t,n);return[r.bincount(s,a,i)];case"DenseBincount":{const s=mX("x",e,t,n),a=mX("weights",e,t,n),i=mX("size",e,t,n),o=mX("binaryOutput",e,t,n);return[r.denseBincount(s,a,i,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"slice_join":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"ConcatV2":case"Concat":{const s=mX("n",e,t,n),a=mX("axis",e,t,n);let i=mX("tensors",e,t,n);return i=i.slice(0,s),[r.concat(i,a)]}case"Gather":{const s=mX("x",e,t,n),a=mX("indices",e,t,n);return[r.gather(s,r.cast(a,"int32"),0)]}case"GatherV2":{const s=mX("axis",e,t,n),a=mX("batchDims",e,t,n),i=mX("x",e,t,n),o=mX("indices",e,t,n);return[r.gather(i,r.cast(o,"int32"),s,a)]}case"Reverse":{const s=mX("dims",e,t,n),a=[];for(let e=0;e<s.length;e++)s[e]&&a.push(e);const i=mX("x",e,t,n);return[r.reverse(i,a)]}case"ReverseV2":{const s=mX("axis",e,t,n),a=mX("x",e,t,n);return[r.reverse(a,s)]}case"Slice":{const s=mX("begin",e,t,n),a=mX("size",e,t,n);return[r.slice(mX("x",e,t,n),s,a)]}case"StridedSlice":{const s=mX("begin",e,t,n),a=mX("end",e,t,n),i=mX("strides",e,t,n),o=mX("beginMask",e,t,n),l=mX("endMask",e,t,n),c=mX("ellipsisMask",e,t,n),u=mX("newAxisMask",e,t,n),h=mX("shrinkAxisMask",e,t,n),d=mX("x",e,t,n);return[r.stridedSlice(d,s,a,i,o,l,c,u,h)]}case"Pack":return EA((()=>{const s=mX("axis",e,t,n),a=mX("tensors",e,t,n),i=a[0].shape,o=r.squeeze(a[0]).shape,l=a.map((e=>{const t=AT(e.shape,i);if(!t&&!AT(r.squeeze(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(l,s)]}));case"Unpack":{const s=mX("axis",e,t,n),a=mX("tensor",e,t,n);return r.unstack(a,s)}case"Tile":{const s=mX("reps",e,t,n);return[r.tile(mX("x",e,t,n),s)]}case"Split":case"SplitV":{const s=mX("axis",e,t,n),a=mX("numOrSizeSplits",e,t,n),i=mX("x",e,t,n);return r.split(i,a,s)}case"ScatterNd":{const s=mX("indices",e,t,n),a=mX("values",e,t,n),i=mX("shape",e,t,n);return[r.scatterND(s,a,i)]}case"GatherNd":{const s=mX("x",e,t,n),a=mX("indices",e,t,n);return[r.gatherND(s,a)]}case"SparseToDense":{const s=mX("sparseIndices",e,t,n),a=mX("outputShape",e,t,n),i=mX("sparseValues",e,t,n),o=mX("defaultValue",e,t,n);return[r.sparseToDense(s,i,a,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{const s=mX("indices",e,t,n),a=mX("values",e,t,n),i=mX("tensor",e,t,n);return[r.tensorScatterUpdate(i,s,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"sparse":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:a,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(mX("indices",e,t,n),mX("values",e,t,n),mX("denseShape",e,t,n),mX("defaultValue",e,t,n));return[s,a,i,o]}case"SparseReshape":{const{outputIndices:s,outputShape:a}=r.sparse.sparseReshape(mX("inputIndices",e,t,n),mX("inputShape",e,t,n),mX("newShape",e,t,n));return[s,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(mX("data",e,t,n),mX("indices",e,t,n),mX("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(mX("data",e,t,n),mX("indices",e,t,n),mX("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"spectral":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"FFT":return[r.fft(mX("x",e,t,n))];case"IFFT":return[r.ifft(mX("x",e,t,n))];case"RFFT":return[r.rfft(mX("x",e,t,n))];case"IRFFT":return[r.irfft(mX("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"string":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(mX("input",e,t,n),mX("pattern",e,t,n),mX("rewrite",e,t,n),mX("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:a}=r.string.stringNGrams(mX("data",e,t,n),mX("dataSplits",e,t,n),mX("separator",e,t,n),mX("nGramWidths",e,t,n),mX("leftPad",e,t,n),mX("rightPad",e,t,n),mX("padWidth",e,t,n),mX("preserveShortSequences",e,t,n));return[s,a]}case"StringSplit":{const{indices:s,values:a,shape:i}=r.string.stringSplit(mX("input",e,t,n),mX("delimiter",e,t,n),mX("skipEmpty",e,t,n));return[s,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(mX("input",e,t,n),mX("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"transformation":return s((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V;switch(e.op){case"Cast":return[r.cast(mX("x",e,t,n),mX("dtype",e,t,n))];case"ExpandDims":{const s=mX("axis",e,t,n);return[r.expandDims(mX("x",e,t,n),s)]}case"Squeeze":{const s=mX("axis",e,t,n);return[r.squeeze(mX("x",e,t,n),s)]}case"Reshape":return[r.reshape(mX("x",e,t,n),mX("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(mX("x",e,t,n),mX("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(mX("x",e,t,n),mX("padding",e,t,n),mX("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(mX("x",e,t,n),mX("padding",e,t,n),mX("constantValue",e,t,n))];case"SpaceToBatchND":{const s=mX("blockShape",e,t,n),a=mX("paddings",e,t,n);return[r.spaceToBatchND(mX("x",e,t,n),s,a)]}case"BatchToSpaceND":{const s=mX("blockShape",e,t,n),a=mX("crops",e,t,n);return[r.batchToSpaceND(mX("x",e,t,n),s,a)]}case"DepthToSpace":{const s=mX("blockSize",e,t,n),a=mX("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(mX("x",e,t,n),s,a)]}case"BroadcastTo":return[r.broadcastTo(mX("x",e,t,n),mX("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(mX("s0",e,t,n),mX("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}}(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(e.name);if(null!=s)return[s];{const s=mX("keyDType",e,t,n),a=mX("valueDType",e,t,n),i=new pQ(s,a);return r.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=mX("tableHandle",e,t,n,r),a=mX("keys",e,t,n),i=mX("values",e,t,n),o=r.getHashTableById(s.id);return[await o.import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const s=mX("tableHandle",e,t,n,r),a=mX("keys",e,t,n),i=mX("defaultValue",e,t,n),o=r.getHashTableById(s.id);return[await o.find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=mX("tableHandle",e,t,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const a=pX(e.op);if(a&&a.customExecutor)return a.customExecutor(new rQ(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return cE(a)?a.then((e=>[].concat(e))):[].concat(a)}class mQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function gQ(e,t,n,r){const s=new Set,a=[];let i=null,o=null;const l=new Set,c=new Set(Object.keys(e).map((e=>wX(e)[0])));r=r||[];const u=new Set(r.map((e=>wX(e.name)[0]))),h=[...t];for(;h.length>0;){const e=h.pop();(kQ(e)||SQ(e)||TQ(e))&&null==i&&(i=e,o=i.children.map((e=>e.name)).filter((e=>s.has(e)))),s.add(e.name),null==n[e.name]&&(c.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{l.has(e.name)||(l.add(e.name),h.push(e))})):a.push(e.name)))}return{inputs:e,outputs:t,usedNodes:s,missingInputs:a,dynamicNode:i,syncInputs:o}}function yQ(e,t){const{usedNodes:n,inputs:r}=t,s=Object.keys(r).map((e=>wX(e)[0])).map((t=>e.nodes[t])),a=e.initNodes||[],i=e=>n.has("string"===typeof e?e:e.name);function o(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const l=o([...s,...e.weights,...a]).filter(i),c=o([...l,...Object.values(e.nodes)]).filter(i),u=new Map(c.map((e=>[e.name,e]))),h={};for(const m of c){h[m.name]=h[m.name]||0;for(const e of m.children)i(e)||(h[e.name]=Number.POSITIVE_INFINITY),h[e.name]=(h[e.name]||0)+1}const d=Object.entries(h).filter((e=>{let[,t]=e;return 0===t})).map((e=>{let[t]=e;return t})),p=[...d];for(;d.length>0;){const e=d.pop(),t=u.get(e);for(const n of t.children.filter(i))0===--h[n.name]&&(p.push(n.name),d.push(n.name))}const f=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),r=t.map((e=>e.name)),s=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const a of t.children)n.has(a.name)&&!s.has(a.name)&&(s.add(a.name),r.push(a.name))}const a=e.filter((e=>s.has(e.name)));return a}(p.map((e=>u.get(e))),l);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),r=new Set(t.map((e=>e.name))),s=e=>r.has("string"===typeof e?e:e.name),a=new Set(e.map((e=>e.name))),i=e=>a.has("string"===typeof e?e:e.name);for(const o of e){for(const e of o.children.filter(i)){if(!n.has(e.name))throw new vQ(`Child ${e.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(e.name))throw new vQ(`Node ${o.name} is scheduled to run after its child ${e.name}.`)}if(!s(o))for(const e of o.inputs){if(!n.has(e.name))throw new vQ(`Input ${e.name} of node ${o.name} is unreachable.`);if(n.get(e.name)>n.get(o.name))throw new vQ(`Node ${o.name} is scheduled to run before its input ${e.name}.`)}}}(f,l),f}class vQ extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}const bQ=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),wQ=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),xQ=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function kQ(e){return bQ.has(e.op)}function SQ(e){return wQ.has(e.op)}function TQ(e){return xQ.has(e.op)}class EQ{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new EQ(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=gQ(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:s,syncInputs:a}=n;if(null!=s)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const n=t.map((e=>e.name)),s=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${s}]. Missing the following inputs: [${r}]`)}const i=yQ(this.graph,n),o=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,r=e.map(((e,t)=>kQ(e)?n:t)),s=e=>{const n=r[t.get(e.name)];return null==n?-1:n},a=e.map(((e,t)=>e.children.map(s).reduce(((e,t)=>Math.max(e,t)),r[t]))),i=new Map;for(let o=0;o<e.length;++o){const t=a[o];if(t===n)continue;const r=e[o],s=e[t];i.has(s.name)||i.set(s.name,[]),i.get(s.name).push(r)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:o}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return CA(t),t}cloneTensorList(e){if(!e)return null;const t=e.map((e=>this.cloneAndKeepTensor(e)));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]})))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[wX(e)[0]])),s=t.map((e=>wX(e)[0])),a=new Set(s);let i=s.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const o=this.getCompilationKey(r,i);let l=this.compiledMap.get(o);null==l&&(l=this.compile(e,i),this.compiledMap.set(o,l));try{this.keepIntermediateTensors=pE().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(jEe){this.keepIntermediateTensors=!1,console.warn(jEe.message)}const c={},u={};return EA((()=>{const n=new mQ(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[s,a]=wX(t,n),i=[];i[a]=e[t],r[s]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[s]=this.cloneTensorList(i))}));const s=this.getFrozenTensorIds(r),{orderedNodes:i,nodeLiveUntilMap:o}=l;for(const e of i){if(r[e.name])continue;const t=fQ(e,r,n,this._resourceManager);if(cE(t))throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,s,a,o.get(e.name))}return null==this.parent&&n.dispose(s),t.map((e=>gX(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,s,a,i){if(!kQ(t)&&!a.has(e)){for(const r of n[e])null!=r&&(i[r.id]=(i[r.id]||0)+t.children.length);for(const e of t.inputs){if(kQ(e))continue;const t=yX(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||s.has(e.id))continue;const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,s,a){function i(e){return kQ(e)||s.has(e.name)}if(!kQ(e)&&null!=a)for(const o of a){if(i(o))continue;const e=yX(o.name,t,n);for(const t of e)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=pE().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(jEe){this.keepIntermediateTensors=!1,console.warn(jEe.message)}const a=new mQ(this.weightMap,r,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,a,t,n),o=t.map((e=>gX(e,i,a))),l=o.map((e=>e.id)),c=Object.keys(e).map((t=>e[t].id)),u=new Set([...l,...c,...this.weightIds]);return Object.values(i).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()}))})),null==this.parent&&a.dispose(u),o}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const s=Object.keys(e),a=s.map((e=>this.graph.nodes[wX(e)[0]])),i=n.map((e=>wX(e)[0])),o=new Set(i);let l=i.map((e=>this.graph.nodes[e]));0===l.length&&(l=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:h,syncInputs:d}=gQ(e,l,this.weightMap,this._initNodes),p=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),f=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=wX(t),s=[];s[r]=e[t],f[n]=s}));const m={},g=this.getFrozenTensorIds(f),y={};for(;p.length>0;){const e=this.processStack(a,p,t,f,y,g,o,m,c);await Promise.all(e)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=l.filter((e=>!kQ(e)&&!gX(e.name,f,t))).map((e=>e.name));if(v.length>0){let e="";throw null!=h&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${s}]. Consider providing the following inputs: [${u}]. ${e}`)}return f}processStack(e,t,n,r,s,a,i,o,l){const c=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&mX("isConstant",e.node,r,n)&&([u]=vX(e.node.name,n)),null==r[e.node.name]){const h=fQ(e.node,r,n,this._resourceManager);u||([u]=vX(e.node.name,n));const d=n.currentContext;cE(h)?c.push(h.then((c=>(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),n.currentContext=d,this.checkTensorForDisposal(u,e.node,r,n,a,i,o),this.processChildNodes(e.node,t,n,r,s,l),c)))):(r[u]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(h)),this.checkTensorForDisposal(u,e.node,r,n,a,i,o),this.processChildNodes(e.node,t,n,r,s,l))}else this.processChildNodes(e.node,t,n,r,s,l)}return c}processChildNodes(e,t,n,r,s,a){e.children.forEach((e=>{const[i]=vX(e.name,n);!s[i]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!gX(e,r,n)))&&(s[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!gX(e,r,n)))&&(s[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=wX(t),s=this.graph.nodes[r];if(s.attrParams.shape&&s.attrParams.shape.value){const e=s.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));TT(t,(()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}s.attrParams.dtype&&s.attrParams.dtype.value&&TT(n.dtype===s.attrParams.dtype.value,(()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){var t,n;const r={};for(const s in e){const a=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[s];null!=a?r[a.name]=e[s]:r[s]=e[s]}return r}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=wX(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=wX(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class NQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const CQ="?tfjs-format=file",IQ="model.json";class _Q{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new NQ}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return cE(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await HA(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new EQ(BX.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=BX.Instance.transformGraph(e.modelInitializer);this.initializer=new EQ(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof A_?[e]:e).forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof A_)&&!Array.isArray(e)){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce(((t,n)=>{var s,a,i;const o=null===(i=null===(a=null===(s=this.signature)||void 0===s?void 0:s.inputs)||void 0===a?void 0:a[n])||void 0===i?void 0:i.resourceId;return t[n]=null!=o?this.resourceIdToCapturedInput[o]:e[r++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const s=t[n[r]];this.resourceIdToCapturedInput[s.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&NA(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function AQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"===typeof e&&(e=function(e){e.endsWith("/")||(e+="/");return`${e}${IQ}${CQ}`}(e));const r=new _Q(e,t,n);return await r.load(),r}function RQ(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){const[n,r]=e;if(!n)throw new Error("modelJSON must be the first element of the array");if(!r||!(r instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw new Error("Model JSON is missing 'weightsManifest'");t=HD(JA(n,tR(n.weightsManifest),r))}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=HD(e)}const n=new _Q(t);return n.load(),n}const DQ="4.22.0";function OQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const s=t(e);if(s.recurse&&null!==s.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(s.recurse){if($Q(e)){const s=Array.isArray(e)?[]:{};r.add(e);for(const a in e){const i=OQ(e[a],t,n,r);s[a]=i}return r.delete(e),e.__proto__&&(s.__proto__=e.__proto__),s}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,s.value),s.value}function MQ(e){return PQ(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:LQ)}function PQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const s=t(e);if(s.recurse&&null!==s.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(s.recurse){if($Q(r)){const s=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=e.map((e=>e[a])),i=PQ(r,t,n);s[a]=i}return n.delete(r),s}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return s.value}function LQ(e){return null===e?null:$Q(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function FQ(e,t){const n=new Map;OQ(e,t,n);for(const r of Array.from(n.keys())){const e=n.get(r);if(cE(e)){const t=await e;n.set(r,t)}}return OQ(e,t,n)}function $Q(e){let t=!1;if(pE().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof A_)&&!(e instanceof Promise)&&!t)}function zQ(e){return function(e,t){return OQ(e,t)}(e,jQ)}function jQ(e){return e instanceof A_?{value:e.clone(),recurse:!1}:$Q(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class UQ{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class BQ extends UQ{constructor(){super(BQ.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function VQ(e){return new qQ(e)}function WQ(e){return new KQ(e)}function HQ(e,t){return new aJ(e,t)}BQ.INITIAL_CAPACITY=32;class GQ{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new tJ(this,e)}filter(e){return new ZQ(this,e)}map(e){return new eJ(this,e)}mapAsync(e){return new nJ(this,e)}serialMapAsync(e){return new nJ(this,e).serial()}flatmap(e){return new sJ(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new JQ(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LQ;return this.rowMajorBatch(e,t).map((e=>MQ(e,n)))}concatenate(e,t){return new aJ(VQ([this,e]),t)}take(e){return e<0||null==e?this:new QQ(this,e)}skip(e){return e<0||null==e?this:new XQ(this,e)}prefetch(e){return new lJ(this,e)}shuffle(e,t){return new cJ(this,e,t)}serial(){return new YQ(this)}}class qQ extends GQ{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:zQ(e),done:!1}}}class KQ extends GQ{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(jEe){throw jEe.message=`Error thrown while iterating through a dataset: ${jEe.message}`,jEe}}}class YQ extends GQ{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class XQ extends GQ{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;NA(e.value)}return this.upstream.next()}}class QQ extends GQ{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class JQ extends GQ{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class ZQ extends GQ{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;NA(e.value)}}}class eJ extends GQ{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=G_(e.value),n=this.transform(e.value),r=G_(n);for(const s of t)H_(s,r)||s.dispose();return{value:n,done:!1}}}class tJ extends GQ{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(jEe){if(!this.handler(jEe))return{value:null,done:!0}}}}class nJ extends GQ{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=G_(e.value),n=await this.transform(e.value),r=G_(n);for(const s of t)H_(s,r)||s.dispose();return{value:n,done:!1}}}class rJ extends GQ{constructor(){super(),this.outputQueue=new BQ,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class sJ extends rJ{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=G_(e.value),n=this.transform(e.value),r=G_(n);this.outputQueue.pushAll(n);for(const s of t)H_(s,r)||s.dispose();return!0}}class aJ extends GQ{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var iJ;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(iJ||(iJ={}));class oJ extends GQ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iJ.FAIL;super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;const r=await FQ(this.iterators,(function(e){if(e instanceof GQ){return{value:e.next().then((e=>(t++,e.done&&n++,e.value))),recurse:!1}}return{value:null,recurse:!0}}));if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case iJ.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case iJ.SHORTEST:return{value:null,done:!0};case iJ.LONGEST:}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class lJ extends GQ{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new UQ(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class cJ extends lJ{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=PL.alea(n||d_().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class uJ{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return TT(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),hJ((async()=>(await n.iterator()).columnMajorBatch(e,t,fJ)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,hJ((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,hJ((async()=>(await t.iterator()).filter((t=>EA((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return hJ((async()=>(await t.iterator()).map((t=>EA((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return hJ((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return hJ((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,hJ((async()=>HQ(WQ((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,hJ((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,s=PL.alea(t||d_().toString());return hJ((async()=>{let t=s.int32();return n&&(t+=s.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,hJ((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function hJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends uJ{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function dJ(e){return hJ((async()=>VQ(e)),e.length)}function pJ(e){if(!$Q(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(const n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return hJ((async()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iJ.FAIL;return new oJ(e,t)}(await FQ(e,(e=>{if(e instanceof uJ)return{value:e.iterator(),recurse:!1};if($Q(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})),iJ.SHORTEST)),t)}function fJ(e){if(null===e)return null;if(function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof A_||g_(e);var t}(e[0])){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof A_?bF(e):fA(e)}(e),recurse:!1}}return{value:null,recurse:!0}}uJ.MAX_BUFFER_SIZE=1e4;class mJ extends uJ{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map((e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e)))}}const gJ='"',yJ=Symbol("out"),vJ=Symbol("field"),bJ=Symbol("quote"),wJ=Symbol("quoteafterquote"),xJ=Symbol("quoteinquote");class kJ extends uJ{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&TT(e.length===this.fullColumnNames.length,(()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+").")),this.fullColumnNames||(this.fullColumnNames=e);const t=this.fullColumnNames.reduce(((e,t)=>(e[t]=e[t]+1||1,e)),{}),n=Object.keys(t).filter((e=>t[e]>1));if(TT(0===n.length,(()=>"Duplicate column names found: "+n.toString())),this.columnConfigs)for(const r of Object.keys(this.columnConfigs)){if(-1===this.fullColumnNames.indexOf(r))throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");const n=t.value;return this.parseRow(n,!1)}return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new mJ(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(TT(null==t.delimiter,(()=>"Delimiter should not be provided when delimWhitespace is true.")),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map((e=>this.makeDataElement(e)))}makeDataElement(e){const t=this.parseRow(e),n={},r={};for(let s=0;s<this.fullColumnNames.length;s++){const a=this.fullColumnNames[s],i=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||i){const o=t[s];let l=null;if(""===o)if(i&&void 0!==i.default)l=i.default;else{if(i&&(i.required||i.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);l=void 0}else{const e=Number(o);if(isNaN(e))l=i&&"bool"===i.dtype?this.getBoolean(o):o;else if(i&&i.dtype)switch(i.dtype){case"float32":default:l=e;break;case"int32":l=Math.floor(e);break;case"bool":l=this.getBoolean(o)}else l=e}i&&i.isLabel?r[a]=l:n[a]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=[];let r=0;const s=e.length;let a=yJ;for(let i=0;i<s;i++)switch(a){case yJ:switch(e.charAt(i)){case gJ:r=i+1,a=bJ;break;case this.delimiter:if(r=i+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),a=yJ;break;default:a=vJ,r=i}break;case vJ:if(e.charAt(i)===this.delimiter)n.push(e.substring(r,i)),a=yJ,r=i+1;break;case bJ:if(e.charAt(i)===gJ)a=wJ;break;case wJ:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i-1)),a=yJ,r=i+1;break;case gJ:a=bJ;break;default:a=xJ}break;case xJ:if(e.charAt(i)===gJ)a=bJ}if(a===wJ?n.push(e.substring(r,s-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}class SJ extends GQ{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;const t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!pE().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");const t=new SJ(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(jEe){throw new Error(`Error thrown while initializing video stream: ${jEe.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t;const n=await this.getAudioData();if(this.includeSpectrogram){const t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const e=[],t=[];let n=0;return new Promise((r=>{const s=setInterval((()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(s),r({freqDataQueue:e,timeDataQueue:t}))}),this.fftSize/this.sampleRateHz*1e3)}))}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){const t=e[0].length,n=new Float32Array(e.length*t);return e.forEach(((e,r)=>n.set(e,r*t))),n}getTensorFromAudioDataArray(e,t){const n=new Float32Array(CT(t));return n.set(e,n.length-e.length),fA(n,t)}}class TJ extends GQ{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=SF([0],"int32"),this.webcamConfig.centerCrop){const e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2,s=n+e,a=t+r;this.cropBox=TF([r,n,a,s],[1,4])}else this.cropBox=TF([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!pE().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}const n=new TJ(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&TT("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`));try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(jEe){throw jEe.message=`Error thrown while initializing video stream: ${jEe.message}`,jEe}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise((e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}}))}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=uO(this.webcamVideoElement)}catch(jEe){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(jEe)}`)}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(jEe){throw new Error(`Error thrown cropping the video: ${jEe.message}`)}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return EA((()=>{const t=RP(UR(e,"float32"),0);let n;n=nz.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const r=n.shape;return SM(n,r.slice(1))}))}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach((e=>e.stop()));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}class EJ{}class NJ extends GQ{split(e){return new CJ(this,e)}}class CJ extends NJ{constructor(e,t){super(),this.upstream=e,this.impl=new IJ(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class IJ extends rJ{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(const n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}}class _J extends GQ{decodeUTF8(){return new AJ(this)}}class AJ extends NJ{constructor(e){super(),this.upstream=e,this.impl=new RJ(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class RJ extends rJ{constructor(e){if(super(),this.upstream=e,pE().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=n(4530);this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const e=await this.upstream.next();let t,n;return!e.done&&(t=e.value,n=pE().get("IS_BROWSER")?this.decoder.decode(t,{stream:!0}):this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0)}}class DJ extends _J{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.file=e,this.options=t,TT(e instanceof Uint8Array||!!pE().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(()=>"FileChunkIterator only supports File, Blob and Uint8Array right now.")),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise(((e,t)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let s=r.result;if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),!(s instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(s)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));const s=this.file.slice(this.offset,n);r.readAsArrayBuffer(s)}this.offset=n}));return{value:await e,done:!1}}}const OJ=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function MJ(e){return"string"===typeof e&&"file://"===e.slice(0,7)}class PJ extends EJ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.input=e,this.options=t}async iterator(){if(MJ(this.input)&&pE().get("IS_NODE")){const e=n(8108);this.input=e.readFileSync(this.input.slice(7))}return new DJ(this.input,this.options)}}class LJ extends EJ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.url=e,this.fileOptions=t}async iterator(){return MJ(this.url)?new PJ(this.url,this.fileOptions).iterator():async function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;"string"===typeof e?t=e:(t=e.url,n=OJ(e));const a=await(s||p_)(t,n);if(a.ok){const e=new Uint8Array(await a.arrayBuffer());return new DJ(e,r)}throw new Error(a.statusText)}(this.url,this.fileOptions)}}function FJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new kJ(new LJ(e),t)}function $J(e){const t=WQ(e);return hJ((async()=>t))}function zJ(e){return hJ((async()=>{const t=await e();return WQ((()=>t.next()))}))}async function jJ(e,t){return TJ.create(e,t)}async function UJ(e){return SJ.create(e)}const BJ="4.22.0";function VJ(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&TT("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const WJ=LF;class HJ extends fT{nextDataId(){return HJ.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new pT(this,kA())}write(e,t,n){this.firstUse&&(this.firstUse=!1,pE().get("IS_NODE")&&LI("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&qT(n[0])){const s=n.map((e=>f_(e)));r=this.write(s,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,s){this.data.set(e,{values:t,dtype:r,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return Oz(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return nE(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>m_(e)));return jR(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return jR(e.shape,e.dtype,t)}makeOutput(e,t,n){return kA().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=d_();e();return{kernelMs:d_()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){VJ([e],"where");const t=this.readSync(e.dataId);return WJ(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function GJ(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}HJ.nextDataId=0;const qJ={kernelName:vE,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;VJ(t,"abs");let r=new Float32Array(CT(t.shape));return r=GJ(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function KJ(e){return(t,n,r,s,a)=>{const i=xD(t,n),o=i.length,l=ZT(i),c=jT(a,CT(i)),u=t.length,h=n.length,d=ZT(t),p=ZT(n),f=bD(t,i),m=bD(n,i);if(f.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=e(r[g%r.length],s[g%s.length]);else for(let g=0;g<c.length;++g){const t=lE(g,o,l),n=t.slice(-u);f.forEach((e=>n[e]=0));const a=oE(n,u,d),i=t.slice(-h);m.forEach((e=>i[e]=0));const y=oE(i,h,p);c[g]=e(r[a],s[y])}return[c,i]}}function YJ(e){const{inputs:t,backend:n}=e,{real:r,imag:s}=t,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(s.shape,"float32",i)},o}const XJ={kernelName:HE,backendName:"cpu",kernelFunc:YJ};function QJ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return YJ({inputs:{real:QJ(e,t,"float32"),imag:QJ(e,t,"float32")},backend:e})}const r=sE(CT(t),n);return e.makeTensorInfo(t,n,r)}function JJ(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const ZJ={kernelName:MN,backendName:"cpu",kernelFunc:JJ};function eZ(e){const{inputs:t,backend:n}=e,{input:r}=t,s=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,a)}const tZ={kernelName:DC,backendName:"cpu",kernelFunc:eZ};function nZ(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=h_([0],n),[s,a]=KJ(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function rZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dtype:a}=r;if("complex64"===a){if("complex64"===s.dtype)return JJ({inputs:{x:s},backend:n});const e=QJ(n,s.shape,s.dtype),t=rZ({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),r=YJ({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===s.dtype){const e=eZ({inputs:{input:s},backend:n}),t=rZ({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!WT(s.dtype,a)){const e=JJ({inputs:{x:s},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}const i=n.data.get(s.dataId).values,[o,l,c]=nZ(i,s.shape,s.dtype,a);return n.makeTensorInfo(o,l,c)}const sZ={kernelName:BE,backendName:"cpu",kernelFunc:rZ};function aZ(e,t,n,r){return null==n?n=>{let{inputs:s,backend:a}=n;const{a:i,b:o}=s,l=a;VJ([i,o],e);const c=l.data.get(i.dataId).values,u=l.data.get(o.dataId).values,h="string"===i.dtype?pj(c):c,d="string"===i.dtype?pj(u):u,p=r||i.dtype,[f,m]=t(i.shape,o.shape,h,d,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:s,backend:a}=e;const{a:i,b:o}=s,l=a;if("complex64"===i.dtype||"complex64"===o.dtype){const e=rZ({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,s=t.complexTensorInfos.imag,a=l.data.get(r.dataId).values,c=l.data.get(s.dataId).values,u=rZ({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,[g,y,v]=n(i.shape,o.shape,a,c,f,m),b=l.makeTensorInfo(v,"float32",g),w=l.makeTensorInfo(v,"float32",y),x=YJ({inputs:{real:b,imag:w},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(w),x}{const e=l.data.get(i.dataId).values,n=l.data.get(o.dataId).values,s=r||i.dtype,[a,c]=t(i.shape,o.shape,e,n,s);return l.makeTensorInfo(c,s,a)}}}function iZ(e){return(t,n,r,s,a,i)=>{const o=xD(t,n),l=CT(o),c=o.length,u=ZT(o),h=jT("float32",l),d=jT("float32",l),p=bD(t,o),f=bD(n,o),m=Oz(r,s),g=Oz(a,i),y=t.length,v=ZT(t),b=n.length,w=ZT(n);if(p.length+f.length===0)for(let x=0;x<h.length;x++){const t=x%m.length,n=x%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);h[x]=r.real,d[x]=r.imag}else for(let x=0;x<h.length;x++){const t=lE(x,c,u),n=t.slice(-y);p.forEach((e=>n[e]=0));const r=oE(n,y,v),s=t.slice(-b);f.forEach((e=>s[e]=0));const a=oE(s,b,w),i=e(m[2*r],m[2*r+1],g[2*a],g[2*a+1]);h[x]=i.real,d[x]=i.imag}return[h,d,o]}}const oZ=KJ(((e,t)=>e+t)),lZ=iZ(((e,t,n,r)=>({real:e+n,imag:t+r}))),cZ=aZ(xE,oZ,lZ),uZ={kernelName:xE,backendName:"cpu",kernelFunc:cZ};function hZ(e,t,n,r,s){const a=CT(r),i=sE(s,n);for(let o=0;o<e.length;o++){const n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=s||(i[n]+=a>0?t[o]:1)}return i}function dZ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e.shape[0],a=e.shape[1],i=jR([s,n],t.dtype);for(let o=0;o<s;o++)for(let s=0;s<a;s++){const a=e.get(o,s);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?i.set(1,o,a):t.size>0?i.set(i.get(o,a)+t.get(o,s),o,a):i.set(i.get(o,a)+1,o,a))}return i}const pZ=KJ(((e,t)=>e&t)),fZ=aZ(zE,pZ),mZ={kernelName:zE,backendName:"cpu",kernelFunc:fZ};function gZ(e){return(t,n,r)=>{const s=UT(n,t.length);for(let a=0;a<t.length;++a)s[a]=e(t[a],r);return s}}function yZ(e,t,n){return vZ(e,gZ(t),n)}function vZ(e,t,n){return r=>{let{inputs:s,attrs:a,backend:i}=r;const{x:o}=s;VJ(o,e);const l=i,c=l.data.get(o.dataId).values;let u;if("string"===o.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=pj(c)}else u=c;const h=n||o.dtype,d=t(u,h,a);return l.makeTensorInfo(o.shape,h,d)}}const bZ=gZ((e=>Math.ceil(e))),wZ=vZ(VE,bZ),xZ={kernelName:VE,backendName:"cpu",kernelFunc:wZ};function kZ(e,t,n,r){const s=UT(n,CT(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=CT(e.shape);s.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const a="string"===n?pj(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)s[o+t]=a[i++]}r+=e.shape[1]}))}return s}const SZ=KJ(((e,t)=>e===t?1:0)),TZ=aZ(wN,SZ,null,"bool"),EZ={kernelName:wN,backendName:"cpu",kernelFunc:TZ},NZ=gZ((e=>Math.exp(e))),CZ=vZ(xN,NZ,"float32"),IZ={kernelName:xN,backendName:"cpu",kernelFunc:CZ},_Z=gZ((e=>Math.expm1(e))),AZ=vZ(SN,_Z),RZ={kernelName:SN,backendName:"cpu",kernelFunc:AZ},DZ=gZ((e=>Math.floor(e))),OZ=vZ(CN,DZ),MZ={kernelName:CN,backendName:"cpu",kernelFunc:OZ},PZ=KJ(((e,t)=>Math.floor(e/t))),LZ=aZ(IN,PZ,null,"int32"),FZ={kernelName:IN,backendName:"cpu",kernelFunc:LZ};function $Z(e,t,n,r,s,a,i,o,l){const c=jR([r,a],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<s;t++){const a=e[u*s+t];r+=a*i[t],n.push(a)}if(r<0||r>=l/a)throw new Error(`Invalid indices: ${n} does not index into ${o}`);for(let e=0;e<a;e++)c.values[u*a+e]=t.get(...t.indexToLoc(r*a+e))}return c}function zZ(e,t,n){const r=jR(n,e.dtype);for(let s=0;s<r.size;++s){const n=r.indexToLoc(s).slice(),a=n[0],i=n[2],o=t.locToIndex([a,i]);n[2]=t.values[o];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[s]=e.values[l])}return r}const jZ=KJ(((e,t)=>e>t?1:0)),UZ=aZ(DN,jZ,null,"bool"),BZ={kernelName:DN,backendName:"cpu",kernelFunc:UZ},VZ=KJ(((e,t)=>e>=t?1:0)),WZ=aZ(ON,VZ,null,"bool"),HZ={kernelName:ON,backendName:"cpu",kernelFunc:WZ},GZ=KJ(((e,t)=>e<t?1:0)),qZ=aZ(UN,GZ,null,"bool"),KZ={kernelName:UN,backendName:"cpu",kernelFunc:qZ},YZ=KJ(((e,t)=>e<=t?1:0)),XZ=aZ(BN,YZ,null,"bool"),QZ={kernelName:BN,backendName:"cpu",kernelFunc:XZ};function JZ(e,t,n){const r=(t-e)/(n-1),s=sE(n,"float32");s[0]=e;for(let a=1;a<s.length;a++)s[a]=s[a-1]+r;return s}const ZZ=gZ((e=>Math.log(e))),e0=vZ(WN,ZZ),t0={kernelName:WN,backendName:"cpu",kernelFunc:e0};function n0(e,t,n,r){const s=jT(r,CT(n));for(let a=0;a<s.length;++a){const n=a*t;let r=e[n];for(let s=0;s<t;++s){const t=e[n+s];(Number.isNaN(t)||t>r)&&(r=t)}s[a]=r}return s}const r0=KJ(((e,t)=>Math.max(e,t))),s0=aZ(nC,r0),a0={kernelName:nC,backendName:"cpu",kernelFunc:s0},i0=KJ(((e,t)=>Math.min(e,t))),o0=aZ(uC,i0),l0={kernelName:uC,backendName:"cpu",kernelFunc:o0},c0=KJ(((e,t)=>e*t)),u0=iZ(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),h0=aZ(fC,c0,u0),d0={kernelName:fC,backendName:"cpu",kernelFunc:h0};function p0(e,t,n){const r=u_(-1,n);return c0([],t,r,e,n)}const f0={kernelName:mC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;VJ(r,"neg");const s=n.data.get(r.dataId).values,[a,i]=p0(s,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}},m0=KJ(((e,t)=>e!==t?1:0)),g0=aZ(gC,m0,null,"bool"),y0={kernelName:gC,backendName:"cpu",kernelFunc:g0};function v0(e,t,n,r,s){const a=t.length,i=CT(t),o=ZT(t),l=ZT(s),c=jT(n,CT(s));for(let u=0;u<i;++u){const t=lE(u,a,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[oE(n,a,l)]=e[u]}return c}function b0(e){const{inputs:t,attrs:n,backend:r}=e,{x:s}=t,{perm:a}=n;VJ(s,"transpose");const i=s.shape.length,o=new Array(i);for(let c=0;c<o.length;c++)o[c]=s.shape[a[c]];const l=v0(r.data.get(s.dataId).values,s.shape,s.dtype,a,o);return{dataId:r.write(l,o,s.dtype),shape:o,dtype:s.dtype}}const w0={kernelName:TI,backendName:"cpu",kernelFunc:b0};function x0(e,t,n,r){const[s,a]=vP(e,r),i=z_(t,"int32"),o=sE(CT(s),i),l=CT(a);for(let c=0;c<o.length;++c){const e=c*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];o[c]=t}return{outVals:o,outShape:s,outDtype:i}}const k0={kernelName:CC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r;VJ(s,"prod");const o=s.shape.length,l=$T(a,s.shape),c=xP(l,o);let u=l,h=s;const d=[];null!=c&&(h=b0({inputs:{x:s},backend:n,attrs:{perm:c}}),d.push(h),u=SP(u.length,o));const p=n.data.get(h.dataId).values,{outVals:f,outShape:m,outDtype:g}=x0(h.shape,h.dtype,p,u);let y=m;return i&&(y=bP(m,l)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(y,g,f)}};function S0(e,t,n,r){const s=[];let a=0;const i=t.length-1+n.length,o=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],s=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)o[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],i=e[c]+1;for(let e=0;e<n.length;++e){const s=n[e],a=e+t.length-1;if(a>=0){const e=o[a],t=e[e.length-1]-s[r];for(let n=r;n<i;++n)o[a].push(s[n+1]+t)}r=s[r],i=s[i]}i!==r&&(s.push([r,i]),a+=i-r)}return{outSplits:o,valueSlices:s,numValues:a}}function T0(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function E0(e,t,n,r,s){const a=t.slice();a[0]=s;const i=UT(n,CT(a)),o=e.length;return function(e,t,n,r,s,a){const i=T0(t,2)[1],o=T0(a,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)s[l*o+n]=e[t*i+n];++l}}(e,t,r,0===o?0:o/t[0],i,a),[i,a]}function N0(e,t,n,r,s,a,i,o){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const s=lE(r,t.length,ZT(t)).join(",");throw new Error(`indices[${s}] = ${e} is not in [0, ${n})`)}}))}(a,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:h}=S0(a,i,e,l),d=function(e){const t=[];for(let n=0;n<e.length;++n){const r=UT("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(c),p=E0(n,r,s,u,h);return[d,p[0],p[1]]}const C0=2147483647;function I0(e,t,n,r,s,a,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=0===t.length,l=0===s.length,c=0===i.length,u=[];o||u.push(t[0]),l||u.push(s[0]),c||u.push(i[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===u.length?1:u[0],d=UT("int32",h+1);d[0]=0;for(let m=0;m<h;++m){const t=o?e[0]:e[m],n=l?r[0]:r[m],s=c?a[0]:a[m];if(0===s)throw new Error("Requires delta != 0");let i;if(s>0&&n<t||s<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/s)),i>C0)throw new Error(`Requires ((limit - start) / delta) <= ${C0}`);d[m+1]=d[m]+i}const p=UT(n,d[h]);let f=0;for(let m=0;m<h;++m){const t=d[m+1]-d[m];let n=o?e[0]:e[m];const r=c?a[0]:a[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[d,p]}var _0=dz;class A0{constructor(e,t,n,r,s,a,i,o,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=fz(c),this.raggedRank=mz(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===_0.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===_0.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case _0.VALUE_ROWIDS:return A0.getMaxWidthValueRowID(t);case _0.ROW_SPLITS:return A0.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${_0[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],s=0;for(let a=1;a<t;++a){const t=e[a];t!==r&&(r=t,s=Math.max(a-n,s),n=a)}return Math.max(t-n,s)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return D0(e,n)}calculateOutputSize(e){const t=this.valuesShape;gz(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=pz(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let s=1;s<=this.raggedRank;++s)r[s]<0&&(r[s]=this.getMaxWidth(s));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),s=[];let a=0;for(let i=0;i<r;++i,a+=t)s.push(a);for(let i=r;i<e;++i)s.push(-1);return TT(s.length===e,(()=>"Final length of result must be equal to firstDimension.")),s}calculateOutputIndexRowSplit(e,t,n,r){const s=e.length,a=[];for(let i=0;i<s-1;++i){const s=e[i+1]-e[i];let o=Math.min(r,s),l=t[i];-1===l&&(o=0);for(let e=0;e<o;++e)a.push(l),l+=n;for(let e=0;e<s-o;++e)a.push(-1)}if(s>0&&a.length!==e[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,n,r){const s=e.length,a=[];if(0===s)return[];let i=0,o=e[0];if(o>=t.length)throw new Error(`Got currentValueRowId=${o}, which is not less than ${t.length}`);let l=t[o];a.push(l);for(let c=1;c<s;++c){const s=e[c];if(s===o)l>=0&&(++i,i<r?l+=n:l=-1);else{if(i=0,o=s,s>=t.length)throw new Error(`Got nextValueRowId=${s} which is not less than ${t.length}`);l=t[s]}a.push(l)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,n,r){const s=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case _0.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,t,n,r);case _0.ROW_SPLITS:if(s.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(s,t,n,r);default:throw new Error(`Unsupported partition type: ${_0[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case _0.FIRST_DIM_SIZE:return e[0];case _0.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case _0.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${_0[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let a=n.length-2;a>=0;--a)n[a]=n[a+1]*t[a+1];const r=D0(t,!1),s=UT(this.valuesDType,CT(r));if(n[0]*t[0]>0){let a=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){a=this.calculateOutputIndex(e-1,a,n[e],t[e])}this.setOutput(this.raggedRank,a,s,r)}return[r,s]}setOutput(e,t,n,r){if(0===n.length)return;const s=this.values,a=n;let i=r.slice();i=i.slice(e+1);const o=CT(i),l=t.length;let c=this.defaultValue;if(c.length!==o&&1!==c.length){const e=this.defaultValueShape;EA((()=>{const t=SM(c,e),n=zM(t,i);c=n.dataSync()}))}let u=0,h=0,d=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==d){if(h<d){const e=s.subarray(u*o);R0(a.subarray(h*o),e,(d-h)*o)}if(p>=l){const t=n.length;e=Math.floor(t/o)}if(e>d)if(1===this.defaultValue.length)a.subarray(d*o,e*o).fill(this.defaultValue[0]),d=e;else for(;e>d;){R0(a.slice(d*o),c,o),++d}e<0?(u=p+1,h=d):(u=p,h=d,d=h+1)}else++d}}}function R0(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function D0(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function O0(e,t,n,r,s,a,i,o,l,c){return new A0(e,t,n,r,s,a,i,o,l,c).compute()}function M0(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return sE(0,r);const s=sE(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),s[0]=e;for(let a=1;a<s.length;a++)s[a]=s[a-1]+n;return s}const P0=gZ((e=>1/Math.sqrt(e))),L0=vZ(VC,P0),F0={kernelName:VC,backendName:"cpu",kernelFunc:L0};function $0(e,t,n,r,s,a,i,o,l,c){const u=[r/s,s],h=e.values,d=t.values;if(0===r)return jR(n,t.dtype);const p=l instanceof N_?l:jR(u,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<a;f++){const e=[];let a=0;for(let t=0;t<i;t++){const n=h[f*i+t];e.push(n),a+=n*o[t]}if(a<0||a>=r/s)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<s;n++)c?p.values[a*s+n]+=d[f*s+n]:p.values[a*s+n]=0===t.rank?d[0]:d[f*s+n]}return p}const z0=gZ((e=>1/(1+Math.exp(-e)))),j0=yZ(ZC,(e=>1/(1+Math.exp(-e)))),U0={kernelName:ZC,backendName:"cpu",kernelFunc:j0};function B0(e,t,n,r,s){const a=_O(r,t,n),i=CT(n),o=ZT(r);if(a){const n=AO(t,o);return"string"===s?e.slice(n,n+i):e.subarray(n,n+i)}const l=jR(r,s,"string"===s?pj(e):e),c=jR(n,s);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map(((e,n)=>e+t[n]));c.set(l.get(...n),...e)}return"string"===s?fj(c.values):c.values}function V0(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:a,size:i}=r;VJ(s,"slice");const[o,l]=RO(s,a,i);yO(s,o,l);const c=B0(n.data.get(s.dataId).values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,c)}const W0={kernelName:YC,backendName:"cpu",kernelFunc:V0};function H0(e,t,n,r,s,a,i){const o=t[0],l=a[0],c=new Array(l),u=new Array(o),h=t[1];if(0===l){if(0!==o)throw new Error(Jz(o));return[UT(n,0),[0,h],UT(s,0),c,u]}let d=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<o;++g){const t=e[g*h];if(t<0)throw new Error(Zz(g,t));if(t>=l)throw new Error(ej(g,t,l));++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];c[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const t=e,n=r;for(let e=0;e<o;++e)u[e]=e;return[t,[o,h],n,c,u]}{const t=f[l-1],a=UT(n,t*h),d=UT(s,t),p=new Array(l).fill(0);for(let n=0;n<o;++n){const t=e[n*h],s=p[t],i=(0===t?0:f[t-1])+s;p[t]++;for(let r=0;r<h;++r)a[i*h+r]=e[n*h+r];d[i]=r[n],u[n]=i}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];a[t*h+0]=e;for(let e=1;e<h;++e)a[t*h+e]=0;d[t]=i}}return[a,[t,h],d,c,u]}}function G0(e,t,n,r,s){const a=CT(r),i=t[0],o=s.length,l=[];let c=1,u=-1;for(let m=0;m<o;++m){const e=s[m];if(-1===e){if(-1!==u)throw new Error(tj(u,m));u=m,l.push(1)}else{if(e<0)throw new Error(nj(m,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(a/c);if(c*e!==a)throw new Error(sj(r,l));l[u]=e}if(CT(l)!==a)throw new Error(aj(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let e=h-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const p=[];if(o>0){p[o-1]=1;for(let e=o-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=UT(n,i*o);for(let m=0;m<i;++m){let t=0;for(let n=0;n<h;++n)t+=e[m*h+n]*d[n];for(let e=0;e<o;++e)f[m*o+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[i,o],l]}function q0(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const o=r.length,l=[t[0],e.length/t[0]],c=l[1],u=o>0?s[o-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const h=t.slice();h[0]=u;const d=UT(n,h.reduce(((e,t)=>e*t),1));if(0===o)return u>0&&d.fill(i),[d,h];if(u<=0)throw new Error("segment ids must be >= 0");let p=0,f=1,m=0,g=s[p];for(;;){let t=0;if(f<o){if(t=s[f],g===t){++f;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=u)throw new Error(lj(g,u));g>m&&d.fill(i,m*c,g*c);for(let n=p;n<f;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(cj(n,r[n],l[0]));for(let n=0;n<c;n++)d[g*c+n]+=e[t*c+n]}if(a)for(let e=0;e<c;e++)d[g*c+e]/=f-p;if(p=f,++f,m=g+1,g=t,f>o)break}return m<u&&d.fill(i,m*c,u*c),[d,h]}const K0=gZ((e=>Math.sqrt(e))),Y0=yZ(tI,(e=>Math.sqrt(e))),X0={kernelName:tI,backendName:"cpu",kernelFunc:Y0},Q0=KJ(((e,t)=>{const n=e-t;return n*n})),J0=aZ(hI,Q0),Z0={kernelName:hI,backendName:"cpu",kernelFunc:J0},e1=gZ(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=t;return e.replace(new RegExp(n,r?"g":""),s)})),t1=vZ(pI,e1),n1={kernelName:pI,backendName:"cpu",kernelFunc:t1};function r1(e,t,n,r){const s=jR(e,t.dtype);for(let a=0;a<s.size;a++){const e=s.indexToLoc(a),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];s.set(t.get(...i),...e)}return s}class s1{constructor(e,t,n,r,s,a){this.separator=f_(e),this.nGramWidths=t,this.leftPad=f_(n),this.rightPad=f_(r),this.padWidth=s,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,s,a){for(let i=0;i<s;++i){const o=this.getPadWidth(a),l=Math.max(0,o-i),c=Math.max(0,o-(s-(i+1))),u=a-(l+c),h=t+(l>0?0:i-o);let d=0;d+=l*this.leftPad.length;for(let t=0;t<u;++t)d+=e[h+t].length;d+=c*this.rightPad.length;d+=(l+c+u-1)*this.separator.length,n[r+i]=new Uint8Array(d);const p=n[r+i];let f=0;const m=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[h+t]),m(this.separator);if(u>0){m(e[h+u-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let s=1;s<r;++s){let r=t[s]>=e;if(r=r&&t[s]<=n,!r)throw new Error(`Invalid split value ${t[s]}, must be in [${e}, ${n}]`);e=t[s]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const s=r-1,a=UT("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=s;++t)a[t]=0;return[e,a]}a[0]=0;for(let o=1;o<=s;++o){const e=t[o]-t[o-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),a[o]=a[o-1]+n}const i=new Array(a[s]);for(let o=0;o<s;++o){const n=t[o];let r=a[o];if(this.nGramWidths.forEach((s=>{const a=t[o+1]-t[o],l=this.getNumNGrams(a,s);this.createNGrams(e,n,i,r,l,s),r+=l})),this.preserveShort&&r===a[o]){const s=t[o+1]-t[o];if(0===s)continue;const a=s+2*this.padWidth,l=1;this.createNGrams(e,n,i,r,l,a)}}return[i,a]}}function a1(e,t,n,r,s,a,i,o){return new s1(n,r,s,a,i,o).compute(e,t)}function i1(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const s=t[0];let a=e.indexOf(s);for(;-1!==a;){const t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(s)}return void(n&&0===e.length||r.push(e))}let s=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(s,a);n&&0===t.length||r.push(t),s=a+1}}function o1(e,t,n){const r=e.length,s=[];let a=0,i=0;const o=new Array(r);for(let d=0;d<r;++d){const r=s.length;i1(e[d],t,n,s);const l=s.length-r;o[d]=l,a+=l,i=Math.max(i,l)}const l=UT("int32",2*a),c=new Array(a),u=[r,i];let h=0;for(let d=0;d<r;++d)for(let e=0;e<o[d];++e)l[2*h]=d,l[2*h+1]=e,c[h]=s[h],++h;return[l,c,u]}function l1(e,t){const n=UT("int32",e.length);for(let r=0;r<e.length;++r)n[r]=c_(e[r]).modulo(t).getLowBitsUnsigned();return n}const c1=KJ(((e,t)=>e-t)),u1=iZ(((e,t,n,r)=>({real:e-n,imag:t-r}))),h1=aZ(vI,c1,u1),d1={kernelName:vI,backendName:"cpu",kernelFunc:h1};function p1(e,t){const n=new Array(e.rank);for(let s=0;s<n.length;s++)n[s]=e.shape[s]*t[s];const r=jR(n,e.dtype);for(let s=0;s<r.values.length;++s){const t=r.indexToLoc(s),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const a=e.locToIndex(n);r.values[s]=e.values[a]}return r}const f1=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function m1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const s=r-n+1,a=t-n+1,i=Math.log(s),o=.5*Math.exp(2*i/3),l=.5*Math.sqrt(i*o*(s-o)/s)*Math.sign(a-s/2);m1(e,t,Math.max(n,Math.floor(t-a*o/s+l)),Math.min(r,Math.floor(t+(s-a)*o/s+l)))}const s=e[t];let a=n,i=r;for(wT(e,n,t),f1(e[r],s)>0&&wT(e,n,r);a<i;){for(wT(e,a,i),a++,i--;f1(e[a],s)<0;)a+=1;for(;f1(e[i],s)>0;)i-=1}0===f1(e[n],s)?wT(e,n,i):(i+=1,wT(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function g1(e,t,n,r,s){const a=t[t.length-1],[i,o]=[e.length/a,a],l=jT(n,i*r),c=jT("int32",i*r);for(let h=0;h<i;h++){const t=h*o,n=e.subarray(t,t+o);let a=new Array(n.length);n.forEach(((e,t)=>a[t]={value:e,index:t})),r<a.length&&(m1(a,r),a=a.slice(0,r)),s&&a.sort(f1);const i=h*r,u=l.subarray(i,i+r),d=c.subarray(i,i+r);for(let e=0;e<r;e++)u[e]=a[e].value,d[e]=a[e].index}const u=t.slice();return u[u.length-1]=r,[jR(u,n,l),jR(u,"int32",c)]}function y1(e,t,n,r){const s=$T(t,n)[0],a=[1,n[0],1];for(let f=0;f<s;f++)a[0]*=n[f];a[1]=n[s];for(let f=s+1;f<n.length;f++)a[2]*=n[f];const i=new Map,o=new Int32Array(n[s]),l=new N_(a,r,e),c=[],u=1===a[0]&&1===a[2];for(let f=0;f<n[s];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<a[0];t++)for(let n=0;n<a[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=i.get(t);if(null!=n)o[f]=n;else{const e=i.size;i.set(t,e),o[f]=e,c.push(f)}}const h=a.slice();h[1]=i.size;const d=new N_(h,r);c.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)d.set(l.get(n,e,r),n,t,r)}));const p=n.slice();return p[s]=h[1],{outputValues:d.values,outputShape:p,indices:o}}const v1="4.22.0";PA("cpu",(()=>new HJ),1);const b1=yZ(yN,(e=>e>=0?e:Math.exp(e)-1)),w1={kernelName:yN,backendName:"cpu",kernelFunc:b1};function x1(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{alpha:a}=r;VJ([s],"leakyRelu");const i=CT(s.shape),o=n.data.get(s.dataId).values,l=jT("float32",i);for(let c=0;c<o.length;c++)l[c]=o[c]<0?a*o[c]:o[c];return n.makeTensorInfo(s.shape,"float32",l)}const k1={kernelName:jN,backendName:"cpu",kernelFunc:x1},S1=KJ(((e,t)=>e<0?t*e:e));function T1(e){const{inputs:t,backend:n}=e,{x:r,alpha:s}=t;VJ([r,s],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,[o,l]=S1(r.shape,s.shape,a,i,"float32");return n.makeTensorInfo(l,"float32",o)}const E1={kernelName:NC,backendName:"cpu",kernelFunc:T1},N1=yZ(MC,(e=>Math.max(0,e))),C1={kernelName:MC,backendName:"cpu",kernelFunc:N1},I1=yZ(jC,(e=>Math.min(Math.max(0,e),6))),_1={kernelName:jC,backendName:"cpu",kernelFunc:I1};function A1(e,t,n,r,s){if("linear"===n)return JJ({inputs:{x:t},backend:e});if("relu"===n)return N1({inputs:{x:t},backend:e});if("elu"===n)return b1({inputs:{x:t},backend:e});if("relu6"===n)return I1({inputs:{x:t},backend:e});if("prelu"===n)return T1({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return x1({inputs:{x:t},backend:e,attrs:{alpha:s}});if("sigmoid"===n)return j0({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function R1(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{shape:a}=r,i=CT(s.shape),o=FT(a,i),l=CT(o);TT(i===l,(()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=o,t.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const D1={kernelName:PC,backendName:"cpu",kernelFunc:R1};function O1(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:a}=t,{transposeA:i,transposeB:o}=r;VJ([s,a],"matMul");const l=s.shape.length,c=a.shape.length,u=i?s.shape[l-2]:s.shape[l-1],h=o?a.shape[c-1]:a.shape[c-2],d=i?s.shape[l-1]:s.shape[l-2],p=o?a.shape[c-2]:a.shape[c-1],f=s.shape.slice(0,-2),m=a.shape.slice(0,-2),g=CT(f),y=CT(m),v=xD(s.shape.slice(0,-2),a.shape.slice(0,-2)).concat([d,p]);TT(u===h,(()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${s.shape} and ${a.shape} and transposeA=${i} and transposeB=${o} must match.`));const b=o?[y,p,h]:[y,h,p],w=R1({inputs:{x:s},backend:n,attrs:{shape:i?[g,u,d]:[g,d,u]}}),x=R1({inputs:{x:a},backend:n,attrs:{shape:b}}),k=i?w.shape[1]:w.shape[2],S=i?w.shape[2]:w.shape[1],T=o?x.shape[1]:x.shape[2],E=Math.max(g,y),N=n.data.get(w.dataId).values,C=n.data.get(x.dataId).values,I=ZT(w.shape),_=ZT(x.shape),[A,R,D]=i?[I[0],1,I[1]]:[I[0],I[1],1],[O,M,P]=o?[1,_[1],_[0]]:[_[1],1,_[0]],L=S*T,F=jR([E,S,T],w.dtype),$=F.values,z=n.blockSize;for(let j=0;j<E;j++){const e=j%g,t=j%y;for(let n=0;n<S;n+=z){const r=Math.min(n+z,S);for(let s=0;s<T;s+=z){const a=Math.min(s+z,T);for(let i=0;i<k;i+=z){const o=Math.min(i+z,k);for(let l=n;l<r;l++)for(let n=s;n<a;n++){let r=0;for(let s=i;s<o;s++){r+=N[e*A+l*R+s*D]*C[s*O+n*M+t*P]}$[j*L+(l*T+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(v,F.dtype,F.values)}const M1={kernelName:LE,backendName:"cpu",kernelFunc:O1};const P1={kernelName:OI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:a,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;let d,p,f;const m=[];d=O1({inputs:{a:s,b:a},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(p=cZ({inputs:{a:d,b:i},backend:n}),m.push(d),d=p),u&&(f=A1(n,d,u,o,h),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}},L1=yZ(bE,(e=>Math.acos(e))),F1={kernelName:bE,backendName:"cpu",kernelFunc:L1},$1=yZ(wE,(e=>Math.acosh(e))),z1={kernelName:wE,backendName:"cpu",kernelFunc:$1};const j1={kernelName:kE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;VJ(t,"addN");const s=r.map((e=>n.data.get(e.dataId).values)),a=jR(r[0].shape,r[0].dtype),i=a.values;for(let o=0;o<r.length;o++){const e=s[o];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};const U1={kernelName:SE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r;VJ(s,"all");const o=$T(a,s.shape);let l=o;const c=xP(l,s.shape.length);let u=s;null!=c&&(u=b0({inputs:{x:s},backend:n,attrs:{perm:c}}),l=SP(l.length,s.shape.length)),wP("all",l,u.shape.length);const[h,d]=vP(u.shape,l),p=CT(d),f=sE(CT(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(i){const e=R1({inputs:{x:g},backend:n,attrs:{shape:bP(h,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const B1={kernelName:TE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r;VJ(s,"any");const o=$T(a,s.shape);let l=o;const c=xP(l,s.shape.length);let u=s;null!=c&&(u=b0({inputs:{x:s},backend:n,attrs:{perm:c}}),l=SP(l.length,s.shape.length)),wP("any",l,u.shape.length);const[h,d]=vP(u.shape,l),p=CT(d),f=sE(CT(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(i){const e=R1({inputs:{x:g},backend:n,attrs:{shape:bP(h,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const V1={kernelName:EE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a}=r;VJ(s,"argMax");let i=$T(a,s.shape);const o=xP(i,s.shape.length);let l=s;const c=[];null!=o&&(l=b0({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=SP(i.length,l.shape.length)),i=[i[0]],wP("argMax",i,l.shape.length);const[u,h]=vP(l.shape,i),d=sE(CT(u),"int32"),p=CT(h),f=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const s=f[e+r];s>t&&(t=s,n=r)}d[m]=n}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",d)}};const W1={kernelName:NE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a}=r;VJ(s,"argMin");let i=$T(a,s.shape);const o=xP(i,s.shape.length);let l=s;const c=[];null!=o&&(l=b0({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=SP(i.length,l.shape.length)),i=[i[0]],wP("argMin",i,l.shape.length);const[u,h]=vP(l.shape,i),d=sE(CT(u),"int32"),p=CT(h),f=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const s=f[e+r];s<t&&(t=s,n=r)}d[m]=n}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",d)}},H1=yZ(CE,(e=>Math.asin(e))),G1={kernelName:CE,backendName:"cpu",kernelFunc:H1},q1=yZ(IE,(e=>Math.asinh(e))),K1={kernelName:IE,backendName:"cpu",kernelFunc:q1},Y1=yZ(_E,(e=>Math.atan(e))),X1={kernelName:_E,backendName:"cpu",kernelFunc:Y1},Q1=KJ(((e,t)=>Math.atan2(e,t))),J1=aZ(RE,Q1),Z1={kernelName:RE,backendName:"cpu",kernelFunc:J1},e2=yZ(AE,(e=>Math.atanh(e))),t2={kernelName:AE,backendName:"cpu",kernelFunc:e2};function n2(e,t,n,r,s,a){const i=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,h=s.effectiveFilterWidth,d=s.padInfo.top,p=s.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=jR(s.outShape,n),g=m.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],v=s.outShape[2]*s.outShape[3],b=s.outShape[3];for(let w=0;w<s.batchSize;++w){const t=w*y,n=w*r[0];for(let m=0;m<s.inChannels;++m)for(let y=0;y<s.outHeight;++y){const w=y*i-d,x=Math.max(0,w),k=Math.min(s.inHeight,u+w),S=t+y*v;for(let t=0;t<s.outWidth;++t){const i=t*o-p,u=Math.max(0,i),d=Math.min(s.inWidth,h+i);let y=f,v=0,w=0;for(let t=x;t<k;t+=l){const s=n+t*r[1];for(let t=u;t<d;t+=c){const n=e[s+t*r[2]+m];"max"===a&&n>y?y=n:"avg"===a&&(v+=n,w++)}if(isNaN(y))break}g[S+t*b+m]="avg"===a?v/w:y}}}return m}function r2(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=jR(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=jR(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*o-p;let y=n;for(;y<0;)y+=c;const v=Math.min(r.inHeight,h+n);for(let o=0;o<r.outWidth;++o){const h=o*l-f;let p=h;for(;p<0;)p+=u;const b=Math.min(r.inWidth,d+h);let w=Number.NEGATIVE_INFINITY,x=-1;for(let t=y;t<v;t+=c){const i=t-n;for(let n=p;n<b;n+=u){const o=n-h,l=m.get(g,t,n,e);l>w&&(w=l,x=s?a?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*d+o)}}i.set(x,g,t,o,e)}}return i}function s2(e,t,n,r,s,a){const i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,h=s.dilationWidth,d=s.effectiveFilterDepth,p=s.effectiveFilterHeight,f=s.effectiveFilterWidth,m=s.padInfo.front,g=s.padInfo.top,y=s.padInfo.left,v="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=jR(s.outShape,n),w=b.values,x=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],k=s.outShape[2]*s.outShape[3]*s.outShape[4],S=s.outShape[3]*s.outShape[4],T=s.outShape[4];for(let E=0;E<s.batchSize;++E){const t=E*x,n=E*r[0];for(let b=0;b<s.inChannels;++b)for(let x=0;x<s.outDepth;++x){const E=x*i-m;let N=E;for(;N<0;)N+=c;const C=Math.min(s.inDepth,d+E),I=t+x*k;for(let t=0;t<s.outHeight;++t){const i=t*o-g;let d=i;for(;d<0;)d+=u;const m=Math.min(s.inHeight,p+i),x=I+t*S;for(let t=0;t<s.outWidth;++t){const i=t*l-y;let o=i;for(;o<0;)o+=h;const p=Math.min(s.inWidth,f+i),g=x+t*T;let k=v,S=0,E=0;for(let t=N;t<C;t+=c){const s=n+t*r[1];for(let t=d;t<m;t+=u){const n=s+t*r[2];for(let t=o;t<p;t+=h){const s=e[n+t*r[3]+b];if("max"===a&&s>k?k=s:"avg"===a&&(S+=s,E++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}w[g+b]="avg"===a?S/Math.max(E,1):k}}}}return b}const a2={kernelName:DE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;VJ(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r;TT(bM(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const c=cM(s.shape,a,i,1,o,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&AT(c.inShape,c.outShape))u=JJ({inputs:{x:s},backend:n});else{const e=n.data.get(s.dataId).values,t=ZT(s.shape),r=n2(e,s.shape,s.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,s.dtype,r.values)}return u}};const i2={kernelName:ME,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r;VJ(s,"avgPool3d");const u=uM(s.shape,a,i,1,o,l,c),h=s2(n.data.get(s.dataId).values,s.shape,s.dtype,ZT(s.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const o2={kernelName:PE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=r;VJ([s,a],"avgPool3DGrad");const u=uM(a.shape,i,o,1,l,c),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,x=u.effectiveFilterHeight,k=u.effectiveFilterWidth,S=w-1-u.padInfo.front,T=k-1-u.padInfo.left,E=x-1-u.padInfo.top,N=jR(a.shape,"float32"),C=1/(f*m*g),I=n.bufferSync(s);for(let _=0;_<u.batchSize;++_)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const s=t-S,a=n-E,i=r-T;let o=0;for(let t=0;t<w;t+=y){const n=(s+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<x;t+=v){const r=(a+t)/d;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=b){const s=(i+t)/p;if(s<0||s>=u.outWidth||Math.floor(s)!==s)continue;o+=I.get(_,n,r,s,e)}}}N.set(o*C,_,t,n,r,e)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};const l2={kernelName:OE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a}=t,i=a;VJ([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=cM(i.shape,o,l,1,c),h=u.strideHeight,d=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,v=u.effectiveFilterWidth,b=v-1-u.padInfo.left,w=y-1-u.padInfo.top,x=jR(i.shape,"float32"),k=1/(p*f),S=n.data.get(s.dataId).values,T=jR(s.shape,"float32",S);for(let E=0;E<u.batchSize;++E)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-w,s=n-b;let a=0;for(let t=0;t<y;t+=m){const n=(r+t)/h;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const r=(s+t)/d;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;a+=T.get(E,n,r,e)}}x.set(a*k,E,t,n,e)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const c2={kernelName:_N,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,scale:a,offset:i,mean:o,variance:l}=t;TT(o.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),TT(null==i||o.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),TT(null==a||o.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),VJ([s,o,l,a,i],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=n.data.get(s.dataId).values,h=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,p=a?n.data.get(a.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,y=p.length,v=d.length,b=h.length;let w=0,x=0,k=0,S=0;for(let T=0;T<u.length;++T)m[T]=f[w++]+(u[T]-h[x++])*p[k++]/Math.sqrt(d[S++]+c),w>=g&&(w=0),x>=b&&(x=0),k>=y&&(k=0),S>=v&&(S=0);return n.makeTensorInfo(s.shape,s.dtype,m)}};const u2={kernelName:FE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:a,crops:i}=r;VJ([s],"batchToSpaceND");const o=a.reduce(((e,t)=>e*t)),l=wz(s.shape,a,o),c=xz(l.length,a.length),u=kz(s.shape,a,o),h=Sz(i,a.length),d=Tz(u,i,a.length),p=R1({inputs:{x:s},backend:n,attrs:{shape:l}}),f=b0({inputs:{x:p},backend:n,attrs:{perm:c}}),m=R1({inputs:{x:f},backend:n,attrs:{shape:u}}),g=V0({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};const h2={kernelName:$E,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:a}=t,{size:i}=r,o=hZ(n.data.get(s.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,o)}};const d2={kernelName:UE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,o=xD(Array.from(a),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},p2=yZ(WE,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),f2={kernelName:WE,backendName:"cpu",kernelFunc:p2},m2={kernelName:GE,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(CT(t.shape)),s=n.data.get(t.dataId),a=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<o.length;c++){const e=o[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function g2(e){const{inputs:t,backend:n}=e,{input:r}=t,s=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,a)}const y2={kernelName:LN,backendName:"cpu",kernelFunc:g2};function v2(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r,a=$T(s,t[0].shape)[0];uz(t.map((e=>e.shape)),a);let i=hz(t.map((e=>e.shape)),a);if(0===CT(i))return n.makeTensorInfo(i,t[0].dtype,[]);const o=t.filter((e=>CT(e.shape)>0));if(1===o.length)return JJ({inputs:{x:o[0]},backend:n});if("complex64"===o[0].dtype){const e=o.map((e=>eZ({inputs:{input:e},backend:n}))),t=o.map((e=>g2({inputs:{input:e},backend:n}))),r=v2({inputs:e,backend:n,attrs:{axis:a}}),s=v2({inputs:t,backend:n,attrs:{axis:a}}),i=YJ({inputs:{real:r,imag:s},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s),i}const l=o.map((e=>{const t=CT(e.shape.slice(a));return R1({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));i=hz(l.map((e=>e.shape)),1);const u=1===l[0].shape[0],h=kZ(c,i,t[0].dtype,u),d=hz(o.map((e=>e.shape)),a),p=n.makeTensorInfo(d,t[0].dtype,h);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}const b2={kernelName:qE,backendName:"cpu",kernelFunc:v2};function w2(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;VJ([s,a],"conv2d");const h=xM(l),d=hM(s.shape,a.shape,i,c,o,u,!1,h),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,v=d.padInfo.top,b="channelsLast"===d.dataFormat,w=new N_(d.outShape,s.dtype),x=ZT(s.shape),k=ZT(a.shape),S=x[0],T=b?x[1]:x[2],E=b?x[2]:1,N=b?1:x[1],C=w.strides[0],I=b?w.strides[1]:w.strides[2],_=b?w.strides[2]:1,A=b?1:w.strides[1],R=n.data.get(s.dataId).values,D=n.data.get(a.dataId).values,O=w.values;for(let M=0;M<d.batchSize;++M){const e=M*S,t=M*C;for(let n=0;n<d.outHeight;++n){const r=t+n*I,s=n*d.strideHeight-v;for(let t=0;t<p;++t){const n=s+t*m;if(n<0||n>=d.inHeight)continue;const a=t*k[0],i=e+n*T;for(let e=0;e<d.outWidth;++e){const t=r+e*_,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const s=i+r*E;let o=a+e*k[1];for(let e=0;e<d.inChannels;++e){const n=R[s+e*N];for(let e=0;e<d.outChannels;++e)O[t+e*A]+=n*D[o+e];o+=d.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,O)}const x2={kernelName:KE,backendName:"cpu",kernelFunc:w2};const k2={kernelName:YE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:a}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;VJ([s,a],"conv2dBackpropFilter");const h=xM(l),d=hM(s.shape,u,i,1,o,c,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,v=new N_(d.filterShape,"float32"),b=d.padInfo.left,w=d.padInfo.top,x=n.data.get(s.dataId).values,k=n.data.get(a.dataId).values,S=new N_(s.shape,s.dtype,x),T=new N_(a.shape,a.dtype,k);for(let E=0;E<m;++E){const e=Math.max(0,Math.ceil((w-E)/p)),t=Math.min(d.outHeight,(d.inHeight+w-E)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((b-n)/f)),s=Math.min(d.outWidth,(d.inWidth+b-n)/f);for(let a=0;a<d.inChannels;++a)for(let i=0;i<d.outChannels;++i){let o=0;for(let l=0;l<d.batchSize;++l)for(let c=e;c<t;++c){const e=E+c*p-w;for(let t=r;t<s;++t){const r=n+t*f-b;o+=y?S.get(l,e,r,a)*T.get(l,c,t,i):S.get(l,a,e,r)*T.get(l,i,c,t)}}v.set(o,E,n,a,i)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const S2={kernelName:XE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:a}=t,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;VJ([s,a],"conv2dBackpropInput");const h=ZT(a.shape),d=ZT(s.shape);let p=xM(c);const f=hM(i,a.shape,o,1,l,u,!1,p),m=new N_(f.inShape,"float32"),g=m.values,y=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,[b,w,x]=h,{batchSize:k,filterHeight:S,filterWidth:T,inChannels:E,inHeight:N,inWidth:C,outChannels:I,outHeight:_,outWidth:A,strideHeight:R,strideWidth:D}=f;p=f.dataFormat;const O=S-1-f.padInfo.top,M=T-1-f.padInfo.left,P="channelsLast"===p,L=m.strides[0],F=P?m.strides[1]:m.strides[2],$=P?m.strides[2]:1,z=P?1:m.strides[1],j=d[0],U=P?d[1]:d[2],B=P?d[2]:1,V=P?1:d[1];for(let W=0;W<k;++W)for(let e=0;e<E;++e)for(let t=0;t<N;++t){const n=t-O,r=Math.max(0,Math.ceil(n/R)),s=Math.min(_,(S+n)/R);for(let a=0;a<C;++a){const i=a-M,o=Math.max(0,Math.ceil(i/D)),l=Math.min(A,(T+i)/D);let c=0;for(let t=r;t<s;++t){const r=t*R-n;for(let n=o;n<l;++n){const s=j*W+U*t+B*n,a=b*(S-1-r)+w*(T-1-(n*D-i))+x*e;for(let e=0;e<I;++e){c+=y[s+V*e]*v[a+e]}}}g[L*W+F*t+$*a+z*e]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const T2={kernelName:QE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dilations:l}=r;VJ([s,a],"conv3d");const c=dM(s.shape,a.shape,i,l,o),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,y=g.front,v=g.left,b=g.top,w=new N_(c.outShape,s.dtype),x=n.data.get(s.dataId).values,k=n.data.get(a.dataId).values,S=w.values,T=ZT(s.shape),E=ZT(a.shape);for(let N=0;N<c.batchSize;++N){const e=N*T[0],t=N*w.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*w.strides[1],s=n*c.strideDepth-y;for(let t=0;t<u;++t){const n=s+t*p;if(n<0||n>=c.inDepth)continue;const a=t*E[0],i=e+n*T[1];for(let e=0;e<c.outHeight;++e){const t=r+e*w.strides[2],n=e*c.strideHeight-b;for(let e=0;e<h;++e){const r=n+e*f;if(r<0||r>=c.inHeight)continue;const s=a+e*E[1],o=i+r*T[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-v;for(let e=0;e<d;++e){const t=r+e*m;if(t<0||t>=c.inWidth)continue;const a=s+e*E[2],i=o+t*c.inChannels;let l=a;for(let e=0;e<c.inChannels;++e){const t=x[i+e];for(let e=0;e<c.outChannels;++e)S[n+e]+=t*k[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const E2={kernelName:JE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:a}=t,{strides:i,pad:o,filterShape:l}=r;VJ([s,a],"conv3dBackpropFilterV2");const c=ZT(s.shape),u=ZT(a.shape),h=dM(s.shape,l,i,1,o),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,v=new N_(h.filterShape,"float32"),b=v.values,[w,x,k,S]=v.strides,T=n.data.get(a.dataId).values,[E,N,C,I]=u,_=n.data.get(s.dataId).values,[A,R,D,O]=c,M=h.padInfo.front,P=h.padInfo.left,L=h.padInfo.top;for(let F=0;F<m;++F){const e=Math.max(0,Math.ceil((M-F)/d)),t=Math.min(h.outDepth,(h.inDepth+M-F)/d),n=F*w;for(let r=0;r<g;++r){const s=Math.max(0,Math.ceil((L-r)/p)),a=Math.min(h.outHeight,(h.inHeight+L-r)/p),i=r*x+n;for(let n=0;n<y;++n){const o=Math.max(0,Math.ceil((P-n)/f)),l=Math.min(h.outWidth,(h.inWidth+P-n)/f),c=n*k+i;for(let i=0;i<h.inChannels;++i){const u=i*S+c;for(let c=0;c<h.outChannels;++c){let m=0;for(let u=0;u<h.batchSize;++u){const h=u*A,g=u*E;for(let u=e;u<t;++u){const e=(F+u*d-M)*R+h,t=u*N+g;for(let u=s;u<a;++u){const s=(r+u*p-L)*D+e,a=u*C+t;for(let e=o;e<l;++e){const t=e*I+a;m+=_[(n+e*f-P)*O+s+i]*T[t+c]}}}}b[u+c]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const N2={kernelName:ZE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:a}=t,{pad:i,strides:o,inputShape:l}=r;VJ([s],"conv3dBackpropInputV2");const c=ZT(s.shape),u=ZT(a.shape),h=dM(l,a.shape,o,1,i),d=new N_(h.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,v=n.data.get(s.dataId).values,[b,w,x,k]=c,S=n.data.get(a.dataId).values,[T,E,N,C]=u,{batchSize:I,filterDepth:_,filterHeight:A,filterWidth:R,inChannels:D,inDepth:O,inHeight:M,inWidth:P,outChannels:L,outDepth:F,outHeight:$,outWidth:z,strideDepth:j,strideHeight:U,strideWidth:B}=h,V=_-1-h.padInfo.front,W=A-1-h.padInfo.top,H=R-1-h.padInfo.left;for(let G=0;G<I;++G)for(let e=0;e<D;++e)for(let t=0;t<O;++t){const n=t-V,r=Math.max(0,Math.ceil(n/j)),s=Math.min(F,(_+n)/j);for(let a=0;a<M;++a){const i=a-W,o=Math.max(0,Math.ceil(i/U)),l=Math.min($,(A+i)/U);for(let c=0;c<P;++c){const u=c-H,h=Math.max(0,Math.ceil(u/B)),d=Math.min(z,(R+u)/B);let I=0;for(let t=r;t<s;++t){const r=t*j-n;for(let n=o;n<l;++n){const s=n*U-i;for(let a=h;a<d;++a){const i=b*G+w*t+x*n+k*a,o=T*(_-1-r)+E*(A-1-s)+N*(R-1-(a*B-u))+C*e;for(let e=0;e<L;++e){I+=v[i+e]*S[o+e]}}}}p[f*G+m*t+g*a+y*c+e]=I}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},C2=yZ(eN,(e=>Math.cos(e))),I2={kernelName:eN,backendName:"cpu",kernelFunc:C2},_2=yZ(tN,(e=>Math.cosh(e))),A2={kernelName:tN,backendName:"cpu",kernelFunc:_2};const R2={kernelName:sN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:s,boxes:a,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:c}=r,[u,h,d,p]=s.shape,f=a.shape[0],[m,g]=o,y=jR([f,m,g,p],"float32"),v=n.data.get(a.dataId).values,b=n.data.get(i.dataId).values,w=n.data.get(s.dataId).values,x=ZT(s.shape),k=ZT(y.shape);for(let S=0;S<f;S++){const e=4*S,t=v[e],n=v[e+1],r=v[e+2],s=v[e+3],a=b[S];if(a>=u)continue;const i=m>1?(r-t)*(h-1)/(m-1):0,o=g>1?(s-n)*(d-1)/(g-1):0;for(let u=0;u<m;u++){const e=m>1?t*(h-1)+u*i:.5*(t+r)*(h-1);if(e<0||e>h-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+S*k[0];y.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<g;e++){const l=g>1?n*(d-1)+e*o:.5*(n+s)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++){const n=t+e*k[2]+u*k[1]+S*k[0];y.values[n]=c}continue}const h=Math.floor(l),f=Math.ceil(l),m=l-h;for(let n=0;n<p;n++){let s=n+h*x[2]+t*x[1]+a*x[0];const o=w[s];s=n+f*x[2]+t*x[1]+a*x[0];const l=w[s];s=n+h*x[2]+r*x[1]+a*x[0];const c=w[s];s=n+f*x[2]+r*x[1]+a*x[0];const d=o+(l-o)*m,p=c+(w[s]-c)*m;s=n+e*k[2]+u*k[1]+S*k[0],y.values[s]=d+(p-d)*i}}}else for(let t=0;t<g;++t){const r=g>1?n*(d-1)+t*o:.5*(n+s)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+S*k[0];y.values[n]=c}continue}const i=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+i*x[2]+l*x[1]+a*x[0],r=e+t*k[2]+u*k[1]+S*k[0];y.values[r]=w[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const D2={kernelName:nN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,exclusive:i,reverse:o}=r;VJ(s,"cumprod");const l=xP([a],s.shape.length);let c=s;null!=l&&(c=b0({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=SP(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=z_(c.dtype,"int32"),d=rE(CT(c.shape),h),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=i?1:p[t];else{const n=m(y,e-1);d[t]=i?p[n]*d[n]:p[t]*d[n]}}const g=n.makeTensorInfo(c.shape,h,d);if(null!=l){const e=b0({inputs:{x:g},backend:n,attrs:{perm:kP(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const O2={kernelName:rN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,exclusive:i,reverse:o}=r;VJ(s,"cumsum");const l=xP([a],s.shape.length);let c=s;null!=l&&(c=b0({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=SP(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=z_(c.dtype,"int32"),d=sE(CT(c.shape),h),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=i?0:p[t];else{const n=m(y,e-1);d[t]=i?p[n]+d[n]:p[t]+d[n]}}const g=n.makeTensorInfo(c.shape,h,d);if(null!=l){const e=b0({inputs:{x:g},backend:n,attrs:{perm:kP(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const M2={kernelName:aN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:a}=t,{size:i,binaryOutput:o}=r;if(1===s.shape.length){const e=hZ(n.data.get(s.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,e)}if(2===s.shape.length){const e=dZ(n.bufferSync(s),n.bufferSync(a),i,o);return n.makeTensorInfo(e.shape,a.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}};const P2={kernelName:iN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockSize:a,dataFormat:i}=r;TT("NHWC"===i,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`));const o=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],h=l*a,d=c*a,p=u/(a*a),f=n.data.get(s.dataId).values,m=new Float32Array(o*h*d*p);let g=0;for(let y=0;y<o;++y)for(let e=0;e<h;++e){const t=Math.floor(e/a),n=e%a;for(let e=0;e<d;++e){const r=Math.floor(e/a),s=(n*a+e%a)*p;for(let e=0;e<p;++e){const n=e+s+u*(r+c*(t+l*y));m[g++]=f[n]}}}return n.makeTensorInfo([o,h,d,p],s.dtype,m)}};function L2(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=r;VJ([s,a],"depthwiseConv2DNative");const u=ZT(s.shape),h=ZT(a.shape);let d=l;null==d&&(d=[1,1]),TT(bM(i,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`));const p=hM(s.shape,a.shape,i,d,o,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=p,b=v.left,w=v.top,x=p.outChannels/p.inChannels,k=new N_(p.outShape,s.dtype),S=n.data.get(s.dataId).values,T=n.data.get(a.dataId).values,E=k.values;for(let N=0;N<p.batchSize;++N){const e=N*u[0],t=N*k.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*k.strides[1],s=n*p.strideHeight-w;for(let t=0;t<f;++t){const n=s+t*g;if(n<0||n>=p.inHeight)continue;const a=t*h[0],i=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=r+e*k.strides[2],n=e*p.strideWidth-b;for(let e=0;e<m;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const s=a+e*h[1],o=i+r*p.inChannels;let l=t,c=s;for(let e=0;e<p.inChannels;++e){const t=S[o+e];for(let e=0;e<x;++e)E[l+e]+=t*T[c+e];l+=x,c+=x}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const F2={kernelName:oN,backendName:"cpu",kernelFunc:L2};const $2={kernelName:lN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:a}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;VJ([s,a],"depthwiseConv2dNativeBackpropFilter");const h=hM(s.shape,u,i,o,l,c,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g=new N_(h.filterShape,"float32"),y=h.padInfo.left,v=h.padInfo.top,b=h.outChannels/h.inChannels,w=n.data.get(s.dataId).values,x=new N_(s.shape,s.dtype,w),k=n.data.get(a.dataId).values,S=new N_(a.shape,a.dtype,k);for(let T=0;T<f;++T){const e=Math.max(0,Math.ceil((v-T)/d)),t=Math.min(h.outHeight,(h.inHeight+v-T)/d);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((y-n)/p)),s=Math.min(h.outWidth,(h.inWidth+y-n)/p);for(let a=0;a<h.outChannels;++a){const i=Math.trunc(a/b),o=a%b;let l=0;for(let c=0;c<h.batchSize;++c)for(let o=e;o<t;++o){const e=T+o*d-v;for(let t=r;t<s;++t){const r=n+t*p-y;l+=x.get(c,e,r,i)*S.get(c,o,t,a)}}g.set(l,T,n,i,o)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const z2={kernelName:cN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:a}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;VJ([s,a],"depthwiseConv2DNativeBackpropInput");const h=ZT(s.shape),d=ZT(a.shape),p=hM(u,a.shape,i,o,l,c,!0),f=new N_(p.inShape,"float32"),m=f.values,[g,y,v]=f.strides,b=n.data.get(s.dataId).values,[w,x,k]=h,S=n.data.get(a.dataId).values,[T,E,N]=d,{batchSize:C,filterHeight:I,filterWidth:_,inChannels:A,inHeight:R,inWidth:D,outChannels:O,outHeight:M,outWidth:P,strideHeight:L,strideWidth:F}=p,$=I-1-p.padInfo.top,z=_-1-p.padInfo.left,j=O/A;for(let U=0;U<C;++U)for(let e=0;e<A;++e)for(let t=0;t<R;++t){const n=t-$,r=Math.max(0,Math.ceil(n/L)),s=Math.min(M,(I+n)/L);for(let a=0;a<D;++a){const i=a-z,o=Math.max(0,Math.ceil(i/F)),l=Math.min(P,(_+i)/F);let c=0;for(let t=r;t<s;++t){const r=t*L-n;for(let n=o;n<l;++n){const s=w*U+x*t+k*n,a=T*(I-1-r)+E*(_-1-(n*F-i))+N*e;for(let t=0;t<j;++t){c+=b[s+(e*j+t)]*S[a+t]}}}m[g*U+y*t+v*a+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const j2={kernelName:uN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,s=CT(r.shape),a=n.data.get(r.dataId).values,i=jR([s,s],r.dtype),o=i.values;for(let c=0;c<a.length;c++)o[c*s+c]=a[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},U2={kernelName:hN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:s,filter:a}=t,{strides:i,pad:o,dilations:l}=r,c=n,u=c.data.get(s.dataId).values,h=s.shape.length,d=c.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:w,strideHeight:x,strideWidth:k,filterHeight:S,filterWidth:T,dilationHeight:E,dilationWidth:N,outShape:C}=lM(s.shape,a.shape,i,o,"NHWC",l),I=CT(C),_=C.length,A=UT(s.dtype,I);for(let R=0;R<f;++R)for(let e=0;e<v;++e){const t=e*x-w.top;for(let n=0;n<b;++n){const r=n*k-w.left;for(let i=0;i<y;++i){let o=Number.MIN_SAFE_INTEGER;for(let e=0;e<S;++e){const n=t+e*E;if(n>=0&&n<m)for(let t=0;t<T;++t){const l=r+t*N;if(l>=0&&l<g){const r=oE([R,n,l,i],h,ZT(s.shape)),c=oE([e,t,i],p,ZT(a.shape)),f=u[r]+d[c];f>o&&(o=f)}}}A[oE([R,e,n,i],_,ZT(C))]=o}}}return{dataId:c.write(h_(A,s.dtype),C,s.dtype),shape:C,dtype:s.dtype}}},B2={kernelName:pN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:s,filter:a,dy:i}=t,{strides:o,pad:l,dilations:c}=r,u=n,h=tE(s.shape,u.data.get(s.dataId).values),d=tE(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:S,dilationHeight:T,dilationWidth:E,outShape:N}=lM(s.shape,a.shape,o,l,"NHWC",c);TT(i.rank===N.length,(()=>`Error in ${pN}, dy must have the same rank as output ${N.length}, but got ${i.rank}`));const C=tE(N,u.data.get(i.dataId).values),I=aE(a.shape,a.dtype);for(let _=0;_<p;++_)for(let e=0;e<y;++e){const t=e*w-b.top;for(let n=0;n<v;++n){const r=n*x-b.left;for(let s=0;s<g;++s){let a=Number.MIN_SAFE_INTEGER,i=0,o=0;for(let e=0;e<k;++e){const n=t+e*T;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*E;if(l>=0&&l<m){const r=h[_][n][l][s]+d[e][t][s];r>a&&(a=r,i=e,o=t)}}}I[i][o][s]+=C[_][e][n][s]}}}return{dataId:u.write(h_(I,s.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},V2={kernelName:dN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:s,filter:a,dy:i}=t,{strides:o,pad:l,dilations:c}=r,u=n,h=tE(s.shape,u.data.get(s.dataId).values),d=tE(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:S,dilationHeight:T,dilationWidth:E,outShape:N}=lM(s.shape,a.shape,o,l,"NHWC",c);TT(i.rank===N.length,(()=>`Error in ${dN}, dy must have the same rank as output ${N.length}, but got ${i.rank}`));const C=tE(N,u.data.get(i.dataId).values),I=aE(s.shape,s.dtype);for(let _=0;_<p;++_)for(let e=0;e<y;++e){const t=e*w-b.top;for(let n=0;n<v;++n){const r=n*x-b.left;for(let s=0;s<g;++s){let a=Number.MIN_SAFE_INTEGER,i=t<0?0:t,o=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*T;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*E;if(l>=0&&l<m){const r=h[_][n][l][s]+d[e][t][s];r>a&&(a=r,i=n,o=l)}}}I[_][i][o][s]+=C[_][e][n][s]}}}return{dataId:u.write(h_(I,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};const W2={kernelName:fN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:s}=t,{canvas:a,options:i}=r,{contextOptions:o,imageOptions:l}=i||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===o||void 0===o?void 0:o.contextType)||"2d";if("2d"!==u)throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const h=a.getContext(u,(null===o||void 0===o?void 0:o.contextAttributes)||{});if(null==h)throw new Error(`Could not get the context with ${u} type.`);const[d,p]=s.shape.slice(0,2),f=2===s.shape.length?1:s.shape[2],m=n.data.get(s.dataId).values,g="float32"===s.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let b=0;b<d*p;++b){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=m[b*f+n];if("float32"===s.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===s.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*b;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}a.width=p,a.height=d;const v=new ImageData(y,p,d);return h.putImageData(v,0,0),s}};function H2(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r;let o;VJ(s,"sum"),o="bool"===s.dtype?rZ({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):JJ({inputs:{x:s},backend:n});const l=o.shape.length,c=$T(a,o.shape),u=xP(c,l);let h=c,d=o;null!=u&&(d=b0({inputs:{x:o},backend:n,attrs:{perm:u}}),h=SP(h.length,l)),wP("sum",h,d.shape.length);const[p,f]=vP(d.shape,h);let m=QJ(n,p,z_(d.dtype,"int32"));const g=CT(f),y=n.data.get(m.dataId).values,v=n.data.get(d.dataId).values;for(let b=0;b<y.length;++b){const e=b*g;let t=0;for(let n=0;n<g;++n)t+=v[e+n];y[b]=t}if(i){const e=m;m=R1({inputs:{x:m},backend:n,attrs:{shape:bP(m.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(o),null!=u&&n.disposeIntermediateTensorInfo(d),m}const G2={kernelName:nI,backendName:"cpu",kernelFunc:H2};const q2={kernelName:gN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:s}=r,a=t,{allDims:i,summedDims:o,idDims:l}=Hz(s,a.length);qz(i.length,l,a);const{path:c,steps:u}=Kz(o,l),h=u.length;let d=null,p=i.length;const f=[];for(let m=0;m<h;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=Gz(p,l[e]);let s;Yz(t)?s=a[e]:(s=b0({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),f.push(s));const i=s.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);AT(s.shape,i)||(s=R1({inputs:{x:s},backend:n,attrs:{shape:i}}),f.push(s)),null===d?d=s:(d=h0({inputs:{a:s,b:d},backend:n}),f.push(d))}m<h-1&&(c[m]>=0&&(d=H2({inputs:{x:d},backend:n,attrs:{axis:c[m]-(i.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}};const K2={kernelName:vN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:s}=t;VJ([r,s],"eluGrad");const a=new Float32Array(CT(s.shape)),i=n.data.get(s.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const e=i[l];a[l]=e>=0?o[l]:o[l]*(e+1)}return n.makeTensorInfo(s.shape,"float32",a)}},Y2=Cz,X2=Iz,Q2=_z,J2=Az,Z2=Rz,e3=Dz,t3=yZ(bN,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+Y2*n);return t*(1-((((e3*r+Z2)*r+J2)*r+Q2)*r+X2)*r*Math.exp(-n*n))})),n3={kernelName:bN,backendName:"cpu",kernelFunc:t3};function r3(e){const{inputs:t,backend:n,attrs:r}=e,{input:s}=t,{dim:a}=r,i=s.shape.length,o=s.shape.slice();let l=a;return a<0&&(TT(-(i+1)<=a,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),l=i+a+1),o.splice(l,0,1),R1({inputs:{x:s},backend:n,attrs:{shape:o}})}const s3={kernelName:kN,backendName:"cpu",kernelFunc:r3},a3=KJ(((e,t)=>e/t)),i3=aZ(mN,a3),o3={kernelName:mN,backendName:"cpu",kernelFunc:i3};function l3(e,t,n){const r=e.shape,s=r[0],a=r[1],i=n.data.get(e.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[s,a],u=CT(c),h=jT("float32",u),d=jT("float32",u);for(let g=0;g<s;g++){const e=V0({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,a]}}),r=V0({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,a]}}),s=YJ({inputs:{real:e,imag:r},backend:n}),{real:i,imag:c}=c3(s,t,n),u=Oz(i,c);for(let t=0;t<a;t++){const e=Fz(u,t);h[g*a+t]=e.real,d[g*a+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s)}const p=n.makeTensorInfo(c,"float32",h),f=n.makeTensorInfo(c,"float32",d),m=YJ({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function c3(e,t,n){const r=CT(e.shape),s=n.data.get(e.dataId),a=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){const s=u3(a,i,r,t,n),o=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(o,"float32",s.real),t=n.makeTensorInfo(o,"float32",s.imag),a=n.makeTensorInfo([],"float32",u_(r,"float32")),i=JJ({inputs:{x:a},backend:n}),l=o3.kernelFunc({inputs:{a:e,b:a},backend:n}),c=o3.kernelFunc({inputs:{a:t,b:i},backend:n}),u=n.data.get(l.dataId).values,h=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:h}}return s}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let s=0;s<t;s++){let a=0,i=0;for(let r=0;r<t;r++){const o=jz(s*r,t,n),l=Fz(e,r);a+=l.real*o.real-l.imag*o.imag,i+=l.real*o.imag+l.imag*o.real}n&&(a/=t,i/=t),$z(r,a,i,s)}return r}(Oz(a,i),r,t);return Mz(e)}}function u3(e,t,n,r,s){if(1===n)return{real:e,imag:t};const a=Oz(e,t),i=n/2,o=Pz(a),l=o.real,c=o.imag,u=[l.length],h=s.makeTensorInfo(u,"float32",l),d=s.makeTensorInfo(u,"float32",c),p=YJ({inputs:{real:h,imag:d},backend:s}),f=Lz(a),m=f.real,g=f.imag,y=[m.length],v=s.makeTensorInfo(y,"float32",m),b=s.makeTensorInfo(y,"float32",g),w=YJ({inputs:{real:v,imag:b},backend:s}),x=u3(l,c,i,r,s),k=x.real,S=x.imag,T=[k.length],E=s.makeTensorInfo(T,"float32",k),N=s.makeTensorInfo(T,"float32",S),C=YJ({inputs:{real:E,imag:N},backend:s}),I=u3(m,g,i,r,s),_=I.real,A=I.imag,R=[_.length],D=s.makeTensorInfo(R,"float32",_),O=s.makeTensorInfo(R,"float32",A),M=YJ({inputs:{real:D,imag:O},backend:s}),P=zz(n,r),L=[P.real.length],F=s.makeTensorInfo(L,"float32",P.real),$=s.makeTensorInfo(L,"float32",P.imag),z=YJ({inputs:{real:F,imag:$},backend:s}),j=h0({inputs:{a:z,b:M},backend:s}),U=cZ({inputs:{a:C,b:j},backend:s}),B=h1({inputs:{a:C,b:j},backend:s}),V=eZ({inputs:{input:U},backend:s}),W=eZ({inputs:{input:B},backend:s}),H=g2({inputs:{input:U},backend:s}),G=g2({inputs:{input:B},backend:s}),q=v2({inputs:[V,W],backend:s,attrs:{axis:0}}),K=v2({inputs:[H,G],backend:s,attrs:{axis:0}}),Y=s.data.get(q.dataId).values,X=s.data.get(K.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(K),{real:Y,imag:X}}const h3={kernelName:TN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,s=CT(r.shape),a=r.shape[r.shape.length-1],i=R1({inputs:{x:r},backend:n,attrs:{shape:[s/a,a]}}),o=l3(i,!1,n),l=R1({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}};function d3(e){const{backend:t,attrs:n}=e,{shape:r,value:s,dtype:a}=n,i=a||XT(s),o=UT(i,CT(r));return function(e,t){e.fill(t)}(o,s),t.makeTensorInfo(r,i,o)}const p3={kernelName:EN,backendName:"cpu",kernelFunc:d3};const f3={kernelName:NN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:s}=t,a=r,i=jT(s.dtype,CT(s.shape)),[o,l,c,u]=s.shape,h=a.data.get(s.dataId).values;for(let d=0;d<o;d++){const e=d*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const r=t*u;for(let s=0;s<u;s++){const a=Math.round(c-t-1),o=e+n+r+s;let l=h[o];if(a>=0&&a<c){l=h[e+n+a*u+s]}i[o]=l}}}}return{dataId:a.write(i,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};const m3={kernelName:MI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=w2({inputs:{x:s,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(i){const e=m;if("NCHW"===u&&1===i.shape.length&&1!==i.shape[0]){const e=R1({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=cZ({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=cZ({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===u&&"prelu"===p&&1===o.shape.length&&1!==o.shape[0]){const e=R1({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=A1(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=A1(n,m,p,o,f);n.disposeIntermediateTensorInfo(e)}return m}};const g3={kernelName:PI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=L2({inputs:{x:s,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(i){const e=m;m=cZ({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=A1(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}};const y3={kernelName:RN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:s}=t,a=CT(r.shape),i=s.shape,o=i[i.length-1],[l,c,u,h]=hO(r,s);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const d=$Z(n.data.get(s.dataId).values,n.bufferSync(r),r.dtype,c,o,u,h,r.shape,a);return n.makeTensorInfo(l,r.dtype,d.values)}};const v3={kernelName:AN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,indices:a}=t,{axis:i,batchDims:o}=r;VJ([s,a],"gatherV2");const l=$T(i,s.shape)[0],c=n.data.get(a.dataId).values,u=s.shape[l];for(let b=0;b<c.length;++b){const e=c[b];TT(e<=u-1&&e>=0,(()=>`GatherV2: the index value ${e} is not in [0, ${u-1}]`))}let h=o;null==o&&(h=0);const d=CT(a.shape),p=dj(s,a,l,h),f=R1({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=R1({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=n.bufferSync(m),v=zZ(n.bufferSync(f),y,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}};const b3={kernelName:PN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,s=CT(r.shape),a=r.shape[r.shape.length-1],i=R1({inputs:{x:r},backend:n,attrs:{shape:[s/a,a]}}),o=l3(i,!0,n),l=R1({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}},w3=yZ(FN,(e=>Number.isFinite(e)?1:0),"bool"),x3={kernelName:FN,backendName:"cpu",kernelFunc:w3},k3=yZ($N,(e=>Math.abs(e)===1/0?1:0),"bool"),S3={kernelName:$N,backendName:"cpu",kernelFunc:k3},T3=yZ(zN,(e=>Number.isNaN(e)?1:0),"bool"),E3={kernelName:zN,backendName:"cpu",kernelFunc:T3};const N3={kernelName:VN,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:s,num:a}=n,i=JZ(r,s,a);return t.makeTensorInfo([i.length],"float32",i)}},C3=yZ(HN,(e=>Math.log1p(e))),I3={kernelName:HN,backendName:"cpu",kernelFunc:C3},_3=KJ(((e,t)=>e&&t)),A3=aZ(GN,_3,null,"bool"),R3={kernelName:GN,backendName:"cpu",kernelFunc:A3},D3=yZ(qN,(e=>e?0:1),"bool"),O3={kernelName:qN,backendName:"cpu",kernelFunc:D3},M3=KJ(((e,t)=>e||t)),P3=aZ(KN,M3,null,"bool"),L3={kernelName:KN,backendName:"cpu",kernelFunc:P3};const F3={kernelName:JN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{depthRadius:a,bias:i,alpha:o,beta:l}=r;VJ(s,"LRN");const c=s.shape[3],u=c-1,h=n.data.get(s.dataId).values,d=CT(s.shape),p=new Float32Array(d);function f(e){const t=e%c;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,u);let s=0;for(;n<=r;n++){const e=h[n];s+=e*e}return s}for(let m=0;m<d;m++){const e=f(m),t=h[m]*Math.pow(i+o*e,-l);p[m]=t}return n.makeTensorInfo(s.shape,s.dtype,p)}};const $3={kernelName:ZN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,y:a,dy:i}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r;VJ(i,"LRNGrad");const h=CT(i.shape),d=i.shape[3],p=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,m=n.data.get(a.dataId).values,g=new Float32Array(h),y=h;for(let v=0;v<y;v++){const e=v%d,t=v-e+Math.max(0,e-o),n=v-e+Math.min(d,e+o+1);let r=0;for(let s=t;s<n;s++)r+=Math.pow(f[s],2);r=c*r+l;for(let s=t;s<n;s++){let e=-2*c*u*f[s]*m[v]/r;v===s&&(e+=Math.pow(r,-u)),e*=p[v],g[s]+=e}}return n.makeTensorInfo(i.shape,s.dtype,g)}};function z3(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reductionIndices:a,keepDims:i}=r,o=n;let l=s.shape;const c=l.length,u=$T(a,l);let h=u;const d=xP(h,c);let p=o.data.get(s.dataId).values;if(null!=d){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=v0(p,l,s.dtype,d,e),h=SP(h.length,c),l=e}VJ(s,"max"),wP("max",h,c);const[f,m]=vP(l,h),g=n0(p,CT(m),f,s.dtype),y=o.write(g,f,s.dtype);let v=f;if(i){v=bP(f,u)}return{dataId:y,shape:v,dtype:s.dtype}}const j3={kernelName:tC,backendName:"cpu",kernelFunc:z3};const U3={kernelName:rC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;VJ(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r;TT(bM(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const c=cM(s.shape,a,i,1,o,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&AT(c.inShape,c.outShape))u=JJ({inputs:{x:s},backend:n});else{const e=n.data.get(s.dataId).values,t=ZT(s.shape),r=n2(e,s.shape,s.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,s.dtype,r.values)}return u}};const B3={kernelName:aC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r;VJ(s,"maxPool3d");const u=uM(s.shape,a,i,1,o,l,c),h=s2(n.data.get(s.dataId).values,s.shape,s.dtype,ZT(s.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const V3={kernelName:iC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=r;VJ([s,a],"maxPool3DGrad");const u=uM(a.shape,i,o,1,l,c),h=function(e,t){const n=jR(t.outShape,"int32"),r=t.strideDepth,s=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const v=y*r-d;let b=v;for(;b<0;)b+=i;const w=Math.min(t.inDepth,c+v);for(let r=0;r<t.outHeight;++r){const c=r*s-p;let d=c;for(;d<0;)d+=o;const x=Math.min(t.inHeight,u+c);for(let s=0;s<t.outWidth;++s){const p=s*a-f;let k=p;for(;k<0;)k+=l;const S=Math.min(t.inWidth,h+p);let T=Number.NEGATIVE_INFINITY,E=-1;for(let t=b;t<w;t+=i){const n=t-v;for(let r=d;r<x;r+=o){const s=r-c;for(let a=k;a<S;a+=l){const i=a-p,o=e.get(m,t,r,a,g);o>=T&&(T=o,E=n*u*h+s*u+i)}}}n.set(E,m,y,r,s,g)}}}return n}(n.bufferSync(a),u),d=u.strideDepth,p=u.strideHeight,f=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterDepth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,x=v-1-u.padInfo.front,k=w-1-u.padInfo.left,S=b-1-u.padInfo.top,T=jR(a.shape,"float32"),E=n.bufferSync(s);for(let N=0;N<u.batchSize;++N)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const s=t-x,a=n-S,i=r-k;let o=0;for(let t=0;t<v;t+=m){const n=(s+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=g){const s=(a+r)/p;if(!(s<0||s>=u.outHeight||Math.floor(s)!==s))for(let a=0;a<w;a+=y){const l=(i+a)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=v*b*w-1-h.get(N,n,s,l,e)===t*b*w+r*w+a?1:0;if(0===c)continue;o+=E.get(N,n,s,l,e)*c}}}T.set(o,N,t,n,r,e)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};const W3={kernelName:sC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a,output:i}=t,o=a;VJ([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=cM(o.shape,l,c,1,u,h),p=n.data.get(o.dataId).values,f=jR(d.outShape,o.dtype,r2(p,o.shape,o.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,w=d.effectiveFilterWidth,x=w-1-d.padInfo.left,k=b-1-d.padInfo.top,S=jR(o.shape,"float32"),T=n.data.get(s.dataId).values,E=jR(s.shape,"float32",T);for(let N=0;N<d.batchSize;++N)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-k,s=n-x;let a=0;for(let t=0;t<b;t+=y){const n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<w;r+=v){const i=(s+r)/g;if(i<0||i>=d.outWidth||Math.floor(i)!==i)continue;const o=b*w-1-f.get(N,n,i,e)===t*w+r?1:0;if(0===o)continue;a+=E.get(N,n,i,e)*o}}S.set(a,N,t,n,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const H3={kernelName:oC,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:s}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:l}=n,c=r;VJ(s,"MaxPoolWithArgmax");const u=c.data.get(s.dataId).values,h=cM(s.shape,a,i,[1,1],o),[d,p]=function(e,t,n,r,s){const a=n2(e,0,n,ZT(t),s,"max"),i=r2(e,t,n,s,!0,r);return[a.values,i.values]}(u,s.shape,s.dtype,l,h),f=c.write(d,h.outShape,s.dtype),m=c.write(p,h.outShape,s.dtype);return[{dataId:f,shape:h.outShape,dtype:s.dtype},{dataId:m,shape:h.outShape,dtype:"int32"}]}};const G3={kernelName:lC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r,o=$T(a,s.shape),l=CT(vP(s.shape,o)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const h=rZ({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});c.push(h);const d=i3({inputs:{a:h,b:u},backend:n});c.push(d);const p=H2({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:i}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const q3={kernelName:cC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r;VJ(s,"min");const o=$T(a,s.shape);let l=o;const c=xP(l,s.shape.length);let u=s;null!=c&&(u=b0({inputs:{x:s},backend:n,attrs:{perm:c}}),l=SP(l.length,s.shape.length)),wP("min",l,u.shape.length);const[h,d]=vP(u.shape,l),p=CT(d),f=sE(CT(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(i){const e=R1({inputs:{x:g},backend:n,attrs:{shape:bP(h,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const K3={kernelName:hC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:a,mode:i}=r;VJ(s,"mirrorPad");const o=a.map(((e,t)=>e[0]+s.shape[t]+e[1])),l=a.map((e=>e[0])),c=a.map(((e,t)=>e[0]+s.shape[t])),u="reflect"===i?0:1,h=n.data.get(s.dataId).values,d=s.shape.length,p=ZT(s.shape),f=CT(o),m=o.length,g=ZT(o),y=jT(s.dtype,f);for(let v=0;v<f;v++){let e=lE(v,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map(((e,t)=>e-l[t]));const t=oE(e,d,p);y[v]=h[t]}return{dataId:n.write(y,o,s.dtype),shape:o,dtype:s.dtype}}},Y3=KJ(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),X3=aZ(dC,Y3),Q3={kernelName:dC,backendName:"cpu",kernelFunc:X3};function J3(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{dim:a}=r,i=s.shape.length;let o=a;if(-1===o&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=$T([o],s.shape),c=z3({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=bP(c.shape,l),h=R1({inputs:{x:c},backend:n,attrs:{shape:u}}),d=h1({inputs:{a:s,b:h},backend:n}),p=CZ({inputs:{x:d},backend:n}),f=H2({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=R1({inputs:{x:f},backend:n,attrs:{shape:u}}),g=i3({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const Z3={kernelName:aI,backendName:"cpu",kernelFunc:J3};const e4={kernelName:pC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{numSamples:a,seed:i,normalized:o}=r;VJ(s,"multinomial");const l=o?s:J3({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,d=[c,a],p=sE(CT(d),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=h[e];for(let s=1;s<t.length;++s)t[s]=t[s-1]+h[e+s];const n=PL.alea(i.toString()),r=f*a;for(let s=0;s<a;++s){const e=n();p[r+s]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+s]=n;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}},t4=g$;const n4={kernelName:yC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:a}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;VJ(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values,{selectedIndices:h}=t4(c,u,i,o,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},r4=y$;const s4={kernelName:vC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:a}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;VJ(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,{selectedIndices:d,validOutputs:p}=r4(u,h,i,o,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},a4=v$;const i4={kernelName:bC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:a}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;VJ(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,d=i,p=o,f=l,m=c,{selectedIndices:g,selectedScores:y}=a4(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};const o4={kernelName:xC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s}=t,{dtype:a,depth:i,onValue:o,offValue:l}=r;VJ(s,"oneHot");const c=CT(s.shape),u=new Float32Array(c*i);u.fill(l);const h=n.data.get(s.dataId).values;for(let d=0;d<c;++d)h[d]>=0&&h[d]<i&&(u[d*i+h[d]]=o);return n.makeTensorInfo([...s.shape,i],a,u)}};function l4(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=eZ({inputs:{input:r},backend:n}),t=l4({inputs:{x:e},backend:n}),s=g2({inputs:{input:r},backend:n}),a=l4({inputs:{x:s},backend:n}),i=YJ({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),i}return d3({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const c4={kernelName:_I,backendName:"cpu",kernelFunc:l4};const u4={kernelName:wC,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:s}=n;if("string"===s.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===s.dtype){const t=eZ({inputs:{input:s},backend:r}),n=e({inputs:{x:t},backend:r}),a=g2({inputs:{input:s},backend:r}),i=l4({inputs:{x:a},backend:r}),o=YJ({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),o}return d3({backend:r,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}};function h4(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(1===t.length)return r3({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{ET(a,e.shape,"All tensors passed to stack must have matching shapes"),TT(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const o=[],l=v2({inputs:t.map((e=>{const t=r3({inputs:{input:e},backend:n,attrs:{dim:s}});return o.push(t),t})),backend:n,attrs:{axis:s}});return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const d4={kernelName:kC,backendName:"cpu",kernelFunc:h4};const p4={kernelName:SC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:a,constantValue:i}=r;VJ(s,"pad");const o=a.map(((e,t)=>e[0]+s.shape[t]+e[1])),l=a.map((e=>e[0])),c=n.data.get(s.dataId).values,u=CT(s.shape),h=s.shape.length,d=ZT(s.shape),p=CT(o),f=o.length,m=ZT(o),g=jT(s.dtype,p);0!==i&&g.fill(i);for(let y=0;y<u;y++){g[oE(lE(y,h,d).map(((e,t)=>e+l[t])),f,m)]=c[y]}return{dataId:n.write(g,o,s.dtype),shape:o,dtype:s.dtype}}},f4=KJ(((e,t)=>Math.pow(e,t))),m4=aZ(EC,f4),g4={kernelName:EC,backendName:"cpu",kernelFunc:m4};const y4={kernelName:IC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:o}=r,l=s.map((e=>n.data.get(e.dataId).values)),c=s.map((e=>e.shape)),u=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,[d,p,f]=N0(l,c,u,a.shape,a.dtype,h,i.shape),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,a.dtype,p);return m.concat([g])}};const v4={kernelName:_C,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:s,deltas:a}=t,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[c,u]=I0(i,r.shape,r.dtype,o,s.shape,l,a.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const b4={kernelName:AC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,d=o.map((e=>n.data.get(e.dataId).values)),p=o.map((e=>e.shape)),[f,m]=O0(c,s.shape,u,a.shape,a.dtype,h,i.shape,d,p,l);return n.makeTensorInfo(f,a.dtype,m)}};const w4={kernelName:RC,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:s,dtype:a,step:i}=n,o=M0(r,s,i,a);return t.makeTensorInfo([o.length],a,o)}},x4=yZ(OC,(e=>1/e)),k4={kernelName:OC,backendName:"cpu",kernelFunc:x4};const S4={kernelName:$C,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:a,halfPixelCenters:i,size:o}=r;VJ(s,"resizeBilinear");const l=ZT(s.shape),[c,u]=o,[h,d,p,f]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(CT([h,c,u,f])),y=[a&&c>1?d-1:d,a&&u>1?p-1:p],v=[a&&c>1?c-1:c,a&&u>1?u-1:u];let b=0;const w=y[0]/v[0],x=y[1]/v[1];for(let k=0;k<h;k++)for(let e=0;e<c;e++){let t;t=i?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,s=Math.min(d-1,Math.ceil(t)),a=k*l[0]+n*l[1],o=k*l[0]+s*l[1];for(let e=0;e<u;e++){let t;t=i?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),s=t-n,c=Math.min(p-1,Math.ceil(t)),u=a+n*l[2],h=o+n*l[2],d=a+c*l[2],y=o+c*l[2];for(let e=0;e<f;e++){const t=m[u+e],n=m[h+e],a=t+(m[d+e]-t)*s,i=a+(n+(m[y+e]-n)*s-a)*r;g[b++]=i}}}return n.makeTensorInfo([h,c,u,f],"float32",g)}};const T4={kernelName:zC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:a}=t,{alignCorners:i}=r;VJ([a,s],"resizeBilinearGrad");const o=ZT(s.shape),[l,c,u,h]=s.shape,[,d,p]=a.shape,f=new Float32Array(l*c*u*h),m=[i&&d>1?c-1:c,i&&p>1?u-1:u],g=[i&&d>1?d-1:d,i&&p>1?p-1:p],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(a.dataId).values;let w=0;for(let x=0;x<l;x++){const e=x*o[0];for(let t=0;t<d;t++){const n=t*y,r=Math.floor(n),s=Math.min(Math.ceil(n),c-1),a=e+r*o[1],i=e+s*o[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),s=t-n,c=1-s,p=a+n*o[2],m=a+r*o[2],g=i+n*o[2],y=i+r*o[2],x=d*c,k=d*s,S=l*c,T=l*s;for(let e=0;e<h;e++){const t=b[w++];f[p+e]+=t*x,f[m+e]+=t*k,f[g+e]+=t*S,f[y+e]+=t*T}}}}return n.makeTensorInfo([l,u,c,h],"float32",f)}};const E4={kernelName:LC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:a,halfPixelCenters:i,size:o}=r;VJ(s,"resizeNearestNeighbor");const l=ZT(s.shape),[c,u]=o,[h,d,p,f]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(h*c*u*f),y=[a&&c>1?d-1:d,a&&u>1?p-1:p],v=[a&&c>1?c-1:c,a&&u>1?u-1:u],b=y[0]/v[0],w=y[1]/v[1];let x=0;for(let k=0;k<h;k++){const e=k*l[0];for(let t=0;t<c;t++){const n=i?b*(t+.5):b*t;let r=Math.min(d-1,a?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const s=e+r*l[1];for(let e=0;e<u;e++){const t=i?w*(e+.5):w*e;let n=Math.min(p-1,a?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=s+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[x++]=t}}}}return n.makeTensorInfo([h,c,u,f],s.dtype,g)}};const N4={kernelName:FC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:a}=t,{alignCorners:i}=r;VJ([a,s],"resizeNearestNeighborGrad");const o=ZT(s.shape),l=ZT(a.shape),[c,u,h,d]=s.shape,[,p,f]=a.shape,m=new Float32Array(c*u*h*d),g=n.data.get(a.dataId).values,y=[i&&p>1?u-1:u,i&&f>1?h-1:h],v=[i&&p>1?p-1:p,i&&f>1?f-1:f],b=y[0]/v[0],w=y[1]/v[1],x=1/b,k=1/w,S=2*Math.ceil(x)+2,T=2*Math.ceil(k)+2;for(let E=0;E<c;E++){const e=E*o[0];for(let t=0;t<u;t++){const n=e+t*o[1],r=Math.floor(t*x),s=Math.floor(r-S/2);for(let a=0;a<h;a++){const r=n+a*o[2],c=Math.floor(a*k),y=Math.floor(c-T/2);for(let n=0;n<d;n++){let o=0;for(let r=0;r<S;r++){const c=r+s;if(c<0||c>=p)continue;const d=e+c*l[1],m=c*b;if(t===Math.min(u-1,i?Math.round(m):Math.floor(m)))for(let e=0;e<T;e++){const t=e+y;if(t<0||t>=f)continue;const r=d+t*l[2],s=t*w;a===Math.min(h-1,i?Math.round(s):Math.floor(s))&&(o+=g[r+n])}}m[r+n]=o}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}};const C4={kernelName:UC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dims:a}=r;VJ(s,"reverse");const i=s.shape.length,o=$T(a,s.shape);if(0===i)return JJ({inputs:{x:s},backend:n});const l=new N_(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();o.forEach((e=>t[e]=s.shape[e]-1-t[e])),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},I4={kernelName:DI,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:s}=t,{radians:a,fillValue:i,center:o}=n,l=r,c=jT(s.dtype,CT(s.shape)),[u,h,d,p]=s.shape,[f,m]=bz(o,h,d),g=Math.sin(a),y=Math.cos(a),v=l.data.get(s.dataId).values;for(let b=0;b<u;b++){const e=b*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let r=0;r<d;r++){const s=r*p;for(let a=0;a<p;a++){const o=[u,t,r,a],l=o[2],b=o[1];let w=(l-f)*y-(b-m)*g,x=(l-f)*g+(b-m)*y;w=Math.round(w+f),x=Math.round(x+m);let k=i;if("number"!==typeof i&&(k=3===a?255:i[a]),w>=0&&w<d&&x>=0&&x<h){k=v[e+x*(d*p)+w*p+a]}c[e+n+s+a]=k}}}}return{dataId:l.write(c,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},_4=yZ(BC,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),A4={kernelName:BC,backendName:"cpu",kernelFunc:_4};const R4={kernelName:WC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s,updates:a}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=fO(0,s,i),d=$0(n.bufferSync(s),n.bufferSync(a),i,h,c,l,o,u,0,!0);return n.makeTensorInfo(i,d.dtype,d.values)}};function D4(e,t){let n=0,r=e.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),e[s]<t?n=s+1:r=s;return r}function O4(e,t){let n=0,r=e.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),e[s]<=t?n=s+1:r=s;return r}const M4={kernelName:GC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:s,values:a}=t,{side:i}=r,o=function(e,t,n,r,s,a){const i=UT("int32",n*s);for(let o=0;o<n;++o){const n=e.slice(o*r,(o+1)*r),l=o*s;for(let e=0;e<s;++e)i[l+e]="left"===a?D4(n,t[e+l]):O4(n,t[e+l])}return i}(n.data.get(s.dataId).values,n.data.get(a.dataId).values,s.shape[0],s.shape[1],a.shape[1],i);return n.makeTensorInfo(a.shape,"int32",o)}};const P4={kernelName:qC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:s,e:a}=t;VJ([r,s,a],"select");const i=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,u=z_(s.dtype,a.dtype),h=sE(CT(s.shape),u);let d=0;const p=0===i||i>1||1===s.shape.length?1:CT(s.shape.slice(1));for(let f=0;f<o.length;f++)for(let e=0;e<p;e++)1===o[f]?h[d++]=l[f]:h[d++]=c[f];return n.makeTensorInfo(s.shape,u,h)}},L4=Ez,F4=Nz,$4=yZ(KC,(e=>e>=0?F4*e:L4*(Math.exp(e)-1))),z4={kernelName:KC,backendName:"cpu",kernelFunc:$4},j4=yZ(JC,(e=>e<0?-1:e>0?1:0)),U4={kernelName:JC,backendName:"cpu",kernelFunc:j4},B4=yZ(XC,(e=>Math.sin(e))),V4={kernelName:XC,backendName:"cpu",kernelFunc:B4},W4=yZ(QC,(e=>Math.sinh(e))),H4={kernelName:QC,backendName:"cpu",kernelFunc:W4},G4=Math.log(1.1920928955078125e-7)+2,q4=yZ(eI,(e=>{const t=e>-G4,n=e<G4,r=Math.exp(e);let s;return s=n?r:t?e:Math.log(1+r),s})),K4={kernelName:eI,backendName:"cpu",kernelFunc:q4};const Y4={kernelName:rI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:a,paddings:i}=r;VJ([s],"spaceToBatchND");const o=CT(a),l=[[0,0]];l.push(...i);for(let g=1+a.length;g<s.shape.length;++g)l.push([0,0]);const c=p4.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=wz(c.shape,a,o,!1),h=xz(u.length,a.length,!1),d=kz(c.shape,a,o,!1),p=R1({inputs:{x:c},backend:n,attrs:{shape:u}}),f=b0({inputs:{x:p},backend:n,attrs:{perm:h}}),m=R1({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};const X4={kernelName:iI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:s,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n        ${s.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values[0],[h,d,p,f,m]=H0(o,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],s.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const Q4={kernelName:oI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:s,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${s.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.data.get(s.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[c,u,h]=G0(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],a.dtype,new Int32Array(h))]}};const J4={kernelName:lI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${s.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[c,u]=q0(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const Z4={kernelName:cI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${s.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[c,u]=q0(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}};const e6={kernelName:uI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:s,sparseValues:a,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=fO(0,s,o),p=!1,f=n.bufferSync(s);let m;switch(a.dtype){case"bool":m=$0(f,n.bufferSync(a),o,d,u,c,l,h,Boolean(n.data.get(i.dataId).values[0]),p);break;case"float32":m=$0(f,n.bufferSync(a),o,d,u,c,l,h,n.data.get(i.dataId).values[0],p);break;case"int32":m=$0(f,n.bufferSync(a),o,d,u,c,l,h,n.data.get(i.dataId).values[0],p);break;case"string":m=$0(f,n.bufferSync(a),o,d,u,c,l,h,m_(n.data.get(i.dataId).values[0]),p);break;default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(o,m.dtype,m.values)}};const t6={kernelName:sI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{numOrSizeSplits:a,axis:i}=r,o=$T(i,s.shape)[0],l=Qz(s,a,o),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map((e=>{const t=[...u];t[o]=e;const r=V0({inputs:{x:s},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},n6={kernelName:dI,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,s=n;VJ(r,"square");const a=s.data.get(r.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const e=a[o];i[o]=e*e}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},r6=yZ(AI,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),s6={kernelName:AI,backendName:"cpu",kernelFunc:r6};const a6={kernelName:fI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:a,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r;VJ(s,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:w}=DO(s.shape,a,i,o,l,c,u,h,d);let x;if(m)x=R1({inputs:{x:s},backend:n,attrs:{shape:f}});else if(g||y){TT(s.shape.length>=1,(()=>`Input must have rank at least 1, got: ${s.shape.length}`));const e=bO(v,b,w),t=V0({inputs:{x:s},backend:n,attrs:{begin:v,size:e}});x=R1({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=r1(p,n.bufferSync(s),w,v);x=n.makeTensorInfo(f,e.dtype,e.values)}return x}};const i6={kernelName:mI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=t,d=n.data.get(u.dataId).values,p=n.data.get(h.dataId).values,[f,m]=a1(d,p,s,a,i,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const o6={kernelName:gI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:s}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,h]=o1(o,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const l6={kernelName:yI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:s}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=l1(n.data.get(a.dataId).values,s);return n.makeTensorInfo(a.shape,"int32",i)}},c6=yZ(bI,(e=>Math.tan(e))),u6={kernelName:bI,backendName:"cpu",kernelFunc:c6},h6=yZ(wI,(e=>Math.tanh(e)));const d6={kernelName:HC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:s,updates:a}=t,{sliceRank:i,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=fO(0,s,r.shape),h=n.bufferSync(s),d=n.bufferSync(a),p=n.bufferSync(r),f=$0(h,d,r.shape,u,l,o,i,c,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};const p6={kernelName:xI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reps:a}=r;VJ(s,"tile");const i=p1(n.bufferSync(s),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}};const f6={kernelName:kI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{k:a,sorted:i}=r;VJ(s,"topk");const o=n.data.get(s.dataId).values,[l,c]=g1(o,s.shape,s.dtype,a,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const m6={kernelName:SI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:s,transforms:a}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=n,[u,h,d,p]=s.shape,[f,m]=null!=c?c:[h,d],g=[u,f,m,p],y=ZT(s.shape),v=y[0],b=y[1],w=y[2],x=ZT(g),k=x[0],S=x[1],T=x[2],E=jT(s.dtype,CT(g));E.fill(l);const N=r.data.get(s.dataId).values,C=r.data.get(a.dataId).values;for(let I=0;I<u;++I){const e=1===a.shape[0]?C:C.subarray(8*I,8*I+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let s;const a=e[6]*n+e[7]*t+1;if(0===a)continue;const c=(e[0]*n+e[1]*t+e[2])/a,u=(e[3]*n+e[4]*t+e[5])/a,p=g6(c,d,o),f=g6(u,h,o);switch(i){case"nearest":s=v6(N,h,d,v,b,w,I,f,p,r,l);break;case"bilinear":s=b6(N,h,d,v,b,w,I,f,p,r,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}E[I*k+t*S+n*T+r]=s}return r.makeTensorInfo(g,s.dtype,E)}return{dataId:r.write(E,g,s.dtype),shape:s.shape,dtype:s.dtype}}};function g6(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return vT(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return vT(0,n,t-1)}(e,t);case"nearest":return function(e,t){return vT(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function y6(e,t,n,r,s,a,i,o,l,c,u){return 0<=o&&o<t&&0<=l&&l<n?e[i*r+o*s+l*a+c]:u}function v6(e,t,n,r,s,a,i,o,l,c,u){return y6(e,t,n,r,s,a,i,Math.round(o),Math.round(l),c,u)}function b6(e,t,n,r,s,a,i,o,l,c,u){const h=Math.floor(o),d=Math.floor(l),p=h+1,f=d+1;return(p-o)*((f-l)*y6(e,t,n,r,s,a,i,h,d,c,u)+(l-d)*y6(e,t,n,r,s,a,i,h,f,c,u))+(o-h)*((f-l)*y6(e,t,n,r,s,a,i,p,d,c,u)+(l-d)*y6(e,t,n,r,s,a,i,p,f,c,u))}const w6={kernelName:EI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:s}=n,{x:a}=t;VJ(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:c}=y1(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}};const x6={kernelName:NI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:s}=t;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s.shape.length,o=s.shape[a],l=new Array(i-1);let c=0;for(let p=0;p<i;p++)p!==a&&(l[c++]=s.shape[p]);const u=new Array(i).fill(0),h=s.shape.slice();h[a]=1;const d=new Array(o);for(let p=0;p<d.length;p++){u[a]=p;const e=V0({inputs:{x:s},backend:n,attrs:{begin:u,size:h}});d[p]=R1({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}};const k6={kernelName:CI,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,segmentIds:a}=t,{numSegments:i}=r;VJ(s,"unsortedSegmentSum");const o=[],l=[],c=s.shape.length-a.shape.length;let u=a;for(let d=0;d<c;++d){const e=r3({inputs:{input:u},backend:n,attrs:{dim:d+1}});u=e,l.push(e)}for(let d=0;d<i;++d){const e=u_(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=TZ({inputs:{a:t,b:u},backend:n}),a=rZ({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=h0({inputs:{a:a,b:s},backend:n}),c=H2({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});o.push(c),l.push(t),l.push(r),l.push(a),l.push(i),l.push(c)}const h=h4({inputs:o,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},S6=[P1,qJ,F1,z1,uZ,j1,U1,B1,V1,W1,G1,K1,X1,Z1,t2,a2,i2,o2,l2,M1,c2,u2,h2,mZ,d2,sZ,xZ,f2,XJ,m2,b2,x2,k2,S2,T2,E2,N2,I2,A2,R2,D2,O2,M2,P2,F2,$2,z2,j2,U2,B2,V2,W2,q2,w1,K2,EZ,n3,IZ,s3,RZ,h3,p3,f3,MZ,FZ,m3,g3,y3,v3,BZ,HZ,ZJ,b3,y2,x3,S3,E3,k1,KZ,QZ,N3,t0,I3,R3,O3,L3,F3,$3,j3,a0,U3,B3,V3,W3,H3,G3,q3,l0,K3,Q3,e4,d0,f0,n4,s4,i4,y0,o4,u4,d4,p4,g4,E1,k0,y4,v4,b4,w4,tZ,o3,k4,C1,_1,D1,S4,T4,E4,N4,C4,I4,A4,F0,R4,M4,P4,z4,U0,U4,V4,H4,W0,Z3,K4,Y4,X4,Q4,J4,Z4,e6,t6,X0,n6,Z0,n1,s6,a6,i6,o6,l6,d1,G2,u6,{kernelName:wI,backendName:"cpu",kernelFunc:h6},d6,p6,f6,m6,w0,w6,x6,k6,c4];for(const n of S6)VI(n);const T6={},E6={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function N6(e,t){T6[e]=t}function C6(e,t){if(!(e in T6)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(pE().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete T6[e]}),!1),pE().getBool("SOFTWARE_WEBGL_ENABLED")&&(E6.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",E6)||n.getContext("experimental-webgl",E6);return n.getContext("webgl2",E6)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;T6[e]=n}const n=T6[e];return null==n||n.isContextLost()?(delete T6[e],C6(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),T6[e])}var I6,_6,A6;function R6(e,t){return[t,e]}function D6(e){const t=CT(e);return OT(Math.ceil(t/4))}function O6(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function M6(e,t){const n=e;let r,s,a,i,o,l,c,u,h,d;return 2===pE().getNumber("WEBGL_VERSION")?(r=n.R32F,s=n.R16F,a=n.RGBA16F,i=n.RGBA32F,o=n.RED,c=4,u=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,s=e.RGBA,a=e.RGBA,i=n.RGBA,o=e.RGBA,c=4,u=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}function P6(e,t){const n=t();return pE().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+z6(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(I6||(I6={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(_6||(_6={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(A6||(A6={}));const L6=5.96e-8,F6=65504;function $6(e){return!!(pE().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||L6<Math.abs(e)&&Math.abs(e)<F6)}function z6(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function j6(e,t){return h5(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}function U6(e,t){const n=h5(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(P6(e,(()=>e.shaderSource(n,t))),P6(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function B6(e,t){const n=h5(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(P6(e,(()=>e.shaderSource(n,t))),P6(e,(()=>e.compileShader(n))),pE().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw W6(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const V6=/ERROR: [0-9]+:([0-9]+):/g;function W6(e,t){const n=V6.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],s=e.split("\n"),a=s.length.toString().length+2,i=s.map(((e,t)=>PT((t+1).toString(),a)+e));let o=0;for(let h=0;h<i.length;h++)o=Math.max(i[h].length,o);const l=i.slice(0,r-1),c=i.slice(r-1,r),u=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${PT(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function H6(e){return h5(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}function G6(e,t){if(P6(e,(()=>e.linkProgram(t))),!pE().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function q6(e,t){if(P6(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function K6(e,t){const n=h5(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return P6(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),P6(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}function Y6(e,t){const n=h5(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return P6(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),P6(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}function X6(){return 2===pE().getNumber("WEBGL_VERSION")?1:4}function Q6(e){return h5(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}function J6(e,t){const n=pE().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){throw new Error("Requested texture size "+`[${e}x${t}]`+" is invalid.")}if(e>n||t>n){throw new Error("Requested texture size "+`[${e}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}}function Z6(e){return h5(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}function e5(e,t,n,r,s,a,i){const o=e.getAttribLocation(t,n);return-1!==o&&(P6(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),P6(e,(()=>e.vertexAttribPointer(o,s,e.FLOAT,!1,a,i))),P6(e,(()=>e.enableVertexAttribArray(o))),!0)}function t5(e,t,n){d5(e,n),P6(e,(()=>e.activeTexture(e.TEXTURE0+n))),P6(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}function n5(e,t){d5(e,t),P6(e,(()=>e.activeTexture(e.TEXTURE0+t))),P6(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function r5(e,t,n){return h5(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}function s5(e,t,n){return e.getUniformLocation(t,n)}function a5(e,t,n,r){P6(e,(()=>t5(e,t,r))),P6(e,(()=>e.uniform1i(n,r)))}function i5(e){P6(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),P6(e,(()=>e.viewport(0,0,e.canvas.width,e.canvas.height))),P6(e,(()=>e.scissor(0,0,e.canvas.width,e.canvas.height)))}function o5(e,t,n){P6(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),P6(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function l5(e,t){P6(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),P6(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function c5(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+u5(e,t))}function u5(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function h5(e,t,n){const r=P6(e,(()=>t()));if(null==r)throw new Error(n);return r}function d5(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function p5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return CT(e.slice(0,e.length-t))}function f5(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function m5(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[p5(e),...f5(e)]),t}function g5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=pE().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=pE().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&pE().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map(((t,n)=>n>=e.length-2?bT(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=zT(e);e=t.newShape}let s=CT(e),a=null;e.length<=1&&s<=n?a=[1,s]:2===e.length&&e[0]<=n&&e[1]<=n?a=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);const i=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(null==a||i)if(t){const t=p5(e);let n=2,r=2;e.length&&([n,r]=f5(e)),s=t*(n/2)*(r/2),a=OT(s).map((e=>2*e))}else a=OT(s);return a}function y5(e){return e%2===0}function v5(e,t){if(AT(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(y5(n)&&y5(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&y5(e[0])&&y5(t[0])}let b5,w5;function x5(e){if(null==b5){const t=C6(e);b5=t.getParameter(t.MAX_TEXTURE_SIZE)}return b5}function k5(){b5=null}function S5(){w5=null}function T5(e){if(null==w5){const t=C6(e);w5=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,w5)}function E5(e){if(0===e)return 0;let t;const n=C6(e);return t=N5(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:N5(n,"EXT_disjoint_timer_query")?1:0,t}function N5(e,t){return null!=e.getExtension(t)}function C5(e){try{if(null!=C6(e))return!0}catch(jEe){return console.log("Error when getting WebGL context: ",jEe),!1}return!1}function I5(e){if(0===e)return!1;const t=C6(e);if(1===e){if(!N5(t,"OES_texture_float"))return!1}else if(!N5(t,"EXT_color_buffer_float"))return!1;return A5(t)}function _5(e){if(0===e)return!1;const t=C6(e);if(1!==e){if(N5(t,"EXT_color_buffer_float"))return A5(t);const e="EXT_color_buffer_half_float";if(N5(t,e)){const n=t.getExtension(e);return function(e,t){const n=M6(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const s=1,a=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,s,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),o}(t,n)}return!1}if(!N5(t,"OES_texture_float"))return!1;if(!N5(t,"WEBGL_color_buffer_float"))return!1;return A5(t)}function A5(e){const t=M6(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),s}function R5(e){if(2!==e)return!1;return null!=C6(e).fenceSync}function D5(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&TT("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const O5=pE();function M5(){let e,t,n,r,s,a,i,o,l,c;return 2===pE().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",s="texture",a="outputColor",i="out vec4 outputColor;",o=pE().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",s="texture2D",a="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:s,output:a,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function P5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=ZT(t);return r.map(((t,s)=>`${`int ${e[s]} = ${n} / ${t}`}; ${s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${t}`:`index -= ${e[s]} * ${t}`};`)).join("")}function L5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=ZT(t);return r.map(((t,s)=>`${`int ${e[s]} = ${n} / outShapeStrides[${s}]`}; ${s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * outShapeStrides[${s}]`:`index -= ${e[s]} * outShapeStrides[${s}]`};`)).join("")}function F5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),s=new Array(n-1);s[n-2]=r[n-1];for(let a=n-3;a>=0;--a)s[a]=`(${s[a+1]} * ${r[a+1]})`;return s}(e.map(((e,t)=>t)),t);return r.map(((t,s)=>`${`int ${e[s]} = ${n} / ${r[s]}`}; ${s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${r[s]}`:`index -= ${e[s]} * ${r[s]}`};`)).join("")}function $5(e){const t=ZT(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}O5.registerFlag("HAS_WEBGL",(()=>O5.getNumber("WEBGL_VERSION")>0)),O5.registerFlag("WEBGL_VERSION",(()=>C5(2)?2:C5(1)?1:0)),O5.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),O5.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===O5.get("WEBGL_VERSION"))),O5.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),O5.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),O5.registerFlag("WEBGL_PACK",(()=>O5.getBool("HAS_WEBGL"))),O5.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_CLIP",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_REDUCE",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_LAZILY_UNPACK",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_CONV_IM2COL",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>O5.getBool("WEBGL_PACK"))),O5.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>x5(O5.getNumber("WEBGL_VERSION")))),O5.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>T5(O5.getNumber("WEBGL_VERSION")))),O5.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=O5.getNumber("WEBGL_VERSION");return 0===e?0:E5(e)})),O5.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>O5.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!nA())),O5.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>I5(O5.getNumber("WEBGL_VERSION")))),O5.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!O5.getBool("WEBGL_FORCE_F16_TEXTURES")&&O5.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),O5.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>_5(O5.getNumber("WEBGL_VERSION")))),O5.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>R5(O5.getNumber("WEBGL_VERSION")))),O5.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>O5.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),O5.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),O5.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>nA()?1:-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),O5.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),O5.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),O5.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),O5.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),O5.registerFlag("WEBGL_EXP_CONV",(()=>!1)),O5.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>O5.getBool("IS_TEST"))),O5.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),O5.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),O5.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),O5.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const z5="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:j5}=m;function U5(e,t,n){const r=[];if(e.forEach((e=>{const t=CT(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=J5(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const s=r.join("\n"),a=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,s="";s+=n?V5(e,r):B5(e,r);const a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(s+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,o=j5(e.shapeInfo.logicalShape,t.logicalShape),l=Q5(i),c=i-a;let u;const h=["x","y","z","w","u","v"];u=0===a?"":i<2&&o.length>=1?"coords = 0;":o.map((e=>`coords.${h[e+c]} = 0;`)).join("\n");let d="";d=i<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+c]}`)).join(", ");let p="return outputValue;";const f=1===CT(e.shapeInfo.logicalShape),m=CT(t.logicalShape),g=1===m;if(1!==a||f||g){if(f&&!g)p=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){const e=a-2,t=a-1;o.indexOf(e)>-1&&o.indexOf(t)>-1?p="return vec4(outputValue.x);":o.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&AT(i,a))return`\n      float ${s}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const c=Q5(l),u=j5(e.shapeInfo.logicalShape,t.logicalShape),h=l-o;let d;const p=["x","y","z","w","u","v"];d=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map((e=>`coords.${p[e+h]} = 0;`)).join("\n");let f="";f=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+h]}`)).join(", ");return`\n    float ${s}() {\n      ${c} coords = getOutputCoords();\n      ${d}\n      return get${r}(${f});\n    }\n  `}(e,t));return s}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,o=M5(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(o);let c,u,h=function(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${W5}\n    ${H5}\n    ${G5}\n  `;return t}(o);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return K5();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(AT(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const s=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],s=Math.ceil(e[2]/2),a=s*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],s=Math.ceil(e[e.length-1]/2),a=s*Math.ceil(e[e.length-2]/2);let i=a,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)i*=e[e.length-c-1],o=`\n      int b${c} = index / ${i};\n      index -= b${c} * ${i};\n    `+o,l=`b${c}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(o)):(c=function(e,t,n){switch(e.length){case 0:return K5();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(AT(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${L5(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=P5(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${L5(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=P5(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=P5(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=P5(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(o)),n.packedInputs&&(h+=q5);return[h,l,u,s,c,a,n.userCode].join("\n")}function B5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,a]=e.shapeInfo.texShape;if(1===s&&1===a)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const i=Y5(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[o,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${o}, ${l}, ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${X5(e)}\n      }\n    `;const s=e.shapeInfo.texShape,a=s[0],i=s[1];if(1===i&&1===a)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const o=Y5(n);if(1===i)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===a)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${i}, index + ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&AT(n,a)){if(t)return`\n      float ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=a[0];return`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:i,keptDims:o}=zT(n),l=i;if(l.length<n.length){const n=["row","col"];return`\n      ${B5(Z5(e,l),t)}\n      float ${s}(int row, int col) {\n        return ${s}(${e8(n,o)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${X5(e)}\n      }\n    `;const c=a[0],u=a[1],h=Y5(r);if(1===u)return t?`\n      float ${s}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===c)return t?`\n      float ${s}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${s}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${c}, ${u}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:o,keptDims:l}=zT(n),c=o;if(c.length<n.length){const n=["row","col","depth"];return`\n        ${B5(Z5(e,c),t)}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${e8(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${i}, 1)));\n        ${X5(e)}\n      }\n    `;const u=e.shapeInfo.texShape,h=u[0],d=u[1],p=e.shapeInfo.flatOffset;if(d===a&&null==p)return t?`\n      float ${s}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${i}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===i&&null==p)return t?`\n      float ${s}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=Y5(r);if(t)return`\n    float ${s}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${i} + depth + ${f};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,o=n[1]*i,{newShape:l,keptDims:c}=zT(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${B5(Z5(e,l),t)}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${e8(n,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${o}, ${i}, ${a}, 1)));\n        ${X5(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(p===o&&null==u)return t?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${i}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(p===a&&null==u)return t?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const y=Y5(r);if(t)return`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${i} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${p}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t[4],a=t[3]*s,i=t[2]*a,o=t[1]*i,{newShape:l,keptDims:c}=zT(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${B5(Z5(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${e8(t,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${o}, ${i}, ${a}, ${s})) +\n          depth3;\n        ${X5(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===o&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${a}, ${s}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===s&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=Y5(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${i} + depth * ${a} +\n          depth2 * ${s} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:a}=zT(t);if(s.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${B5(Z5(e,s))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${e8(t,a)});\n      }\n    `}const i=t[5],o=t[4]*i,l=t[3]*o,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${c}, ${l}, ${o})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${X5(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===u&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${l}, ${o}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===i&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=Y5(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${c} + depth * ${l} +\n          depth2 * ${o} + depth3 * ${i} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function V5(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=M5();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e.shapeInfo.texShape,a=M5();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=a[0],o=a[1],l=M5();if(null!=a&&AT(n,a))return t?`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${s}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Math.ceil(n[1]/2);return`\n    vec4 ${s}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=[1,2],a=["b","row","col"];return`\n        ${V5(Z5(e,n.slice(1)),t)}\n        vec4 ${s}(int b, int row, int col) {\n          return ${s}(${e8(a,r)});\n        }\n      `}const o=M5();if(t)return`\n    vec4 ${s}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `;const l=i[0],c=i[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return`\n    vec4 ${s}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${c}, ${h}, ${u}, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=M5();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,i=a.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],h=Math.ceil(a[i-1]/2);let d=h*Math.ceil(a[i-2]/2),p="int b, int row, int col",f=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let m=2;m<i-1;m++)p=`int b${m}, `+p,d*=a[i-m-1],f=`b${m} * ${d} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});\n      return ${s.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const W5="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",H5="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",G5="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",q5="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function K5(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function Y5(e){return`offset${e}`}function X5(e){const t=e.name,n=CT(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function Q5(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function J5(e,t,n){const{newShape:r,keptDims:s}=zT(t),a=t.length,i=e&&3===a&&1===t[0],o=i?t.slice(1):r,l=!e&&a>1&&!AT(t,n)&&r.length<a||i;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:s}}function Z5(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function e8(e,t){return t.map((t=>e[t])).join(", ")}function t8(e,t,n){const r=[],s=[];let a,i,o,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===pE().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of t.variableNames){const s={name:h,uniform:e.getUniformLocation(n,h,u),offset:e.getUniformLocation(n,`offset${h}`,u)};t.enableShapeUniforms&&(s.shape=e.getUniformLocation(n,`${h}Shape`,u),s.texShape=e.getUniformLocation(n,`${h}TexShape`,u)),r.push(s)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",u),o=e.getUniformLocation(n,"outShapeStrides",u),i=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const h of t.customUniforms)s.push(e.getUniformLocation(n,h.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:i}}function n8(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,s=t[n],a=s.shape;if(!AT(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(e.isUniform&&s.isUniform)return;const i=e.texShape,o=s.isUniform?null:s.texData.texShape;if(!AT(i,o))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${o} must match`)}))}function r8(e){return pE().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class s8{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=I6.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=M5();this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?L5(["r","c","d"],e):P5(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class a8{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=I6.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=M5();this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?L5(["r","c","d"],e):P5(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class i8{constructor(e){this.variableNames=["A"],this.outTexUsage=_6.DOWNLOAD;const t=M5();this.outputShape=e,this.userCode=`\n      ${z5}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class o8{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=_6.DOWNLOAD;const t=M5();this.outputShape=e,this.userCode=`\n      ${z5}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const l8={R:0,G:1,B:2,A:3};class c8{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=M5();this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length);let s="result";t&&(s="floor(result * 255. + 0.5)");let a="";for(let i=0;i<n.length;i++){const e=n[i];a+=`\n          if(offset == ${i}) {\n            result = values[${l8[e]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":$5(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${a}\n        }\n        ${r.output} = vec4(${s}, 0., 0., 0.);\n      }\n    `}}class u8{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=M5();this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length);let r="",s="result";t&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let t=0;t<=1;t++){const s=2*a+t;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${a};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${s}] = values[0];\n            } else if (offset == 1) {\n              result[${s}] = values[1];\n            } else if (offset == 2) {\n              result[${s}] = values[2];\n            } else {\n              result[${s}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":$5(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${s};\n        }\n    `}}function h8(e){const t=M5();return U6(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function d8(e){return K6(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function p8(e){return Y6(e,new Uint16Array([0,1,2,2,1,3]))}function f8(e,t,n,r,s,a){J6(t,n);const i=Q6(e),o=e.TEXTURE_2D;return P6(e,(()=>e.bindTexture(o,i))),P6(e,(()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),P6(e,(()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),P6(e,(()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST))),P6(e,(()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===pE().getNumber("WEBGL_VERSION")?P6(e,(()=>e.texImage2D(o,0,r,t,n,0,s,a,null))):P6(e,(()=>e.texStorage2D(o,1,r,t,n))),P6(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function m8(e){return e.internalFormatFloat}function g8(e,t,n,r){const[s,a]=R6(t,n);return f8(e,s,a,m8(r),r.textureFormatFloat,e.FLOAT)}function y8(e){return e.internalFormatHalfFloat}function v8(e,t,n,r){const[s,a]=R6(t,n);return f8(e,s,a,y8(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function b8(e){return e.downloadTextureFormat}function w8(e,t,n,r){const[s,a]=R6(t,n);return f8(e,s,a,b8(r),e.RGBA,e.UNSIGNED_BYTE)}function x8(e){return e.internalFormatPackedFloat}function k8(e,t,n,r){const[s,a]=O6(t,n);return f8(e,s,a,x8(r),e.RGBA,e.FLOAT)}function S8(e){return e.internalFormatPackedHalfFloat}function T8(e,t,n,r){const[s,a]=O6(t,n);return f8(e,s,a,S8(r),e.RGBA,r.textureTypeHalfFloat)}function E8(e,t,n){P6(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n)));return e5(e,t,"clipSpacePos",n,3,20,0)&&e5(e,t,"uv",n,2,20,12)}function N8(e,t,n,r,s,a){let i,o,l;P6(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),s instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*r*4),o=e.FLOAT,l=a.internalFormatPackedFloat),i.set(s),2===pE().getNumber("WEBGL_VERSION")?P6(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,i))):P6(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,i))),P6(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function C8(e,t,n){P6(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===pE().getNumber("WEBGL_VERSION")?P6(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):P6(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===pE().getNumber("WEBGL_VERSION")?P6(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):P6(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),P6(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function I8(e,t,n,r){const s=e.createBuffer();P6(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,s)));const a=16*t*n;return P6(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ))),P6(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),P6(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),s}function _8(e,t,n){const r=e,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function A8(e,t,n,r){const[s,a]=R6(t,n),i=new Uint8Array(t*n*4);return P6(e,(()=>e.readPixels(0,0,s,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}function R8(e,t,n,r,s,a,i,o){const l=e,c=new Float32Array(function(e,t){const[n,r]=O6(e,t);return n*r*4}(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function D8(e,t,n){const r=new Float32Array(t*n*4);return P6(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}class O8{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=pE().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,N6(t,e)):this.gl=C6(t),e=this.gl,2===pE().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>P6(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>P6(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>P6(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>P6(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>P6(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>P6(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>P6(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>P6(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===pE().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=j6(this.gl,e),N5(this.gl,t))this.textureHalfFloatExtension=j6(this.gl,t);else if(pE().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),N5(this.gl,r))this.colorBufferHalfFloatExtension=j6(this.gl,r);else if(pE().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",N5(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!N5(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=d8(this.gl),this.indexBuffer=p8(this.gl),this.framebuffer=Z6(this.gl),this.textureConfig=M6(this.gl,this.textureHalfFloatExtension)}get debug(){return pE().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;P6(e,(()=>e.finish())),P6(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),P6(e,(()=>e.deleteFramebuffer(this.framebuffer))),P6(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),P6(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),P6(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),g8(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),v8(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),w8(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),C8(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),N8(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),T8(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),k8(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(l5(this.gl,this.framebuffer),this.outputTexture=null),P6(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>A8(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,s,a){return R8(this.gl,e,0,0,0,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return _8(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=I8(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(pE().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,s=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(s,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=s}else pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>D8(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=h8(t));const n=H6(t);P6(t,(()=>t.attachShader(n,this.vertexShader))),P6(t,(()=>t.attachShader(n,e))),G6(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&q6(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;P6(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),E8(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(P6(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&q6(this.gl,this.program),P6(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?r5(this.gl,e,t):s5(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),P6(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),a5(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,s]=O6(t,n);this.setOutputMatrixTextureDriver(e,r,s)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&q6(this.gl,this.program),c5(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}P6(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),P6(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=j6(this.gl,2===pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await LT((()=>this.disposed||this.isQueryAvailable(e,pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in pE().platform&&(n=pE().platform.setTimeoutCustom.bind(pE().platform)),LT((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),o5(this.gl,e,this.framebuffer),this.debug&&c5(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(o5(this.gl,this.outputTexture,this.framebuffer),this.debug&&c5(this.gl)):l5(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;o5(r,e,this.framebuffer),this.debug&&c5(r),this.outputTexture=e,P6(r,(()=>r.viewport(0,0,t,n))),P6(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),P6(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:M8,bincountImpl:P8,bincountReduceImpl:L8,bitwiseAndImpl:F8,castImpl:$8,ceilImpl:z8,concatImpl:j8,equalImpl:U8,expImpl:B8,expm1Impl:V8,floorImpl:W8,gatherNdImpl:H8,gatherV2Impl:G8,greaterImpl:q8,greaterEqualImpl:K8,lessImpl:Y8,lessEqualImpl:X8,linSpaceImpl:Q8,logImpl:J8,maxImpl:Z8,maximumImpl:e9,minimumImpl:t9,multiplyImpl:n9,negImpl:r9,notEqualImpl:s9,prodImpl:a9,raggedGatherImpl:i9,raggedRangeImpl:o9,raggedTensorToTensorImpl:l9,rangeImpl:c9,rsqrtImpl:u9,scatterImpl:h9,sigmoidImpl:d9,simpleAbsImpl:p9,sliceImpl:f9,sparseFillEmptyRowsImpl:m9,sparseReshapeImpl:g9,sparseSegmentReductionImpl:y9,sqrtImpl:v9,staticRegexReplaceImpl:b9,stridedSliceImpl:w9,stringNGramsImpl:x9,stringSplitImpl:k9,stringToHashBucketFastImpl:S9,subImpl:T9,tileImpl:E9,topKImpl:N9,transposeImpl:C9,uniqueImpl:I9}=H;function _9(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function A9(e,t){return 1===t?[e]:_9(e,t)}class R9{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=r8(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=A9("rc",this.rank),t=Q5(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),s=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${s}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let s=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)s=`${e[e.length-1-t]},`+s;t.push(s)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class D9{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length);let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2===1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${a}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${a>0?"}":""}\n      `}var r,s;this.userCode=`\n      ${r=t,s=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${s?F5(["r","c","d"],"inputShape"):P5(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":$5(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class O9{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=P9(t,n),s=L9(e,r,n);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=M9(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[s].pop();return this.usedTextures[s].push(e),e}let i;return r===A6.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===A6.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===A6.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===A6.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===A6.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const s=P9(n,r),a=L9(t,s,r);a in this.freeTextures||(this.freeTextures[a]=[]);const i=M9(t,s,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=pE().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[a],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function M9(e,t,n,r,s){const a=function(e,t){switch(e){case A6.PACKED_2X2_FLOAT32:return x8(t);case A6.PACKED_2X2_FLOAT16:return S8(t);case A6.UNPACKED_FLOAT32:return m8(t);case A6.UNPACKED_FLOAT16:return y8(t);case A6.PACKED_4X1_UNSIGNED_BYTE:return b8(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let i;if(s){const[t,n]=O6(e[0],e[1]);i=t*n}else{const[t,n]=R6(e[0],e[1]);i=t*n}const o=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,a);return i*o}function P9(e,t){if(e===_6.UPLOAD)return A6.PACKED_2X2_FLOAT32;if(e===_6.RENDER||null==e)return function(e){return pE().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?A6.PACKED_2X2_FLOAT32:A6.UNPACKED_FLOAT32:e?A6.PACKED_2X2_FLOAT16:A6.UNPACKED_FLOAT16}(t);if(e===_6.DOWNLOAD||e===_6.PIXELS)return A6.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function L9(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class F9{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const $9="if (isnan(x)) return x;",z9="return abs(x);";const j9=$9+"\n  return (x < 0.0) ? 0.0 : x;\n",U9=$9+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",B9="return x;";class V9{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class W9{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length);const t=e.length,n=A9("rc",t),r=Q5(t),s=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${s});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}const H9=LF,G9={};const q9=pE().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class K9 extends fT{nextDataId(){return K9.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!pE().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof O8)t=e;else{const n=C6(pE().getNumber("WEBGL_VERSION"),e);t=new O8(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=C6(pE().getNumber("WEBGL_VERSION"));t=new O8(e),this.binaryCache=((n=pE().getNumber("WEBGL_VERSION"))in G9||(G9[n]={}),G9[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new O9(this.gpgpu),this.numMBBeforeWarning=null==pE().global.screen?1024:pE().global.screen.height*pE().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new pT(this,kA())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,s,a){const i=this.makeTensorInfo(t,n),o=this.texData.get(i.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[r,s]},o.texShape=[r,s];const l=m5(t),c=new c8(l,!1,a),u=this.runWebGLProgram(c,[i],n,[[r,s]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(i),u.dataId}write(e,t,n){if((pE().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||pE().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:_6.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,s){if(pE().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:_6.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:s,slice:a,shape:i,isPacked:o}=t;if(null!=a){let t;t=o?new V9(i,B9):new F9(i,B9);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),s=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),s}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=d_()),"complex64"===r){u=Oz(this.readSync(s.real.dataId),this.readSync(s.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=d_()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:s,dtype:a,complexTensorInfos:i,isPacked:o}=t;if(null!=s){let t;t=o?new V9(r,B9):new F9(r,B9);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:a}],a),s=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),s}if(null!=n)return this.convertAndCacheOnCPU(e);if(pE().getBool("DEBUG")&&!pE().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===pE().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==a&&pE().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...D6(r))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);c=Oz(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=CT(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;P6(e,(()=>e.deleteBuffer(u)))}const h=this.convertAndCacheOnCPU(e,c),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(h))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&kA().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:s,slice:a,dtype:i,isPacked:o,texture:l}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let n;n=o?new V9(s,B9):new F9(s,B9);const r=this.runWebGLProgram(n,[{dataId:e,shape:s,dtype:i}],i),a=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),a}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=kA().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:u},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>m_(e)));return jR(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return jR(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!$6(n)){if(pE().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),s=CT(t);if(pE().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...D6(t)).subarray(0,s);return this.disposeIntermediateTensorInfo(n),a}const a=pE().getBool("WEBGL_PACK")&&!0===r,i=a?m5(t):t,o=a?new o8(i):new i8(i),l=this.runWebGLProgram(o,[{shape:i,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const s=y_(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=y_(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(s);i.kernelMs=xT(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:d_(),endMs:null}}endTimer(e){return pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=d_(),e)}async getQueryTime(e){if(pE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:s,isPacked:a,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,s,a)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q9;return pE().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&CT(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){LI("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return H9(e.shape,t)}packedUnaryOp(e,t,n){const r=new V9(e.shape,t),s=this.compileAndRun(r,[e],n);return kA().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=p9(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(pE().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,z9,e.dtype);const t=new F9(e.shape,z9),n=this.compileAndRun(t,[e]);return kA().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&qT(n[0])){const s=n.map((e=>f_(e)));r=this.write(s,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return kA().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new W9(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new R9(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[p5(e.shape),...f5(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},s=[p5(t),...f5(t)],a=new D9(s,n),i=[n],o=this.runWebGLProgram(a,[r],e.dtype,i,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:s,dtype:a}=n;if(null!=t){TT(CT(s)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const i=m5(s);let o;o=r?new a8(i):new s8(i);const l=[null!=t?t:D6(i)];return{dtype:a,shape:s,dataId:this.runWebGLProgram(o,[{shape:i,dtype:a,dataId:e}],a,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(i.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===I6.DENSE){const t=null!=a?a:D6(e.outputShape);o.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===CT(i.shape))return o.values=jT(i.dtype,0),i;const l=[],c=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&CT(t.shape)<=pE().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!v5(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const u={shape:i.shape,texData:o,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach((t=>{const s=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:i,uniformShape:o,keptDims:l}=J5(e.packedInputs,t.shape,a);let c="",u="",h="";if(1===o.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];c=`${e[0]>1}_${e[1]>1}`}else if(2!==o.length||e.packedInputs){if(o.length>2&&!e.packedInputs){const e=ZT(o);h=`${e[0]===a[1]}_${e[e.length-1]===a[1]}`}}else u=`${o[0]>1}_${o[1]>1}`;const d=t.shape.length,p=2===o.length&&AT(t.shape,a),f=1===CT(t.shape),m=bD(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&AT(a,n.texData.texShape),y=e.packedInputs||o.length>2?"":`${a[0]>1}_${a[1]>1}`;r+=`${d}_${g}_${i?l:""}_${o.length}_${f}_${m}_${p}_${c}_${u}_${h}_${y}_${s}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${s}`}}));const s=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+s+`${pE().getNumber("WEBGL_VERSION")}`,a}(e,c,u),d=this.getAndSaveBinary(h,(()=>function(e,t,n,r){const s=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=s.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=U5(s,i,t),l=B6(e.gl,o),c=e.createProgram(l);return pE().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:i},t8(e,t,c)))}(this.gpgpu,e,c,u))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),pE().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,s){t.program.enableShapeUniforms||(n8(t.inShapeInfos,n),n8([t.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):e.setOutputMatrixTexture(a.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===pE().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:s,offset:a,shape:i,texShape:o}=t.variablesLocations[l];if(i){const{uniformShape:n}=J5(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(o&&e.gl.uniform2i(o,r.texData.texShape[0],r.texData.texShape[1]),null!=s)if(r.isUniform)if(CT(r.shape)<2)e.gl.uniform1f(s,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}else null!=r.texData.slice&&null!=a&&e.gl.uniform1i(a,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,s,l)}const o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=ZT(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&s)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],a=s[l];if("float"===n.type)e.gl.uniform1fv(r,a);else if("vec2"===n.type)e.gl.uniform2fv(r,a);else if("vec3"===n.type)e.gl.uniform3fv(r,a);else if("vec4"===n.type)e.gl.uniform4fv(r,a);else if("int"===n.type)e.gl.uniform1iv(r,a);else if("ivec2"===n.type)e.gl.uniform2iv(r,a);else if("ivec3"===n.type)e.gl.uniform3iv(r,a);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(r,a)}}e.executeProgram()}(this.gpgpu,d,c,u,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=pE().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=d_();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!pE().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===s){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,s)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!pE().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=EA((()=>{if(!pE().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=pE().getBool("DEBUG");pE().set("DEBUG",!1);const t=this.abs(sD(1e-8)).dataSync()[0];if(pE().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:s,texture:a,usage:i,isPacked:o}=t;if(null!=a)return;const l=null!=this.activeTimers;let c;l&&(c=d_());let u=t.texShape;if(null==u&&(u=g5(n,o),t.texShape=u),null!=s){const e=m5(n);let a,i=u[1],h=u[0];const d=s instanceof Uint8Array||s instanceof Uint8ClampedArray;!o&&d||([i,h]=O6(u[0],u[1])),a=o?new u8(e,d):new c8(e,d);const p=d?[h,i]:u,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=d?_6.PIXELS:_6.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,h,s);const g=[[h,i]],y=!0,v=this.runWebGLProgram(a,[f],r,g,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,pE().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=d_()-c)}else{const e=this.acquireTexture(u,i,r,o);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*HT(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await cz(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw W6(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:i,outTexShapeLocation:o}=t8(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=i,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:s,width:a,channels:i}=e,o=kA().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=o.writeTexture(r,t,n,s,a,i);return kA().makeTensorFromDataId(l,t,n,o)}}K9.nextDataId=0;const Y9="4.22.0";function X9(){pE().set("WEBGL_FORCE_F16_TEXTURES",!0)}rA()&&PA("webgl",(()=>new K9),2);const Q9={forceHalfFloat:X9},J9="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class Z9{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=xD(t,n),this.enableShapeUniforms=r8(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const e7="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class t7{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=xD(t,n);const s=this.outputShape.length;this.enableShapeUniforms=r8(s);let a="";if(r)if(0===s||1===CT(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(a=`\n          ${Q5(s)} coords = getOutputCoords();\n        `,1===s)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=A9("coords",s);this.enableShapeUniforms?a+=`\n            bool nextRowOutOfBounds =\n              (${e[s-2]} + 1) >= outShape[${s} - 2];\n            bool nextColOutOfBounds =\n              (${e[s-1]} + 1) >= outShape[${s} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:a+=`\n            bool nextRowOutOfBounds =\n              (${e[s-2]} + 1) >= ${this.outputShape[s-2]};\n            bool nextColOutOfBounds =\n              (${e[s-1]} + 1) >= ${this.outputShape[s-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}function n7(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const r7={kernelName:MN,backendName:"webgl",kernelFunc:n7};function s7(e){const{inputs:t,backend:n}=e,{real:r,imag:s}=t,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),o=n7({inputs:{x:r},backend:n}),l=n7({inputs:{x:s},backend:n});return i.complexTensorInfos={real:o,imag:l},a}const a7={kernelName:HE,backendName:"webgl",kernelFunc:s7},i7="return (a < 0.) ? b * a : a;",o7="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const l7={kernelName:jN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{alpha:a}=r,i=n.makeTensorInfo([],"float32",u_(a,"float32")),o=pE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t7(o7,s.shape,i.shape):new Z9(i7,s.shape,i.shape),l=n.runWebGLProgram(o,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),l}},c7="return (a < 0.) ? b * a : a;",u7="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const h7={kernelName:NC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:s}=t,a=pE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t7(u7,r.shape,s.shape):new Z9(c7,r.shape,s.shape);return n.runWebGLProgram(a,[r,s],"float32")}},d7="if (isnan(x)) return x;";function p7(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:s}=e;return e=>{let{inputs:a,backend:i}=e;const{x:o}=a,l=i,c=s||o.dtype;if(l.shouldExecuteOnCPU([o])&&null!=r){const e=l.texData.get(o.dataId),t=r(e.values,c);return l.makeTensorInfo(o.shape,c,t)}let u;return u=pE().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new V9(o.shape,n):new F9(o.shape,t),l.runWebGLProgram(u,[o],c)}}function f7(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:s=!1,cpuKernelImpl:a,dtype:i}=e;return e=>{let{inputs:o,backend:l}=e;const{a:c,b:u}=o,h=l;if(s&&"complex64"===c.dtype){const e=h.texData.get(c.dataId),n=h.texData.get(u.dataId),[r,s]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,s={dataId:n.dataId,dtype:n.dtype,shape:c.shape},a={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i=new Z9(t,c.shape,u.shape);return h.runWebGLProgram(i,[s,a],z_(n.dtype,r.dtype))})),a=s7({inputs:{real:r,imag:s},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(s),a}const d=i||z_(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([c,u]))&&null!=a){const e=h.texData.get(c.dataId).values,t=h.texData.get(u.dataId).values,n="string"===c.dtype?pj(e):e,r="string"===c.dtype?pj(t):t,[s,i]=a(c.shape,u.shape,n,r,d),o=h.makeTensorInfo(i,d);return h.texData.get(o.dataId).values=s,o}let p;return p=pE().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new t7(n,c.shape,u.shape,r):new Z9(t,c.shape,u.shape),h.runWebGLProgram(p,[c,u],d)}}function m7(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":j9;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":U9;if("prelu"===e)return t?u7:c7;if("leakyrelu"===e)return t?o7:i7;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class g7{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=r8(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=s?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";i&&(m=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,g="result = activation(result);");const y=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(b=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${v};\n        int batchB = ${b};\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const y7="return areal * breal - aimag * bimag;",v7="return areal * bimag + aimag * breal;";class b7{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=xD(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const w7="return a * b;";function x7(e){const{inputs:t,backend:n}=e,{a:r,b:s}=t,a=z_(r.dtype,s.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(s.dataId),a=new b7(y7,r.shape,s.shape),i=new b7(v7,r.shape,s.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:s.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:s.shape}],l=n.runWebGLProgram(a,o,"float32"),c=n.runWebGLProgram(i,o,"float32"),u=s7({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,s])){const e=n.texData.get(r.dataId),t=n.texData.get(s.dataId),[i,o]=n9(r.shape,s.shape,e.values,t.values,a),l=n.makeTensorInfo(o,a);return n.texData.get(l.dataId).values=i,l}let i;return i=pE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t7(w7,r.shape,s.shape):new Z9(w7,r.shape,s.shape),n.runWebGLProgram(i,[r,s],a)}const k7={kernelName:fC,backendName:"webgl",kernelFunc:x7};function S7(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{shape:a}=r,i=n,o=CT(s.shape),l=FT(a,o),c=CT(l);TT(o===c,(()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`));const u=i.texData.get(s.dataId);return!u.isPacked||v5(s.shape,l)||null!==u.texture&&v5(u.shape,l)?(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype}):function(e,t,n){const r=[p5(e.shape),...f5(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},a=[p5(t),...f5(t)],i=new D9(a,r),o=[r],l=n.runWebGLProgram(i,[s],e.dtype,o,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(s,l,i)}const T7={kernelName:PC,backendName:"webgl",kernelFunc:S7};class E7{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:s,outSize:a}=e;this.outputShape=[r,a];const i=4*Math.floor(n/4),o=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${RT(e)?e.toPrecision(2):e}, ones);`}let c="";s%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===o}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class N7{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:s,outSize:a}=e;this.outputShape=[r,a];let i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let h=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(i="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(i="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";s%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}function C7(e,t,n,r){const s=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=vz(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let a=e;for(let i=0;i<s.length;i++){const{inSize:o,windowSize:l,outSize:c}=s[i];let u,h;u="mean"===n?0===i?new E7({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},o):new E7({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c}):new N7({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},n),h=a,a=r.runWebGLProgram(u,[a],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return a}class I7{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.rank=n.length;const r=Q5(this.rank),s=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let s=0;s<e.length;s++)r[e[s]]=n[s];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${s}));\n    }\n    `}}class _7{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Q5(this.rank),s=_9("rc",this.rank),a=new Array(this.rank);for(let c=0;c<t.length;c++)a[t[c]]=s[c];const i=`vec2(${a.slice(-2).join()})`,o=`++${s[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${a.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${o}) {\n        result[1] = ${l};\n      }\n      --${s[this.rank-1]};\n      if(++${s[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${o}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function A7(e,t,n){const r=pE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _7(e.shape,t):new I7(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function R7(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r;return function(e,t,n,r){const s=t,a=e.shape.length,i=$T(s,e.shape);let o=i;const l=xP(o,a),c=null!=l;let u=e;c&&(u=A7(e,l,r),o=SP(o.length,a)),wP("sum",o,a);const[h,d]=vP(u.shape,o);let p=h;n&&(p=bP(h,i));const f=CT(d),m=S7({inputs:{x:u},attrs:{shape:[CT(e.shape)/f,f]},backend:r}),g=C7(m,j_(e.dtype),"sum",r),y=S7({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(u),y}(s,a,i,n)}const D7={kernelName:nI,backendName:"webgl",kernelFunc:R7};function O7(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{perm:a}=r,i=n,o=s.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=s.shape[a[u]];let c;if(i.shouldExecuteOnCPU([s])){const e=i.texData.get(s.dataId).values,t=C9(e,s.shape,s.dtype,a,l);c=i.makeTensorInfo(l,s.dtype);i.texData.get(c.dataId).values=t}else c=A7(s,a,i);return c}const M7={kernelName:TI,backendName:"webgl",kernelFunc:O7};function P7(e){let{a:t,b:n,transposeA:r,transposeB:s,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,h=n.shape.length,d=r?t.shape[u-2]:t.shape[u-1],p=s?n.shape[h-1]:n.shape[h-2],f=r?t.shape[u-1]:t.shape[u-2],m=s?n.shape[h-2]:n.shape[h-1],g=t.shape.slice(0,-2),y=n.shape.slice(0,-2),v=CT(g),b=CT(y),w=xD(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);TT(d===p,(()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${r} and transposeB=${s} must match.`));const x=r?[v,d,f]:[v,f,d],k=s?[b,m,p]:[b,p,m],S=S7({inputs:{x:t},backend:a,attrs:{shape:x}}),T=S7({inputs:{x:n},backend:a,attrs:{shape:k}}),E=[S,T],N=Math.max(v,b),C=r?S.shape[1]:S.shape[2],I=null!=i,_=null!=o,A="leakyrelu"===c,R=null!=c?m7(c,!0):null;let D;if((1===f||1===m)&&C>1e3&&!1===(I||_||A||null!=R)){let e=S,t=T;r&&(e=O7({inputs:{x:S},backend:a,attrs:{perm:[0,2,1]}}),E.push(e)),s&&(t=O7({inputs:{x:T},backend:a,attrs:{perm:[0,2,1]}}),E.push(t));const n=1===m;let i=e;1!==m&&(i=S7({inputs:{x:e},backend:a,attrs:{shape:[N,C,1]}}),E.push(i));const o=1===m?2:1;let l=t;n&&(l=S7({inputs:{x:t},backend:a,attrs:{shape:[N,1,C]}}),E.push(l));const c=x7({inputs:{a:i,b:l},backend:a});D=R7({inputs:{x:c},backend:a,attrs:{axis:o,keepDims:!0}}),E.push(c)}else{const e=z_(t.dtype,n.dtype),c=new g7(x,k,[N,f,m],r,s,I,R,_,A),u=[S,T];if(null!=i&&u.push(i),_&&u.push(o),A){const e=a.makeTensorInfo([],"float32",u_(l,"float32"));u.push(e),E.push(e)}D=a.runWebGLProgram(c,u,e)}const O=S7({inputs:{x:D},backend:a,attrs:{shape:w}});E.push(D);for(const M of E)a.disposeIntermediateTensorInfo(M);return O}const L7={kernelName:OI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:a,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return P7({a:s,b:a,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:h,activation:u})}},F7="return abs(x);";const $7={kernelName:vE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=p9(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let s;return s=pE().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new V9(r.shape,F7):new F9(r.shape,F7),n.runWebGLProgram(s,[r],r.dtype)}},z7=p7({opSnippet:$9+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),j7={kernelName:bE,backendName:"webgl",kernelFunc:z7},U7=p7({opSnippet:$9+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),B7={kernelName:wE,backendName:"webgl",kernelFunc:U7},V7="return a + b;",W7=f7({opSnippet:V7,packedOpSnippet:V7,supportsComplex:!0,cpuKernelImpl:M8}),H7={kernelName:xE,backendName:"webgl",kernelFunc:W7};class G7{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class q7{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const K7={kernelName:kE,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,s=n;if(1===s.length)return n7({inputs:{x:s[0]},backend:r});if(s.length>pE().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(s.length/2),n=e({inputs:s.slice(0,t),backend:r}),a=e({inputs:s.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const a=s.map((e=>e.dtype)).reduce(((e,t)=>z_(e,t))),i=s.map((e=>e.shape)),o=pE().getBool("WEBGL_PACK")?new q7(s[0].shape,i):new G7(s[0].shape,i);return r.runWebGLProgram(o,s,a)}};const Y7={kernelName:SE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r,o=s.shape.length,l=$T(a,s.shape);let c=l;const u=xP(c,o);let h=s;null!=u&&(h=O7({inputs:{x:s},backend:n,attrs:{perm:u}}),c=SP(c.length,o)),wP("all",c,o);const[d,p]=vP(h.shape,c),f=S7({inputs:{x:h},backend:n,attrs:{shape:[-1,CT(p)]}}),m=C7(f,f.dtype,"all",n);let g;if(i){g=S7({inputs:{x:m},backend:n,attrs:{shape:bP(d,l)}})}else g=S7({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};const X7={kernelName:TE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r,o=s.shape.length,l=$T(a,s.shape);let c=l;const u=xP(c,o);let h=s;null!=u&&(h=O7({inputs:{x:s},backend:n,attrs:{perm:u}}),c=SP(c.length,o)),wP("any",c,o);const[d,p]=vP(h.shape,c),f=S7({inputs:{x:h},backend:n,attrs:{shape:[-1,CT(p)]}}),m=C7(f,f.dtype,"any",n);let g;if(i){g=S7({inputs:{x:m},backend:n,attrs:{shape:bP(d,l)}})}else g=S7({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};class Q7{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:s,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const i="max"===t?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${o};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${i} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class J7{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,TT(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const s=e[e.length-1],a=Math.ceil(s/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,o=i.length,l=Q5(o),c=A9("coords",o);let u,h;if(1===a){h=o+1;const e=Q5(h);u=`\n        ${e} sourceLocR = ${e}(${c.join()}, 0);\n        ++${c[o-1]};\n        ${e} sourceLocG = ${e}(${c.join()}, 0);\n        ++${c[o-2]};\n        ${e} sourceLocA = ${e}(${c.join()}, 0);\n        --${c[o-1]};\n        ${e} sourceLocB = ${e}(${c.join()}, 0);\n        --${c[o-2]};`}else h=o,u=`\n        ${l} sourceLocR = coords;\n        ++${c[o-1]};\n        ${l} sourceLocG = coords;\n        ++${c[o-2]};\n        ${l} sourceLocA = coords;\n        --${c[o-1]};\n        ${l} sourceLocB = coords;\n        --${c[o-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map((e=>"int "+e)),m=A9("sourceLocR",h-1).concat("inIdx.r"),g=A9("sourceLocG",h-1).concat("inIdx.g"),y=A9("sourceLocB",h-1).concat("inIdx.b"),v=A9("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${c[o-1]} < ${i[o-1]-1};\n        bool hasNextRow = ${c[o-2]} < ${i[o-2]-1};\n        ${u}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function Z7(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=t.shape[0],a=t.shape[1];null!=r&&(s=r.shape[0],a=r.shape[1]);const i=vz(a),o={windowSize:i,inSize:a,batchSize:s,outSize:Math.ceil(a/i)},l=new Q7(o,n,null==r),c=[t];null!=r&&c.push(r);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const h=Z7(e,t,n,u);return e.disposeIntermediateTensorInfo(u),h}function eee(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=null!=r?r.shape:t.shape,a=vz(s[s.length-1]),i=new J7(s,a,n,null==r),o=null==r?[t]:[t,r],l=e.runWebGLProgram(i,o,"int32");if(l.shape.length===t.shape.length){const r=eee(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function tee(e,t,n,r){const s=[n];if(wP("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,t.shape.length),!pE().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],a=e.texData.get(t.dataId);let i=t;null!==a&&a.isPacked&&(i=e.unpackTensor(t),n.push(i));const[o,l]=vP(i.shape,s),c=CT(l),u=S7({inputs:{x:i},backend:e,attrs:{shape:[-1,c]}});n.push(u);const h=Z7(e,u,r);n.push(h);const d=S7({inputs:{x:h},backend:e,attrs:{shape:o}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),d}return eee(e,t,r)}const nee={kernelName:EE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a}=r;let i=$T(a,s.shape);const o=xP(i,s.shape.length);let l=s;const c=[];null!=o&&(l=O7({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=SP(i.length,l.shape.length)),wP("argMax",[i[0]],l.shape.length);const u=tee(n,l,i[0],"max");return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};const ree={kernelName:NE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a}=r;let i=$T(a,s.shape);const o=xP(i,s.shape.length);let l=s;const c=[];null!=o&&(l=O7({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=SP(i.length,l.shape.length)),wP("argMin",[i[0]],l.shape.length);const u=tee(n,l,i[0],"min");return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},see=p7({opSnippet:$9+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),aee={kernelName:CE,backendName:"webgl",kernelFunc:see},iee=p7({opSnippet:$9+"return log(x + sqrt(x * x + 1.0));"}),oee={kernelName:IE,backendName:"webgl",kernelFunc:iee},lee=p7({opSnippet:$9+"\n  return atan(x);\n"}),cee={kernelName:_E,backendName:"webgl",kernelFunc:lee},uee=f7({opSnippet:J9+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+e7+"\n  return result;\n"}),hee={kernelName:RE,backendName:"webgl",kernelFunc:uee},dee=p7({opSnippet:$9+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),pee={kernelName:AE,backendName:"webgl",kernelFunc:dee};class fee{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${o});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${c}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?s?m:g:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(a/4),w=a%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${c};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              getValue(batch, xR, xC + 3 * ${c}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${v});\n      }\n    `}}class mee{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${i}, ${o}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${c}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${u}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / max(count, 1.0)");const x=4*Math.floor(a/4),k=a%4,S=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${i}, ${o}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${c}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${S}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${S}\n            }\n          }\n        }\n        setOutput(${w});\n      }\n    `}}const gee={kernelName:DE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;D5(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r;TT(bM(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const c=cM(s.shape,a,i,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&AT(c.inShape,c.outShape))return n7({inputs:{x:s},backend:n});const u=new fee(c,"avg",!1);return n.runWebGLProgram(u,[s],"float32")}};const yee={kernelName:ME,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=uM(s.shape,a,i,[1,1,1],o,l,c),h=new mee(u,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}};class vee{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,u=l-1-e.padInfo.left,h=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${c}, ${u});\n      const float avgMultiplier = float(${h});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n            wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${i}) {\n            float dyC = float(dyCCorner + wC) / ${s}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class bee{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${p}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${u};\n            wD += ${o}) {\n          float dyD = float(dyDCorner + wD) / ${s}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${c}) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const wee={kernelName:PE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a}=t,i=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,h=uM(i.shape,o,l,[1,1,1],c,u),d=new bee(h);return n.runWebGLProgram(d,[s],i.dtype)}};const xee={kernelName:OE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a}=t,i=a;D5([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=cM(i.shape,o,l,1,c),h=new vee(u);return n.runWebGLProgram(h,[s],i.dtype)}};const kee={kernelName:LE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:a}=t,{transposeA:i,transposeB:o}=r;return P7({a:s,b:a,transposeA:i,transposeB:o,backend:n})}};class See{constructor(e,t,n,r,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],xD(e,t),xD(e,n);let i="0.0";null!=r&&(xD(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="1.0";null!=s&&(xD(e,s),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class Tee{constructor(e,t,n,r,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],xD(e,t),xD(e,n);let i="vec4(0.0)";null!=r&&(xD(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=s&&(xD(e,s),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const Eee={kernelName:_N,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:s,mean:a,variance:i,offset:o,scale:l}=t;TT(a.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),TT(null==o||a.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),TT(null==l||a.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=[s,a,i];let h=null;null!=o&&(h=o.shape,u.push(o));let d=null;null!=l&&(d=l.shape,u.push(l));const p=pE().getBool("WEBGL_PACK_NORMALIZATION")?new Tee(s.shape,a.shape,i.shape,h,d,c):new See(s.shape,a.shape,i.shape,h,d,c);return n.runWebGLProgram(p,u,u[0].dtype)}};class Nee{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Q5(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return Cee.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map(((e,t)=>`sourceLoc.${Cee[t]} = start[${t}] + coords.${Cee[t]};`)).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const Cee=["x","y","z","w","u","v"];class Iee{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Q5(this.rank),n=A9("coords",this.rank),r=A9("sourceLoc",this.rank),s=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${s})`,i=`\n      result.x = ${a};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${i}\n        ${o}\n        setOutput(result);\n      }\n    `}}function _ee(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:a,size:i}=r,[o,l]=RO(s,a,i);if(yO(s,o,l),0===CT(l))return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||"string"===s.dtype){const e=n.texData.get(s.dataId),t=f9(e.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,t)}const{isPacked:c}=n.texData.get(s.dataId),u=_O(s.shape,o,l);if(c||!u){const e=pE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Iee(l):new Nee(l),t=[o];return n.runWebGLProgram(e,[s],s.dtype,t)}return n.uploadToGPU(s.dataId),function(e,t,n,r){const s=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),i=r.texData.get(a.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=e.dtype;let o=AO(t,ZT(e.shape));s.slice&&(o+=s.slice.flatOffset),i.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||e.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),a}(s,o,l,n)}const Aee={kernelName:YC,backendName:"webgl",kernelFunc:_ee},Ree={kernelName:FE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:a,crops:i}=r;TT(s.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const o=a.reduce(((e,t)=>e*t)),l=wz(s.shape,a,o),c=xz(l.length,a.length),u=kz(s.shape,a,o),h=Sz(i,a.length),d=Tz(u,i,a.length),p=[],f=S7({inputs:{x:s},backend:n,attrs:{shape:l}}),m=O7({inputs:{x:f},backend:n,attrs:{perm:c}}),g=S7({inputs:{x:m},backend:n,attrs:{shape:u}}),y=_ee({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const Dee={kernelName:$E,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:a}=t,{size:i}=r,o=n.readSync(s.dataId),l=n.readSync(a.dataId),c=P8(o,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,c)}};const Oee={kernelName:zE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:s}=t,a=pE().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=pE().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||1===i){const e=n.texData.get(r.dataId).values,t=n.texData.get(s.dataId).values,[a,i]=F8(r.shape,s.shape,e,t,r.dtype),o=n.makeTensorInfo(i,r.dtype);return n.texData.get(o.dataId).values=a,o}let o;return o=a?new t7("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,s.shape,!1):new Z9("\n  return float(int(a.r) & int(b.r));\n",r.shape,s.shape),n.runWebGLProgram(o,[r,s],r.dtype)}};const Mee={kernelName:UE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,a=n.readSync(r.dataId),i=n.readSync(s.dataId),o=xD(Array.from(a),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},Pee=f7({opSnippet:"return float(a != b);",cpuKernelImpl:s9,dtype:"bool"}),Lee={kernelName:gC,backendName:"webgl",kernelFunc:Pee};function Fee(e){const{inputs:t,backend:n}=e,{input:r}=t;return n7({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const $ee={kernelName:DC,backendName:"webgl",kernelFunc:Fee};const zee={kernelName:BE,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:s}=t,{x:a}=n,{dtype:i}=s;if("complex64"===i){if("complex64"===a.dtype)return n7({inputs:{x:a},backend:r});const t=uL(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),s=s7({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),s}if("complex64"===a.dtype){const t=Fee({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!WT(a.dtype,i)){const e=n7({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(r.shouldExecuteOnCPU([a])){const e=r.texData.get(a.dataId).values,[t,n,s]=$8(e,a.shape,a.dtype,i);return r.makeTensorInfo(t,n,s)}if("int32"===i)return function(e,t){const n=new F9(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",jT("bool",1)),t=Pee({inputs:{a:a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}},jee="return ceil(x);",Uee=p7({opSnippet:jee,packedOpSnippet:jee,cpuKernelImpl:z8}),Bee={kernelName:VE,backendName:"webgl",kernelFunc:Uee};class Vee{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Wee{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Hee={kernelName:WE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{clipValueMin:a,clipValueMax:i}=r;let o;o=pE().getBool("WEBGL_PACK_CLIP")?new Wee(s.shape):new Vee(s.shape);const l=[[a],[i]];return n.runWebGLProgram(o,[s],s.dtype,l)}};class Gee{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function qee(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const Kee={kernelName:GE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,s=n.texData.get(r.dataId),a=new Gee(r.shape),i=[qee(r,s.complexTensorInfos.real),qee(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}};class Yee{constructor(e){this.outputShape=[],this.outputShape=hz(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<t.length;a++){const e=t[a-1];n.push(`else if (yC < ${t[a]}) setOutput(getT${a}(yR, yC-${e}));`)}const r=t.length,s=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${s}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class Xee{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=hz(e,t);const n=this.outputShape,r=n.length,s=Q5(r),a=A9("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const o=new Array(e.length-1);o[0]=e[0][t];for(let f=1;f<o.length;f++)o[f]=o[f-1]+e[f][t];const l=i[t],c=i.slice(-2),u=i.join();let h=`if (${l} < ${o[0]}) {\n        return getChannel(\n            getT0(${u}), vec2(${c.join()}));\n        }`;for(let f=1;f<o.length;f++){const e=o[f-1];h+=`\n        if (${l} < ${o[f]}  && ${l} >= ${o[f-1]}) {\n          return getChannel(\n            getT${f}(${Qee(i,l,e)}),\n            vec2(${Qee(c,l,e)}));\n        }`}const d=o.length,p=o[o.length-1];h+=`\n        return getChannel(\n          getT${d}(${Qee(i,l,p)}),\n          vec2(${Qee(c,l,p)}));`,this.userCode=`\n      float getValue(${i.map((e=>"int "+e))}) {\n        ${h}\n      }\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${n[r-2]} &&\n            ${a[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function Qee(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function Jee(e){const{inputs:t,backend:n}=e,{input:r}=t;return n7({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const Zee={kernelName:LN,backendName:"webgl",kernelFunc:Jee};function ete(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>Fee({inputs:{input:e},backend:n}))),s=e.map((e=>Jee({inputs:{input:e},backend:n}))),a=ete(r,t,n),i=ete(s,t,n),o=s7({inputs:{real:a,imag:i},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),s.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),o}let s=n.shouldExecuteOnCPU(e);if("string"===r&&(s=!0),s){const s=e.map((e=>{const r=CT(e.shape.slice(t));return S7({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),a=s.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=hz(s.map((e=>e.shape)),1),o=1===s[0].shape[0],l=j8(a,i,r,o),c=hz(e.map((e=>e.shape)),t),u=n.makeTensorInfo(c,r,l);return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const a=e.filter((e=>CT(e.shape)>0)),i=pE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const t=i?new F9(e[0].shape,B9):new V9(e[0].shape,B9);return n.runWebGLProgram(t,e,r)}const o=pE().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const e=[];for(let s=0;s<a.length;s+=o){const r=a.slice(s,s+o);e.push(ete(r,t,n))}const r=ete(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(i){const e=new Xee(a.map((e=>e.shape)),t);return n.runWebGLProgram(e,a,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=hz(e.map((e=>e.shape)),t),s=e.map((e=>S7({inputs:{x:e},attrs:{shape:[-1,CT(e.shape.slice(t))]},backend:n})));return{tensors2D:s,outShape:r}}(a,t,n),u=new Yee(l.map((e=>e.shape))),h=n.runWebGLProgram(u,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const d=S7({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),d}function tte(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r,a=$T(s,t[0].shape)[0];uz(t.map((e=>e.shape)),a);const i=hz(t.map((e=>e.shape)),a);if(0===CT(i))return n.makeTensorInfo(i,t[0].dtype,[]);const o=t.filter((e=>CT(e.shape)>0));return 1===o.length?n7({inputs:{x:o[0]},backend:n}):ete(o,a,n)}const nte={kernelName:qE,backendName:"webgl",kernelFunc:tte};class rte{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let b="",w="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:s?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${u};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${w}\n        setOutput(result);\n      }\n    `}}class ste{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${s}, ${a}, ${i});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${u}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${c};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ate{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=r8(this.outputShape.length);const a=e.padInfo.left,i=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)h+=`\n           vec4 xTexelC${2*m};\n           int xTexelC${2*m}Ready;\n           vec4 xTexelC${2*m+1};\n           int xTexelC${2*m+1}Ready;\n           vec4 xC${m};`;h+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let m=0;m<c;m++)h+=`\n           xTexelC${2*m} = vec4(0.0);\n           xTexelC${2*m}Ready = 0;\n           xTexelC${2*m+1} = vec4(0.0);\n           xTexelC${2*m+1}Ready = 0;\n           xC${m} = vec4(0.0);`;h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){const t=2*m;if(h+=`\n           xC = xCCorner + ${t*o};\n           `,1===i){if(t<c&&(a%2===1?(h+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n               `,h+=1===o&&t>0?`\n                 xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                   } else {\n                     xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                   }\n                   `):h+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xC${t} = xTexelC${t};\n                 `,t+1<c)){const e=a%2===0?bT(o):o;o%2===0&&a%2===1||o%2!==0&&a%2!==1?(h+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                     xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${t+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${t+1}Ready = 1;\n                   }\n                   `,h+=o>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                     } else {\n                      xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                     }\n                     `:`\n                     xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                     `):h+=1===e?`\n                     xC${t+1} = xTexelC${t};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                       xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${t+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${t+1}Ready = 1;\n                     }\n\n                     xC${t+1} = xTexelC${t+1};\n                     `}}else t<c&&(a%2===1?(h+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n               `,t+1<c&&(h+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                 `)):(h+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(\n                   xTexelC${t}.xy, xTexelC${t+1}.xy);\n               `,t+1<c&&(h+=`\n                   xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                 `)));t<c&&(h+=`\n             wTexel = getW(r, ${t}, d1, d2);\n             dotProd += xC${t}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${t}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,t+1<c&&(h+=`\n               wTexel = getW(r, ${t+1}, d1, d2);\n               dotProd += xC${t+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${t+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";n&&(d=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:s?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${d}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${h}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${p}\n         setOutput(result);\n       }\n     `}}class ite{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=r8(this.outputShape.length);const{dataFormat:n}=t,r=M5(),s="channelsLast"===n,a=s?1:2,i=s?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+=`\n          blockIndex = rc.z + ${e};\n          pos = rc.y + ${c};\n\n          ${o}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${i}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${s}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*c+e}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*c+e}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}function ote(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function lte(e){let{x:t,filter:n,convInfo:r,backend:s,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}=e;const c=t.shape,u=s.texData.get(t.dataId),h=r.inChannels,d=c[0]*c[1]*c[2],p=r.outChannels,f="channelsLast"===r.dataFormat,m=!1;let g;const y=[];if(null!=i){const e=ote(i.shape,f);null!=e&&(i=S7({inputs:{x:i},backend:s,attrs:{shape:e}}),y.push(i))}if(null!=a){const e=ote(a.shape,f);null!=e&&(a=S7({inputs:{x:a},backend:s,attrs:{shape:e}}),y.push(a))}if(!((1===d||1===p)&&h>1e3)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&AT(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),h={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,TT(v5(u.shape,h.shape),(()=>`packed reshape ${u.shape} to ${h.shape} isn't free`));const p=S7({inputs:{x:n},backend:s,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=P7({a:h,b:p,backend:s,transposeA:false,transposeB:m,bias:a,activation:l,preluActivationWeights:i,leakyreluAlpha:o}),v=s.texData.get(f.dataId);TT(v.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=d,v.shape=r.outShape,g=n7({inputs:{x:f},backend:s}),g.shape=r.outShape,y.push(f)}else{const e=r.outHeight*r.outWidth,c=S7({inputs:{x:t},backend:s,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=S7({inputs:{x:n},backend:s,attrs:{shape:[1,r.inChannels,r.outChannels]}}),h=P7({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:m,backend:s,bias:a,activation:l,preluActivationWeights:i,leakyreluAlpha:o});g=S7({inputs:{x:h},backend:s,attrs:{shape:r.outShape}}),y.push(c),y.push(u),y.push(h)}for(const v of y)s.disposeIntermediateTensorInfo(v);return g}function cte(e){let{x:t,filter:n,convInfo:r,backend:s,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=c*u*h,y=p*d,v=[r.batchSize,g,y],b=[];if(null!=i){const e=ote(i.shape,m);null!=e&&(i=S7({inputs:{x:i},backend:s,attrs:{shape:e}}),b.push(i))}if(null!=a){const e=ote(a.shape,m);null!=e&&(a=S7({inputs:{x:a},backend:s,attrs:{shape:e}}),b.push(a))}const w=S7({inputs:{x:n},backend:s,attrs:{shape:[1,g,CT(n.shape)/g]}});b.push(w);const x=new ite(v,r),k=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],S=s.runWebGLProgram(x,[t],"float32",k),T=S7({inputs:{x:S},backend:s,attrs:{shape:v}});b.push(S),b.push(T);const E=null!=a,N=null!=i,C="leakyrelu"===l,I=l?m7(l,!0):null,_=new g7(m?T.shape:w.shape,m?w.shape:T.shape,m?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,E,I,N,C),A=m?[T,w]:[w,T];if(a&&A.push(a),N&&A.push(i),C){const e=s.makeTensorInfo([],"float32",u_(o,"float32"));A.push(e),b.push(e)}const R=s.runWebGLProgram(_,A,"float32"),D=S7({inputs:{x:R},backend:s,attrs:{shape:r.outShape}});b.push(R);for(const O of b)s.disposeIntermediateTensorInfo(O);return D}const ute={kernelName:KE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=xM(l),d=hM(s.shape,a.shape,i,c,o,u,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&pE().getBool("WEBGL_EXP_CONV")){const e=new ate(d),t=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(e,[s,a],"float32",t)}else if(pE().getBool("WEBGL_CONV_IM2COL"))p=cte({x:s,filter:a,convInfo:d,backend:n});else{const e=new rte(d);p=n.runWebGLProgram(e,[s,a],"float32")}else p=lte({x:s,filter:a,convInfo:d,backend:n});const f=S7({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class hte{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,s=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${s};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${a?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class dte{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,s=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=a?1:2,c=a?2:3,u=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${u}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${s}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class pte{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${s};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${a};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${i};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class fte{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${o}, ${l}, ${c});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${s}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const mte={kernelName:YE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:a}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=xM(l),d=hM(s.shape,u,i,1,o,c,!1,h),p=new hte(d);return n.runWebGLProgram(p,[s,a],"float32")}};class gte{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=r8(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,s=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const yte={kernelName:XE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:a}=t,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=xM(c),d=hM(i,a.shape,o,1,l,u,!1,h);if(pE().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const e=[[d.strideHeight,d.strideWidth]],t=new gte(d);return n.runWebGLProgram(t,[s,a],"float32",e)}{const e=new dte(d);return n.runWebGLProgram(e,[s,a],"float32")}}};const vte={kernelName:QE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dilations:l}=r,c=dM(s.shape,a.shape,i,l,o),u=new ste(c);return n.runWebGLProgram(u,[s,a],"float32")}};const bte={kernelName:JE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:a}=t,{strides:i,pad:o,filterShape:l}=r,c=dM(s.shape,l,i,1,o),u=new pte(c);return n.runWebGLProgram(u,[s,a],"float32")}};const wte={kernelName:ZE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:a}=t,{pad:i,strides:o,inputShape:l}=r,c=dM(l,a.shape,o,1,i),u=new fte(c);return n.runWebGLProgram(u,[s,a],"float32")}},xte=p7({opSnippet:d7+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${e7}\n  return result;\n`}),kte={kernelName:eN,backendName:"webgl",kernelFunc:xte},Ste=p7({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Tte={kernelName:tN,backendName:"webgl",kernelFunc:Ste};class Ete{constructor(e,t,n,r,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,o,l]=e,[c]=t,[u,h]=n;this.outputShape=[c,u,h,l];const d="bilinear"===r?1:0,[p,f]=[i-1+".0",o-1+".0"],[m,g,y]=u>1?[""+(i-1)/(u-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,b,w]=h>1?[""+(o-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${b};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${s}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${s}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const Nte={kernelName:sN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:s,boxes:a,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:c}=r,u=new Ete(s.shape,a.shape,o,l,c);return n.runWebGLProgram(u,[s,a,i],"float32")}};var Cte;!function(e){e.Prod="*",e.Sum="+"}(Cte||(Cte={}));class Ite{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=this.op===Cte.Prod?"1.0":"0.0",i=n?a:`getX(${_te(s,"coords",this.op)})`,o=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=r?"end != "+(o-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${o}`:"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${Q5(s)} coords = getOutputCoords();\n        int end = ${Ate(s,"coords",this.op)};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${c};\n          ${Ate(s,"coords",this.op)} = idx;\n          val ${this.op}= getX(${_te(s,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function _te(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Ate(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Rte(e,t,n,r,s,a){const i=t.shape.length,o=xP([r],i);let l=t;null!=o&&(l=O7({inputs:{x:t},backend:n,attrs:{perm:o}}));const c=SP(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const u=l.shape[c];let h=n7({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const t=new Ite(e,l.shape,!1,a),r=[[d]],s=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(s)}if(s){const t=new Ite(e,l.shape,s,a),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=o){const e=O7({inputs:{x:h},backend:n,attrs:{perm:kP(o)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),e}return h}const Dte={kernelName:nN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,exclusive:i,reverse:o}=r;return Rte(Cte.Prod,s,n,a,i,o)}};const Ote={kernelName:rN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,exclusive:i,reverse:o}=r;return Rte(Cte.Sum,s,n,a,i,o)}};const Mte={kernelName:aN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:a}=t,{size:i,binaryOutput:o}=r;if(1===s.shape.length){const e=n.readSync(s.dataId),t=n.readSync(a.dataId),r=P8(e,t,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,r)}if(2===s.shape.length){const e=n.bufferSync(s),t=n.bufferSync(a),r=L8(e,t,i,o);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}};class Pte{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const Lte={kernelName:iN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockSize:a,dataFormat:i}=r,o=s.shape[0],l=("NHWC"===i?s.shape[1]:s.shape[2])*a,c=("NHWC"===i?s.shape[2]:s.shape[3])*a,u=("NHWC"===i?s.shape[3]:s.shape[1])/(a*a),h=new Pte("NHWC"===i?[o,l,c,u]:[o,u,l,c],a,i);return n.runWebGLProgram(h,[s],s.dtype)}};class Fte{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=r8(this.outputShape.length);const a=e.filterHeight,i=e.filterWidth,o=e.outChannels/e.inChannels;let l="",c="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:s?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${u}\n        ${c}\n        setOutput(result);\n      }\n    `}}class $te{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=r8(this.outputShape.length);const a=e.outChannels/e.inChannels,i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)d+=`\n          vec4 xTexelC${2*g};\n          int xTexelC${2*g}Ready;\n          vec4 xTexelC${2*g+1};\n          int xTexelC${2*g+1}Ready;\n          vec4 xC${g};`;d+=`\n    for (int r = 0; r < ${c}; r++) {\n      `;for(let g=0;g<u;g++)d+=`\n          xTexelC${2*g} = vec4(0.0);\n          xTexelC${2*g}Ready = 0;\n          xTexelC${2*g+1} = vec4(0.0);\n          xTexelC${2*g+1}Ready = 0;\n          xC${g} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(h+1)/2;g++){const e=2*g;if(d+=`\n          xC = xCCorner + ${e*l};\n          `,1===o){if(e<u&&(i%2===1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n              `,d+=1===l&&e>0?`\n                xC${e} = vec4(xTexelC${e-2}.zw, xTexelC${e}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${e} = vec4(previous.zw, xTexelC${e}.xy);\n                  } else {\n                    xC${e} = vec4(0.0, 0.0, xTexelC${e}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xC${e} = xTexelC${e};\n                `,e+1<u)){const t=i%2===0?bT(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${t};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                    xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${e+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${e+1}Ready = 1;\n                  }\n                  `,d+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${e+1} = vec4(previous.zw, xTexelC${e+1}.xy);\n                    } else {\n                     xC${e+1} = vec4(0.0, 0.0, xTexelC${e+1}.xy);\n                    }\n                    `:`\n                    xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.xy);\n                    `):d+=1===t?`\n                    xC${e+1} = xTexelC${e};\n                    `:`\n                    xCOffset = xC + ${t};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                      xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${e+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${e+1}Ready = 1;\n                    }\n\n                    xC${e+1} = xTexelC${e+1};\n                    `}}else e<u&&(i%2===1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n              `,e+1<u&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${e+1} = vec4(xTexelC${e+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(\n                  xTexelC${e}.xy, xTexelC${e+1}.xy);\n              `,e+1<u&&(d+=`\n                  xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n                `)));e<u&&(d+=`\n            wTexel = getW(r, ${e}, d1, q);\n            dotProd += xC${e} * vec4(wTexel.xz, wTexel.xz);\n          `,e+1<u&&(d+=`\n              wTexel = getW(r, ${e+1}, d1, q);\n              dotProd += xC${e+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";n&&(p=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:s?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const zte={kernelName:oN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),TT(bM(i,u),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`));const h=hM(s.shape,a.shape,i,u,o,c,!0);let d;d=pE().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new $te(h):new Fte(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[s,a],"float32",p)}};class jte{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${a} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${s};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Ute{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,s=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${s}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${o}; dm++) {\n              int d2 = d1 * ${o} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Bte={kernelName:lN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:a}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,h=hM(s.shape,u,i,o,l,c,!0),d=new jte(h);return n.runWebGLProgram(d,[s,a],"float32")}};const Vte={kernelName:cN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:a}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,h=hM(u,a.shape,i,o,l,c,!0),d=new Ute(h);return n.runWebGLProgram(d,[s,a],"float32")}};class Wte{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const Hte={kernelName:uN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,s=[...r.shape,...r.shape],a=CT(r.shape),i=S7({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new Wte(a),l=n.runWebGLProgram(o,[i],i.dtype),c=S7({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}};class Gte{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:s,strideWidth:a,filterHeight:i,filterWidth:o,dilationHeight:l,dilationWidth:c}=e,{top:u,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${a});\n      const ivec2 pads = ivec2(${u}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${i}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${c};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const qte={kernelName:hN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a}=t,{strides:i,pad:o,dilations:l}=r,c=lM(s.shape,a.shape,i,o,"NHWC",l);let u;const h=new Gte(c);u=n.runWebGLProgram(h,[s,a],"float32");const d=S7({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),d}};const Kte={kernelName:gN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:s}=r,a=t,{allDims:i,summedDims:o,idDims:l}=Hz(s,a.length);qz(i.length,l,a);const{path:c,steps:u}=Kz(o,l),h=u.length;let d=null,p=i.length;const f=[];for(let m=0;m<h;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=Gz(p,l[e]);let s;Yz(t)?s=a[e]:(s=O7({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),f.push(s));const i=s.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);AT(s.shape,i)||(s=S7({inputs:{x:s},backend:n,attrs:{shape:i}}),f.push(s)),null===d?d=s:(d=x7({inputs:{a:s,b:d},backend:n}),f.push(d))}m<h-1&&(c[m]>=0&&(d=R7({inputs:{x:d},backend:n,attrs:{axis:c[m]-(i.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},Yte=p7({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Xte={kernelName:yN,backendName:"webgl",kernelFunc:Yte},Qte={kernelName:vN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:s}=t,a=pE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t7("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,s.shape):new Z9("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,s.shape);return n.runWebGLProgram(a,[r,s],r.dtype)}},Jte=f7({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:U8}),Zte={kernelName:wN,backendName:"webgl",kernelFunc:Jte},ene=p7({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Cz};\n  float a1 = ${Iz};\n  float a2 = ${_z};\n  float a3 = ${Az};\n  float a4 = ${Rz};\n  float a5 = ${Dz};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),tne={kernelName:bN,backendName:"webgl",kernelFunc:ene},nne=p7({opSnippet:d7+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:B8,dtype:"float32"}),rne={kernelName:xN,backendName:"webgl",kernelFunc:nne};function sne(e){const{inputs:t,attrs:n,backend:r}=e,{dim:s}=n,{input:a}=t,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(TT(-(i+1)<=s,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),l=i+s+1),o.splice(l,0,1),S7({inputs:{x:a},backend:r,attrs:{shape:o}})}const ane={kernelName:kN,backendName:"webgl",kernelFunc:sne},ine="return exp(x) - 1.0;",one=p7({opSnippet:ine,packedOpSnippet:ine,cpuKernelImpl:V8}),lne={kernelName:SN,backendName:"webgl",kernelFunc:one};class cne{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const s=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=n?`${r}.0`:"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);i="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${s};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${i}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function une(e,t,n){const r=n.texData.get(e.dataId),s=CT(e.shape),a=e.shape[e.shape.length-1],i=S7({inputs:{x:e},backend:n,attrs:{shape:[s/a,a]}}),o=i.shape,l=new cne("real",o,t),c=new cne("imag",o,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],h=n.runWebGLProgram(l,u,"float32"),d=n.runWebGLProgram(c,u,"float32"),p=s7({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=S7({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),f}const hne={kernelName:TN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return une(r,!1,n)}};class dne{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function pne(e){const{backend:t,attrs:n}=e,{shape:r,value:s}=n;let{dtype:a}=n;if(a=a||XT(s),"string"===a){const e=UT(a,CT(r));return e.fill(s),t.makeTensorInfo(r,a,e)}{const e=new dne(r,s),n=[[s]];return t.runWebGLProgram(e,[],a,n)}}const fne={kernelName:EN,backendName:"webgl",kernelFunc:pne};class mne{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const gne={kernelName:NN,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,s=n,a=new mne(r.shape);return s.runWebGLProgram(a,[r],r.dtype)}},yne="return floor(x);",vne=p7({opSnippet:yne,packedOpSnippet:yne,cpuKernelImpl:W8}),bne={kernelName:CN,backendName:"webgl",kernelFunc:vne},wne=f7({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),xne={kernelName:IN,backendName:"webgl",kernelFunc:wne};class kne{constructor(e){this.variableNames=["A"];const t=M5(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class Sne{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=M5(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const Tne={kernelName:RI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:s}=t;const{numChannels:a}=r,i="undefined"!==typeof HTMLVideoElement&&s instanceof HTMLVideoElement,o="undefined"!==typeof HTMLImageElement&&s instanceof HTMLImageElement,[l,c]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],h=[c,l,a];if(o||i){const e=pE().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Ene&&e===Nne||(Nne=e,Ene=document.createElement("canvas").getContext("2d",{willReadFrequently:Nne})),Ene.canvas.width=l,Ene.canvas.height=c,Ene.drawImage(s,0,0,l,c),s=Ene.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=_6.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const p=pE().getBool("WEBGL_PACK")?new Sne(h):new kne(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let Ene,Nne=pE().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const Cne={kernelName:MI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=xM(u),g=hM(s.shape,a.shape,l,h,c,d,!1,m);let y;const v=[],b=null!=i,w=null!=o,x="leakyrelu"===p,k=()=>{const e=[s,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=S7({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(i,u)),w&&e.push(t(o,u)),x){const t=n.makeTensorInfo([],"float32",u_(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&pE().getBool("WEBGL_EXP_CONV")){const e=p?m7(p,!0):null,t=new ate(g,b,e,w,x),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],s=k();y=n.runWebGLProgram(t,s,"float32",r)}else if(pE().getBool("WEBGL_CONV_IM2COL"))y=cte({x:s,filter:a,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{const e=p?m7(p,!1):null,t=new rte(g,b,e,w,x),r=k();y=n.runWebGLProgram(t,r,"float32")}else y=lte({x:s,filter:a,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:o,leakyreluAlpha:f});const S=S7({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};const Ine={kernelName:PI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:a,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let m=u;null==m&&(m=[1,1]),TT(bM(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=hM(s.shape,a.shape,l,m,c,h,!0),y=pE().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=d?m7(d,y):null,b=[s,a],w=null!=i,x=null!=o,k="leakyrelu"===d;if(w&&b.push(i),x&&b.push(o),k){const e=n.makeTensorInfo([],"float32",u_(p,"float32"));b.push(e),f.push(e)}let S;S=y?new $te(g,w,v,x,k):new Fte(g,w,v,x,k);const T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(S,b,"float32",T);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),E}};class _ne{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const s=Q5(n.length);let a="\n    int index;";for(let i=0;i<this.sliceDim;i++)a+=`\n          index = round(getIndices(coords[0], ${i}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[i]};\n          flattenIndex += index * ${this.strides[i]};`;this.userCode=`\n         void main() {\n          ${s} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${a}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const Ane={kernelName:RN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:s}=t,a=s.shape,i=a[a.length-1],o=CT(r.shape),[l,c,u,h]=hO(r,s),d=S7({inputs:{x:s},backend:n,attrs:{shape:[c,i]}}),p=S7({inputs:{x:r},backend:n,attrs:{shape:[CT(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||"string"===r.dtype){const e=n.readSync(s.dataId),t=n.bufferSync(r),a=H8(e,t,r.dtype,c,i,u,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,a.values)}const f=new _ne(i,h,[c,u],r.shape),m=n.runWebGLProgram(f,[p,d],p.dtype),g=S7({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class Rne{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=Q5(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function Dne(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,indices:a}=t,{axis:i,batchDims:o}=r,l=$T(i,s.shape)[0];if(pE().get("DEBUG")){const e=n.readSync(a.dataId),t=s.shape[l];for(let n=0;n<e.length;++n){const r=e[n];TT(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const c=dj(s,a,l,o),u=CT(a.shape),h=[],d=S7({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=S7({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,a])||"string"===s.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=G8(t,e,f);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const m=new Rne(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);h.push(g);const y=S7({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const One={kernelName:AN,backendName:"webgl",kernelFunc:Dne},Mne=f7({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:q8,dtype:"bool"}),Pne={kernelName:DN,backendName:"webgl",kernelFunc:Mne},Lne=f7({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:K8}),Fne={kernelName:ON,backendName:"webgl",kernelFunc:Lne};const $ne={kernelName:PN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return une(r,!0,n)}},zne=p7({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),jne={kernelName:FN,backendName:"webgl",kernelFunc:zne},Une=p7({opSnippet:"return float(isinf(x));",dtype:"bool"}),Bne={kernelName:$N,backendName:"webgl",kernelFunc:Une},Vne=p7({opSnippet:"return float(isnan(x));",dtype:"bool"}),Wne={kernelName:zN,backendName:"webgl",kernelFunc:Vne},Hne=f7({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Y8,dtype:"bool"}),Gne={kernelName:UN,backendName:"webgl",kernelFunc:Hne},qne=f7({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:X8,dtype:"bool"}),Kne={kernelName:BN,backendName:"webgl",kernelFunc:qne};const Yne={kernelName:VN,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:s,num:a}=n,i=Q8(r,s,a);return t.makeTensorInfo([i.length],"float32",i)}},Xne=p7({opSnippet:d7+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:J8}),Qne={kernelName:WN,backendName:"webgl",kernelFunc:Xne},Jne=p7({opSnippet:d7+"\n  return log(1.0 + x);\n"}),Zne={kernelName:HN,backendName:"webgl",kernelFunc:Jne},ere=f7({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),tre={kernelName:GN,backendName:"webgl",kernelFunc:ere},nre=p7({opSnippet:"return float(!(x >= 1.0));"}),rre={kernelName:qN,backendName:"webgl",kernelFunc:nre},sre=f7({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),are={kernelName:KN,backendName:"webgl",kernelFunc:sre};class ire{constructor(e,t,n,r,s){this.variableNames=["x"],this.outputShape=[];const a=t,i=e[3]-1;let o;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;o=.5===s?`inversesqrt(${l})`:1===s?`1.0/(${l})`:`exp(log(${l}) * float(-${s}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}class ore{constructor(e,t,n,r,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,i=e[3]-1;let o;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;o=.5===s?`inversesqrt(${l})`:1===s?`1.0/(${l})`:`exp(log(${l}) * float(-${s}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}const lre={kernelName:JN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{depthRadius:a,bias:i,alpha:o,beta:l}=r,c=pE().getBool("WEBGL_PACK_NORMALIZATION")?new ore(s.shape,a,i,o,l):new ire(s.shape,a,i,o,l);return n.runWebGLProgram(c,[s],s.dtype)}};class cre{constructor(e,t,n,r,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=s,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${s})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${s});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const ure={kernelName:ZN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s,y:a,dy:i}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r,h=new cre(s.shape,o,l,c,u);return n.runWebGLProgram(h,[s,a,i],s.dtype)}};function hre(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reductionIndices:a,keepDims:i}=r,o=s.shape.length,l=$T(a,s.shape);let c=l;const u=xP(c,o),h=null!=u,d=n.shouldExecuteOnCPU([s]);let p=s;if(h){if(d){const e=n.texData.get(p.dataId).values,t=new Array(o);for(let n=0;n<t.length;n++)t[n]=s.shape[u[n]];const r=C9(e,s.shape,s.dtype,u,t);p=n.makeTensorInfo(t,s.dtype);n.texData.get(p.dataId).values=r}else p=A7(s,u,n);c=SP(c.length,o)}wP("max",c,o);const[f,m]=vP(p.shape,c);let g,y=f;if(i&&(y=bP(f,l)),d){const e=n.texData.get(p.dataId).values,t=Z8(e,CT(m),y,s.dtype);g=n.makeTensorInfo(y,s.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const s=CT(t),a=S7({inputs:{x:e},attrs:{shape:[CT(e.shape)/s,s]},backend:r}),i=C7(a,e.dtype,"max",r),o=S7({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),o}(p,m,y,n);return h&&n.disposeIntermediateTensorInfo(p),g}const dre={kernelName:tC,backendName:"webgl",kernelFunc:hre},pre=f7({opSnippet:J9+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+e7+"\n  return result;\n",cpuKernelImpl:e9}),fre={kernelName:nC,backendName:"webgl",kernelFunc:pre};const mre={kernelName:rC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;D5(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r;TT(bM(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const c=cM(s.shape,a,i,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&AT(c.inShape,c.outShape))return n7({inputs:{x:s},backend:n});const u=new fee(c,"max",!1);return n.runWebGLProgram(u,[s],s.dtype)}};const gre={kernelName:aC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=uM(s.shape,a,i,[1,1,1],o,c,l),h=new mee(u,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}};class yre{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=s-1-e.padInfo.top,o=a-1-e.padInfo.left,l=s*a-1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class vre{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=o-1-e.padInfo.front,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=o*l*c-1;this.userCode=`\n      const ivec3 pads = ivec3(${u}, ${h}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${o};\n           wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${a}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${c};\n                wC += ${i}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${p} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${c} +\n                  wR * ${c} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const bre={kernelName:iC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a}=t,i=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,h=uM(i.shape,o,l,[1,1,1],c,u),d=new mee(h,"max",!0),p=n.runWebGLProgram(d,[i],i.dtype),f=new vre(h),m=n.runWebGLProgram(f,[s,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};const wre={kernelName:sC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:a,output:i}=t,o=a;D5([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=cM(o.shape,l,c,1,u,h),p=new fee(d,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new yre(d),g=n.runWebGLProgram(m,[s,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}};const xre={kernelName:oC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:s}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:l}=n,c=r;TT(4===s.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`));const u=[1,1];TT(bM(i,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`));const h=cM(s.shape,a,i,u,o),[d,p]=function(e,t,n,r){let s=new fee(n,"max",!1);const a=r.runWebGLProgram(s,[e],"float32");return s=new fee(n,"max",!0,!0,t),[a,r.runWebGLProgram(s,[e],"float32")]}(s,l,h,c);return[d,p]}};const kre={kernelName:lC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:s}=t,{keepDims:a,axis:i}=n,o=r,l=s.shape.length,c=$T(i,s.shape);let u=c;const h=xP(u,l),d=null!=h,p=o.shouldExecuteOnCPU([s]),f=[];let m=s;if(d){if(p){const e=o.texData.get(m.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=s.shape[h[r]];const n=C9(e,s.shape,s.dtype,h,t);m=o.makeTensorInfo(t,s.dtype);o.texData.get(m.dataId).values=n}else m=A7(s,h,o);f.push(m),u=SP(u.length,l)}wP("sum",u,l);const[g,y]=vP(m.shape,u);let v=g;a&&(v=bP(g,c));const b=function(e,t,n,r){const s=CT(t),a=S7({inputs:{x:e},attrs:{shape:[CT(e.shape)/s,s]},backend:r}),i=C7(a,"float32","mean",r),o=S7({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),o}(m,y,v,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return b}};const Sre={kernelName:cC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r,o=s.shape.length,l=$T(a,s.shape);let c=l;const u=xP(c,o);let h=s;null!=u&&(h=O7({inputs:{x:s},backend:n,attrs:{perm:u}}),c=SP(c.length,s.shape.length)),wP("min",c,o);const[d,p]=vP(h.shape,c),f=S7({inputs:{x:h},backend:n,attrs:{shape:[-1,CT(p)]}}),m=C7(f,f.dtype,"min",n);let g;if(i){g=S7({inputs:{x:m},backend:n,attrs:{shape:bP(d,l)}})}else g=S7({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}},Tre=f7({opSnippet:J9+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+e7+"\n  return result;\n",cpuKernelImpl:t9}),Ere={kernelName:uC,backendName:"webgl",kernelFunc:Tre};class Nre{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,s=Q5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${s} start = ${s}(${a});\n      ${s} end = ${s}(${i});\n\n      void main() {\n        ${s} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${s} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class Cre{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,s=Q5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=A9("rc",r),l=A9("source",r),c=`${o[r-1]} < ${this.outputShape[r-1]}`,u=1===r?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${s} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${s} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${u});\n        ${o[r-1]} += 1;\n        if(${c}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${u});\n        }\n      `}else{const e=`\n        ${s} source = rc;\n        ${s} lt = ${s}(lessThan(source, start));\n        ${s} gte = ${s}(greaterThanEqual(source, end));\n        ${s} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${s} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${u});\n        ${o[r-1]} += 1;\n        if(${c}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${u});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${u});\n          ${o[r-1]} += 1;\n          if(${c}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${u});\n          }\n        }\n      `}this.userCode=`\n      const ${s} start = ${s}(${a});\n      const ${s} end = ${s}(${i});\n\n      void main() {\n        ${s} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const Ire={kernelName:hC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:s}=t,{paddings:a,mode:i}=r,o=pE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Cre(s.shape,a,i):new Nre(s.shape,a,i);return n.runWebGLProgram(o,[s],s.dtype)}},_re=f7({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+e7+"\n  return result;\n"}),Are={kernelName:dC,backendName:"webgl",kernelFunc:_re};class Rre{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const Dre=f7({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Ore={kernelName:mN,backendName:"webgl",kernelFunc:Dre},Mre="return a - b;",Pre=f7({opSnippet:Mre,packedOpSnippet:Mre,supportsComplex:!0,cpuKernelImpl:T9}),Lre={kernelName:vI,backendName:"webgl",kernelFunc:Pre};function Fre(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{dim:a}=r,i=$T([a],s.shape),o=hre({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=bP(o.shape,i),c=S7({inputs:{x:o},backend:n,attrs:{shape:l}}),u=Pre({inputs:{a:s,b:c},backend:n}),h=nne({inputs:{x:u},backend:n}),d=R7({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:!1}}),p=S7({inputs:{x:d},backend:n,attrs:{shape:l}}),f=Dre({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const $re={kernelName:aI,backendName:"webgl",kernelFunc:Fre};const zre={kernelName:pC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{numSamples:a,seed:i,normalized:o}=r,l=o?s:Fre({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new Rre(c,u,a),d=[[i]],p=n.runWebGLProgram(h,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),p}},jre=$9+"\n  return -x;\n";const Ure={kernelName:mC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,s]=r9(e.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,t)}let s;return s=pE().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new V9(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new F9(r.shape,jre),n.runWebGLProgram(s,[r],r.dtype)}},Bre=g$;const Vre={kernelName:yC,backendName:"webgl",kernelFunc:function(e){LI("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:a}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(a.dataId),{selectedIndices:h}=Bre(c,u,i,o,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},Wre=y$;const Hre={kernelName:vC,backendName:"webgl",kernelFunc:function(e){LI("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:a}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),h=n.readSync(a.dataId),{selectedIndices:d,validOutputs:p}=Wre(u,h,i,o,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Gre=v$;const qre={kernelName:bC,backendName:"webgl",kernelFunc:function(e){LI("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:a}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),h=n.readSync(a.dataId),d=i,p=o,f=l,m=c,{selectedIndices:g,selectedScores:y}=Gre(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class Kre{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const Yre={kernelName:xC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:s}=t,{dtype:a,depth:i,onValue:o,offValue:l}=r,c=CT(s.shape),u=new Kre(c,i,o,l),h=S7({inputs:{x:s},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[h],a);n.disposeIntermediateTensorInfo(h);const p=S7({inputs:{x:d},backend:n,attrs:{shape:[...s.shape,i]}});return n.disposeIntermediateTensorInfo(d),p}};function Xre(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=Fee({inputs:{input:r},backend:n}),t=Xre({inputs:{x:e},backend:n}),s=Jee({inputs:{input:r},backend:n}),a=Xre({inputs:{x:s},backend:n}),i=s7({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),i}return pne({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Qre={kernelName:_I,backendName:"webgl",kernelFunc:Xre};const Jre={kernelName:wC,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:s}=n;if("string"===s.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===s.dtype){const t=Fee({inputs:{input:s},backend:r}),n=e({inputs:{x:t},backend:r}),a=Jee({inputs:{input:s},backend:r}),i=Xre({inputs:{x:a},backend:r}),o=s7({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),o}return pne({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:r})}};const Zre={kernelName:kC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(1===t.length)return sne({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{ET(a,e.shape,"All tensors passed to stack must have matching shapes"),TT(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const o=[],l=tte({inputs:t.map((e=>{const t=sne({inputs:{input:e},backend:n,attrs:{dim:s}});return o.push(t),t})),backend:n,attrs:{axis:s}});return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class ese{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,s=Q5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${s} start = ${s}(${a});\n      ${s} end = ${s}(${i});\n\n      void main() {\n        ${s} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${s} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class tse{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,s=Q5(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=A9("rc",r),l=A9("source",r),c=`${o[r-1]} < ${this.outputShape[r-1]}`,u=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[`${s} rc = outputLoc;`,`${o[r-1]} += 1;\n       if(${c}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${c}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${s} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${u});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${s} start = ${s}(${a});\n      const ${s} end = ${s}(${i});\n\n      void main() {\n        ${s} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const nse=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:a,constantValue:i}=r;if(0===CT(s.shape)){const e=a.map(((e,t)=>e[0]+s.shape[t]+e[1]));return pne({backend:n,attrs:{shape:e,value:i,dtype:s.dtype}})}const o=pE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tse(s.shape,a,i):new ese(s.shape,a,i),l=[[i]];return n.runWebGLProgram(o,[s],s.dtype,l)},rse={kernelName:SC,backendName:"webgl",kernelFunc:nse},sse=f7({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+e7+"\n  return result;\n"}),ase={kernelName:EC,backendName:"webgl",kernelFunc:sse};const ise={kernelName:CC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:a,keepDims:i}=r,o=s.shape.length,l=[],c=$T(a,s.shape);let u=c;const h=xP(u,o);let d,p=s;if(null!=h&&(p=O7({inputs:{x:s},backend:n,attrs:{perm:h}}),u=SP(u.length,o),l.push(p)),wP("prod",u,o),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:s}=a9(p.shape,p.dtype,e,u);d=n.makeTensorInfo(r,s,t)}else{const[e,t]=vP(p.shape,u),r=CT(t),a=S7({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),i=C7(a,j_(s.dtype),"prod",n);d=S7({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(a),l.push(i)}if(i){l.push(d);const e=bP(d.shape,c);d=S7({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}};const ose={kernelName:IC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:o}=r,l=s.map((e=>n.readSync(e.dataId))),c=s.map((e=>e.shape)),u=n.readSync(a.dataId),h=n.readSync(i.dataId),[d,p,f]=i9(l,c,u,a.shape,a.dtype,h,i.shape,o),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,a.dtype,p);return m.concat([g])}};const lse={kernelName:_C,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:s,deltas:a}=t,i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[c,u]=o9(i,r.shape,r.dtype,o,s.shape,l,a.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const cse={kernelName:AC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(a.dataId),h=n.readSync(i.dataId),d=o.map((e=>n.readSync(e.dataId))),p=o.map((e=>e.shape)),[f,m]=l9(c,s.shape,u,a.shape,a.dtype,h,i.shape,d,p,l);return n.makeTensorInfo(f,a.dtype,m)}},use=e=>{const{backend:t,attrs:n}=e,{start:r,stop:s,step:a,dtype:i}=n,o=c9(r,s,a,i);return t.makeTensorInfo([o.length],i,o)},hse={kernelName:RC,backendName:"webgl",kernelFunc:use},dse=p7({opSnippet:"return 1.0 / x;"}),pse={kernelName:OC,backendName:"webgl",kernelFunc:dse},fse=p7({opSnippet:$9+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),mse={kernelName:MC,backendName:"webgl",kernelFunc:fse},gse=p7({opSnippet:$9+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),yse={kernelName:jC,backendName:"webgl",kernelFunc:gse};class vse{constructor(e,t,n,r,s){this.variableNames=["A"],this.outputShape=[];const[a,i,o,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=s?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class bse{constructor(e,t,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,o,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=s?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]},\n          ${c[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const wse={kernelName:$C,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,c]=o,u=pE().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bse(s.shape,l,c,a,i):new vse(s.shape,l,c,a,i);return n.runWebGLProgram(u,[s],"float32")}};class xse{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,s]=t,[,a,i]=e,o=[n&&a>1?r-1:r,n&&i>1?s-1:s],l=[n&&a>1?a-1:a,n&&i>1?i-1:i],c=o[0]/l[0],u=o[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${u});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const kse={kernelName:zC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:a}=t,{alignCorners:i}=r,o=new xse(a.shape,s.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}};class Sse{constructor(e,t,n,r,s){this.variableNames=["A"],this.outputShape=[];const[a,i,o,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=s?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class Tse{constructor(e,t,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,o,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=s?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]},\n          ${c[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const Ese={kernelName:LC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,c]=o,u=pE().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Tse(s.shape,l,c,a,i):new Sse(s.shape,l,c,a,i);return n.runWebGLProgram(u,[s],s.dtype)}};class Nse{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,s]=t,[,a,i]=e,o=[n&&a>1?r-1:r,n&&i>1?s-1:s],l=[n&&a>1?a-1:a,n&&i>1?i-1:i],c=o[0]/l[0],u=o[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${u});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${s}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Cse={kernelName:FC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:a}=t,{alignCorners:i}=r,o=new Nse(a.shape,s.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}};class Ise{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),s=Q5(n);this.userCode=`\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class _se{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=A9("rc",n),s=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,i=Q5(n);function o(n){const r=e.map(((r,s)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(s,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${s}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return o(e)}(r.slice())};\n          if(${s}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())};\n            if(${s}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const Ase={kernelName:UC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dims:a}=r,i=s.shape.length,o=$T(a,s.shape);if(0===i)return n7({inputs:{x:s},backend:n});const l=pE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _se(s.shape,o):new Ise(s.shape,o);return n.runWebGLProgram(l,[s],s.dtype)}};class Rse{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let s="";s="number"===typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${s}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Dse={kernelName:DI,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:s}=t,{radians:a,fillValue:i,center:o}=n,l=r,c=new Rse(s.shape,i),[u,h]=bz(o,s.shape[1],s.shape[2]),d=[[u,h,Math.sin(a),Math.cos(a)]];return l.runWebGLProgram(c,[s],s.dtype,d)}},Ose=p7({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Mse={kernelName:BC,backendName:"webgl",kernelFunc:Ose},Pse=p7({opSnippet:"return inversesqrt(x);",cpuKernelImpl:u9}),Lse={kernelName:VC,backendName:"webgl",kernelFunc:Pse};class Fse{constructor(e,t,n,r,s,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const o=Q5(s.length),l=Q5(a.length);let c="";1===n?c="i":2===n&&(c="i, j");const u=`getIndices(${c})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";i&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides";this.userCode=`\n        ${o} strides = ${o}(${s});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${u});\n              flattenedIndex += index * ${m};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(${f}, sum, float(found)));\n        }\n      `}}class $se{constructor(e,t,n,r,s,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const o=Q5(s.length),l=Q5(a.length);let c="";1===n?c="i":2===n&&(c="i, j");const u=`getIndices(${c})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";i&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${o} strides = ${o}(${s});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${u});\n              flattenedIndex += index.xz * ${m};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${g};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${d};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${f}, sum, found));\n        }\n      `}}const zse={kernelName:WC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s,updates:a}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=fO(0,s,i),d=[h/c,c];if(0===h)return n.makeTensorInfo(i,s.dtype);const p=S7({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),f=S7({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=pE().getBool("WEBGL_PACK")?new $se(l,o,p.shape.length,f.shape.length,u,d):new Fse(l,o,p.shape.length,f.shape.length,u,d);const y=n.runWebGLProgram(g,[f,p,m],f.dtype),v=S7({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}};class jse{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const s=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,a=2===pE().getNumber("WEBGL_VERSION")?"while (left < right) {":s,i="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${i} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const Use={kernelName:GC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:s,values:a}=t,{side:i}=r,o=new jse(s.shape[0],s.shape[1],a.shape[1],i),l=[[s.shape[1]]];return n.runWebGLProgram(o,[s,a],"int32",l)}};class Bse{constructor(e,t,n){let r,s;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)s="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=[];for(let r=0;r<t.length;r++)i.push(`${n[r]}`),r<e&&a.push(`${n[r]}`);r=a.join(),s=i.join()}const a=Q5(n);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${s}));\n        } else {\n          setOutput(getB(${s}));\n        }\n      }\n    `}}const Vse={kernelName:qC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:s,e:a}=t,i=new Bse(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,a],z_(s.dtype,a.dtype))}},Wse=p7({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Ez};\n  float scale = ${Nz};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),Hse={kernelName:KC,backendName:"webgl",kernelFunc:Wse},Gse=p7({opSnippet:d7+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:d9}),qse={kernelName:ZC,backendName:"webgl",kernelFunc:Gse},Kse=p7({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Yse={kernelName:JC,backendName:"webgl",kernelFunc:Kse},Xse=p7({opSnippet:d7+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${e7}\n  return result;\n`}),Qse={kernelName:XC,backendName:"webgl",kernelFunc:Xse},Jse=p7({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Zse={kernelName:QC,backendName:"webgl",kernelFunc:Jse},eae=p7({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),tae={kernelName:eI,backendName:"webgl",kernelFunc:eae},nae={kernelName:rI,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:a,paddings:i}=r;TT(s.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const o=a.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...i);for(let y=1+a.length;y<s.shape.length;++y)l.push([0,0]);const c=[],u=nse({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=wz(u.shape,a,o,!1),d=xz(h.length,a.length,!1),p=kz(u.shape,a,o,!1),f=S7({inputs:{x:u},backend:n,attrs:{shape:h}}),m=O7({inputs:{x:f},backend:n,attrs:{perm:d}}),g=S7({inputs:{x:m},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const rae={kernelName:iI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:s,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n         ${s.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const o=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(a.dataId),u=n.readSync(i.dataId)[0],[h,d,p,f,m]=m9(o,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],s.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const sae={kernelName:oI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:s,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.readSync(s.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[c,u,h]=g9(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],a.dtype,new Int32Array(h))]}};const aae={kernelName:lI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${s.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${a.shape}`);const i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[c,u]=y9(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const iae={kernelName:cI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${s.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${a.shape}`);const i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[c,u]=y9(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}};const oae={kernelName:uI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:s,sparseValues:a,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=fO(0,s,o),p=!1;if("string"===a.dtype){const e=n.bufferSync(s),t=n.bufferSync(a),r=m_(n.readSync(i.dataId)[0]),f=h9(e,t,o,d,u,c,l,h,r,p);return n.makeTensorInfo(o,f.dtype,f.values)}const f=new Fse(c,l,s.shape.length,a.shape.length,h,[d,1],p),m=n.runWebGLProgram(f,[a,s,i],a.dtype),g=S7({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),g}};const lae={kernelName:sI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{numOrSizeSplits:a,axis:i}=r,o=$T(i,s.shape)[0],l=Qz(s,a,o),c=s.shape.length,u=new Array(c).fill(0),h=s.shape.slice();return l.map((e=>{const t=[...h];t[o]=e;const r=_ee({inputs:{x:s},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},cae="return sqrt(x);",uae=p7({opSnippet:cae,packedOpSnippet:cae,cpuKernelImpl:v9}),hae={kernelName:tI,backendName:"webgl",kernelFunc:uae},dae=p7({opSnippet:"return x * x;"}),pae={kernelName:dI,backendName:"webgl",kernelFunc:dae},fae="return (a - b) * (a - b);",mae=f7({opSnippet:fae,packedOpSnippet:fae}),gae={kernelName:hI,backendName:"webgl",kernelFunc:mae};const yae={kernelName:pI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");const a=pj(n.readSync(s.dataId)),i=b9(a,"string",r);return n.makeTensorInfo(s.shape,"string",i)}};const vae={kernelName:AI,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:s}=t,a=$9+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `,i=new F9(s.shape,a);return r.runWebGLProgram(i,[s],s.dtype)}};class bae{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,s=Q5(n.length),a=Q5(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${s} begin = ${s}(${e});\n      ${s} strides = ${s}(${t});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}const wae={kernelName:fI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:a,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:w}=DO(s.shape,a,i,o,l,c,u,h,d);let x;if(m)x=S7({inputs:{x:s},backend:n,attrs:{shape:f}});else if(g||y){TT(s.shape.length>=1,(()=>`Input must have rank at least 1, got: ${s.shape.length}`));const e=bO(v,b,w),t=_ee({inputs:{x:s},backend:n,attrs:{begin:v,size:e}});x=S7({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([s])){const e=n.readSync(s.dataId),t=jR(s.shape,s.dtype,e),r=w9(p,t,w,v);x=n.makeTensorInfo(f,s.dtype,r.values)}else{const e=new bae(v,w,p);x=n.runWebGLProgram(e,[s],s.dtype)}}const k=S7({inputs:{x:x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(x),k}};const xae={kernelName:mI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=t,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[f,m]=x9(d,p,s,a,i,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const kae={kernelName:gI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:s}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.readSync(a.dataId),l=n.readSync(i.dataId)[0],[c,u,h]=k9(o,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const Sae={kernelName:yI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:s}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),o=S9(i,s);return n.makeTensorInfo(a.shape,"int32",o)}},Tae=p7({opSnippet:"return tan(x);"}),Eae={kernelName:bI,backendName:"webgl",kernelFunc:Tae},Nae=p7({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Cae={kernelName:wI,backendName:"webgl",kernelFunc:Nae};const Iae={kernelName:HC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:s,indices:a,updates:i}=t,{}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=fO(0,a,s.shape),d=[h/c,c];if(0===h)return n.makeTensorInfo(s.shape,a.dtype);const p=S7({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=S7({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=S7({inputs:{x:s},backend:n,attrs:{shape:d}}),g=new Fse(l,o,p.shape.length,f.shape.length,u,d,!1,!0),y=n.runWebGLProgram(g,[f,p,m],m.dtype),v=S7({inputs:{x:y},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};class _ae{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.rank=n.length;const r=Q5(this.rank),s=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<e.length;s++)r.push(`imod(${n[s]}, ${e[s]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${s}));\n      }\n    `}}function Aae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reps:a}=r;if("string"===s.dtype||s.shape.length>5){const e=n.readSync(s.dataId),t="string"===s.dtype?e.map((e=>m_(e))):e,r=jR(s.shape,s.dtype,t),i=E9(r,a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new _ae(s.shape,a);return n.runWebGLProgram(i,[s],s.dtype)}const Rae={kernelName:xI,backendName:"webgl",kernelFunc:Aae};class Dae{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Oae{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Mae(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Pae(e){let t=1;for(;t<e;)t*=2;return t}const Lae={kernelName:kI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{k:a,sorted:i}=r,o=pE().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=pE().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<o||a>l){const e=n.readSync(s.dataId),[t,r]=N9(e,c,s.dtype,a,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[s,pne({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(s.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(s):s,f=CT(c)/u,m=S7({inputs:{x:p},attrs:{shape:[f,u]},backend:n});d&&Mae(n,p);const g=Pae(a),y=Pae(u);let v=null;const b=()=>null===v?[m,m]:[m,v],w=(e,t,r)=>{const s=b(),a=new Dae(r),i=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],o=v;v=n.runWebGLProgram(a,s,"int32",i),Mae(n,o)};for(let E=1;E<g;E*=2){const e=2*E;for(let t=E;t>=1;t/=2)w(e,t,[f,y])}for(let E=y;E>g;E/=2){const e=b(),t=new Oae([f,E/2]),r=[[u],[null===v?1:0],[g]],s=v;v=n.runWebGLProgram(t,e,"int32",r),Mae(n,s);const a=g/2,i=2*a;for(let n=a;n>=1;n/=2)w(i,n,v.shape)}let x=v;v=_ee({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,a]}}),Mae(n,x);let k=Dne({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});Mae(n,m);const S=c.slice(0,-1);S.push(a),x=v,v=S7({inputs:{x:v},attrs:{shape:S},backend:n}),Mae(n,x);const T=k;return k=S7({inputs:{x:k},attrs:{shape:S},backend:n}),Mae(n,T),[k,v]}};class Fae{constructor(e,t,n,r,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i="nearest"===n?1:2;let o;switch(r){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${o} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${s});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${s});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${i} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const $ae={kernelName:SI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:s,transforms:a}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=r,[u,h,d,p]=s.shape,[f,m]=null!=c?c:[h,d],g=new Fae(h,d,i,o,l,[u,f,m,p]);return n.runWebGLProgram(g,[s,a],"float32")}};const zae={kernelName:EI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:s}=n,{x:a}=t;D5(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:c}=I9(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}};const jae={kernelName:NI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:s}=t;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s,o=i.shape.length,l=s.shape[a],c=new Array(o-1);let u=0;for(let m=0;m<o;m++)m!==a&&(c[u++]=i.shape[m]);const h=[],d=new Array(o).fill(0),p=i.shape.slice();p[a]=1;const f=new Array(l);for(let m=0;m<f.length;m++){d[a]=m;const e=_ee({inputs:{x:i},backend:n,attrs:{begin:d,size:p}}),t=S7({inputs:{x:e},backend:n,attrs:{shape:c}});f[m]=t,h.push(e)}return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class Uae{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,s=e.inSize,a=e.numSegments,i=a*Math.ceil(s/n);this.outputShape=[r,i];const o=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";s%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return initializationValue;\n        }\n      `);let h="";s%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${c}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${c}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}const Bae={kernelName:CI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,segmentIds:a}=t,{numSegments:i}=r,o=s.shape.length,l=[];let c=0;const u=xP([c],o);let h=s;null!=u&&(h=O7({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(h),c=SP(1,o)[0]);const d=hj(h.shape,c,i),p=CT([h.shape[c]]),f=S7({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=j_(s.dtype),g=(e,t,r,s,a)=>{const i=e.shape[0],o=e.shape[1],c=uj(o,a),u=new Uae({windowSize:c,inSize:o,batchSize:i,numSegments:a},t),h=n.compileAndRun(u,[e,r],s);if(l.push(h),h.shape[1]===a)return h;const d=use({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),p=Aae({inputs:{x:d},backend:n,attrs:{reps:[o/c]}});l.push(d),l.push(p);return g(h,t,p,s,a)},y=S7({inputs:{x:g(f,"unsortedSegmentSum",a,m,i)},backend:n,attrs:{shape:d}});let v=y;if(null!=u){l.push(y);const e=kP(u);v=O7({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},Vae=[L7,$7,j7,B7,H7,K7,Y7,X7,nee,ree,aee,oee,cee,hee,pee,gee,yee,wee,xee,kee,Eee,Ree,Dee,Oee,Mee,zee,Bee,Hee,a7,Kee,nte,ute,mte,yte,vte,bte,wte,kte,Tte,Nte,Dte,Ote,Mte,Lte,zte,Bte,Vte,Hte,qte,Kte,Xte,Qte,Zte,tne,rne,ane,lne,hne,fne,gne,bne,xne,Tne,Cne,Ine,Ane,One,Pne,Fne,r7,$ne,Zee,jne,Bne,Wne,l7,Gne,Kne,Yne,Qne,Zne,tre,rre,are,lre,ure,dre,fre,mre,gre,bre,wre,xre,kre,Sre,Ere,Ire,Are,zre,k7,Ure,Vre,Hre,qre,Lee,Yre,Jre,Zre,rse,ase,h7,ise,ose,lse,cse,hse,$ee,Ore,pse,mse,yse,T7,wse,kse,Ese,Cse,Ase,Dse,Mse,Lse,zse,Use,Vse,Hse,qse,Yse,Qse,Zse,Aee,$re,tae,nae,rae,sae,aae,iae,oae,lae,hae,pae,gae,yae,vae,wae,xae,kae,Sae,Lre,D7,Eae,Cae,Iae,Rae,Lae,$ae,M7,zae,jae,Bae,Qre];for(const n of Vae)VI(n);const Wae={"tfjs-core":KO,"tfjs-backend-cpu":v1,"tfjs-backend-webgl":Y9,"tfjs-data":BJ,"tfjs-layers":SH,"tfjs-converter":DQ,tfjs:"4.22.0"};let Hae=!0;const Gae=()=>{Hae=!1;try{localStorage.setItem("ai_feature_enabled","false"),console.log("TensorFlow features disabled for this browser")}catch(jEe){console.error("Failed to save TensorFlow setting to localStorage",jEe)}},qae=(0,X.createContext)(),Kae=e=>{let{children:t}=e;const[n,r]=(0,X.useState)(null),[s,a]=(0,X.useState)(null),[i,o]=(0,X.useState)(!0),[l,c]=(0,X.useState)(null),[u,h]=(0,X.useState)(navigator.onLine),[d,p]=(0,X.useState)(!1);(0,X.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("ai_feature_enabled");if(null!==e)return void p("true"===e);const t=await(async()=>{try{if("false"===localStorage.getItem("ai_feature_enabled"))return console.log("TensorFlow disabled by stored setting"),!1;if(!Hae)return!1;if(window.location.hostname.includes("localhost"))return!0;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return console.log("Mobile browser detected, disabling TensorFlow features"),Gae(),!1;await AA(),SF([1,2,3]).dispose();try{tO([[[1],[2]],[[3],[4]]]).dispose()}catch(l){return console.error("tensor3d test failed:",l),Gae(),!1}return!0}catch(l){return console.error("TensorFlow availability check failed:",l),Gae(),!1}})();p(t),localStorage.setItem("ai_feature_enabled",t.toString())}catch(l){console.error("Error checking AI compatibility:",l),p(!1)}})()}),[]),(0,X.useEffect)((()=>{const e=()=>h(!0),t=()=>h(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]);const f=async e=>{if(e)try{let t=null;if(u)try{t=await lT(e.uid),t&&eT("USER_PROFILE",t)}catch(UEe){console.error("Error fetching profile from Firebase:",UEe),t=ZS("USER_PROFILE")}else t=ZS("USER_PROFILE");if(t)a(t);else if(u){const t={displayName:e.displayName||"",email:e.email,createdAt:(new Date).toISOString()};await oT(e.uid,t),a(t),eT("USER_PROFILE",t),await(async()=>{try{if(!XS.currentUser||!XS.currentUser.uid)throw new Error("User must be authenticated to initialize categories");const e=await uT();if(e.length>0)return e;const t=[{name:"Salary",type:"income",icon:"\ud83d\udcb0"},{name:"Business",type:"income",icon:"\ud83c\udfe2"},{name:"Investment",type:"income",icon:"\ud83d\udcc8"},{name:"Rent",type:"income",icon:"\ud83c\udfe0"},{name:"Other",type:"income",icon:"\u2728"},{name:"Food",type:"expense",icon:"\ud83c\udf54"},{name:"Transport",type:"expense",icon:"\ud83d\ude97"},{name:"Housing",type:"expense",icon:"\ud83c\udfe1"},{name:"Utilities",type:"expense",icon:"\ud83d\udca1"},{name:"Shopping",type:"expense",icon:"\ud83d\udecd\ufe0f"},{name:"Entertainment",type:"expense",icon:"\ud83c\udfac"},{name:"Healthcare",type:"expense",icon:"\u2695\ufe0f"},{name:"Education",type:"expense",icon:"\ud83d\udcda"},{name:"Personal",type:"expense",icon:"\ud83d\udc64"},{name:"Raw Materials",type:"expense",icon:"\ud83c\udfed"},{name:"Other",type:"expense",icon:"\ud83d\udcdd"}],n=[];for(const r of t){const e=await hT(r);n.push(e)}return n}catch(l){throw console.error("Error initializing default categories:",l),l}})()}}catch(UEe){console.error("Error fetching user profile:",UEe)}else a(null)};(0,X.useEffect)((()=>{const e=ZS("AUTH_USER");e&&(r(e),f(e));const t=function(e,t,n,r){return Po(e).onAuthStateChanged(t,n,r)}(XS,(e=>{r(e),e&&f(e),o(!1)}));return t}),[u]);const m={currentUser:n,userProfile:s,loading:i,error:l,isOnline:u,aiFeatureEnabled:d,signUp:async(e,t,n)=>{c(null);try{const r=await rT(e,t,n);await oT(r.uid,{displayName:n,email:e,createdAt:(new Date).toISOString()})}catch(UEe){throw c(UEe.message),UEe}},signIn:async(e,t)=>{c(null);try{await sT(e,t)}catch(UEe){throw c(UEe.message),UEe}},logout:async()=>{c(null);try{await aT()}catch(UEe){throw c(UEe.message),UEe}},refreshProfile:()=>f(n)};return(0,Nt.jsx)(qae.Provider,{value:m,children:t})},Yae=()=>(0,X.useContext)(qae),Xae=(0,X.createContext)(),Qae=e=>{let{children:t}=e;const[n,r]=(0,X.useState)(!1);(0,X.useEffect)((()=>{const e=localStorage.getItem("darkMode");if(e)r(JSON.parse(e));else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;r(e)}}),[]),(0,X.useEffect)((()=>{localStorage.setItem("darkMode",JSON.stringify(n)),n?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}),[n]);const s={darkMode:n,toggleTheme:()=>{r((e=>!e))}};return(0,Nt.jsx)(Xae.Provider,{value:s,children:t})},Jae=()=>(0,X.useContext)(Xae),Zae=()=>{const{darkMode:e,toggleTheme:t}=Jae();return(0,Nt.jsx)("div",{className:"theme-toggle-container d-flex align-items-center",children:(0,Nt.jsxs)("label",{className:"theme-switch",title:e?"Switch to light mode":"Switch to dark mode",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:e,onChange:t,"aria-label":"Theme toggle switch"}),(0,Nt.jsxs)("span",{className:"theme-switch-slider",children:[(0,Nt.jsx)(Zi,{className:"theme-icon theme-icon-light"}),(0,Nt.jsx)(Vi,{className:"theme-icon theme-icon-dark"})]})]})})},eie=()=>{const e=We(),t=Ge(),{currentUser:n,userProfile:r,logout:s,isOnline:a}=Yae(),{darkMode:i}=Jae();return(0,Nt.jsx)(fs,{bg:i?"dark":"light",variant:i?"dark":"light",expand:"lg",className:"py-3 shadow-sm",style:{backgroundColor:"var(--navbar-bg)",boxShadow:"var(--navbar-shadow)"},children:(0,Nt.jsxs)(Ft,{children:[(0,Nt.jsxs)(fs.Brand,{as:xt,to:"/",className:"d-flex align-items-center",children:[(0,Nt.jsx)("div",{className:"me-2 d-flex align-items-center justify-content-center",style:{width:40,height:40,borderRadius:"50%",backgroundColor:"rgba(94, 92, 230, 0.2)"},children:(0,Nt.jsx)("span",{style:{color:"var(--primary-color)",fontSize:"1.2rem"},children:"\ud83d\udcb0"})}),(0,Nt.jsx)("span",{className:"d-none d-md-inline",children:"Panekkatt Money Tracker"})]}),(0,Nt.jsxs)("div",{className:"d-flex align-items-center me-2 d-lg-none",children:[!a&&(0,Nt.jsx)("div",{className:"text-warning me-3",children:(0,Nt.jsx)("small",{children:"Offline"})}),(0,Nt.jsx)(Zae,{}),(0,Nt.jsxs)("div",{className:"notification-bell ms-2 me-3",children:[(0,Nt.jsx)(ki,{size:20}),(0,Nt.jsx)("span",{className:"notification-badge",children:"3"})]}),(0,Nt.jsx)(fs.Toggle,{"aria-controls":"basic-navbar-nav"})]}),(0,Nt.jsxs)(fs.Collapse,{id:"basic-navbar-nav",children:[(0,Nt.jsxs)(Bs,{className:"mx-auto",children:[(0,Nt.jsxs)(Bs.Link,{as:xt,to:"/",className:"mx-1 px-3 "+("/"===e.pathname?"active fw-bold":""),children:[(0,Nt.jsx)(Ei,{className:"me-2 d-none d-md-inline"})," Dashboard"]}),(0,Nt.jsxs)(Bs.Link,{as:xt,to:"/transactions",className:"mx-1 px-3 "+("/transactions"===e.pathname?"active fw-bold":""),children:[(0,Nt.jsx)(Di,{className:"me-2 d-none d-md-inline"})," Transactions"]}),(0,Nt.jsxs)(Bs.Link,{as:xt,to:"/reports",className:"mx-1 px-3 "+("/reports"===e.pathname?"active fw-bold":""),children:[(0,Nt.jsx)(Mi,{className:"me-2 d-none d-md-inline"})," Reports"]}),(0,Nt.jsxs)(Bs.Link,{as:xt,to:"/categories",className:"mx-1 px-3 "+("/categories"===e.pathname?"active fw-bold":""),children:[(0,Nt.jsx)(eo,{className:"me-2 d-none d-md-inline"})," Categories"]}),(0,Nt.jsxs)(Bs.Link,{as:xt,to:"/ai-insights",className:"mx-1 px-3 "+("/ai-insights"===e.pathname?"active fw-bold":""),children:[(0,Nt.jsx)(qi,{className:"me-2 d-none d-md-inline"})," AI Insights"]})]}),(0,Nt.jsxs)("div",{className:"d-none d-lg-flex align-items-center",children:[!a&&(0,Nt.jsx)("div",{className:"text-warning me-3",children:(0,Nt.jsx)("small",{children:"Offline Mode"})}),(0,Nt.jsx)(Zae,{}),(0,Nt.jsxs)("div",{className:"notification-bell ms-2 me-3",children:[(0,Nt.jsx)(ki,{size:20}),(0,Nt.jsx)("span",{className:"notification-badge",children:"3"})]}),(0,Nt.jsxs)(Ws,{variant:"primary",size:"sm",className:"rounded-pill px-3 py-2 me-3",onClick:()=>{t("/transactions",{state:{openForm:!0}})},disabled:!a,children:[(0,Nt.jsx)(Gi,{className:"me-1"})," Add Transaction"]}),(0,Nt.jsxs)(ui,{align:"end",children:[(0,Nt.jsx)(ui.Toggle,{variant:i?"dark":"light",id:"dropdown-user",className:"d-flex align-items-center border-0",children:(0,Nt.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Nt.jsx)("div",{className:"user-avatar me-2",children:(0,Nt.jsx)(ao,{})}),(0,Nt.jsxs)("div",{className:"d-none d-md-block",children:[(0,Nt.jsx)("div",{className:"small fw-bold",children:(null===r||void 0===r?void 0:r.displayName)||(null===n||void 0===n?void 0:n.displayName)||"User"}),(0,Nt.jsx)("div",{className:"small text-muted",children:(null===r||void 0===r?void 0:r.role)||"User"})]})]})}),(0,Nt.jsxs)(ui.Menu,{className:i?"dropdown-menu-dark":"",children:[(0,Nt.jsxs)(ui.Item,{as:xt,to:"/profile",children:[(0,Nt.jsx)(ao,{className:"me-2"})," My Profile"]}),(0,Nt.jsx)(ui.Divider,{}),(0,Nt.jsxs)(ui.Item,{onClick:async()=>{try{await s(),t("/login")}catch(e){console.error("Failed to log out",e)}},children:[(0,Nt.jsx)(Ji,{className:"me-2"})," Sign Out"]})]})]})]})]})]})})},tie=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:s="div",...a}=e;const i=Dt(n,"row"),o=Ot(),l=Mt(),c=`${i}-cols`,u=[];return o.forEach((e=>{const t=a[e];let n;delete a[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==l?`-${e}`:"";null!=n&&u.push(`${c}${r}-${n}`)})),(0,Nt.jsx)(s,{ref:t,...a,className:Et()(r,i,...u)})}));tie.displayName="Row";const nie=tie;const rie=X.forwardRef(((e,t)=>{const[{className:n,...r},{as:s="div",bsPrefix:a,spans:i}]=function(e){let{as:t,bsPrefix:n,className:r,...s}=e;n=Dt(n,"col");const a=Ot(),i=Mt(),o=[],l=[];return a.forEach((e=>{const t=s[e];let r,a,c;delete s[e],"object"===typeof t&&null!=t?({span:r,offset:a,order:c}=t):r=t;const u=e!==i?`-${e}`:"";r&&o.push(!0===r?`${n}${u}`:`${n}${u}-${r}`),null!=c&&l.push(`order${u}-${c}`),null!=a&&l.push(`offset${u}-${a}`)})),[{...s,className:Et()(r,...o,...l)},{as:t,bsPrefix:n,spans:o}]}(e);return(0,Nt.jsx)(s,{...r,ref:t,className:Et()(n,!i.length&&a)})}));rie.displayName="Col";const sie=rie,aie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"card-body"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));aie.displayName="CardBody";const iie=aie,oie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"card-footer"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));oie.displayName="CardFooter";const lie=oie,cie=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:s="div",...a}=e;const i=Dt(n,"card-header"),o=(0,X.useMemo)((()=>({cardHeaderBsPrefix:i})),[i]);return(0,Nt.jsx)(Os.Provider,{value:o,children:(0,Nt.jsx)(s,{ref:t,...a,className:Et()(r,i)})})}));cie.displayName="CardHeader";const uie=cie,hie=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,variant:s,as:a="img",...i}=e;const o=Dt(n,"card-img");return(0,Nt.jsx)(a,{ref:t,className:Et()(s?`${o}-${s}`:o,r),...i})}));hie.displayName="CardImg";const die=hie,pie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"card-img-overlay"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));pie.displayName="CardImgOverlay";const fie=pie,mie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="a",...a}=e;return r=Dt(r,"card-link"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));mie.displayName="CardLink";const gie=mie,yie=Hr("h6"),vie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s=yie,...a}=e;return r=Dt(r,"card-subtitle"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));vie.displayName="CardSubtitle";const bie=vie,wie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="p",...a}=e;return r=Dt(r,"card-text"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));wie.displayName="CardText";const xie=wie,kie=Hr("h5"),Sie=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s=kie,...a}=e;return r=Dt(r,"card-title"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));Sie.displayName="CardTitle";const Tie=Sie,Eie=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,bg:s,text:a,border:i,body:o=!1,children:l,as:c="div",...u}=e;const h=Dt(n,"card");return(0,Nt.jsx)(c,{ref:t,...u,className:Et()(r,h,s&&`bg-${s}`,a&&`text-${a}`,i&&`border-${i}`),children:o?(0,Nt.jsx)(iie,{children:l}):l})}));Eie.displayName="Card";const Nie=Object.assign(Eie,{Img:die,Title:Tie,Subtitle:bie,Body:iie,Link:gie,Text:xie,Header:uie,Footer:lie,ImgOverlay:fie}),Cie=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Iie=e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),_ie=(e,t)=>{const n=new Date(e),r=new Date(t);return n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()?`${n.getDate()} - ${r.getDate()} ${n.toLocaleDateString("en-IN",{month:"long"})}, ${n.getFullYear()}`:n.getFullYear()===r.getFullYear()?`${n.getDate()} ${n.toLocaleDateString("en-IN",{month:"short"})} - ${r.getDate()} ${r.toLocaleDateString("en-IN",{month:"short"})}, ${n.getFullYear()}`:`${n.getDate()} ${n.toLocaleDateString("en-IN",{month:"short"})}, ${n.getFullYear()} - ${r.getDate()} ${r.toLocaleDateString("en-IN",{month:"short"})}, ${r.getFullYear()}`},Aie=e=>{let{transactions:t}=e;const n=t.filter((e=>"income"===e.type)).reduce(((e,t)=>e+t.amount),0),r=t.filter((e=>"expense"===e.type)).reduce(((e,t)=>e+t.amount),0),s=n-r,a=n>0?(s/n*100).toFixed(1):0,i=r+n>0?(n/(r+n)*100).toFixed(0):0,o=new Date,l=o.getDay(),c=new Date(o.getTime()-6048e5),u=t.filter((e=>"expense"===e.type&&new Date(e.date)>=c)).reduce(((e,t)=>e+t.amount),0),h=u/7,d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(((e,t)=>({day:e,height:10+Math.floor(30*Math.random()),isActive:t===l}))),p=[{id:1,title:"Electricity Bill",date:"Oct 15",amount:1200,icon:(0,Nt.jsx)(oo,{})},{id:2,title:"Raw Materials",date:"Oct 18",amount:5e3,icon:(0,Nt.jsx)(_i,{})}];return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)(nie,{className:"mb-4",children:[(0,Nt.jsx)(sie,{md:4,className:"mb-3 mb-md-0",children:(0,Nt.jsx)(Nie,{className:"summary-card card-3d",children:(0,Nt.jsxs)("div",{className:"card-3d-inner",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,Nt.jsx)("div",{className:"me-3 icon-income feature-card-icon",children:(0,Nt.jsx)(wi,{})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h6",{className:"text-muted mb-0",children:"Income"}),(0,Nt.jsx)("h4",{className:"text-income mb-0",children:Cie(n)})]})]}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Nt.jsx)("span",{className:"text-muted small",children:"Total earnings"}),(0,Nt.jsxs)("span",{className:"text-success small",children:[(0,Nt.jsx)(xi,{size:10,className:"me-1"}),i,"%"]})]})]})})}),(0,Nt.jsx)(sie,{md:4,className:"mb-3 mb-md-0",children:(0,Nt.jsx)(Nie,{className:"summary-card card-3d",children:(0,Nt.jsxs)("div",{className:"card-3d-inner",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,Nt.jsx)("div",{className:"me-3 icon-expense feature-card-icon",children:(0,Nt.jsx)(xi,{})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h6",{className:"text-muted mb-0",children:"Expenses"}),(0,Nt.jsx)("h4",{className:"text-expense mb-0",children:Cie(r)})]})]}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Nt.jsx)("span",{className:"text-muted small",children:"Total spending"}),(0,Nt.jsxs)("span",{className:"text-expense small",children:[(0,Nt.jsx)(xi,{size:10,className:"me-1"}),r>0?(r/(n||1)*100).toFixed(0):0,"%"]})]})]})})}),(0,Nt.jsx)(sie,{md:4,children:(0,Nt.jsx)(Nie,{className:"summary-card card-3d",children:(0,Nt.jsxs)("div",{className:"card-3d-inner",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,Nt.jsx)("div",{className:"me-3 icon-report feature-card-icon",children:(0,Nt.jsx)(Bi,{})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h6",{className:"text-muted mb-0",children:"Balance"}),(0,Nt.jsx)("h4",{className:s>=0?"text-income mb-0":"text-expense mb-0",children:Cie(s)})]})]}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Nt.jsx)("span",{className:"text-muted small",children:"Net earnings"}),(0,Nt.jsxs)("span",{className:s>=0?"text-success small":"text-danger small",children:[s>=0?(0,Nt.jsx)(xi,{size:10,className:"me-1"}):(0,Nt.jsx)(wi,{size:10,className:"me-1"}),a,"%"]})]})]})})})]}),(0,Nt.jsxs)(nie,{className:"mb-4",children:[(0,Nt.jsx)(sie,{md:7,className:"mb-3 mb-md-0",children:(0,Nt.jsxs)("div",{className:"analytics-card",children:[(0,Nt.jsx)("h3",{children:"Weekly Spending"}),(0,Nt.jsxs)("div",{className:"analytics-card-content",children:[(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-white mb-2",children:Cie(u)}),(0,Nt.jsxs)("p",{className:"text-light mb-0",children:["Avg. ",Cie(h),"/day"]})]}),(0,Nt.jsx)("div",{children:(0,Nt.jsxs)("span",{className:"badge bg-primary rounded-pill",children:[(0,Nt.jsx)(xi,{className:"me-1",size:10}),"8% vs. last week"]})})]}),(0,Nt.jsx)("div",{className:"weekly-spending mt-4",children:d.map(((e,t)=>(0,Nt.jsxs)("div",{className:"day-column",children:[(0,Nt.jsx)("div",{className:"spending-bar "+(e.isActive?"active":""),style:{height:`${e.height}px`,boxShadow:e.isActive?"0 0 10px var(--primary-color)":"none",transform:e.isActive?"scale(1.1)":"scale(1)"}}),(0,Nt.jsx)("span",{className:"day-label",children:e.day})]},t)))})]})]})}),(0,Nt.jsx)(sie,{md:5,children:(0,Nt.jsxs)("div",{className:"analytics-card h-100",children:[(0,Nt.jsx)("h3",{children:"Upcoming Payments"}),(0,Nt.jsx)("div",{className:"analytics-card-content",children:(0,Nt.jsxs)("div",{className:"upcoming-payments",children:[p.map((e=>(0,Nt.jsxs)("div",{className:"payment-item",children:[(0,Nt.jsx)("div",{className:"payment-icon",children:e.icon}),(0,Nt.jsxs)("div",{className:"payment-details",children:[(0,Nt.jsx)("div",{className:"payment-title",children:e.title}),(0,Nt.jsx)("div",{className:"payment-date",children:e.date})]}),(0,Nt.jsx)("div",{className:"payment-amount",children:Cie(e.amount)})]},e.id))),0===p.length&&(0,Nt.jsx)("p",{className:"text-light",children:"No upcoming payments"})]})})]})})]})]})};function Rie(e){return e+.5|0}const Die=(e,t,n)=>Math.max(Math.min(e,n),t);function Oie(e){return Die(Rie(2.55*e),0,255)}function Mie(e){return Die(Rie(255*e),0,255)}function Pie(e){return Die(Rie(e/2.55)/100,0,1)}function Lie(e){return Die(Rie(100*e),0,100)}const Fie={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$ie=[..."0123456789ABCDEF"],zie=e=>$ie[15&e],jie=e=>$ie[(240&e)>>4]+$ie[15&e],Uie=e=>(240&e)>>4===(15&e);function Bie(e){var t=(e=>Uie(e.r)&&Uie(e.g)&&Uie(e.b)&&Uie(e.a))(e)?zie:jie;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Vie=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Wie(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function Hie(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function Gie(e,t,n){const r=Wie(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function qie(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),a=Math.min(t,n,r),i=(s+a)/2;let o,l,c;return s!==a&&(c=s-a,l=i>.5?c/(2-s-a):c/(s+a),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,i]}function Kie(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Mie)}function Yie(e,t,n){return Kie(Wie,e,t,n)}function Xie(e){return(e%360+360)%360}function Qie(e){const t=Vie.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Oie(+t[5]):Mie(+t[5]));const s=Xie(+t[2]),a=+t[3]/100,i=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Kie(Gie,e,t,n)}(s,a,i):"hsv"===t[1]?function(e,t,n){return Kie(Hie,e,t,n)}(s,a,i):Yie(s,a,i),{r:n[0],g:n[1],b:n[2],a:r}}const Jie={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Zie={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let eoe;function toe(e){eoe||(eoe=function(){const e={},t=Object.keys(Zie),n=Object.keys(Jie);let r,s,a,i,o;for(r=0;r<t.length;r++){for(i=o=t[r],s=0;s<n.length;s++)a=n[s],o=o.replace(a,Jie[a]);a=parseInt(Zie[i],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),eoe.transparent=[0,0,0,0]);const t=eoe[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const noe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const roe=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,soe=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function aoe(e,t,n){if(e){let r=qie(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Yie(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function ioe(e,t){return e?Object.assign(t||{},e):e}function ooe(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Mie(e[3]))):(t=ioe(e,{r:0,g:0,b:0,a:1})).a=Mie(t.a),t}function loe(e){return"r"===e.charAt(0)?function(e){const t=noe.exec(e);let n,r,s,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?Oie(e):Die(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Oie(n):Die(n,0,255)),r=255&(t[4]?Oie(r):Die(r,0,255)),s=255&(t[6]?Oie(s):Die(s,0,255)),{r:n,g:r,b:s,a:a}}}(e):Qie(e)}class coe{constructor(e){if(e instanceof coe)return e;const t=typeof e;let n;"object"===t?n=ooe(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Fie[e[1]],g:255&17*Fie[e[2]],b:255&17*Fie[e[3]],a:5===n?17*Fie[e[4]]:255}:7!==n&&9!==n||(t={r:Fie[e[1]]<<4|Fie[e[2]],g:Fie[e[3]]<<4|Fie[e[4]],b:Fie[e[5]]<<4|Fie[e[6]],a:9===n?Fie[e[7]]<<4|Fie[e[8]]:255})),t}(e)||toe(e)||loe(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=ioe(this._rgb);return e&&(e.a=Pie(e.a)),e}set rgb(e){this._rgb=ooe(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Pie(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?Bie(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=qie(e),n=t[0],r=Lie(t[1]),s=Lie(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${Pie(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const a=t===s?.5:t,i=2*a-1,o=n.a-r.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=soe(Pie(e.r)),s=soe(Pie(e.g)),a=soe(Pie(e.b));return{r:Mie(roe(r+n*(soe(Pie(t.r))-r))),g:Mie(roe(s+n*(soe(Pie(t.g))-s))),b:Mie(roe(a+n*(soe(Pie(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new coe(this.rgb)}alpha(e){return this._rgb.a=Mie(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Rie(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return aoe(this._rgb,2,e),this}darken(e){return aoe(this._rgb,2,-e),this}saturate(e){return aoe(this._rgb,1,e),this}desaturate(e){return aoe(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=qie(e);n[0]=Xie(n[0]+t),n=Yie(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function uoe(){}const hoe=(()=>{let e=0;return()=>e++})();function doe(e){return null===e||void 0===e}function poe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function foe(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function moe(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function goe(e,t){return moe(e)?e:t}function yoe(e,t){return"undefined"===typeof e?t:e}const voe=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function boe(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function woe(e,t,n,r){let s,a,i;if(poe(e))if(a=e.length,r)for(s=a-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<a;s++)t.call(n,e[s],s);else if(foe(e))for(i=Object.keys(e),a=i.length,s=0;s<a;s++)t.call(n,e[i[s]],i[s])}function xoe(e,t){let n,r,s,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],a=t[n],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function koe(e){if(poe(e))return e.map(koe);if(foe(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=koe(e[n[s]]);return t}return e}function Soe(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Toe(e,t,n,r){if(!Soe(e))return;const s=t[e],a=n[e];foe(s)&&foe(a)?Eoe(s,a,r):t[e]=koe(a)}function Eoe(e,t,n){const r=poe(t)?t:[t],s=r.length;if(!foe(e))return e;const a=(n=n||{}).merger||Toe;let i;for(let o=0;o<s;++o){if(i=r[o],!foe(i))continue;const t=Object.keys(i);for(let r=0,s=t.length;r<s;++r)a(t[r],e,i,n)}return e}function Noe(e,t){return Eoe(e,t,{merger:Coe})}function Coe(e,t,n){if(!Soe(e))return;const r=t[e],s=n[e];foe(r)&&foe(s)?Noe(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=koe(s))}const Ioe={"":e=>e,x:e=>e.x,y:e=>e.y};function _oe(e,t){const n=Ioe[t]||(Ioe[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Aoe(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Roe=e=>"undefined"!==typeof e,Doe=e=>"function"===typeof e,Ooe=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Moe=Math.PI,Poe=2*Moe,Loe=Poe+Moe,Foe=Number.POSITIVE_INFINITY,$oe=Moe/180,zoe=Moe/2,joe=Moe/4,Uoe=2*Moe/3,Boe=Math.log10,Voe=Math.sign;function Woe(e,t,n){return Math.abs(e-t)<n}function Hoe(e){const t=Math.round(e);e=Woe(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Boe(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Goe(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function qoe(e,t,n){let r,s,a;for(r=0,s=e.length;r<s;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Koe(e){return e*(Moe/180)}function Yoe(e){return e*(180/Moe)}function Xoe(e){if(!moe(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Qoe(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Moe&&(a+=Poe),{angle:a,distance:s}}function Joe(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Zoe(e,t){return(e-t+Loe)%Poe-Moe}function ele(e){return(e%Poe+Poe)%Poe}function tle(e,t,n,r){const s=ele(e),a=ele(t),i=ele(n),o=ele(a-s),l=ele(i-s),c=ele(s-a),u=ele(s-i);return s===a||s===i||r&&a===i||o>l&&c<u}function nle(e,t,n){return Math.max(t,Math.min(n,e))}function rle(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function sle(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,a=0;for(;s-a>1;)r=a+s>>1,n(r)?a=r:s=r;return{lo:a,hi:s}}const ale=(e,t,n,r)=>sle(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),ile=(e,t,n)=>sle(e,n,(r=>e[r][t]>=n));const ole=["push","pop","shift","splice","unshift"];function lle(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(ole.forEach((t=>{delete e[t]})),delete e._chartjs)}function cle(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ule="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function hle(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];n=a,r||(r=!0,ule.call(window,(()=>{r=!1,e.apply(t,n)})))}}const dle=e=>"start"===e?"left":"end"===e?"right":"center",ple=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function fle(e,t,n){const r=t.length;let s=0,a=r;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=i.axis,{min:h,max:d,minDefined:p,maxDefined:f}=i.getUserBounds();if(p){if(s=Math.min(ale(l,u,h).lo,n?r:ale(t,u,i.getPixelForValue(h)).lo),c){const e=l.slice(0,s+1).reverse().findIndex((e=>!doe(e[o.axis])));s-=Math.max(0,e)}s=nle(s,0,r-1)}if(f){let e=Math.max(ale(l,i.axis,d,!0).hi+1,n?0:ale(t,u,i.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!doe(e[o.axis])));e+=Math.max(0,t)}a=nle(e,s,r)-s}else a=r-s}return{start:s,count:a}}function mle(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),a}const gle=e=>0===e||1===e,yle=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Poe/n),vle=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Poe/n)+1,ble={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*zoe),easeOutSine:e=>Math.sin(e*zoe),easeInOutSine:e=>-.5*(Math.cos(Moe*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>gle(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>gle(e)?e:yle(e,.075,.3),easeOutElastic:e=>gle(e)?e:vle(e,.075,.3),easeInOutElastic(e){const t=.1125;return gle(e)?e:e<.5?.5*yle(2*e,t,.45):.5+.5*vle(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ble.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*ble.easeInBounce(2*e):.5*ble.easeOutBounce(2*e-1)+.5};function wle(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function xle(e){return wle(e)?e:new coe(e)}function kle(e){return wle(e)?e:new coe(e).saturate(.5).darken(.1).hexString()}const Sle=["x","y","borderWidth","radius","tension"],Tle=["color","borderColor","backgroundColor"];const Ele=new Map;function Nle(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Ele.get(n);return r||(r=new Intl.NumberFormat(e,t),Ele.set(n,r)),r}(t,n).format(e)}const Cle={values:e=>poe(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const i=Boe(Math.abs(a)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Nle(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Boe(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Cle.numeric.call(this,e,t,n):""}};var Ile={formatters:Cle};const _le=Object.create(null),Ale=Object.create(null);function Rle(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Dle(e,t,n){return"string"===typeof t?Eoe(Rle(e,t),n):Eoe(Rle(e,""),t)}class Ole{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>kle(t.backgroundColor),this.hoverBorderColor=(e,t)=>kle(t.borderColor),this.hoverColor=(e,t)=>kle(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Dle(this,e,t)}get(e){return Rle(this,e)}describe(e,t){return Dle(Ale,e,t)}override(e,t){return Dle(_le,e,t)}route(e,t,n,r){const s=Rle(this,e),a=Rle(this,n),i="_"+t;Object.defineProperties(s,{[i]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=a[r];return foe(e)?Object.assign({},t,e):yoe(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Mle=new Ole({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Tle},numbers:{type:"number",properties:Sle}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ile.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Ple(e,t,n,r,s){let a=t[s];return a||(a=t[s]=e.measureText(s).width,n.push(s)),a>r&&(r=a),r}function Lle(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function Fle(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function $le(e,t,n,r){zle(e,t,n,r,null)}function zle(e,t,n,r,s){let a,i,o,l,c,u,h,d;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*$oe;if(p&&"object"===typeof p&&(a=p.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:s?e.ellipse(n,r,s/2,m,0,0,Poe):e.arc(n,r,m,0,Poe),e.closePath();break;case"triangle":u=s?s/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=Uoe,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=Uoe,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,i=Math.cos(g+joe)*l,h=Math.cos(g+joe)*(s?s/2-c:l),o=Math.sin(g+joe)*l,d=Math.sin(g+joe)*(s?s/2-c:l),e.arc(n-h,r-o,c,g-Moe,g-zoe),e.arc(n+d,r-i,c,g-zoe,g),e.arc(n+h,r+o,c,g,g+zoe),e.arc(n-d,r+i,c,g+zoe,g+Moe),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*m,u=s?s/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=joe;case"rectRot":h=Math.cos(g)*(s?s/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),e.moveTo(n-h,r-o),e.lineTo(n+d,r-i),e.lineTo(n+h,r+o),e.lineTo(n-d,r+i),e.closePath();break;case"crossRot":g+=joe;case"cross":h=Math.cos(g)*(s?s/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-i),e.lineTo(n-d,r+i);break;case"star":h=Math.cos(g)*(s?s/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-i),e.lineTo(n-d,r+i),g+=joe,h=Math.cos(g)*(s?s/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-i),e.lineTo(n-d,r+i);break;case"line":i=s?s/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(s?s/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function jle(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ule(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ble(e){e.restore()}function Vle(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Wle(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Hle(e,t,n,r,s){if(s.strikethrough||s.underline){const a=e.measureText(r),i=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(i,u),e.lineTo(o,u),e.stroke()}}function Gle(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function qle(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=poe(t)?t:[t],o=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),doe(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<i.length;++l)c=i[l],a.backdrop&&Gle(e,a.backdrop),o&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),doe(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,r,a.maxWidth)),e.fillText(c,n,r,a.maxWidth),Hle(e,n,r,c,a),r+=Number(s.lineHeight);e.restore()}function Kle(e,t){const{x:n,y:r,w:s,h:a,radius:i}=t;e.arc(n+i.topLeft,r+i.topLeft,i.topLeft,1.5*Moe,Moe,!0),e.lineTo(n,r+a-i.bottomLeft),e.arc(n+i.bottomLeft,r+a-i.bottomLeft,i.bottomLeft,Moe,zoe,!0),e.lineTo(n+s-i.bottomRight,r+a),e.arc(n+s-i.bottomRight,r+a-i.bottomRight,i.bottomRight,zoe,0,!0),e.lineTo(n+s,r+i.topRight),e.arc(n+s-i.topRight,r+i.topRight,i.topRight,0,-zoe,!0),e.lineTo(n+i.topLeft,r)}const Yle=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xle=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Qle(e,t){const n=(""+e).match(Yle);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Jle=e=>+e||0;function Zle(e,t){const n={},r=foe(t),s=r?Object.keys(t):t,a=foe(e)?r?n=>yoe(e[n],e[t[n]]):t=>e[t]:()=>e;for(const i of s)n[i]=Jle(a(i));return n}function ece(e){return Zle(e,{top:"y",right:"x",bottom:"y",left:"x"})}function tce(e){return Zle(e,["topLeft","topRight","bottomLeft","bottomRight"])}function nce(e){const t=ece(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function rce(e,t){e=e||{},t=t||Mle.font;let n=yoe(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=yoe(e.style,t.style);r&&!(""+r).match(Xle)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:yoe(e.family,t.family),lineHeight:Qle(yoe(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:yoe(e.weight,t.weight),string:""};return s.string=function(e){return!e||doe(e.size)||doe(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function sce(e,t,n,r){let s,a,i,o=!0;for(s=0,a=e.length;s<a;++s)if(i=e[s],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==n&&poe(i)&&(i=i[n%i.length],o=!1),void 0!==i))return r&&!o&&(r.cacheable=!1),i}function ace(e,t){return Object.assign(Object.create(e),t)}function ice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=yce("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>ice([r,...e],t,s,n)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>hce(n,r,(()=>function(e,t,n,r){let s;for(const a of t)if(s=yce(cce(a,e),n),"undefined"!==typeof s)return uce(e,s)?mce(n,r,e,s):s}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>vce(e).includes(t),ownKeys:e=>vce(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function oce(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:lce(e,r),setContext:t=>oce(e,t,n,r),override:s=>oce(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>hce(e,t,(()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:i}=e;let o=r[t];Doe(o)&&i.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:a,_subProxy:i,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(a,i||r);o.delete(e),uce(e,l)&&(l=mce(s._scopes,s,e,l));return l}(t,o,e,n));poe(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:a,_subProxy:i,_descriptors:o}=n;if("undefined"!==typeof a.index&&r(e))return t[a.index%t.length];if(foe(t[0])){const n=t,r=s._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=mce(r,s,e,l);t.push(oce(n,a,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));uce(t,o)&&(o=oce(o,s,a&&a[t],i));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function lce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Doe(n)?n:()=>n,isIndexable:Doe(r)?r:()=>r}}const cce=(e,t)=>e?e+Aoe(t):t,uce=(e,t)=>foe(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function hce(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function dce(e,t,n){return Doe(e)?e(t,n):e}const pce=(e,t)=>!0===e?t:"string"===typeof e?_oe(t,e):void 0;function fce(e,t,n,r,s){for(const a of t){const t=pce(n,a);if(t){e.add(t);const a=dce(t._fallback,n,s);if("undefined"!==typeof a&&a!==n&&a!==r)return a}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function mce(e,t,n,r){const s=t._rootScopes,a=dce(t._fallback,n,r),i=[...e,...s],o=new Set;o.add(r);let l=gce(o,i,n,a||n,r);return null!==l&&(("undefined"===typeof a||a===n||(l=gce(o,i,a,l,r),null!==l))&&ice(Array.from(o),[""],s,a,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(poe(s)&&foe(n))return n;return s||{}}(t,n,r))))}function gce(e,t,n,r,s){for(;n;)n=fce(e,t,n,r,s);return n}function yce(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function vce(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}const bce=Number.EPSILON||1e-14,wce=(e,t)=>t<e.length&&!e[t].skip&&e[t],xce=e=>"x"===e?"y":"x";function kce(e,t,n,r){const s=e.skip?t:e,a=t,i=n.skip?t:n,o=Joe(a,s),l=Joe(i,a);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:a.x-h*(i.x-s.x),y:a.y-h*(i.y-s.y)},next:{x:a.x+d*(i.x-s.x),y:a.y+d*(i.y-s.y)}}}function Sce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=xce(t),r=e.length,s=Array(r).fill(0),a=Array(r);let i,o,l,c=wce(e,0);for(i=0;i<r;++i)if(o=l,l=c,c=wce(e,i+1),l){if(c){const e=c[t]-l[t];s[i]=0!==e?(c[n]-l[n])/e:0}a[i]=o?c?Voe(s[i-1])!==Voe(s[i])?0:(s[i-1]+s[i])/2:s[i-1]:s[i]}!function(e,t,n){const r=e.length;let s,a,i,o,l,c=wce(e,0);for(let u=0;u<r-1;++u)l=c,c=wce(e,u+1),l&&c&&(Woe(t[u],0,bce)?n[u]=n[u+1]=0:(s=n[u]/t[u],a=n[u+1]/t[u],o=Math.pow(s,2)+Math.pow(a,2),o<=9||(i=3/Math.sqrt(o),n[u]=s*i*t[u],n[u+1]=a*i*t[u])))}(e,s,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=xce(n),s=e.length;let a,i,o,l=wce(e,0);for(let c=0;c<s;++c){if(i=o,o=l,l=wce(e,c+1),!o)continue;const s=o[n],u=o[r];i&&(a=(s-i[n])/3,o[`cp1${n}`]=s-a,o[`cp1${r}`]=u-a*t[c]),l&&(a=(l[n]-s)/3,o[`cp2${n}`]=s+a,o[`cp2${r}`]=u+a*t[c])}}(e,a,t)}function Tce(e,t,n){return Math.max(Math.min(e,n),t)}function Ece(e,t,n,r,s){let a,i,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Sce(e,s);else{let n=r?e[e.length-1]:e[0];for(a=0,i=e.length;a<i;++a)o=e[a],l=kce(n,o,e[Math.min(a+1,i-(r?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,a,i,o=jle(e[0],t);for(n=0,r=e.length;n<r;++n)i=a,a=o,o=n<r-1&&jle(e[n+1],t),a&&(s=e[n],i&&(s.cp1x=Tce(s.cp1x,t.left,t.right),s.cp1y=Tce(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=Tce(s.cp2x,t.left,t.right),s.cp2y=Tce(s.cp2y,t.top,t.bottom)))}(e,n)}function Nce(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Cce(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Ice(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const _ce=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Ace=["top","right","bottom","left"];function Rce(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const a=Ace[s];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Dce(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=_ce(n),a="border-box"===s.boxSizing,i=Rce(s,"padding"),o=Rce(s,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:a}=r;let i,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,a,e.target))i=s,o=a;else{const e=t.getBoundingClientRect();i=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,n),h=i.left+(u&&o.left),d=i.top+(u&&o.top);let{width:p,height:f}=t;return a&&(p-=i.width+o.width,f-=i.height+o.height),{x:Math.round((l-h)/p*n.width/r),y:Math.round((c-d)/f*n.height/r)}}const Oce=e=>Math.round(10*e)/10;function Mce(e,t,n,r){const s=_ce(e),a=Rce(s,"margin"),i=Ice(s.maxWidth,e,"clientWidth")||Foe,o=Ice(s.maxHeight,e,"clientHeight")||Foe,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const a=e&&Cce(e);if(a){const e=a.getBoundingClientRect(),i=_ce(a),o=Rce(i,"border","width"),l=Rce(i,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Ice(i.maxWidth,a,"clientWidth"),s=Ice(i.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Foe,maxHeight:s||Foe}}(e,t,n);let{width:c,height:u}=l;if("content-box"===s.boxSizing){const e=Rce(s,"border","width"),t=Rce(s,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-a.width),u=Math.max(0,r?c/r:u-a.height),c=Oce(Math.min(c,i,l.maxWidth)),u=Oce(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Oce(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=Oce(Math.floor(u*r))),{width:c,height:u}}function Pce(e,t,n){const r=t||1,s=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height=`${e.height}px`,i.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||i.height!==s||i.width!==a)&&(e.currentDevicePixelRatio=r,i.height=s,i.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Lce=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Nce()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(jEe){}return e}();function Fce(e,t){const n=function(e,t){return _ce(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function $ce(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function zce(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function jce(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},i=$ce(e,s,n),o=$ce(s,a,n),l=$ce(a,t,n),c=$ce(i,o,n),u=$ce(o,l,n);return $ce(c,u,n)}function Uce(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Bce(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Vce(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Wce(e){return"angle"===e?{between:tle,compare:Zoe,normalize:ele}:{between:rle,compare:(e,t)=>e-t,normalize:e=>e}}function Hce(e){let{start:t,end:n,count:r,loop:s,style:a}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:a}}function Gce(e,t,n){if(!n)return[e];const{property:r,start:s,end:a}=n,i=t.length,{compare:o,between:l,normalize:c}=Wce(r),{start:u,end:h,loop:d,style:p}=function(e,t,n){const{property:r,start:s,end:a}=n,{between:i,normalize:o}=Wce(r),l=t.length;let c,u,{start:h,end:d,loop:p}=e;if(p){for(h+=l,d+=l,c=0,u=l;c<u&&i(o(t[h%l][r]),s,a);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:p,style:e.style}}(e,t,n),f=[];let m,g,y,v=!1,b=null;const w=()=>v||l(s,y,m)&&0!==o(s,y),x=()=>!v||0===o(a,m)||l(a,y,m);for(let k=u,S=u;k<=h;++k)g=t[k%i],g.skip||(m=c(g[r]),m!==y&&(v=l(m,s,a),null===b&&w()&&(b=0===o(m,s)?k:S),null!==b&&x()&&(f.push(Hce({start:b,end:k,loop:d,count:i,style:p})),b=null),S=k,y=m));return null!==b&&f.push(Hce({start:b,end:h,loop:d,count:i,style:p})),f}function qce(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const a=Gce(r[s],e.points,t);a.length&&n.push(...a)}return n}function Kce(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),a=Yce(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=n.length,c=[];let u=a,h=t[0].start,d=h;function p(e,t,r,s){const a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),u=s,h=t%l)}}for(const f of t){h=o?h:f.start;let e,t=n[h%l];for(d=h+1;d<=f.end;d++){const a=n[d%l];e=Yce(r.setContext(ace(s,{type:"segment",p0:t,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:i}))),Xce(e,u)&&p(h,d-1,f.loop,u),t=a,u=e}h<d-1&&p(h,d-1,f.loop,u)}return c}(e,t,n,r):t}function Yce(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Xce(e,t){if(!t)return!1;const n=[],r=function(e,t){return wle(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Qce(e,t,n){return e.options.clip?e[n]:t[n]}function Jce(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Qce(n,t,"left"),right:Qce(n,t,"right"),top:Qce(r,t,"top"),bottom:Qce(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class Zce{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],a=t.duration;s.forEach((r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)})))}_refresh(){this._request||(this._running=!0,this._request=ule.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let a,i=s.length-1,o=!1;for(;i>=0;--i)a=s[i],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),o=!0):(s[i]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var eue=new Zce;const tue="transparent",nue={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=xle(e||tue),s=r.valid&&xle(t||tue);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class rue{constructor(e,t,n,r){const s=t[n];r=sce([e.to,r,s,e.from]);const a=sce([e.from,s,r]);this._active=!0,this._fn=e.fn||nue[e.type||typeof a],this._easing=ble[e.easing]||ble.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=sce([e.to,t,r,e.from]),this._from=sce([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,a=this._loop,i=this._to;let o;if(this._active=s!==i&&(a||t<n),!this._active)return this._target[r]=i,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class sue{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!foe(e))return;const t=Object.keys(Mle.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const s=e[r];if(!foe(s))return;const a={};for(const e of t)a[e]=s[e];(poe(s.properties)&&s.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,a)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),i=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=s[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,i);continue}u.cancel()}h&&h.duration?(s[l]=u=new rue(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(eue.add(this._chart,n),!0):void 0}}function aue(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:s,end:r?s:a}}function iue(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,a;for(s=0,a=r.length;s<a;++s)n.push(r[s].index);return n}function oue(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,a="single"===r.mode;let i,o,l,c;if(null===t)return;let u=!1;for(i=0,o=s.length;i<o;++i){if(l=+s[i],l===n){if(u=!0,r.all)continue;break}c=e.values[l],moe(c)&&(a||0===t||Voe(t)===Voe(c))&&(t+=c)}return u||r.all?t:0}function lue(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function cue(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function uue(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function hue(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:a,vScale:i,index:o}=r,l=a.axis,c=i.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(a,i,r),h=t.length;let d;for(let p=0;p<h;++p){const e=t[p],{[l]:n,[c]:a}=e;d=(e._stacks||(e._stacks={}))[c]=cue(s,u,n),d[o]=a,d._top=uue(d,i,!0,r.type),d._bottom=uue(d,i,!1,r.type);(d._visualValues||(d._visualValues={}))[o]=a}}function due(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function pue(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const fue=e=>"reset"===e||"none"===e,mue=(e,t)=>t?e:Object.assign({},e);class gue{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lue(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&pue(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=yoe(n.xAxisID,due(e,"x")),a=t.yAxisID=yoe(n.yAxisID,due(e,"y")),i=t.rAxisID=yoe(n.rAxisID,due(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,a,i),c=t.vAxisID=r(o,a,s,i);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&lle(this._data,this),e._stacked&&pue(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(foe(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",a="x"===r.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,u;for(l=0,c=i.length;l<c;++l)u=i[l],o[l]={[s]:u,[a]:e[u]};return o}(t,e)}else if(n!==t){if(n){lle(n,this);const e=this._cachedMeta;pue(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ole.forEach((t=>{const n="_onData"+Aoe(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];const i=r.apply(this,s);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...s)})),i}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=lue(t.vScale,t),t.stack!==n.stack&&(r=!0,pue(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(hue(this,t._parsed),t._stacked=lue(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:a}=n,i=s.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=poe(r[e])?this.parseArrayData(n,r,e,t):foe(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[i]||h&&l[i]<h[i];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(s()&&(u=!1),h=l);n._sorted=u}a&&hue(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:a}=e,i=s.axis,o=a.axis,l=s.getLabels(),c=s===a,u=new Array(r);let h,d,p;for(h=0,d=r;h<d;++h)p=h+n,u[h]={[i]:c||s.parse(l[p],p),[o]:a.parse(t[p],p)};return u}parseArrayData(e,t,n,r){const{xScale:s,yScale:a}=e,i=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],i[o]={x:s.parse(u[0],c),y:a.parse(u[1],c)};return i}parseObjectData(e,t,n,r){const{xScale:s,yScale:a}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:s.parse(_oe(d,i),h),y:a.parse(_oe(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,a=t[e.axis];return oue({keys:iue(r,!0),values:t._stacks[e.axis]._visualValues},a,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let a=null===s?NaN:s;const i=r&&n._stacks[t.axis];r&&i&&(r.values=i,a=oue(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,a=r.length,i=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:iue(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(i);let h,d;function p(){d=r[h];const t=d[i.axis];return!moe(d[e.axis])||c>t||u<t}for(h=0;h<a&&(p()||(this.updateRangeFromParsed(l,e,d,o),!s));++h);if(s)for(h=a-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,a;for(r=0,s=t.length;r<s;++r)a=t[r][e.axis],moe(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return foe(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(yoe(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=aue(e,n),s=aue(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,a=[],i=this._drawStart||0,o=this._drawCount||r.length-i,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,i,o),c=i;c<i+o;++c){const t=r[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return ace(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return ace(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,a=e+"-"+t,i=s[a],o=this.enableOptionSharing&&Roe(n);if(i)return mue(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Mle.elements[e]),p=l.resolveNamedOptions(h,d,(()=>this.getContext(n,r,t)),u);return p.$shared&&(p.$shared=o,s[a]=Object.freeze(mue(p,o))),p}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,i=s[a];if(i)return i;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(a,this.getContext(e,n,t))}const l=new sue(r,o&&o.animations);return o&&o._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||fue(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:a}}updateElement(e,t,n,r){fue(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!fue(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const r=n.length,s=t.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,a=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=a;i--)e[i]=e[i-t]};for(o(s),i=e;i<a;++i)s[i]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&pue(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function yue(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=cle(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,s,a,i,o=t._length;const l=()=>{32767!==a&&-32768!==a&&(Roe(i)&&(o=Math.min(o,Math.abs(a-i)||o)),i=a)};for(r=0,s=n.length;r<s;++r)a=t.getPixelForValue(n[r]),l();for(i=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),l();return o}function vue(e,t,n,r){return poe(e)?function(e,t,n,r){const s=n.parse(e[0],r),a=n.parse(e[1],r),i=Math.min(s,a),o=Math.max(s,a);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:a,min:i,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function bue(e,t,n,r){const s=e.iScale,a=e.vScale,i=s.getLabels(),o=s===a,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[s.axis]=o||s.parse(i[c],c),l.push(vue(d,h,a,c));return l}function wue(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function xue(e,t,n,r){let s=t.borderSkipped;const a={};if(!s)return void(e.borderSkipped=a);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,s,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",a="start"):(s="start",a="end"),{start:n,end:r,reverse:t,top:s,bottom:a}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(a[kue(u,i,o,l)]=!0,s=c)),a[kue(s,i,o,l)]=!0,e.borderSkipped=a}function kue(e,t,n,r){var s,a,i;return r?(i=n,e=Sue(e=(s=e)===(a=t)?i:s===i?a:s,n,t)):e=Sue(e,t,n),e}function Sue(e,t,n){return"start"===e?t:"end"===e?n:e}function Tue(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}class Eue extends gue{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,r){return bue(e,t,n,r)}parseArrayData(e,t,n,r){return bue(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:a}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?i:o,c="x"===a.axis?i:o,u=[];let h,d,p,f;for(h=n,d=n+r;h<d;++h)f=t[h],p={},p[s.axis]=s.parse(_oe(f,l),h),u.push(vue(_oe(f,c),p,a,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),a=s._custom,i=wue(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:a,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=s||doe(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),p=this._calculateBarIndexPixels(d,c),f=(t._stacks||{})[i.axis],m={horizontal:l,base:n.base,enableBorderRadius:!f||wue(t._custom)||a===f._top||a===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};h&&(m.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const g=m.options||e[d].options;xue(m,g,f,a),Tue(m,g,c.ratio),this.updateElement(e[d],d,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),s=n.options.stacked,a=[],i=this._cachedMeta.controller.getParsed(t),o=i&&i[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),r=t&&t[e.vScale.axis];if(doe(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===a.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,a;for(s=0,a=t.data.length;s<a;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const i=e.barThickness;return{min:i||yue(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:a}}=this,i=s||0,o=this.getParsed(e),l=o._custom,c=wue(l);let u,h,d=o[t.axis],p=0,f=n?this.applyStack(t,o,n):d;f!==d&&(p=f-d,f=d),c&&(d=l.barStart,f=l.barEnd-l.barStart,0!==d&&Voe(d)!==Voe(l.barEnd)&&(p=0),p+=d);const m=doe(s)||c?p:s;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,h=u-g,Math.abs(h)<a){h=function(e,t,n){return 0!==e?Voe(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,i)*a,d===i&&(g-=h/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),p=Math.max(e,s);g=Math.max(Math.min(g,p),l),u=g+h,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(i)){const e=Voe(h)*t.getLineWidthForValue(i)/2;g+=e,h-=e}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,a=yoe(r.maxBarThickness,1/0);let i,o;if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,a=s[e];let i=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===i&&(i=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-i);const c=a-(a-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const s=n.barThickness;let a,i;return doe(s)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=s*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);i=l.start+l.chunk*c+l.chunk/2,o=Math.min(a,l.chunk*l.ratio)}else i=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(a,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}class Nue extends gue{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,a,i=e=>+n[e];if(foe(n[e])){const{key:e="value"}=this._parsing;i=t=>+_oe(n[t],e)}for(s=e,a=e+t;s<a;++s)r._parsed[s]=i(s)}}_getRotation(){return Koe(this.options.rotation-90)}_getCircumference(){return Koe(this.options.circumference)}_getRotationExtents(){let e=Poe,t=-Poe;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),a=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,i=Math.max((Math.min(n.width,n.height)-a)/2,0),o=Math.min((l=this.options.cutout,c=i,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,n){let r=1,s=1,a=0,i=0;if(t<Poe){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),p=(e,t,r)=>tle(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>tle(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),m=p(0,c,h),g=p(zoe,u,d),y=f(Moe,c,h),v=f(Moe+zoe,u,d);r=(m-y)/2,s=(g-v)/2,a=-(m+y)/2,i=-(g+v)/2}return{ratioX:r,ratioY:s,offsetX:a,offsetY:i}}(d,h,o),y=(n.width-a)/p,v=(n.height-a)/f,b=Math.max(Math.min(y,v)/2,0),w=voe(this.options.radius,b),x=(w-Math.max(w*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,r.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Poe)}updateElements(e,t,n,r){const s="reset"===r,a=this.chart,i=a.chartArea,o=a.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,u=s&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,s);for(m=t;m<t+n;++m){const t=this._circumference(m,s),n=e[m],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:d,innerRadius:h};f&&(a.options=p||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Poe*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Nle(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,a,i,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,i=a.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=i.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(yoe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Cue extends gue{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:i,count:o}=fle(t,r,a);this._drawStart=i,this._drawCount=o,mle(t)&&(i=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,i,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=a.axis,d=i.axis,{spanGaps:p,segment:f}=this.options,m=Goe(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let w=0;w<v;++w){const n=e[w],p=g?n:{};if(w<t||w>=y){p.skip=!0;continue}const v=this.getParsed(w),x=doe(v[d]),k=p[h]=a.getPixelForValue(v[h],w),S=p[d]=s||x?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,v,o):v[d],w);p.skip=isNaN(k)||isNaN(S)||x,p.stop=w>0&&Math.abs(v[h]-b[h])>m,f&&(p.parsed=v,p.raw=l.data[w]),u&&(p.options=c||this.resolveDataElementOptions(w,n.active?"active":r)),g||this.updateElement(n,w,p,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class Iue extends Nue{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function _ue(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Aue{static override(e){Object.assign(Aue.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return _ue()}parse(){return _ue()}format(){return _ue()}add(){return _ue()}diff(){return _ue()}startOf(){return _ue()}endOf(){return _ue()}}var Rue=Aue;function Due(e,t,n,r){const{controller:s,data:a,_sorted:i}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&i&&a.length){const i=o._reversePixels?ile:ale;if(!r){const r=i(a,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,a=n.slice(0,r.lo+1).reverse().findIndex((e=>!doe(e[t.axis])));r.lo-=Math.max(0,a);const i=n.slice(r.hi).findIndex((e=>!doe(e[t.axis])));r.hi+=Math.max(0,i)}return r}if(s._sharedOptions){const e=a[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=i(a,t,n-r),s=i(a,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:a.length-1}}function Oue(e,t,n,r,s){const a=e.getSortedVisibleDatasetMetas(),i=n[t];for(let o=0,l=a.length;o<l;++o){const{index:e,data:n}=a[o],{lo:l,hi:c}=Due(a[o],t,i,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function Mue(e,t,n,r,s){const a=[];if(!s&&!e.isPointInArea(t))return a;return Oue(e,n,t,(function(n,i,o){(s||jle(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:i,index:o})}),!0),a}function Pue(e,t,n,r,s,a){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return Oue(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,s);if(r&&!h)return;const d=n.getCenterPoint(s);if(!(!!a||e.isPointInArea(d))&&!h)return;const p=o(t,d);p<l?(i=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&i.push({element:n,datasetIndex:c,index:u})})),i}function Lue(e,t,n,r,s,a){return a||e.isPointInArea(t)?"r"!==n||r?Pue(e,t,n,r,s,a):function(e,t,n,r){let s=[];return Oue(e,n,t,(function(e,n,a){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=Qoe(e,{x:t.x,y:t.y});tle(l,i,o)&&s.push({element:e,datasetIndex:n,index:a})})),s}(e,t,n,s):[]}function Fue(e,t,n,r,s){const a=[],i="x"===n?"inXRange":"inYRange";let o=!1;return Oue(e,n,t,((e,r,l)=>{e[i]&&e[i](t[n],s)&&(a.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))})),r&&!o?[]:a}var $ue={evaluateInteractionItems:Oue,modes:{index(e,t,n,r){const s=Dce(t,e),a=n.axis||"x",i=n.includeInvisible||!1,o=n.intersect?Mue(e,s,a,r,i):Lue(e,s,a,!1,r,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const s=Dce(t,e),a=n.axis||"xy",i=n.includeInvisible||!1;let o=n.intersect?Mue(e,s,a,r,i):Lue(e,s,a,!1,r,i);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Mue(e,Dce(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=Dce(t,e),a=n.axis||"xy",i=n.includeInvisible||!1;return Lue(e,s,a,n.intersect,r,i)},x:(e,t,n,r)=>Fue(e,Dce(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Fue(e,Dce(t,e),"y",n.intersect,r)}};const zue=["left","top","right","bottom"];function jue(e,t){return e.filter((e=>e.pos===t))}function Uue(e,t){return e.filter((e=>-1===zue.indexOf(e.pos)&&e.box.axis===t))}function Bue(e,t){return e.sort(((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight}))}function Vue(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!zue.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let a,i,o;for(a=0,i=e.length;a<i;++a){o=e[a];const{fullSize:i}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:i&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:i&&t.availableHeight)}return n}function Wue(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Hue(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Gue(e,t,n,r){const{pos:s,box:a}=n,i=e.maxPadding;if(!foe(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[s]+=n.size}a.getPadding&&Hue(i,a.getPadding());const o=Math.max(0,t.outerWidth-Wue(i,e,"left","right")),l=Math.max(0,t.outerHeight-Wue(i,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function que(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Kue(e,t,n,r){const s=[];let a,i,o,l,c,u;for(a=0,i=e.length,c=0;a<i;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,que(o.horizontal,t));const{same:i,other:h}=Gue(t,n,o,r);c|=i&&s.length,u=u||h,l.fullSize||s.push(o)}return c&&Kue(s,t,n,r)||u}function Yue(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function Xue(e,t,n,r){const s=n.padding;let{x:a,y:i}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,a=l.size||e.height;Roe(l.start)&&(i=l.start),e.fullSize?Yue(e,s.left,i,n.outerWidth-s.right-s.left,a):Yue(e,t.left+l.placed,i,r,a),l.start=i,l.placed+=r,i=e.bottom}else{const r=t.h*c,i=l.size||e.width;Roe(l.start)&&(a=l.start),e.fullSize?Yue(e,a,s.top,i,n.outerHeight-s.bottom-s.top):Yue(e,a,t.top+l.placed,i,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=i}var Que={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=nce(e.options.layout.padding),a=Math.max(t-s.width,0),i=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,a,i,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:a,options:{stack:i,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:i&&a+i,stackWeight:o});return t}(e),n=Bue(t.filter((e=>e.box.fullSize)),!0),r=Bue(jue(t,"left"),!0),s=Bue(jue(t,"right")),a=Bue(jue(t,"top"),!0),i=Bue(jue(t,"bottom")),o=Uue(t,"x"),l=Uue(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:s.concat(l).concat(i).concat(o),chartArea:jue(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:a.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;woe(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:a,availableHeight:i,vBoxMaxWidth:a/2/u,hBoxMaxHeight:i/2}),d=Object.assign({},s);Hue(d,nce(r));const p=Object.assign({maxPadding:d,w:a,h:i,x:s.left,y:s.top},s),f=Vue(l.concat(c),h);Kue(o.fullSize,p,h,f),Kue(l,p,h,f),Kue(c,p,h,f)&&Kue(l,p,h,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Xue(o.leftAndTop,p,h,f),p.x+=p.w,p.y+=p.h,Xue(o.rightAndBottom,p,h,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},woe(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class Jue{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Zue extends Jue{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ehe="$chartjs",the={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nhe=e=>null===e||""===e;const rhe=!!Lce&&{passive:!0};function she(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,rhe)}function ahe(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function ihe(e,t,n){const r=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||ahe(n.addedNodes,r),t=t&&!ahe(n.removedNodes,r);t&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}function ohe(e,t,n){const r=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||ahe(n.removedNodes,r),t=t&&!ahe(n.addedNodes,r);t&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}const lhe=new Map;let che=0;function uhe(){const e=window.devicePixelRatio;e!==che&&(che=e,lhe.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function hhe(e,t,n){const r=e.canvas,s=r&&Cce(r);if(!s)return;const a=hle(((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()}),window),i=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)}));return i.observe(s),function(e,t){lhe.size||window.addEventListener("resize",uhe),lhe.set(e,t)}(e,a),i}function dhe(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){lhe.delete(e),lhe.size||window.removeEventListener("resize",uhe)}(e)}function phe(e,t,n){const r=e.canvas,s=hle((t=>{null!==e.ctx&&n(function(e,t){const n=the[e.type]||e.type,{x:r,y:s}=Dce(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,rhe)}(r,t,s),s}class fhe extends Jue{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[ehe]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",nhe(s)){const t=Fce(e,"width");void 0!==t&&(e.width=t)}if(nhe(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Fce(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[ehe])return!1;const n=t[ehe].initial;["height","width"].forEach((e=>{const r=n[e];doe(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[ehe],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:ihe,detach:ohe,resize:hhe}[t]||phe;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:dhe,detach:dhe,resize:dhe}[t]||she)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Mce(e,t,n,r)}isAttached(e){const t=e&&Cce(e);return!(!t||!t.isConnected)}}class mhe{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Goe(this.x)&&Goe(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function ghe(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],i=a.length,o=a[0],l=a[i-1],c=[];if(i>s)return function(e,t,n,r){let s,a=0,i=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===i&&(t.push(e[s]),a++,i=n[a*r])}(t,c,a,i/s),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let i=0,o=a.length-1;i<o;i++){const e=a[i];if(e>s)return e}return Math.max(s,1)}(a,t,s);if(i>0){let e,n;const r=i>1?Math.round((l-o)/(i-1)):null;for(yhe(t,c,u,doe(r)?0:o-r,o),e=0,n=i-1;e<n;e++)yhe(t,c,u,a[e],a[e+1]);return yhe(t,c,u,l,doe(r)?t.length:l+r),c}return yhe(t,c,u),c}function yhe(e,t,n,r,s){const a=yoe(r,0),i=Math.min(yoe(s,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=a;c<0;)u++,c=Math.round(a+u*n);for(l=Math.max(a,0);l<i;l++)l===c&&(t.push(e[l]),u++,c=Math.round(a+u*n))}const vhe=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,bhe=(e,t)=>Math.min(t||e,e);function whe(e,t){const n=[],r=e.length/t,s=e.length;let a=0;for(;a<s;a+=r)n.push(e[Math.floor(a)]);return n}function xhe(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),a=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-a,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<a-o||c>i+o)))return c}function khe(e){return e.drawTicks?e.tickLength:0}function She(e,t){if(!e.display)return 0;const n=rce(e.font,t),r=nce(e.padding);return(poe(e.text)?e.text.length:1)*n.lineHeight+r.height}function The(e,t,n){let r=dle(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Ehe extends mhe{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=goe(e,Number.POSITIVE_INFINITY),t=goe(t,Number.NEGATIVE_INFINITY),n=goe(n,Number.POSITIVE_INFINITY),r=goe(r,Number.NEGATIVE_INFINITY),{min:goe(e,n),max:goe(t,r),minDefined:moe(e),maxDefined:moe(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();if(s&&a)return{min:n,max:r};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=s&&n>r?n:r,{min:goe(n,goe(r,n)),max:goe(r,goe(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){boe(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:a}=this.options,i=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,a=voe(t,(s-r)/2),i=(e,t)=>n&&0===e?0:e+t;return{min:i(r,-Math.abs(a)),max:i(s,a)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?whe(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=ghe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){boe(this.options.afterUpdate,[this])}beforeSetDimensions(){boe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){boe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),boe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){boe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=boe(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){boe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){boe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=bhe(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let a,i,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=nle(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/n:d/(n-1),u+6>a&&(a=d/(n-(e.offset?.5:1)),i=this.maxHeight-khe(e.grid)-t.padding-She(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=Yoe(Math.min(Math.asin(nle((c.highest.height+6)/a,-1,1)),Math.asin(nle(i/o,-1,1))-Math.asin(nle(h/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){boe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){boe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,a=this._isVisible(),i=this.isHorizontal();if(a){const a=She(r,t.options.font);if(i?(e.width=this.maxWidth,e.height=khe(s)+a):(e.height=this.maxHeight,e.width=khe(s)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:a}=this._getLabelSizes(),o=2*n.padding,l=Koe(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(i){const t=n.mirror?0:u*s.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+u*a.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:a},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===s?h=t.width:"end"===s?u=e.width:"inner"!==s&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-i+a)*this.width/(this.width-i),0),this.paddingRight=Math.max((h-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){boe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)doe(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=whe(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,a=[],i=[],o=Math.floor(t/bhe(t,n));let l,c,u,h,d,p,f,m,g,y,v,b=0,w=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=p=d.string,f=s[p]=s[p]||{data:{},gc:[]},m=d.lineHeight,g=y=0,doe(h)||poe(h)){if(poe(h))for(c=0,u=h.length;c<u;++c)v=h[c],doe(v)||poe(v)||(g=Ple(r,f.data,f.gc,g,v),y+=m)}else g=Ple(r,f.data,f.gc,g,h),y=m;a.push(g),i.push(y),b=Math.max(g,b),w=Math.max(y,w)}!function(e,t){woe(e,(e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}}))}(s,t);const x=a.indexOf(b),k=i.indexOf(w),S=e=>({width:a[e]||0,height:i[e]||0});return{first:S(0),last:S(t-1),widest:S(x),highest:S(k),widths:a,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return nle(this._alignToPixels?Lle(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return ace(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return ace(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Koe(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,i=s?s.widest.width+a:0,o=s?s.highest.height+a:0;return this.isHorizontal()?o*n>i*r?i/n:o/r:o*r<i*n?o/n:i/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:a,border:i}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=khe(s),h=[],d=i.setContext(this.getContext()),p=d.display?d.width:0,f=p/2,m=function(e){return Lle(n,e,p)};let g,y,v,b,w,x,k,S,T,E,N,C;if("top"===a)g=m(this.bottom),x=this.bottom-u,S=g-f,E=m(e.top)+f,C=e.bottom;else if("bottom"===a)g=m(this.top),E=e.top,C=m(e.bottom)-f,x=g+f,S=this.top+u;else if("left"===a)g=m(this.right),w=this.right-u,k=g-f,T=m(e.left)+f,N=e.right;else if("right"===a)g=m(this.left),T=e.left,N=m(e.right)-f,w=g+f,k=this.left+u;else if("x"===t){if("center"===a)g=m((e.top+e.bottom)/2+.5);else if(foe(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}E=e.top,C=e.bottom,x=g+f,S=x+u}else if("y"===t){if("center"===a)g=m((e.left+e.right)/2);else if(foe(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}w=g-f,k=w-u,T=e.left,N=e.right}const I=yoe(r.ticks.maxTicksLimit,c),_=Math.max(1,Math.ceil(c/I));for(y=0;y<c;y+=_){const e=this.getContext(y),t=s.setContext(e),r=i.setContext(e),a=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=xhe(this,y,o),void 0!==v&&(b=Lle(n,v,a),l?w=k=T=N=b:x=S=E=C=b,h.push({tx1:w,ty1:x,tx2:k,ty2:S,x1:T,y1:E,x2:N,y2:C,width:a,color:c,borderDash:u,borderDashOffset:d,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,a=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=s,h=khe(n.grid),d=h+c,p=u?-c:d,f=-Koe(this.labelRotation),m=[];let g,y,v,b,w,x,k,S,T,E,N,C,I="middle";if("top"===r)x=this.bottom-p,k=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+p,k=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);k=e.textAlign,w=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);k=e.textAlign,w=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+d;else if(foe(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+d}k=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)w=(e.left+e.right)/2-d;else if(foe(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)}k=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?I="top":"end"===o&&(I="bottom"));const _=this._getLabelSizes();for(g=0,y=i.length;g<y;++g){v=i[g],b=v.label;const e=s.setContext(this.getContext(g));S=this.getPixelForTick(g)+s.labelOffset,T=this._resolveTickFontOptions(g),E=T.lineHeight,N=poe(b)?b.length:1;const t=N/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=k;if(a?(w=S,"inner"===k&&(d=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===r?"near"===l||0!==f?-N*E+E/2:"center"===l?-_.highest.height/2-t*E+E:-_.highest.height+E/2:"near"===l||0!==f?E/2:"center"===l?_.highest.height/2-t*E:_.highest.height-N*E,u&&(C*=-1),0===f||e.showLabelBackdrop||(w+=E/2*Math.sin(f))):(x=S,C=(1-N)*E/2),e.showLabelBackdrop){const t=nce(e.backdropPadding),n=_.heights[g],r=_.widths[g];let s=C-t.top,a=0-t.left;switch(I){case"middle":s-=n/2;break;case"bottom":s-=n}switch(k){case"center":a-=r/2;break;case"right":a-=r;break;case"inner":g===y-1?a-=r:g>0&&(a-=r/2)}h={left:a,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:T,textOffset:C,options:{rotation:f,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:I,translation:[w,x],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Koe(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,a=e+s,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-a,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+a,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const i=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){const e=r[s];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;const i=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Lle(e,this.left,a)-a/2,c=Lle(e,this.right,i)+i/2,u=h=o):(u=Lle(e,this.top,a)-a/2,h=Lle(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Ule(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;qle(t,s.label,0,s.textOffset,n,e)}n&&Ble(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=rce(n.font),a=nce(n.padding),i=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||foe(t)?(o+=a.bottom,poe(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:s,left:a,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,p,f=0;const m=i-s,g=o-a;if(e.isHorizontal()){if(d=ple(r,a,o),foe(n)){const e=Object.keys(n)[0],r=n[e];p=u[e].getPixelForValue(r)+m-t}else p="center"===n?(c.bottom+c.top)/2+m-t:vhe(e,n,t);h=o-a}else{if(foe(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-g+t}else d="center"===n?(c.left+c.right)/2-g+t:vhe(e,n,t);p=ple(r,i,s),f="left"===n?-zoe:zoe}return{titleX:d,titleY:p,maxWidth:h,rotation:f}}(this,o,t,i);qle(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:h,textAlign:The(i,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=yoe(e.grid&&e.grid.z,-1),r=yoe(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Ehe.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,a;for(s=0,a=t.length;s<a;++s){const a=t[s];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return rce(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Nhe{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=Eoe(Object.create(null),[n?Mle.get(n):{},Mle.get(t),e.defaults]);Mle.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),s=r.pop(),a=[e].concat(r).join("."),i=t[n].split("."),o=i.pop(),l=i.join(".");Mle.route(a,s,l,o)}))}(t,e.defaultRoutes);e.descriptors&&Mle.describe(t,e.descriptors)}(e,a,n),this.override&&Mle.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Mle[r]&&(delete Mle[r][n],this.override&&delete _le[n])}}class Che{constructor(){this.controllers=new Nhe(gue,"datasets",!0),this.elements=new Nhe(mhe,"elements"),this.plugins=new Nhe(Object,"plugins"),this.scales=new Nhe(Ehe,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):woe(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=Aoe(e);boe(n["before"+r],[],n),t[e](n),boe(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Ihe=new Che;class _he{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===boe(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){doe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=yoe(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(Ihe.plugins.items);for(let a=0;a<r.length;a++)n.push(Ihe.getPlugin(r[a]));const s=e.plugins||[];for(let a=0;a<s.length;a++){const e=s[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:a}=t;const i=[],o=e.getContext();for(const l of s){const t=l.id,s=Ahe(n[t],r);null!==s&&i.push({plugin:l,options:Rhe(e.config,{plugin:l,local:a[t]},s,o)})}return i}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Ahe(e,t){return t||!1!==e?!0===e?{}:e:null}function Rhe(e,t,n,r){let{plugin:s,local:a}=t;const i=e.pluginScopeKeys(s),o=e.getOptionScopes(n,i);return a&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Dhe(e,t){const n=Mle.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ohe(e){if("x"===e||"y"===e||"r"===e)return e}function Mhe(e){if(Ohe(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const a of n){const t=a.axis||("top"===(s=a.position)||"bottom"===s?"x":"left"===s||"right"===s?"y":void 0)||e.length>1&&Ohe(e[0].toLowerCase());if(t)return t}var s;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Phe(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Lhe(e,t){const n=_le[e.type]||{scales:{}},r=t.scales||{},s=Dhe(e.type,t),a=Object.create(null);return Object.keys(r).forEach((t=>{const i=r[t];if(!foe(i))return console.error(`Invalid scale configuration for scale: ${t}`);if(i._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=Mhe(t,i,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return Phe(e,"x",n[0])||Phe(e,"y",n[0])}return{}}(t,e),Mle.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};a[t]=Noe(Object.create(null),[{axis:o},i,c[o],c[l]])})),e.data.datasets.forEach((n=>{const s=n.type||e.type,i=n.indexAxis||Dhe(s,t),o=(_le[s]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,i),s=n[t+"AxisID"]||t;a[s]=a[s]||Object.create(null),Noe(a[s],[{axis:t},r[s],o[e]])}))})),Object.keys(a).forEach((e=>{const t=a[e];Noe(t,[Mle.scales[t.type],Mle.scale])})),a}function Fhe(e){const t=e.options||(e.options={});t.plugins=yoe(t.plugins,{}),t.scales=Lhe(e,t)}function $he(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const zhe=new Map,jhe=new Set;function Uhe(e,t){let n=zhe.get(e);return n||(n=t(),zhe.set(e,n),jhe.add(n)),n}const Bhe=(e,t,n)=>{const r=_oe(t,n);void 0!==r&&e.add(r)};class Vhe{constructor(e){this._config=function(e){return(e=e||{}).data=$he(e.data),Fhe(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$he(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Fhe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Uhe(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return Uhe(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return Uhe(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return Uhe(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,a=this._cachedScopes(e,n),i=a.get(t);if(i)return i;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>Bhe(o,e,t)))),t.forEach((e=>Bhe(o,r,e))),t.forEach((e=>Bhe(o,_le[s]||{},e))),t.forEach((e=>Bhe(o,Mle,e))),t.forEach((e=>Bhe(o,Ale,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),jhe.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,_le[t]||{},Mle.datasets[t]||{},{type:t},Mle,Ale]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:a,subPrefixes:i}=Whe(this._resolverCache,e,r);let o=a;if(function(e,t){const{isScriptable:n,isIndexable:r}=lce(e);for(const s of t){const t=n(s),a=r(s),i=(a||t)&&e[s];if(t&&(Doe(i)||Hhe(i))||a&&poe(i))return!0}return!1}(a,t)){s.$shared=!1;o=oce(a,n=Doe(n)?n():n,this.createResolver(e,n,i))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=Whe(this._resolverCache,e,n);return foe(t)?oce(s,t,void 0,r):s}}function Whe(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let a=r.get(s);if(!a){a={resolver:ice(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(s,a)}return a}const Hhe=e=>foe(e)&&Object.getOwnPropertyNames(e).some((t=>Doe(e[t])));const Ghe=["top","bottom","left","right","chartArea"];function qhe(e,t){return"top"===e||"bottom"===e||-1===Ghe.indexOf(e)&&"x"===t}function Khe(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Yhe(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),boe(n&&n.onComplete,[e],t)}function Xhe(e){const t=e.chart,n=t.options.animation;boe(n&&n.onProgress,[e],t)}function Qhe(e){return Nce()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Jhe={},Zhe=e=>{const t=Qhe(e);return Object.values(Jhe).filter((e=>e.canvas===t)).pop()};function ede(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const a=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=a)}}}class tde{static defaults=(()=>Mle)();static instances=(()=>Jhe)();static overrides=(()=>_le)();static registry=(()=>Ihe)();static version="4.4.9";static getChart=(()=>Zhe)();static register(){Ihe.add(...arguments),nde()}static unregister(){Ihe.remove(...arguments),nde()}constructor(e,t){const n=this.config=new Vhe(t),r=Qhe(e),s=Zhe(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Nce()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Zue:fhe}(r)),this.platform.updateConfig(n);const i=this.platform.acquireContext(r,a.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=hoe(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _he,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}((e=>this.update(e)),a.resizeDelay||0),this._dataChanges=[],Jhe[this.id]=this,i&&o?(eue.listen(this,"complete",Yhe),eue.listen(this,"progress",Xhe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return doe(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ihe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Pce(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fle(this.canvas,this.ctx),this}stop(){return eue.stop(this),this}resize(e,t){eue.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),i=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Pce(this,i,!0)&&(this.notifyPlugins("resize",{size:a}),boe(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){woe(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let s=[];t&&(s=s.concat(Object.keys(t).map((e=>{const n=t[e],r=Mhe(e,n),s="r"===r,a="x"===r;return{options:n,dposition:s?"chartArea":a?"bottom":"left",dtype:s?"radialLinear":a?"category":"linear"}})))),woe(s,(t=>{const s=t.options,a=s.id,i=Mhe(a,s),o=yoe(s.type,t.dtype);void 0!==s.position&&qhe(s.position,i)===qhe(t.dposition)||(s.position=t.dposition),r[a]=!0;let l=null;if(a in n&&n[a].type===o)l=n[a];else{l=new(Ihe.getScale(o))({id:a,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)})),woe(r,((e,t)=>{e||delete n[t]})),woe(n,(e=>{Que.configure(this,e,e.options),Que.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Khe("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const a=r.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=a,s.indexAxis=r.indexAxis||Dhe(a,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=Ihe.getController(a),{datasetElementType:r,dataElementType:i}=Mle.datasets[a];Object.assign(t,{dataElementType:Ihe.getElement(i),datasetElementType:r&&Ihe.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){woe(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||woe(s,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Khe("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){woe(this.scales,(e=>{Que.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Ooe(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){ede(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let s=1;s<t;s++)if(!Ooe(r,n(s)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Que.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],woe(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Doe(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(eue.has(this)?this.attached&&!eue.running(this)&&eue.start(this):(this.draw(),Yhe({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Jce(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Ule(t,r),e.controller.draw(),r&&Ble(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return jle(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=$ue.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=ace(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);Roe(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),eue.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Fle(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Jhe[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};woe(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const i=()=>{r("attach",i),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",i)},t.isAttached(this.canvas)?i():a()}unbindEvents(){woe(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},woe(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,a,i,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){a=e[i];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!xoe(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),a=s(t,e),i=n?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),i.length&&r.mode&&this.updateHoverStyle(i,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,a=t,i=this._getActiveElements(e,r,n,a),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,boe(s.onHover,[e,i,this],this),o&&boe(s.onClick,[e,i,this],this));const c=!xoe(i,r);return(c||t)&&(this._active=i,this._updateHoverStyles(i,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function nde(){return woe(tde.instances,(e=>e._plugins.invalidate()))}function rde(e,t,n,r){const s=Zle(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,i=Math.min(a,r*t/2),o=e=>{const t=(n-Math.min(a,e))*r/2;return nle(e,0,Math.min(a,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:nle(s.innerStart,0,i),innerEnd:nle(s.innerEnd,0,i)}}function sde(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function ade(e,t,n,r,s,a){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let p=0;const f=s-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;p=(f-(0!==e?f*e/(e+r):f))/2}const m=(f-Math.max(.001,f*h-n/Moe)/h)/2,g=l+m+p,y=s-m-p,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:x}=rde(t,d,h,y-g),k=h-v,S=h-b,T=g+v/k,E=y-b/S,N=d+w,C=d+x,I=g+w/N,_=y-x/C;if(e.beginPath(),a){const t=(T+E)/2;if(e.arc(i,o,h,T,t),e.arc(i,o,h,t,E),b>0){const t=sde(S,E,i,o);e.arc(t.x,t.y,b,E,y+zoe)}const n=sde(C,y,i,o);if(e.lineTo(n.x,n.y),x>0){const t=sde(C,_,i,o);e.arc(t.x,t.y,x,y+zoe,_+Math.PI)}const r=(y-x/d+(g+w/d))/2;if(e.arc(i,o,d,y-x/d,r,!0),e.arc(i,o,d,r,g+w/d,!0),w>0){const t=sde(N,I,i,o);e.arc(t.x,t.y,w,I+Math.PI,g-zoe)}const s=sde(k,g,i,o);if(e.lineTo(s.x,s.y),v>0){const t=sde(k,T,i,o);e.arc(t.x,t.y,v,g-zoe,T)}}else{e.moveTo(i,o);const t=Math.cos(T)*h+i,n=Math.sin(T)*h+o;e.lineTo(t,n);const r=Math.cos(E)*h+i,s=Math.sin(E)*h+o;e.lineTo(r,s)}e.closePath()}function ide(e,t,n,r,s){const{fullCircles:a,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let f=t.endAngle;if(a){ade(e,t,n,r,f,s);for(let t=0;t<a;++t)e.stroke();isNaN(o)||(f=i+(o%Poe||Poe))}p&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:a,y:i,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(a,i,o,r-c,n+c),l>s?(c=s/l,e.arc(a,i,l,n+c,r-c,!0)):e.arc(a,i,s,n+zoe,r-zoe),e.closePath(),e.clip()}(e,t,f),a||(ade(e,t,n,r,f,s),e.stroke())}class ode extends mhe{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:a}=Qoe(r,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=yoe(u,o-i),p=tle(s,i,o)&&i!==o,f=d>=Poe||p,m=rle(a,l+h,c+h);return f&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:a,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,u=(a+i+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Poe?Math.floor(n/Poe):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*r,Math.sin(i)*r);const o=r*(1-Math.sin(Math.min(Moe,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:a,startAngle:i,circumference:o}=t;let l=t.endAngle;if(a){ade(e,t,n,r,l,s);for(let t=0;t<a;++t)e.fill();isNaN(o)||(l=i+(o%Poe||Poe))}ade(e,t,n,r,l,s),e.fill()}(e,this,o,s,a),ide(e,this,o,s,a),e.restore()}}function lde(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=yoe(n.borderCapStyle,t.borderCapStyle),e.setLineDash(yoe(n.borderDash,t.borderDash)),e.lineDashOffset=yoe(n.borderDashOffset,t.borderDashOffset),e.lineJoin=yoe(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=yoe(n.borderWidth,t.borderWidth),e.strokeStyle=yoe(n.borderColor,t.borderColor)}function cde(e,t,n){e.lineTo(n.x,n.y)}function ude(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:a=r-1}=n,{start:i,end:o}=t,l=Math.max(s,i),c=Math.min(a,o),u=s<i&&a<i||s>o&&a>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function hde(e,t,n,r){const{points:s,options:a}=t,{count:i,start:o,loop:l,ilen:c}=ude(s,n,r),u=function(e){return e.stepped?Vle:e.tension||"monotone"===e.cubicInterpolationMode?Wle:cde}(a);let h,d,p,{move:f=!0,reverse:m}=r||{};for(h=0;h<=c;++h)d=s[(o+(m?c-h:h))%i],d.skip||(f?(e.moveTo(d.x,d.y),f=!1):u(e,p,d,m,a.stepped),p=d);return l&&(d=s[(o+(m?c:0))%i],u(e,p,d,m,a.stepped)),!!l}function dde(e,t,n,r){const s=t.points,{count:a,start:i,ilen:o}=ude(s,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,p,f,m,g=0,y=0;const v=e=>(i+(c?o-e:e))%a,b=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(h=s[v(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=s[v(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<p?p=n:n>f&&(f=n),g=(y*g+t)/++y):(b(),e.lineTo(t,n),d=r,y=0,p=f=n),m=n}b()}function pde(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?dde:hde}const fde="function"===typeof Path2D;function mde(e,t,n,r){fde&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),lde(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:a}=t,i=pde(t);for(const o of s)lde(e,a,o.style),e.beginPath(),i(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class gde extends mhe{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Ece(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const a=!!e._loop,{start:i,end:o}=function(e,t,n,r){let s=0,a=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(a+=s);a>s&&e[a%t].skip;)a--;return a%=t,{start:s,end:a}}(n,s,a,r);return Kce(e,!0===r?[{start:i,end:o,loop:a}]:function(e,t,n,r){const s=e.length,a=[];let i,o=t,l=e[t];for(i=t+1;i<=n;++i){const n=e[i%s];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%s,end:(i-1)%s,loop:r}),t=o=n.stop?i:null):(o=i,l.skip&&(t=i)),l=n}return null!==o&&a.push({start:t%s,end:o%s,loop:r}),a}(n,i,o<i?o+s:o,!!e._fullLoop&&0===i&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,a=qce(this,{property:t,start:r,end:r});if(!a.length)return;const i=[],o=function(e){return e.stepped?zce:e.tension||"monotone"===e.cubicInterpolationMode?jce:$ce}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:u}=a[l],h=s[c],d=s[u];if(h===d){i.push(h);continue}const p=o(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);p[t]=e[t],i.push(p)}return 1===i.length?i[0]:i}pathSegment(e,t,n){return pde(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=pde(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const i of r)a&=s(e,this,i,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),mde(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function yde(e,t,n,r){const s=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<s.radius+s.hitRadius}class vde extends mhe{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:a}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return yde(this,e,"x",t)}inYRange(e,t){return yde(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!jle(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,$le(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function bde(e,t){const{x:n,y:r,base:s,width:a,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=i/2,o=Math.min(n,s),l=Math.max(n,s),c=r-h,u=r+h):(h=a/2,o=n-h,l=n+h,c=Math.min(r,s),u=Math.max(r,s)),{left:o,top:c,right:l,bottom:u}}function wde(e,t,n,r){return e?0:nle(t,n,r)}function xde(e){const t=bde(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,a=ece(r);return{t:wde(s.top,a.top,0,n),r:wde(s.right,a.right,0,t),b:wde(s.bottom,a.bottom,0,n),l:wde(s.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,a=tce(s),i=Math.min(t,n),o=e.borderSkipped,l=r||foe(s);return{topLeft:wde(!l||o.top||o.left,a.topLeft,0,i),topRight:wde(!l||o.top||o.right,a.topRight,0,i),bottomLeft:wde(!l||o.bottom||o.left,a.bottomLeft,0,i),bottomRight:wde(!l||o.bottom||o.right,a.bottomRight,0,i)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function kde(e,t,n,r){const s=null===t,a=null===n,i=e&&!(s&&a)&&bde(e,r);return i&&(s||rle(t,i.left,i.right))&&(a||rle(n,i.top,i.bottom))}function Sde(e,t){e.rect(t.x,t.y,t.w,t.h)}function Tde(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,i=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+a,h:e.h+i,radius:e.radius}}class Ede extends mhe{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:a}=xde(this),i=(o=a.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Kle:Sde;var o;e.save(),a.w===s.w&&a.h===s.h||(e.beginPath(),i(e,Tde(a,t,s)),e.clip(),i(e,Tde(s,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),i(e,Tde(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return kde(this,e,t,n)}inXRange(e,t){return kde(this,e,null,t)}inYRange(e,t){return kde(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}const Nde=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class Cde extends mhe{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=boe(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=rce(n.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=Nde(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,i,o)+10):(c=this.maxHeight,l=this._fitCols(a,r,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:a,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+i;let u=e;s.textAlign="left",s.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,p)=>{const f=n+t/2+s.measureText(e.text).width;(0===p||l[l.length-1]+f+2*i>a)&&(u+=c,l[l.length-(p>0?0:1)]=0,d+=c,h++),o[p]={left:0,top:d,row:h,width:f,height:r},l[l.length-1]+=f+i})),u}_fitCols(e,t,n,r){const{ctx:s,maxHeight:a,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let u=i,h=0,d=0,p=0,f=0;return this.legendItems.forEach(((e,a)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,s){const a=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(s).width}(r,e,t,n),i=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=Ide(t,n));return r}(s,r,t.lineHeight);return{itemWidth:a,itemHeight:i}}(n,t,s,e,r);a>0&&d+g+2*i>c&&(u+=h+i,l.push({width:h,height:d}),p+=h+i,f++,h=d=0),o[a]={left:p,top:d,col:f,width:m,height:g},h=Math.max(h,m),d+=g+i})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,a=Uce(s,this.left,this.width);if(this.isHorizontal()){let s=0,i=ple(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,i=ple(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=a.leftForLtr(a.x(i),o.width),i+=o.width+r}else{let s=0,i=ple(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,i=ple(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=i,o.left+=this.left+r,o.left=a.leftForLtr(a.x(o.left),o.width),i+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ule(e,this),this._draw(),Ble(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:a}=e,i=Mle.color,o=Uce(e.rtl,this.left,this.width),l=rce(a.font),{padding:c}=a,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=Nde(a,u),g=this.isHorizontal(),y=this._computeTitleHeight();d=g?{x:ple(s,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:ple(s,this.top+y+c,this.bottom-t[0].height),line:0},Bce(this.ctx,e.textDirection);const v=m+c;this.legendItems.forEach(((b,w)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const x=r.measureText(b.text).width,k=o.textAlign(b.textAlign||(b.textAlign=a.textAlign)),S=p+h+x;let T=d.x,E=d.y;o.setWidth(this.width),g?w>0&&T+S+c>this.right&&(E=d.y+=v,d.line++,T=d.x=ple(s,this.left+c,this.right-n[d.line])):w>0&&E+v>this.bottom&&(T=d.x=T+t[d.line].width+c,d.line++,E=d.y=ple(s,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;r.save();const s=yoe(n.lineWidth,1);if(r.fillStyle=yoe(n.fillStyle,i),r.lineCap=yoe(n.lineCap,"butt"),r.lineDashOffset=yoe(n.lineDashOffset,0),r.lineJoin=yoe(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=yoe(n.strokeStyle,i),r.setLineDash(yoe(n.lineDash,[])),a.usePointStyle){const i={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,p/2);zle(r,i,l,t+h,a.pointStyleWidth&&p)}else{const a=t+Math.max((u-f)/2,0),i=o.leftForLtr(e,p),l=tce(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?Kle(r,{x:i,y:a,w:p,h:f,radius:l}):r.rect(i,a,p,f),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(T),E,b),T=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(k,T+p+h,g?T+S:this.right,e.rtl),function(e,t,n){qle(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(T),E,b),g)d.x+=S+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=Ide(b,e)+c}else d.y+=v})),Vce(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=rce(t.font),r=nce(t.padding);if(!t.display)return;const s=Uce(e.rtl,this.left,this.width),a=this.ctx,i=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=ple(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+ple(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=ple(i,u,u+h);a.textAlign=s.textAlign(dle(i)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,qle(a,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=rce(e.font),n=nce(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(rle(e,this.left,this.right)&&rle(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],rle(e,r.left,r.left+r.width)&&rle(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const a=this._hoveredItem,i=(s=n,null!==(r=a)&&null!==s&&r.datasetIndex===s.datasetIndex&&r.index===s.index);a&&!i&&boe(t.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&boe(t.onHover,[e,n,this],this)}else n&&boe(t.onClick,[e,n,this],this);var r,s}}function Ide(e,t){return t*(e.text?e.text.length:0)}var _de={id:"legend",_element:Cde,start(e,t,n){const r=e.legend=new Cde({ctx:e.ctx,options:n,chart:e});Que.configure(e,r,n),Que.addBox(e,r)},stop(e){Que.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Que.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:a,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=nce(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Ade extends mhe{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=poe(n.text)?n.text.length:1;this._padding=nce(n.padding);const s=r*rce(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:a}=this,i=a.align;let o,l,c,u=0;return this.isHorizontal()?(l=ple(i,n,s),c=t+e,o=s-n):("left"===a.position?(l=n+e,c=ple(i,r,t),u=-.5*Moe):(l=s-e,c=ple(i,t,r),u=.5*Moe),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=rce(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:i,rotation:o}=this._drawArgs(r);qle(e,t.text,0,0,n,{color:t.color,maxWidth:i,rotation:o,textAlign:dle(t.align),textBaseline:"middle",translation:[s,a]})}}var Rde={id:"title",_element:Ade,start(e,t,n){!function(e,t){const n=new Ade({ctx:e.ctx,options:t,chart:e});Que.configure(e,n,t),Que.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Que.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Que.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Dde={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++a}}if(0===a||0===r.size)return!1;return{x:[...r].reduce(((e,t)=>e+t))/r.size,y:s/a}},nearest(e,t){if(!e.length)return!1;let n,r,s,a=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=Joe(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();a=e.x,i=e.y}return{x:a,y:i}}};function Ode(e,t){return t&&(poe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Mde(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Pde(e,t){const{element:n,datasetIndex:r,index:s}=t,a=e.getDatasetMeta(r).controller,{label:i,value:o}=a.getLabelAndValue(s);return{chart:e,label:i,parsed:a.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:a.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Lde(e,t){const n=e.chart.ctx,{body:r,footer:s,title:a}=e,{boxWidth:i,boxHeight:o}=t,l=rce(t.bodyFont),c=rce(t.titleFont),u=rce(t.footerFont),h=a.length,d=s.length,p=r.length,f=nce(t.padding);let m=f.height,g=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){m+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,woe(e.title,b),n.font=l.string,woe(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?i+2+t.boxPadding:0,woe(r,(e=>{woe(e.before,b),woe(e.lines,b),woe(e.after,b)})),v=0,n.font=u.string,woe(e.footer,b),n.restore(),g+=f.width,{width:g,height:m}}function Fde(e,t,n,r){const{x:s,width:a}=n,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=a/2?c="left":s>=i-a/2&&(c="right"),function(e,t,n,r){const{x:s,width:a}=r,i=n.caretSize+n.caretPadding;return"left"===e&&s+a+i>t.width||"right"===e&&s-a-i<0||void 0}(c,e,t,n)&&(c="center"),c}function $de(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Fde(e,t,n,r),yAlign:r}}function zde(e,t,n,r){const{caretSize:s,caretPadding:a,cornerRadius:i}=e,{xAlign:o,yAlign:l}=n,c=s+a,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=tce(i);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const m=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(u,d)+s:"right"===o&&(f+=Math.max(h,p)+s),{x:nle(f,0,r.width-t.width),y:nle(m,0,r.height-t.height)}}function jde(e,t,n){const r=nce(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Ude(e){return Ode([],Mde(e))}function Bde(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Vde={beforeTitle:uoe,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:uoe,beforeBody:uoe,beforeLabel:uoe,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return doe(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:uoe,afterBody:uoe,beforeFooter:uoe,footer:uoe,afterFooter:uoe};function Wde(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?Vde[t].call(n,r):s}class Hde extends mhe{static positioners=(()=>Dde)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new sue(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,ace(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=Wde(n,"beforeTitle",this,e),s=Wde(n,"title",this,e),a=Wde(n,"afterTitle",this,e);let i=[];return i=Ode(i,Mde(r)),i=Ode(i,Mde(s)),i=Ode(i,Mde(a)),i}getBeforeBody(e,t){return Ude(Wde(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return woe(e,(e=>{const t={before:[],lines:[],after:[]},s=Bde(n,e);Ode(t.before,Mde(Wde(s,"beforeLabel",this,e))),Ode(t.lines,Wde(s,"label",this,e)),Ode(t.after,Mde(Wde(s,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return Ude(Wde(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=Wde(n,"beforeFooter",this,e),s=Wde(n,"footer",this,e),a=Wde(n,"afterFooter",this,e);let i=[];return i=Ode(i,Mde(r)),i=Ode(i,Mde(s)),i=Ode(i,Mde(a)),i}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],a=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(Pde(this.chart,t[i]));return e.filter&&(l=l.filter(((t,r,s)=>e.filter(t,r,s,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),woe(l,(t=>{const n=Bde(e.callbacks,t);r.push(Wde(n,"labelColor",this,t)),s.push(Wde(n,"labelPointStyle",this,t)),a.push(Wde(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(r.length){const e=Dde[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=Lde(this,n),i=Object.assign({},e,t),o=$de(this.chart,n,i),l=zde(n,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:i}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=tce(i),{x:h,y:d}=e,{width:p,height:f}=t;let m,g,y,v,b,w;return"center"===s?(b=d+f/2,"left"===r?(m=h,g=m-a,v=b+a,w=b-a):(m=h+p,g=m+a,v=b-a,w=b+a),y=m):(g="left"===r?h+Math.max(o,c)+a:"right"===r?h+p-Math.max(l,u)-a:this.caretX,"top"===s?(v=d,b=v-a,m=g-a,y=g+a):(v=d+f,b=v+a,m=g+a,y=g-a),w=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:w}}drawTitle(e,t,n){const r=this.title,s=r.length;let a,i,o;if(s){const l=Uce(n.rtl,this.x,this.width);for(e.x=jde(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=rce(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i,o+1===s&&(e.y+=n.titleMarginBottom-i)}}_drawColorBox(e,t,n,r,s){const a=this.labelColors[n],i=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=rce(s.bodyFont),u=jde(this,"left",s),h=r.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+d;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=p+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,$le(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,$le(e,t,n,c)}else{e.lineWidth=foe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),i=tce(a.borderRadius);Object.values(i).some((e=>0!==e))?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Kle(e,{x:t,y:p,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Kle(e,{x:n,y:p+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=a.backgroundColor,e.fillRect(n,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=rce(n.bodyFont);let h=u.lineHeight,d=0;const p=Uce(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+d),e.y+h/2),e.y+=h+s},m=p.textAlign(a);let g,y,v,b,w,x,k;for(t.textAlign=a,t.textBaseline="middle",t.font=u.string,e.x=jde(this,m,n),t.fillStyle=n.bodyColor,woe(this.beforeBody,f),d=i&&"right"!==m?"center"===a?l/2+c:l+2+c:0,b=0,x=r.length;b<x;++b){for(g=r[b],y=this.labelTextColors[b],t.fillStyle=y,woe(g.before,f),v=g.lines,i&&v.length&&(this._drawColorBox(t,e,b,p,n),h=Math.max(u.lineHeight,o)),w=0,k=v.length;w<k;++w)f(v[w]),h=u.lineHeight;woe(g.after,f)}d=0,h=u.lineHeight,woe(this.afterBody,f),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let a,i;if(s){const o=Uce(n.rtl,this.x,this.width);for(e.x=jde(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",a=rce(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,i=0;i<s;++i)t.fillText(r[i],o.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:a}=this,{x:i,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=tce(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(i+u,o),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(i+l-h,o),t.quadraticCurveTo(i+l,o,i+l,o+h),"center"===a&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(i+l,o+c-p),t.quadraticCurveTo(i+l,o+c,i+l-p,o+c),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(i+d,o+c),t.quadraticCurveTo(i,o+c,i,o+c-d),"center"===a&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(i,o+u),t.quadraticCurveTo(i,o,i+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=Dde[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=Lde(this,e),i=Object.assign({},n,this._size),o=$de(t,e,i),l=zde(e,i,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=nce(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),Bce(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Vce(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),s=!xoe(n,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,n),i=this._positionChanged(a,e),o=t||!xoe(a,s)||i;return o&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,a=Dde[s.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}var Gde={id:"tooltip",_element:Hde,positioners:Dde,afterInit(e,t,n){n&&(e.tooltip=new Hde({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Vde},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function qde(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function Kde(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Yde extends Ehe{static id="category";static defaults=(()=>({ticks:{callback:Kde}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(doe(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:nle(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:qde(n,e,yoe(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return Kde.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Xde(e,t){const n=[],{bounds:r,step:s,min:a,max:i,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=s||1,p=c-1,{min:f,max:m}=t,g=!doe(a),y=!doe(i),v=!doe(l),b=(m-f)/(u+1);let w,x,k,S,T=Hoe((m-f)/p/d)*d;if(T<1e-14&&!g&&!y)return[{value:f},{value:m}];S=Math.ceil(m/T)-Math.floor(f/T),S>p&&(T=Hoe(S*T/p/d)*d),doe(o)||(w=Math.pow(10,o),T=Math.ceil(T*w)/w),"ticks"===r?(x=Math.floor(f/T)*T,k=Math.ceil(m/T)*T):(x=f,k=m),g&&y&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((i-a)/s,T/1e3)?(S=Math.round(Math.min((i-a)/T,c)),T=(i-a)/S,x=a,k=i):v?(x=g?a:x,k=y?i:k,S=l-1,T=(k-x)/S):(S=(k-x)/T,S=Woe(S,Math.round(S),T/1e3)?Math.round(S):Math.ceil(S));const E=Math.max(Xoe(T),Xoe(x));w=Math.pow(10,doe(o)?E:o),x=Math.round(x*w)/w,k=Math.round(k*w)/w;let N=0;for(g&&(h&&x!==a?(n.push({value:a}),x<a&&N++,Woe(Math.round((x+N*T)*w)/w,a,Qde(a,b,e))&&N++):x<a&&N++);N<S;++N){const e=Math.round((x+N*T)*w)/w;if(y&&e>i)break;n.push({value:e})}return y&&h&&k!==i?n.length&&Woe(n[n.length-1].value,i,Qde(i,b,e))?n[n.length-1].value=i:n.push({value:i}):y&&k!==i||n.push({value:k}),n}function Qde(e,t,n){let{horizontal:r,minRotation:s}=n;const a=Koe(s),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class Jde extends Ehe{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return doe(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const a=e=>r=t?r:e,i=e=>s=n?s:e;if(e){const e=Voe(r),t=Voe(s);e<0&&t<0?i(0):e>0&&t>0&&a(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);i(s+t),e||a(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=Xde({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&qoe(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Nle(e,this.chart.options.locale,this.options.ticks.format)}}class Zde extends Jde{static id="linear";static defaults=(()=>({ticks:{callback:Ile.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=moe(e)?e:0,this.max=moe(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Koe(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ile.formatters.logarithmic;Ile.formatters.numeric;const epe={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tpe=Object.keys(epe);function npe(e,t){return e-t}function rpe(e,t){if(doe(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:a}=e._parseOpts;let i=t;return"function"===typeof r&&r(i),moe(i)||("string"===typeof r?n.parse(i,r):n.parse(i)),null===i?null:(s&&("week"!==s||!Goe(a)&&!0!==a?n.startOf(i,s):n.startOf(i,"isoWeek",a)),+i)}function spe(e,t,n,r){const s=tpe.length;for(let a=tpe.indexOf(e);a<s-1;++a){const e=epe[tpe[a]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return tpe[a]}return tpe[s-1]}function ape(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=sle(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function ipe(e,t,n){const r=[],s={},a=t.length;let i,o;for(0;i<a;++i)t[i],s[o]=i,r.push({value:o,major:!1});return 0!==a&&n?function(e,t,n,r){const s=e._adapter,a=+s.startOf(t[0].value,r),i=t[t.length-1].value;let o,l;for(a;o<=i;+s.add(o,1,r))n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class ope extends Ehe{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new Rue(e.adapters.date);r.init(t),Noe(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:rpe(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:i}=this.getUserBounds();function o(e){a||isNaN(e.min)||Math.min(r,e.min),i||isNaN(e.max)||Math.max(s,e.max)}a&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),moe(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),moe(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)0;for(;s>r&&e[s-1]>n;)0;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?spe(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let a=tpe.length-1;a>=tpe.indexOf(n);a--){const n=tpe[a];if(epe[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return tpe[n?tpe.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=tpe.indexOf(e)+1,n=tpe.length;t<n;++t)if(epe[tpe[t]].common)return tpe[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),ipe(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(this.getDecimalForValue(n[0]),1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,this.getDecimalForValue(n[n.length-1]),1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;nle(r,0,a),nle(s,0,a),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,a=s.unit||spe(s.minUnit,t,n,this._getLabelCapacity(t)),i=yoe(r.ticks.stepSize,1),o="week"===a&&s.isoWeekday,l=Goe(o)||!0===o,c={};let u,h,d=t;if(l&&+e.startOf(d,"isoWeek",o),+e.startOf(d,l?"day":a),e.diff(n,t,a)>1e5*i)throw new Error(t+" and "+n+" are too far apart with stepSize of "+i+" "+a);const p="data"===r.ticks.source&&this.getDataTimestamps();for(0;u<n;+e.add(u,i,a),h++)ape(c,u,p);return u!==n&&"ticks"!==r.bounds&&1!==h||ape(c,u,p),Object.keys(c).sort(npe).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,a=s.ticks.callback;if(a)return boe(a,[e,t,n],this);const i=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],u=l&&i[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(e.length;t<n;++t)e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Koe(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),a=Math.sin(r),i=this._resolveTickFontOptions(0).size;return{w:n*s+i*a,h:n*a+i*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,ipe(this,[e],this._majorUnit),r),a=this._getLabelSize(s),i=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(r.length;e<t;++e)n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(r.length;t<n;++t)e.push(rpe(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return cle(e.sort(npe))}}const lpe="label";function cpe(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function upe(e,t){e.labels=t}function hpe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lpe;const r=[];e.datasets=t.map((t=>{const s=e.datasets.find((e=>e[n]===t[n]));return s&&t.data&&!r.includes(s)?(r.push(s),Object.assign(s,t),s):{...t}}))}function dpe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lpe;const n={labels:[],datasets:[]};return upe(n,e.labels),hpe(n,e.datasets,t),n}function ppe(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:i,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=e,p=(0,X.useRef)(null),f=(0,X.useRef)(null),m=()=>{p.current&&(f.current=new tde(p.current,{type:i,data:dpe(o,a),options:l&&{...l},plugins:c}),cpe(t,f.current))},g=()=>{cpe(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,X.useEffect)((()=>{!s&&f.current&&l&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(f.current,l)}),[s,l]),(0,X.useEffect)((()=>{!s&&f.current&&upe(f.current.config.data,o.labels)}),[s,o.labels]),(0,X.useEffect)((()=>{!s&&f.current&&o.datasets&&hpe(f.current.config.data,o.datasets,a)}),[s,o.datasets]),(0,X.useEffect)((()=>{f.current&&(s?(g(),setTimeout(m)):f.current.update(h))}),[s,l,o.labels,o.datasets,h]),(0,X.useEffect)((()=>{f.current&&(g(),setTimeout(m))}),[i]),(0,X.useEffect)((()=>(m(),()=>g())),[]),X.createElement("canvas",{ref:p,role:"img",height:n,width:r,...d},u)}const fpe=(0,X.forwardRef)(ppe);function mpe(e,t){return tde.register(t),(0,X.forwardRef)(((t,n)=>X.createElement(fpe,{...t,ref:n,type:e})))}const gpe=mpe("line",Cue),ype=mpe("bar",Eue),vpe=mpe("pie",Iue);tde.register(Yde,Zde,vde,gde,Ede,ode,Rde,Gde,_de);const bpe=e=>{let{transactions:t}=e;const{dates:n,incomeByDate:r,expenseByDate:s,incomeByCategoryLabels:a,incomeByCategoryData:i,expenseByCategoryLabels:o,expenseByCategoryData:l,cumulativeDates:c,cumulativeData:u}=(()=>{if(!t||0===t.length)return{dates:[],incomeByDate:[],expenseByDate:[],incomeByCategoryLabels:[],incomeByCategoryData:[],expenseByCategoryLabels:[],expenseByCategoryData:[],cumulativeDates:[],cumulativeData:[]};const e=e=>{const t=new Date(e);return`${t.getDate()}/${t.getMonth()+1}`},n={};t.forEach((e=>{n[e.date]||(n[e.date]={income:0,expense:0}),"income"===e.type?n[e.date].income+=e.amount:n[e.date].expense+=e.amount}));const r=Object.keys(n).sort(),s=r.map((e=>n[e].income)),a=r.map((e=>n[e].expense)),i=r.map(e),o={},l={};t.forEach((e=>{"income"===e.type?o[e.category]=(o[e.category]||0)+e.amount:l[e.category]=(l[e.category]||0)+e.amount}));const c=Object.keys(o),u=c.map((e=>o[e])),h=Object.keys(l),d=h.map((e=>l[e]));let p=0;const f=[],m=[...t].sort(((e,t)=>new Date(e.date)-new Date(t.date))),g={};m.forEach((e=>{g[e.date]||(g[e.date]=0),g[e.date]+="income"===e.type?e.amount:-e.amount}));const y=Object.keys(g).sort();y.forEach((e=>{p+=g[e],f.push(p)}));return{dates:i,incomeByDate:s,expenseByDate:a,incomeByCategoryLabels:c,incomeByCategoryData:u,expenseByCategoryLabels:h,expenseByCategoryData:d,cumulativeDates:y.map(e),cumulativeData:f}})(),h={labels:n,datasets:[{label:"Income",data:r,backgroundColor:"rgba(40, 167, 69, 0.6)",borderColor:"rgb(40, 167, 69)",borderWidth:1},{label:"Expense",data:s,backgroundColor:"rgba(220, 53, 69, 0.6)",borderColor:"rgb(220, 53, 69)",borderWidth:1}]},d={labels:a,datasets:[{data:i,backgroundColor:["rgba(40, 167, 69, 0.8)","rgba(32, 201, 151, 0.8)","rgba(23, 162, 184, 0.8)","rgba(13, 110, 253, 0.8)","rgba(0, 123, 255, 0.8)"],borderWidth:1}]},p={labels:o,datasets:[{data:l,backgroundColor:["rgba(220, 53, 69, 0.8)","rgba(253, 126, 20, 0.8)","rgba(255, 193, 7, 0.8)","rgba(108, 117, 125, 0.8)","rgba(173, 181, 189, 0.8)"],borderWidth:1}]},f={labels:c,datasets:[{label:"Cumulative Earnings",data:u,fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1,pointRadius:2}]},m={responsive:!0,maintainAspectRatio:!1};return 0===t.length?(0,Nt.jsx)(Nie,{className:"p-4 text-center",children:(0,Nt.jsx)("p",{children:"No transaction data available to display charts."})}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(nie,{children:(0,Nt.jsx)(sie,{md:12,children:(0,Nt.jsx)(Nie,{className:"mb-4",children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsx)("h5",{className:"chart-title",children:"Income vs Expense"}),(0,Nt.jsx)("div",{className:"chart-container",children:(0,Nt.jsx)(ype,{data:h,options:m})})]})})})}),(0,Nt.jsxs)(nie,{children:[(0,Nt.jsx)(sie,{md:6,children:(0,Nt.jsx)(Nie,{className:"mb-4",children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsx)("h5",{className:"chart-title",children:"Income by Category"}),(0,Nt.jsx)("div",{className:"chart-container",children:(0,Nt.jsx)(vpe,{data:d,options:m})})]})})}),(0,Nt.jsx)(sie,{md:6,children:(0,Nt.jsx)(Nie,{className:"mb-4",children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsx)("h5",{className:"chart-title",children:"Expense by Category"}),(0,Nt.jsx)("div",{className:"chart-container",children:(0,Nt.jsx)(vpe,{data:p,options:m})})]})})})]}),(0,Nt.jsx)(nie,{children:(0,Nt.jsx)(sie,{md:12,children:(0,Nt.jsx)(Nie,{className:"mb-4",children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsx)("h5",{className:"chart-title",children:"Cumulative Earnings"}),(0,Nt.jsx)("div",{className:"chart-container",children:(0,Nt.jsx)(gpe,{data:f,options:m})})]})})})})]})},wpe={type:Fr().string,tooltip:Fr().bool,as:Fr().elementType},xpe=X.forwardRef(((e,t)=>{let{as:n="div",className:r,type:s="valid",tooltip:a=!1,...i}=e;return(0,Nt.jsx)(n,{...i,ref:t,className:Et()(r,`${s}-${a?"tooltip":"feedback"}`)})}));xpe.displayName="Feedback",xpe.propTypes=wpe;const kpe=xpe,Spe=X.createContext({}),Tpe=X.forwardRef(((e,t)=>{let{id:n,bsPrefix:r,className:s,type:a="checkbox",isValid:i=!1,isInvalid:o=!1,as:l="input",...c}=e;const{controlId:u}=(0,X.useContext)(Spe);return r=Dt(r,"form-check-input"),(0,Nt.jsx)(l,{...c,ref:t,type:a,id:n||u,className:Et()(s,r,i&&"is-valid",o&&"is-invalid")})}));Tpe.displayName="FormCheckInput";const Epe=Tpe,Npe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,htmlFor:s,...a}=e;const{controlId:i}=(0,X.useContext)(Spe);return n=Dt(n,"form-check-label"),(0,Nt.jsx)("label",{...a,ref:t,htmlFor:s||i,className:Et()(r,n)})}));Npe.displayName="FormCheckLabel";const Cpe=Npe;function Ipe(e,t){let n=0;return X.Children.map(e,(e=>X.isValidElement(e)?t(e,n++):e))}const _pe=X.forwardRef(((e,t)=>{let{id:n,bsPrefix:r,bsSwitchPrefix:s,inline:a=!1,reverse:i=!1,disabled:o=!1,isValid:l=!1,isInvalid:c=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:d,className:p,style:f,title:m="",type:g="checkbox",label:y,children:v,as:b="input",...w}=e;r=Dt(r,"form-check"),s=Dt(s,"form-switch");const{controlId:x}=(0,X.useContext)(Spe),k=(0,X.useMemo)((()=>({controlId:n||x})),[x,n]),S=!v&&null!=y&&!1!==y||function(e,t){return X.Children.toArray(e).some((e=>X.isValidElement(e)&&e.type===t))}(v,Cpe),T=(0,Nt.jsx)(Epe,{...w,type:"switch"===g?"checkbox":g,ref:t,isValid:l,isInvalid:c,disabled:o,as:b});return(0,Nt.jsx)(Spe.Provider,{value:k,children:(0,Nt.jsx)("div",{style:f,className:Et()(p,S&&r,a&&`${r}-inline`,i&&`${r}-reverse`,"switch"===g&&s),children:v||(0,Nt.jsxs)(Nt.Fragment,{children:[T,S&&(0,Nt.jsx)(Cpe,{title:m,children:y}),h&&(0,Nt.jsx)(kpe,{type:d,tooltip:u,children:h})]})})})}));_pe.displayName="FormCheck";const Ape=Object.assign(_pe,{Input:Epe,Label:Cpe}),Rpe=X.forwardRef(((e,t)=>{let{bsPrefix:n,type:r,size:s,htmlSize:a,id:i,className:o,isValid:l=!1,isInvalid:c=!1,plaintext:u,readOnly:h,as:d="input",...p}=e;const{controlId:f}=(0,X.useContext)(Spe);return n=Dt(n,"form-control"),(0,Nt.jsx)(d,{...p,type:r,size:a,ref:t,readOnly:h,id:i||f,className:Et()(o,u?`${n}-plaintext`:n,s&&`${n}-${s}`,"color"===r&&`${n}-color`,l&&"is-valid",c&&"is-invalid")})}));Rpe.displayName="FormControl";const Dpe=Object.assign(Rpe,{Feedback:kpe}),Ope=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"form-floating"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));Ope.displayName="FormFloating";const Mpe=Ope,Ppe=X.forwardRef(((e,t)=>{let{controlId:n,as:r="div",...s}=e;const a=(0,X.useMemo)((()=>({controlId:n})),[n]);return(0,Nt.jsx)(Spe.Provider,{value:a,children:(0,Nt.jsx)(r,{...s,ref:t})})}));Ppe.displayName="FormGroup";const Lpe=Ppe,Fpe=X.forwardRef(((e,t)=>{let{as:n="label",bsPrefix:r,column:s=!1,visuallyHidden:a=!1,className:i,htmlFor:o,...l}=e;const{controlId:c}=(0,X.useContext)(Spe);r=Dt(r,"form-label");let u="col-form-label";"string"===typeof s&&(u=`${u} ${u}-${s}`);const h=Et()(i,r,a&&"visually-hidden",s&&u);return o=o||c,s?(0,Nt.jsx)(sie,{ref:t,as:"label",className:h,htmlFor:o,...l}):(0,Nt.jsx)(n,{ref:t,className:h,htmlFor:o,...l})}));Fpe.displayName="FormLabel";const $pe=Fpe,zpe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,id:s,...a}=e;const{controlId:i}=(0,X.useContext)(Spe);return n=Dt(n,"form-range"),(0,Nt.jsx)("input",{...a,type:"range",ref:t,className:Et()(r,n),id:s||i})}));zpe.displayName="FormRange";const jpe=zpe,Upe=X.forwardRef(((e,t)=>{let{bsPrefix:n,size:r,htmlSize:s,className:a,isValid:i=!1,isInvalid:o=!1,id:l,...c}=e;const{controlId:u}=(0,X.useContext)(Spe);return n=Dt(n,"form-select"),(0,Nt.jsx)("select",{...c,size:s,ref:t,className:Et()(a,n,r&&`${n}-${r}`,i&&"is-valid",o&&"is-invalid"),id:l||u})}));Upe.displayName="FormSelect";const Bpe=Upe,Vpe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:s="small",muted:a,...i}=e;return n=Dt(n,"form-text"),(0,Nt.jsx)(s,{...i,ref:t,className:Et()(r,n,a&&"text-muted")})}));Vpe.displayName="FormText";const Wpe=Vpe,Hpe=X.forwardRef(((e,t)=>(0,Nt.jsx)(Ape,{...e,ref:t,type:"switch"})));Hpe.displayName="Switch";const Gpe=Object.assign(Hpe,{Input:Ape.Input,Label:Ape.Label}),qpe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,controlId:a,label:i,...o}=e;return n=Dt(n,"form-floating"),(0,Nt.jsxs)(Lpe,{ref:t,className:Et()(r,n),controlId:a,...o,children:[s,(0,Nt.jsx)("label",{htmlFor:a,children:i})]})}));qpe.displayName="FloatingLabel";const Kpe=qpe,Ype={_ref:Fr().any,validated:Fr().bool,as:Fr().elementType},Xpe=X.forwardRef(((e,t)=>{let{className:n,validated:r,as:s="form",...a}=e;return(0,Nt.jsx)(s,{...a,ref:t,className:Et()(n,r&&"was-validated")})}));Xpe.displayName="Form",Xpe.propTypes=Ype;const Qpe=Object.assign(Xpe,{Group:Lpe,Control:Dpe,Floating:Mpe,Check:Ape,Switch:Gpe,Label:$pe,Text:Wpe,Range:jpe,Select:Bpe,FloatingLabel:Kpe});var Jpe=n(1899),Zpe=n.n(Jpe);const efe=e=>{let{onFilterChange:t}=e;const[n,r]=(0,X.useState)({type:"all",category:"",start_date:new Date((new Date).getFullYear(),(new Date).getMonth(),1),end_date:new Date}),[s,a]=(0,X.useState)(!1);(0,X.useEffect)((()=>{l()}),[]);const i=e=>{const{name:t,value:n}=e.target;r((e=>({...e,[t]:n})))},o=(e,t)=>{r((n=>({...n,[t]:e})))},l=()=>{const e={...n,start_date:n.start_date.toISOString().split("T")[0],end_date:n.end_date.toISOString().split("T")[0]};"all"===e.type&&delete e.type,e.category||delete e.category,t(e),window.innerWidth<768&&a(!1)},c=e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,Nt.jsxs)("div",{className:"transaction-filters mb-4",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Nt.jsx)(Fi,{className:"me-2 text-primary"}),(0,Nt.jsx)("h6",{className:"mb-0",children:"Filter Transactions"})]}),(0,Nt.jsx)(Ws,{variant:"link",className:"p-0 text-decoration-none text-primary",onClick:()=>a(!s),"aria-expanded":s,"aria-controls":"filter-collapse",children:s?(0,Nt.jsxs)(Nt.Fragment,{children:["Hide Filters ",(0,Nt.jsx)(bi,{className:"ms-1"})]}):(0,Nt.jsxs)(Nt.Fragment,{children:["Show Filters ",(0,Nt.jsx)(vi,{className:"ms-1"})]})})]}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,Nt.jsxs)("div",{className:"small text-muted",children:[(0,Nt.jsx)(Si,{className:"me-1"}),c(n.start_date)," - ",c(n.end_date)]}),"all"!==n.type&&(0,Nt.jsx)("div",{className:"small",children:(0,Nt.jsx)("span",{className:"badge "+("income"===n.type?"badge-income":"badge-expense"),children:"income"===n.type?"Income":"Expense"})}),n.category&&(0,Nt.jsxs)("div",{className:"small",children:[(0,Nt.jsx)(eo,{className:"me-1"}),n.category]})]}),(0,Nt.jsx)(Ln,{in:s,children:(0,Nt.jsxs)("div",{id:"filter-collapse",children:[(0,Nt.jsxs)(nie,{className:"g-3 mb-3",children:[(0,Nt.jsx)(sie,{sm:6,lg:3,children:(0,Nt.jsxs)(Qpe.Group,{children:[(0,Nt.jsx)(Qpe.Label,{className:"small",children:"Transaction Type"}),(0,Nt.jsxs)(Qpe.Select,{name:"type",value:n.type,onChange:i,className:"form-select-sm",children:[(0,Nt.jsx)("option",{value:"all",children:"All Transactions"}),(0,Nt.jsx)("option",{value:"income",children:"Income Only"}),(0,Nt.jsx)("option",{value:"expense",children:"Expenses Only"})]})]})}),(0,Nt.jsx)(sie,{sm:6,lg:3,children:(0,Nt.jsxs)(Qpe.Group,{children:[(0,Nt.jsx)(Qpe.Label,{className:"small",children:"Category"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"category",value:n.category,onChange:i,placeholder:"Filter by category",className:"form-control-sm"})]})}),(0,Nt.jsx)(sie,{sm:6,lg:3,children:(0,Nt.jsxs)(Qpe.Group,{children:[(0,Nt.jsx)(Qpe.Label,{className:"small",children:"Start Date"}),(0,Nt.jsx)(Zpe(),{selected:n.start_date,onChange:e=>o(e,"start_date"),selectsStart:!0,startDate:n.start_date,endDate:n.end_date,className:"form-control form-control-sm",dateFormat:"MMM d, yyyy",popperPlacement:"bottom-start"})]})}),(0,Nt.jsx)(sie,{sm:6,lg:3,children:(0,Nt.jsxs)(Qpe.Group,{children:[(0,Nt.jsx)(Qpe.Label,{className:"small",children:"End Date"}),(0,Nt.jsx)(Zpe(),{selected:n.end_date,onChange:e=>o(e,"end_date"),selectsEnd:!0,startDate:n.start_date,endDate:n.end_date,minDate:n.start_date,className:"form-control form-control-sm",dateFormat:"MMM d, yyyy",popperPlacement:"bottom-start"})]})})]}),(0,Nt.jsxs)("div",{className:"d-flex",children:[(0,Nt.jsx)(Ws,{variant:"primary",size:"sm",onClick:l,className:"me-2",children:"Apply Filters"}),(0,Nt.jsx)(Ws,{variant:"outline-secondary",size:"sm",onClick:()=>{r({type:"all",category:"",start_date:new Date((new Date).getFullYear(),(new Date).getMonth(),1),end_date:new Date}),t({start_date:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0]})},children:"Reset"})]})]})})]})},tfe="transactions",nfe=e=>({...e,date:e.date.toDate().toISOString().split("T")[0]}),rfe=e=>{const t=XS.currentUser?XS.currentUser.uid:null;if(!t)throw new Error("User must be authenticated to perform this action");return{...e,userId:t,date:au.fromDate(new Date(e.date)),amount:Number(e.amount),createdAt:e.createdAt||au.now(),updatedAt:au.now()}},sfe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=XS.currentUser?XS.currentUser.uid:null;if(!t)throw new Error("User must be authenticated to fetch transactions");const n=Xy(YS,tfe);let r=[$v("userId","==",t)];if(e.type&&r.push($v("type","==",e.type)),e.category&&r.push($v("category","==",e.category)),e.start_date&&e.end_date){const t=au.fromDate(new Date(e.start_date)),n=au.fromDate(new Date(e.end_date));r.push($v("date",">=",t)),r.push($v("date","<=",n))}let s=Lv(n,...r,Uv("date","desc"));const a=await eb(s),i=[];return a.forEach((e=>{const t=e.data();i.push({id:e.id,...nfe(t)})})),i}catch(t){throw console.error("Error fetching transactions:",t),t}},afe=async e=>{try{if(!e)throw new Error("User ID is required to fetch transactions");const t=Lv(Xy(YS,tfe),$v("userId","==",e),Uv("date","desc")),n=await eb(t),r=[];return n.forEach((e=>{const t=e.data();r.push({id:e.id,...nfe(t)})})),r}catch(t){throw console.error("Error fetching transactions:",t),t}},ife=async(e,t,n)=>{try{if(!e)throw new Error("User ID is required to fetch transactions by date range");const r=au.fromDate(new Date(t)),s=au.fromDate(new Date(n)),a=Lv(Xy(YS,tfe),$v("userId","==",e),$v("date",">=",r),$v("date","<=",s),Uv("date","desc")),i=await eb(a),o=[];return i.forEach((e=>{const t=e.data();o.push({id:e.id,...nfe(t)})})),o}catch(r){throw console.error("Error fetching transactions by date range:",r),r}};var ofe={version:"0.18.5"},lfe=1200,cfe=1252,ufe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],hfe={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},dfe=function(e){-1!=ufe.indexOf(e)&&(cfe=hfe[0]=e)};var pfe=function(e){lfe=e,dfe(e)};function ffe(){pfe(1200),dfe(1252)}function mfe(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var gfe,yfe=function(e){return String.fromCharCode(e)},vfe=function(e){return String.fromCharCode(e)};var bfe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function wfe(e){for(var t="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,c=0;c<e.length;)a=(n=e.charCodeAt(c++))>>2,i=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(s=e.charCodeAt(c++))>>6,l=63&s,isNaN(r)?o=l=64:isNaN(s)&&(l=64),t+=bfe.charAt(a)+bfe.charAt(i)+bfe.charAt(o)+bfe.charAt(l);return t}function xfe(e){var t="",n=0,r=0,s=0,a=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=bfe.indexOf(e.charAt(l++))<<2|(a=bfe.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&a)<<4|(i=bfe.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(r)),s=(3&i)<<6|(o=bfe.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(s));return t}var kfe=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),Sfe=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(jEe){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Tfe(e){return kfe?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function Efe(e){return kfe?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var Nfe=function(e){return kfe?Sfe(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function Cfe(e){if("undefined"===typeof ArrayBuffer)return Nfe(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function Ife(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var _fe=kfe?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:Sfe(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),s=0;for(t=0,n=0;t<e.length;n+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var Afe=/\u0000/g,Rfe=/[\u0001-\u0006]/g;function Dfe(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Ofe(e,t){var n=""+e;return n.length>=t?n:Hme("0",t-n.length)+n}function Mfe(e,t){var n=""+e;return n.length>=t?n:Hme(" ",t-n.length)+n}function Pfe(e,t){var n=""+e;return n.length>=t?n:n+Hme(" ",t-n.length)}var Lfe=Math.pow(2,32);function Ffe(e,t){return e>Lfe||e<-Lfe?function(e,t){var n=""+Math.round(e);return n.length>=t?n:Hme("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:Hme("0",t-n.length)+n}(Math.round(e),t)}function $fe(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var zfe=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],jfe=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var Ufe={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},Bfe={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Vfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Wfe(e,t,n){for(var r=e<0?-1:1,s=e*r,a=0,i=1,o=0,l=1,c=0,u=0,h=Math.floor(s);c<t&&(o=(h=Math.floor(s))*i+a,u=h*c+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=a):(u=c,o=i)),!n)return[0,r*o,u];var d=Math.floor(r*o/u);return[d,r*o-d*u,u]}function Hfe(e,t,n){if(e>2958465||e<0)return null;var r=0|e,s=Math.floor(86400*(e-r)),a=0,i=[],o={D:r,T:s,u:86400*(e-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++s&&(o.T=s=0,++r,++o.D)),60===r)i=n?[1317,10,29]:[1900,2,29],a=3;else if(0===r)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var Gfe=new Date(1899,11,31,0,0,0),qfe=Gfe.getTime(),Kfe=new Date(1900,2,1,0,0,0);function Yfe(e,t){var n=e.getTime();return t?n-=1262304e5:e>=Kfe&&(n+=864e5),(n-(qfe+6e4*(e.getTimezoneOffset()-Gfe.getTimezoneOffset())))/864e5}function Xfe(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Qfe(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=Xfe(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=Xfe(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Xfe(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Jfe(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Qfe(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return bme(14,Yfe(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Zfe(e,t,n,r){var s,a="",i=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:s=l%100,c=2;break;default:s=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:s=n.m,c=t.length;break;case 3:return jfe[n.m-1][1];case 5:return jfe[n.m-1][0];default:return jfe[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:s=n.d,c=t.length;break;case 3:return zfe[n.q][0];default:return zfe[n.q][1]}break;case 104:switch(t.length){case 1:case 2:s=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:s=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:s=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(i=Math.round(o*(n.S+n.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(a=Ofe(i,2+r),"ss"===t?a.substr(0,2):"."+a.substr(2,t.length-1))):Ofe(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":s=24*n.D+n.H;break;case"[m]":case"[mm]":s=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":s=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:s=l,c=1}return c>0?Ofe(s,c):""}function eme(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var tme=/%/g;function nme(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+nme(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),-1===(n=(t/Math.pow(10,a)).toPrecision(r+1+(s+a)%s)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(s+a)%s)+"."+r.substr(a)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var rme=/# (\?+)( ?)\/( ?)(\d+)/;var sme=/^#*0*\.([0#]+)/,ame=/\).*[0#]/,ime=/\(###\) ###\\?-####/;function ome(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function lme(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function cme(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function ume(e,t,n){if(40===e.charCodeAt(0)&&!t.match(ame)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ume("n",r,n):"("+ume("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return pme(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(tme,""),s=t.length-r.length;return pme(e,r,n*Math.pow(10,2*s))+Hme("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return nme(t,n);if(36===t.charCodeAt(0))return"$"+ume(e,t.substr(" "==t.charAt(1)?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Ffe(l,t.length);if(t.match(/^[#?]+$/))return"0"===(s=Ffe(n,0))&&(s=""),s.length>t.length?s:ome(t.substr(0,t.length-s.length))+s;if(a=t.match(rme))return function(e,t,n){var r=parseInt(e[4],10),s=Math.round(t*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(0===a?"":""+a)+" "+(0===i?Hme(" ",e[1].length+1+e[4].length):Mfe(i,e[1].length)+e[2]+"/"+e[3]+Ofe(o,e[4].length))}(a,l,c);if(t.match(/^#+0+$/))return c+Ffe(l,t.length-t.indexOf("0"));if(a=t.match(sme))return s=lme(n,a[1].length).replace(/^([^\.]+)$/,"$1."+ome(a[1])).replace(/\.$/,"."+ome(a[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+Hme("0",ome(a[1]).length-t.length)})),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+lme(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+eme(Ffe(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ume(e,t,-n):eme(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,a[1].length)))+"."+Ofe(cme(n,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return ume(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Dfe(ume(e,t.replace(/[\\-]/g,""),n)),i=0,Dfe(Dfe(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""})));if(t.match(ime))return"("+(s=ume(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Wfe(l,Math.pow(10,i)-1,!1),s=""+c," "==(u=pme("n",a[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),s+=u+a[2]+"/"+a[3],(u=Pfe(o[2],i)).length<a[4].length&&(u=ome(a[4].substr(a[4].length-u.length))+u),s+=u;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=Wfe(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Mfe(o[1],i)+a[2]+"/"+a[3]+Pfe(o[2],i):Hme(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=Ffe(n,0),t.length<=s.length?s:ome(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=t.indexOf(".")-i,d=t.length-s.length-h;return ome(t.substr(0,h)+s+t.substr(t.length-d))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=cme(n,a[1].length),n<0?"-"+ume(e,t,-n):eme(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?Ofe(0,3-e.length):"")+e}))+"."+Ofe(i,a[1].length);switch(t){case"###,##0.00":return ume(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var p=eme(Ffe(l,0));return"0"!==p?c+p:"";case"###,###.00":return ume(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return ume(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function hme(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+hme(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),!(n=(t/Math.pow(10,a)).toPrecision(r+1+(s+a)%s)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(s+a)%s)+"."+r.substr(a)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function dme(e,t,n){if(40===e.charCodeAt(0)&&!t.match(ame)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?dme("n",r,n):"("+dme("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return pme(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(tme,""),s=t.length-r.length;return pme(e,r,n*Math.pow(10,2*s))+Hme("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return hme(t,n);if(36===t.charCodeAt(0))return"$"+dme(e,t.substr(" "==t.charAt(1)?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Ofe(l,t.length);if(t.match(/^[#?]+$/))return s=""+n,0===n&&(s=""),s.length>t.length?s:ome(t.substr(0,t.length-s.length))+s;if(a=t.match(rme))return function(e,t,n){return n+(0===t?"":""+t)+Hme(" ",e[1].length+2+e[4].length)}(a,l,c);if(t.match(/^#+0+$/))return c+Ofe(l,t.length-t.indexOf("0"));if(a=t.match(sme))return s=(s=(""+n).replace(/^([^\.]+)$/,"$1."+ome(a[1])).replace(/\.$/,"."+ome(a[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+Hme("0",ome(a[1]).length-t.length)})),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+eme(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+dme(e,t,-n):eme(""+n)+"."+Hme("0",a[1].length);if(a=t.match(/^#,#*,#0/))return dme(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Dfe(dme(e,t.replace(/[\\-]/g,""),n)),i=0,Dfe(Dfe(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""})));if(t.match(ime))return"("+(s=dme(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Wfe(l,Math.pow(10,i)-1,!1),s=""+c," "==(u=pme("n",a[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),s+=u+a[2]+"/"+a[3],(u=Pfe(o[2],i)).length<a[4].length&&(u=ome(a[4].substr(a[4].length-u.length))+u),s+=u;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=Wfe(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Mfe(o[1],i)+a[2]+"/"+a[3]+Pfe(o[2],i):Hme(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+n,t.length<=s.length?s:ome(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=t.indexOf(".")-i,d=t.length-s.length-h;return ome(t.substr(0,h)+s+t.substr(t.length-d))}if(a=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+dme(e,t,-n):eme(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?Ofe(0,3-e.length):"")+e}))+"."+Ofe(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=eme(""+l);return"0"!==p?c+p:"";default:if(t.match(/\.[0#?]*$/))return dme(e,t.slice(0,t.lastIndexOf(".")),n)+ome(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function pme(e,t,n){return(0|n)===n?dme(e,t,n):ume(e,t,n)}var fme=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function mme(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":$fe(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(fme))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var gme=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function yme(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function vme(e,t){var n=function(e){for(var t=[],n=!1,r=0,s=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(s,r-s),s=r+1}if(t[t.length]=e.substr(s),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var a=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,a];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var i=n[0].match(gme),o=n[1].match(gme);return yme(t,i)?[r,n[0]]:yme(t,o)?[r,n[1]]:[r,n[null!=i&&null!=o?2:1]]}return[r,a]}function bme(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:Ufe)[e])&&(r=n.table&&n.table[Bfe[e]]||Ufe[Bfe[e]]),null==r&&(r=Vfe[e]||"General")}if($fe(r,0))return Jfe(t,n);t instanceof Date&&(t=Yfe(t,n.date1904));var s=vme(r,t);if($fe(s[1]))return Jfe(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var s,a,i,o=[],l="",c=0,u="",h="t",d="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!$fe(e,c))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var p=e.charAt(++c),f="("===p||")"===p?p:"t";o[o.length]={t:f,v:p},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==s&&null==(s=Hfe(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},h=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==s&&null==(s=Hfe(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===h.toLowerCase()&&(u="M"),"h"===u&&(u=d),o[o.length]={t:u,v:l},h=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==s&&(s=Hfe(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=s&&(m.v=s.H>=12?"P":"A"),m.t="T",d="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"PM":"AM"),m.t="T",c+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,d="h"):(m.t="t",++c),null==s&&"T"===m.t)return"";o[o.length]=m,h=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(fme)){if(null==s&&null==(s=Hfe(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},h=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",mme(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=s){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;o[o.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;o[o.length]={t:u,v:l},h=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:u,v:u},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"t",v:u},++c}var g,y=0,v=0;for(c=o.length-1,h="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=d,h="h",y<1&&(y=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(v=Math.max(v,g[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":h=o[c].t;break;case"m":"s"===h&&(o[c].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&o[c].v.match(/[Hh]/)&&(y=1),y<2&&o[c].v.match(/[Mm]/)&&(y=2),y<3&&o[c].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M),s.M>=60&&(s.M=0,++s.H);break;case 2:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M)}var b,w="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=Zfe(o[c].t.charCodeAt(0),o[c].v,s,v),o[c].t="t";break;case"n":case"?":for(b=c+1;null!=o[b]&&("?"===(u=o[b].t)||"D"===u||(" "===u||"t"===u)&&null!=o[b+1]&&("?"===o[b+1].t||"t"===o[b+1].t&&"/"===o[b+1].v)||"("===o[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===o[b].v||" "===o[b].v&&null!=o[b+1]&&"?"==o[b+1].t));)o[c].v+=o[b].v,o[b]={v:"",t:";"},++b;w+=o[c].v,c=b-1;break;case"G":o[c].t="t",o[c].v=Jfe(t,n)}var x,k,S="";if(w.length>0){40==w.charCodeAt(0)?(x=t<0&&45===w.charCodeAt(0)?-t:t,k=pme("n",w,x)):(k=pme("n",w,x=t<0&&r>1?-t:t),x<0&&o[0]&&"t"==o[0].t&&(k=k.substr(1),o[0].v="-"+o[0].v)),b=k.length-1;var T=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){T=c;break}var E=o.length;if(T===o.length&&-1===k.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(b>=o[c].v.length-1?(b-=o[c].v.length,o[c].v=k.substr(b+1,o[c].v.length)):b<0?o[c].v="":(o[c].v=k.substr(0,b+1),b=-1),o[c].t="t",E=c);b>=0&&E<o.length&&(o[E].v=k.substr(0,b+1)+o[E].v)}else if(T!==o.length&&-1===k.indexOf("E")){for(b=k.indexOf(".")-1,c=T;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(a=o[c].v.indexOf(".")>-1&&c===T?o[c].v.indexOf(".")-1:o[c].v.length-1,S=o[c].v.substr(a+1);a>=0;--a)b>=0&&("0"===o[c].v.charAt(a)||"#"===o[c].v.charAt(a))&&(S=k.charAt(b--)+S);o[c].v=S,o[c].t="t",E=c}for(b>=0&&E<o.length&&(o[E].v=k.substr(0,b+1)+o[E].v),b=k.indexOf(".")+1,c=T;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===T)){for(a=o[c].v.indexOf(".")>-1&&c===T?o[c].v.indexOf(".")+1:0,S=o[c].v.substr(0,a);a<o[c].v.length;++a)b<k.length&&(S+=k.charAt(b++));o[c].v=S,o[c].t="t",E=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(x=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=pme(o[c].t,o[c].v,x),o[c].t="t");var N="";for(c=0;c!==o.length;++c)null!=o[c]&&(N+=o[c].v);return N}(s[1],t,n,s[0])}function wme(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=Ufe[n]){if(Ufe[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return Ufe[t]=e,t}function xme(e){for(var t=0;392!=t;++t)void 0!==e[t]&&wme(e[t],t)}function kme(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',Ufe=e}var Sme=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Tme=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,s="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)s[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=s[t]=n>>>8^e[255&n];var a=[];for(r=1;16!=r;++r)a[r-1]="undefined"!==typeof Int32Array?s.subarray(256*r,256*r+256):s.slice(256*r,256*r+256);return a}(t),r=n[0],s=n[1],a=n[2],i=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14];return e.table=t,e.bstr=function(e,n){for(var r=~n,s=0,a=e.length;s<a;)r=r>>>8^t[255&(r^e.charCodeAt(s++))];return~r},e.buf=function(e,n){for(var v=~n,b=e.length-15,w=0;w<b;)v=y[e[w++]^255&v]^g[e[w++]^v>>8&255]^m[e[w++]^v>>16&255]^f[e[w++]^v>>>24]^p[e[w++]]^d[e[w++]]^h[e[w++]]^u[e[w++]]^c[e[w++]]^l[e[w++]]^o[e[w++]]^i[e[w++]]^a[e[w++]]^s[e[w++]]^r[e[w++]]^t[e[w++]];for(b+=15;w<b;)v=v>>>8^t[255&(v^e[w++])];return~v},e.str=function(e,n){for(var r=~n,s=0,a=e.length,i=0,o=0;s<a;)(i=e.charCodeAt(s++))<128?r=r>>>8^t[255&(r^i)]:i<2048?r=(r=r>>>8^t[255&(r^(192|i>>6&31))])>>>8^t[255&(r^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(s++),r=(r=(r=(r=r>>>8^t[255&(r^(240|i>>8&7))])>>>8^t[255&(r^(128|i>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|i>>12&15))])>>>8^t[255&(r^(128|i>>6&63))])>>>8^t[255&(r^(128|63&i))];return~r},e}(),Eme=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function s(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function a(e){wye(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),s=e.read_shift(2),a=e.l+s,i={};if(21589===r)1&(n=e.read_shift(1))&&(i.mtime=e.read_shift(4)),s>5&&(2&n&&(i.atime=e.read_shift(4)),4&n&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=a,t[r]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=k(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(kfe&&Buffer.isBuffer(e)?e.toString("binary"):k(e)).split("\r\n"),s=0,a="";for(s=0;s<r.length;++s)if(a=r[s],/^Content-Location:/i.test(a)&&(a=a.slice(a.indexOf("file")),n||(n=a.slice(0,a.lastIndexOf("/")+1)),a.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),a.slice(0,n.length)!=n););var i=(r[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};d(u);var h,p=0;for(s=0;s<r.length;++s){var f=r[s];f!==o&&f!==o+"--"||(p++&&ce(u,r.slice(h,s),n),h=s)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,s,a,i,o,p=512,f=[],m=e.slice(0,512);wye(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(v,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:p=512;break;case 4:p=4096;break;case 0:if(0==g[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==p&&wye(m=e.slice(0,p),28);var b=e.slice(0,p);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var w=m.read_shift(4,"i");if(3===n&&0!==w)throw new Error("# Directory Sectors: Expected 0 saw "+w);m.l+=4,a=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),i=m.read_shift(4,"i"),r=m.read_shift(4,"i"),o=m.read_shift(4,"i"),s=m.read_shift(4,"i");for(var x=-1,S=0;S<109&&!((x=m.read_shift(4,"i"))<0);++S)f[S]=x;var T=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],s=1;s<n;++s)r[s-1]=e.slice(s*t,(s+1)*t);return r[n-1]=e.slice(n*t),r}(e,p);c(o,s,T,p,f);var E=function(e,t,n,r){var s=e.length,a=[],i=[],o=[],l=[],c=r-1,u=0,h=0,d=0,p=0;for(u=0;u<s;++u)if(o=[],(d=u+t)>=s&&(d-=s),!i[d]){l=[];var f=[];for(h=d;h>=0;){f[h]=!0,i[h]=!0,o[o.length]=h,l.push(e[h]);var m=n[Math.floor(4*h/r)];if(r<4+(p=4*h&c))throw new Error("FAT boundary crossed: "+h+" 4 "+r);if(!e[m])break;if(f[h=dye(e[m],p)])break}a[d]={nodes:o,data:Uge([l])}}return a}(T,a,f,p);E[a].name="!Directory",r>0&&i!==y&&(E[i].name="!MiniFAT"),E[f[0]].name="!FAT",E.fat_addrs=f,E.ssz=p;var N=[],C=[],I=[];!function(e,t,n,r,s,a,i,o){for(var c,d=0,p=r.length?2:0,f=t[e].data,m=0,g=0;m<f.length;m+=128){var v=f.slice(m,m+128);wye(v,64),g=v.read_shift(2),c=Vge(v,0,g-p),r.push(c);var b={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(b.ct=h(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(b.mt=h(v,v.l-8)),b.start=v.read_shift(4,"i"),b.size=v.read_shift(4,"i"),b.size<0&&b.start<0&&(b.size=b.type=0,b.start=y,b.name=""),5===b.type?(d=b.start,s>0&&d!==y&&(t[d].name="!StreamData")):b.size>=4096?(b.storage="fat",void 0===t[b.start]&&(t[b.start]=u(n,b.start,t.fat_addrs,t.ssz)),t[b.start].name=b.name,b.content=t[b.start].data.slice(0,b.size)):(b.storage="minifat",b.size<0?b.size=0:d!==y&&b.start!==y&&t[d]&&(b.content=l(b,t[d].data,(t[o]||{}).data))),b.content&&wye(b.content,0),a[c]=b,i.push(b)}}(a,E,T,N,r,{},C,i),function(e,t,n){for(var r=0,s=0,a=0,i=0,o=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;o<u.length;++o)s=e[r=u[o]].L,a=e[r].R,i=e[r].C,c[r]===r&&(-1!==s&&c[s]!==s&&(c[r]=c[s]),-1!==a&&c[a]!==a&&(c[r]=c[a])),-1!==i&&(c[i]=r),-1!==s&&r!=c[r]&&(c[s]=c[r],u.lastIndexOf(s)<o&&u.push(s)),-1!==a&&r!=c[r]&&(c[a]=c[r],u.lastIndexOf(a)<o&&u.push(a));for(r=1;r<l;++r)c[r]===r&&(-1!==a&&c[a]!==a?c[r]=c[a]:-1!==s&&c[s]!==s&&(c[r]=c[s]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(C,I,N),N.shift();var _={FileIndex:C,FullPaths:I};return t&&t.raw&&(_.raw={header:b,sectors:T}),_}function l(e,t,n){for(var r=e.start,s=e.size,a=[],i=r;n&&s>0&&i>=0;)a.push(t.slice(i*g,i*g+g)),s-=g,i=dye(n,4*i);return 0===a.length?kye(0):_fe(a).slice(0,e.size)}function c(e,t,n,r,s){var a=y;if(e===y){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=n[e],o=(r>>>2)-1;if(!i)return;for(var l=0;l<o&&(a=dye(i,4*l))!==y;++l)s.push(a);c(dye(i,r-4),t-1,n,r,s)}}function u(e,t,n,r,s){var a=[],i=[];s||(s=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){s[l]=!0,a[a.length]=l,i.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=dye(e[u],c)}return{nodes:a,data:Uge([i])}}function h(e,t){return new Date(1e3*(hye(e,t+4)/1e7*Math.pow(2,32)+hye(e,t)/1e7-11644473600))}function d(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(Eme.find(e,"/"+t))return;var n=kye(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),p(e)}(e)}function p(e,t){d(e);for(var s=!1,a=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:a?s=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(o.R*o.L*o.C)&&(s=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(s=!0);break;default:s=!0}}if(s||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},h=[];for(i=0;i<e.FullPaths.length;++i)u[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&h.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<h.length;++i){var p=n(h[i][0]);(a=u[p])||(h.push([p,{name:r(p).replace("/",""),type:1,clsid:w,ct:l,mt:l,content:null}]),u[p]=!0)}for(h.sort((function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),s=0,a=0,i=Math.min(n.length,r.length);s<i;++s){if(a=n[s].length-r[s].length)return a;if(n[s]!=r[s])return n[s]<r[s]?-1:1}return n.length-r.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],i=0;i<h.length;++i)e.FullPaths[i]=h[i][0],e.FileIndex[i]=h[i][1];for(i=0;i<h.length;++i){var f=e.FileIndex[i],m=e.FullPaths[i];if(f.name=r(m).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||w,0===i)f.C=h.length>1?1:-1,f.size=0,f.type=5;else if("/"==m.slice(-1)){for(c=i+1;c<h.length&&n(e.FullPaths[c])!=m;++c);for(f.C=c>=h.length?-1:c,c=i+1;c<h.length&&n(e.FullPaths[c])!=n(m);++c);f.R=c>=h.length?-1:c,f.type=1}else n(e.FullPaths[i+1]||"")==n(m)&&(f.R=i+1),f.type=2}}}function f(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",s=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],a=e.FullPaths[0],i=a,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(a.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=o.content,u=kfe&&Buffer.isBuffer(c)?c.toString("binary"):k(c),h=0,d=Math.min(1024,u.length),p=0,f=0;f<=d;++f)(p=u.charCodeAt(f))>=32&&p<128&&++h;var m=h>=4*d/5;s.push(r),s.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+i),s.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),s.push("Content-Type: "+ie(o,i)),s.push(""),s.push(m?le(u):oe(u))}return s.push(r+"--\r\n"),s.join("\r\n")}(e,n);if(p(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],a=[],i=kye(1),o=n.compression?8:0,l=0;0;var c=0,u=0,h=0,d=0,p=e.FullPaths[0],f=p,m=e.FileIndex[0],g=[],y=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(p.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=f){var v=h,b=kye(f.length);for(u=0;u<f.length;++u)b.write_shift(1,127&f.charCodeAt(u));b=b.slice(0,b.l),g[d]=Tme.buf(m.content,0);var w=m.content;8==o&&(w=S(w)),(i=kye(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),m.mt?s(i,m.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:g[d]),i.write_shift(4,8&l?0:w.length),i.write_shift(4,8&l?0:m.content.length),i.write_shift(2,b.length),i.write_shift(2,0),h+=i.length,r.push(i),h+=b.length,r.push(b),h+=w.length,r.push(w),8&l&&((i=kye(12)).write_shift(-4,g[d]),i.write_shift(4,w.length),i.write_shift(4,m.content.length),h+=i.l,r.push(i)),(i=kye(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,g[d]),i.write_shift(4,w.length),i.write_shift(4,m.content.length),i.write_shift(2,b.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,v),y+=i.l,a.push(i),y+=b.length,a.push(b),++d}return i=kye(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,d),i.write_shift(2,d),i.write_shift(4,y),i.write_shift(4,h),i.write_shift(2,0),_fe([_fe(r),_fe(a),i])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var s=e.FileIndex[r];if(s.content){var a=s.content.length;a>0&&(a<4096?t+=a+63>>6:n+=a+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+i+o,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var h=[1,u,c,o,i,n,t,0];return e.FileIndex[0].size=t<<6,h[7]=(e.FileIndex[0].start=h[0]+h[1]+h[2]+h[3]+h[4]+h[5])+(h[6]+7>>3),h}(e),a=kye(r[7]<<9),i=0,o=0;for(i=0;i<8;++i)a.write_shift(1,b[i]);for(i=0;i<8;++i)a.write_shift(2,0);for(a.write_shift(2,62),a.write_shift(2,3),a.write_shift(2,65534),a.write_shift(2,9),a.write_shift(2,6),i=0;i<3;++i)a.write_shift(2,0);for(a.write_shift(4,0),a.write_shift(4,r[2]),a.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),a.write_shift(4,0),a.write_shift(4,4096),a.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:y),a.write_shift(4,r[3]),a.write_shift(-4,r[1]?r[0]-1:y),a.write_shift(4,r[1]),i=0;i<109;++i)a.write_shift(-4,i<r[2]?r[1]+i:-1);if(r[1])for(o=0;o<r[1];++o){for(;i<236+127*o;++i)a.write_shift(-4,i<r[2]?r[1]+i:-1);a.write_shift(-4,o===r[1]-1?y:o+1)}var l=function(e){for(o+=e;i<o-1;++i)a.write_shift(-4,i+1);e&&(++i,a.write_shift(-4,y))};for(o=i=0,o+=r[1];i<o;++i)a.write_shift(-4,x.DIFSECT);for(o+=r[2];i<o;++i)a.write_shift(-4,x.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,h=e.FileIndex[0];c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&((u=h.content.length)<4096||(h.start=o,l(u+511>>9)));for(l(r[6]+7>>3);511&a.l;)a.write_shift(-4,x.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&(!(u=h.content.length)||u>=4096||(h.start=o,l(u+63>>6)));for(;511&a.l;)a.write_shift(-4,x.ENDOFCHAIN);for(i=0;i<r[4]<<2;++i){var d=e.FullPaths[i];if(d&&0!==d.length){h=e.FileIndex[i],0===i&&(h.start=h.size?h.start-1:y);var f=0===i&&n.root||h.name;if(u=2*(f.length+1),a.write_shift(64,f,"utf16le"),a.write_shift(2,u),a.write_shift(1,h.type),a.write_shift(1,h.color),a.write_shift(-4,h.L),a.write_shift(-4,h.R),a.write_shift(-4,h.C),h.clsid)a.write_shift(16,h.clsid,"hex");else for(c=0;c<4;++c)a.write_shift(4,0);a.write_shift(4,h.state||0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,h.start),a.write_shift(4,h.size),a.write_shift(4,0)}else{for(c=0;c<17;++c)a.write_shift(4,0);for(c=0;c<3;++c)a.write_shift(4,-1);for(c=0;c<12;++c)a.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((h=e.FileIndex[i]).size>=4096)if(a.l=h.start+1<<9,kfe&&Buffer.isBuffer(h.content))h.content.copy(a,a.l,0,h.size),a.l+=h.size+511&-512;else{for(c=0;c<h.size;++c)a.write_shift(1,h.content[c]);for(;511&c;++c)a.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((h=e.FileIndex[i]).size>0&&h.size<4096)if(kfe&&Buffer.isBuffer(h.content))h.content.copy(a,a.l,0,h.size),a.l+=h.size+63&-64;else{for(c=0;c<h.size;++c)a.write_shift(1,h.content[c]);for(;63&c;++c)a.write_shift(1,0)}if(kfe)a.l=a.length;else for(;a.l<a.length;)a.write_shift(1,0);return a}t.version="1.2.1";var m,g=64,y=-2,v="d0cf11e0a1b11ae1",b=[208,207,17,224,161,177,26,225],w="00000000000000000000000000000000",x={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:y,FREESECT:-1,HEADER_SIGNATURE:v,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:w,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function k(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function S(e){return m?m.deflateRawSync(e):K(e)}var T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function C(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var I="undefined"!==typeof Uint8Array,_=I?new Uint8Array(256):[],A=0;A<256;++A)_[A]=C(A);function R(e,t){var n=_[255&e];return t<=8?n>>>8-t:(n=n<<8|_[e>>8&255],t<=16?n>>>16-t:(n=n<<8|_[e>>16&255])>>>24-t)}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function M(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function P(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function L(e,t,n){var r=7&t,s=t>>>3,a=(1<<n)-1,i=e[s]>>>r;return n<8-r?i&a:(i|=e[s+1]<<8-r,n<16-r?i&a:(i|=e[s+2]<<16-r,n<24-r?i&a:(i|=e[s+3]<<24-r)&a))}function F(e,t,n){var r=7&t,s=t>>>3;return r<=5?e[s]|=(7&n)<<r:(e[s]|=n<<r&255,e[s+1]=(7&n)>>8-r),t+3}function $(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function z(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function j(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function U(e,t){var n=e.length,r=2*n>t?2*n:t+5,s=0;if(n>=t)return e;if(kfe){var a=Efe(r);if(e.copy)e.copy(a);else for(;s<e.length;++s)a[s]=e[s];return a}if(I){var i=new Uint8Array(r);if(i.set)i.set(e);else for(;s<n;++s)i[s]=e[s];return i}return e.length=r,e}function B(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function V(e,t,n){var r=1,s=0,a=0,i=0,o=0,l=e.length,c=I?new Uint16Array(32):B(32);for(a=0;a<32;++a)c[a]=0;for(a=l;a<n;++a)e[a]=0;l=e.length;var u=I?new Uint16Array(l):B(l);for(a=0;a<l;++a)c[s=e[a]]++,r<s&&(r=s),u[a]=0;for(c[0]=0,a=1;a<=r;++a)c[a+16]=o=o+c[a-1]<<1;for(a=0;a<l;++a)0!=(o=e[a])&&(u[a]=c[o+16]++);var h=0;for(a=0;a<l;++a)if(0!=(h=e[a]))for(o=R(u[a],r)>>r-h,i=(1<<r+4-h)-1;i>=0;--i)t[o|i<<h]=15&h|a<<4;return r}var W=I?new Uint16Array(512):B(512),H=I?new Uint16Array(32):B(32);if(!I){for(var G=0;G<512;++G)W[G]=0;for(G=0;G<32;++G)H[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);V(e,H,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);V(n,W,288)}();var q=function(){for(var e=I?new Uint8Array(32768):[],t=0,n=0;t<N.length-1;++t)for(;n<N[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=I?new Uint8Array(259):[];for(t=0,n=0;t<E.length-1;++t)for(;n<E[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),s=n+r==e.length;for(t.write_shift(1,+s),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var s=0,a=0,i=I?new Uint16Array(32768):[];a<t.length;){var o=Math.min(65535,t.length-a);if(o<10){for(7&(s=F(n,s,+!(a+o!=t.length)))&&(s+=8-(7&s)),n.l=s/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[a++];s=8*n.l}else{s=F(n,s,+!(a+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[a],u=-1,h=0;if((u=i[l=32767&(l<<5^c)])&&((u|=-32768&a)>a&&(u-=32768),u<a))for(;t[u+h]==t[a+h]&&h<250;)++h;if(h>2){(c=r[h])<=22?s=z(n,s,_[c+1]>>1)-1:(z(n,s,3),z(n,s+=5,_[c-23]>>5),s+=3);var d=c<8?0:c-4>>2;d>0&&(j(n,s,h-E[c]),s+=d),c=e[a-u],s=z(n,s,_[c]>>3),s-=3;var p=c<4?0:c-2>>1;p>0&&(j(n,s,a-u-N[c]),s+=p);for(var f=0;f<h;++f)i[l]=32767&a,l=32767&(l<<5^t[a]),++a;o-=h-1}else c<=143?c+=48:s=$(n,s,1),s=z(n,s,_[c]),i[l]=32767&a,++a}s=z(n,s,0)-1}}return n.l=(s+7)/8|0,n.l}(t,n)}}();function K(e){var t=kye(50+Math.floor(1.1*e.length)),n=q(e,t);return t.slice(0,n)}var Y=I?new Uint16Array(32768):B(32768),X=I?new Uint16Array(32768):B(32768),Q=I?new Uint16Array(128):B(128),J=1,Z=1;function ee(e,t){var n=M(e,t)+257,r=M(e,t+=5)+1,s=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var a=0,i=I?new Uint8Array(19):B(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=I?new Uint8Array(8):B(8),u=I?new Uint8Array(8):B(8),h=i.length,d=0;d<s;++d)i[T[d]]=a=O(e,t),l<a&&(l=a),c[a]++,t+=3;var p=0;for(c[0]=0,d=1;d<=l;++d)u[d]=p=p+c[d-1]<<1;for(d=0;d<h;++d)0!=(p=i[d])&&(o[d]=u[p]++);var f=0;for(d=0;d<h;++d)if(0!=(f=i[d])){p=_[o[d]]>>8-f;for(var m=(1<<7-f)-1;m>=0;--m)Q[p|m<<f]=7&f|d<<3}var g=[];for(l=1;g.length<n+r;)switch(t+=7&(p=Q[P(e,t)]),p>>>=3){case 16:for(a=3+D(e,t),t+=2,p=g[g.length-1];a-- >0;)g.push(p);break;case 17:for(a=3+O(e,t),t+=3;a-- >0;)g.push(0);break;case 18:for(a=11+P(e,t),t+=7;a-- >0;)g.push(0);break;default:g.push(p),l<p&&(l=p)}var y=g.slice(0,n),v=g.slice(n);for(d=n;d<286;++d)y[d]=0;for(d=r;d<30;++d)v[d]=0;return J=V(y,Y,286),Z=V(v,X,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[Tfe(t),2];for(var n=0,r=0,s=Efe(t||1<<18),a=0,i=s.length>>>0,o=0,l=0;0==(1&r);)if(r=O(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=J,l=Z);;){!t&&i<a+32767&&(i=(s=U(s,a+32767)).length);var c=L(e,n,o),u=r>>>1==1?W[c]:Y[c];if(n+=15&u,0===((u>>>=4)>>>8&255))s[a++]=u;else{if(256==u)break;var h=(u-=257)<8?0:u-4>>2;h>5&&(h=0);var d=a+E[u];h>0&&(d+=L(e,n,h),n+=h),c=L(e,n,l),n+=15&(u=r>>>1==1?H[c]:X[c]);var p=(u>>>=4)<4?0:u-2>>1,f=N[u];for(p>0&&(f+=L(e,n,p),n+=p),!t&&i<d&&(i=(s=U(s,d+100)).length);a<d;)s[a]=s[a-f],++a}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[1+(n>>>3)]<<8;if(n+=32,m>0)for(!t&&i<a+m&&(i=(s=U(s,a+m)).length);m-- >0;)s[a++]=e[n>>>3],n+=8}return t?[s,n+7>>>3]:[s.slice(0,a),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;wye(n,0);var r={FileIndex:[],FullPaths:[]};d(r,{root:t.root});for(var s=n.length-4;(80!=n[s]||75!=n[s+1]||5!=n[s+2]||6!=n[s+3])&&s>=0;)--s;n.l=s+4,n.l+=4;var i=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,s=0;s<i;++s){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),h=n.read_shift(2),p=n.read_shift(2);n.l+=8;var f=n.read_shift(4),m=a(n.slice(n.l+u,n.l+u+h));n.l+=u+h+p;var g=n.l;n.l=f+4,se(n,l,c,r,m),n.l=g}return r}function se(e,t,n,r,s){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,s=31&n,a=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(a-1),r.setDate(s);var i=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(i<<1),r}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),h=e.read_shift(2),d=e.read_shift(2),p="",f=0;f<h;++f)p+=String.fromCharCode(e[e.l++]);if(d){var g=a(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(l=g[21589].mt),((s||{})[21589]||{}).mt&&(l=s[21589].mt)}e.l+=d;var y=e.slice(e.l,e.l+c);switch(o){case 8:y=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var v=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),v=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(v,"Bad compressed size: "+t+" != "+c),u!=n&&ne(v,"Bad uncompressed size: "+n+" != "+u),ue(r,p,y,{unsafe:!0,mt:l})}var ae={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&ae[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&ae[r[1]]?ae[r[1]]:"application/octet-stream"}function oe(e){for(var t=wfe(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),s=0;s<r.length;++s){var a=r[s];if(0!=a.length)for(var i=0;i<a.length;){var o=76,l=a.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=a.slice(i,i+o),(i+=o)<a.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,s="",a="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":s=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":a=c[2].trim()}}switch(++o,a.toLowerCase()){case"base64":r=Nfe(xfe(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var s=0;s<t.length;++s)t[s]=t[s].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return Nfe(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+a)}var u=ue(e,s.slice(n.length),r,{unsafe:!0});i&&(u.ctype=i)}function ue(e,t,n,s){var a=s&&s.unsafe;a||d(e);var i=!a&&Eme.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:r(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),a||Eme.utils.cfb_gc(e)}return i.content=n,i.size=n?n.length:0,s&&(s.CLSID&&(i.clsid=s.CLSID),s.mt&&(i.mt=s.mt),s.ct&&(i.ct=s.ct)),i}return t.find=function(e,t){var n=e.FullPaths.map((function(e){return e.toUpperCase()})),r=n.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),s=!1;47===t.charCodeAt(0)?(s=!0,t=n[0].slice(0,-1)+t):s=-1!==t.indexOf("/");var a=t.toUpperCase(),i=!0===s?n.indexOf(a):r.indexOf(a);if(-1!==i)return e.FileIndex[i];var o=!a.match(Rfe);for(a=a.replace(Afe,""),o&&(a=a.replace(Rfe,"!")),i=0;i<n.length;++i){if((o?n[i].replace(Rfe,"!"):n[i]).replace(Afe,"")==a)return e.FileIndex[i];if((o?r[i].replace(Rfe,"!"):r[i]).replace(Afe,"")==a)return e.FileIndex[i]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||kfe&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return i(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(Nfe(xfe(t)),n);case"binary":return o(Nfe(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=f(t,n);switch(n&&n.type||"buffer"){case"file":return i(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:k(r);case"base64":return wfe("string"==typeof r?r:k(r));case"buffer":if(kfe)return Buffer.isBuffer(r)?r:Sfe(r);case"array":return"string"==typeof r?Nfe(r):r}return r},t.writeFile=function(t,n,r){i();var s=f(t,r);e.writeFileSync(n,s)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:ue,cfb_del:function(e,t){d(e);var n=Eme.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){d(e);var s=Eme.find(e,t);if(s)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==s)return e.FileIndex[a].name=r(n),e.FullPaths[a]=n,!0;return!1},cfb_gc:function(e){p(e,!0)},ReadShift:fye,CheckField:bye,prep_blob:wye,bconcat:_fe,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(jEe){console.error("cannot use native zlib: "+(jEe.message||jEe))}},_deflateRaw:K,_inflateRaw:te,consts:x},t}();let Nme;function Cme(e){return"string"===typeof e?Cfe(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function Ime(e,t,n){if("undefined"!==typeof Nme&&Nme.writeFileSync)return n?Nme.writeFileSync(e,t,n):Nme.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=Cfe(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?dge(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var s=new Blob([Cme(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if("undefined"!==typeof saveAs)return saveAs(s,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(a)}),6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(a)}),6e4),a}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Ife(t)),o.write(t),o.close(),t}catch(jEe){if(!jEe.message||!jEe.message.match(/onstruct/))throw jEe}throw new Error("cannot save file "+e)}function _me(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function Ame(e,t){for(var n=[],r=_me(e),s=0;s!==r.length;++s)null==n[e[r[s]][t]]&&(n[e[r[s]][t]]=r[s]);return n}function Rme(e){for(var t=[],n=_me(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function Dme(e){for(var t=[],n=_me(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var Ome=new Date(1899,11,30,0,0,0);function Mme(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(Ome.getTime()+6e4*(e.getTimezoneOffset()-Ome.getTimezoneOffset())))/864e5}var Pme=new Date,Lme=Ome.getTime()+6e4*(Pme.getTimezoneOffset()-Ome.getTimezoneOffset()),Fme=Pme.getTimezoneOffset();function $me(e){var t=new Date;return t.setTime(24*e*60*60*1e3+Lme),t.getTimezoneOffset()!==Fme&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Fme)),t}var zme=new Date("2017-02-19T19:06:09.000Z"),jme=isNaN(zme.getFullYear())?new Date("2/19/17"):zme,Ume=2017==jme.getFullYear();function Bme(e,t){var n=new Date(e);if(Ume)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==jme.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)),a}function Vme(e,t){if(kfe&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return dge(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return dge(mfe(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return dge(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return dge(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return n[e]||e}))}catch(jEe){}for(var r=[],s=0;s!=e.length;++s)r.push(String.fromCharCode(e[s]));return r.join("")}function Wme(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Wme(e[n]));return t}function Hme(e,t){for(var n="";n.length<t;)n+=e;return n}function Gme(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return n*=100,""}));return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,(function(e,t){return n=-n,t})),isNaN(t=Number(r))?t:t/n):t/n}var qme=["january","february","march","april","may","june","july","august","september","october","november","december"];function Kme(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return n;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==qme.indexOf(i))return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function Yme(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=kfe?Sfe(n):function(e){for(var t=[],n=0,r=e.length+250,s=Tfe(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++a);s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(3&i)<<4,s[n++]=128|63&o}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|63&i;n>r&&(t.push(s.slice(0,n)),n=0,s=Tfe(65535),r=65530)}return t.push(s.slice(0,n)),_fe(t)}(n),Eme.utils.cfb_add(e,t,r);Eme.utils.cfb_add(e,t,n)}else e.file(t,n)}function Xme(){return Eme.utils.cfb_new()}var Qme='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var Jme={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Zme=Rme(Jme),ege=/[&<>'"]/g,tge=/[\u0000-\u0008\u000b-\u001f]/g;function nge(e){return(e+"").replace(ege,(function(e){return Zme[e]})).replace(tge,(function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function rge(e){return nge(e).replace(/ /g,"_x0020_")}var sge=/[\u0000-\u001f]/g;function age(e){return(e+"").replace(ege,(function(e){return Zme[e]})).replace(/\n/g,"<br/>").replace(sge,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}function ige(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function oge(e){for(var t="",n=0,r=0,s=0,a=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(s=e.charCodeAt(n++),r>191&&r<224?(i=(31&r)<<6,i|=63&s,t+=String.fromCharCode(i)):(a=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a):(o=((7&r)<<18|(63&s)<<12|(63&a)<<6|63&(i=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function lge(e){var t,n,r,s=Tfe(2*e.length),a=1,i=0,o=0;for(n=0;n<e.length;n+=a)a=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),a=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),a=3):(a=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(s[i++]=255&o,s[i++]=o>>>8,o=0),s[i++]=t%256,s[i++]=t>>>8;return s.slice(0,i).toString("ucs2")}function cge(e){return Sfe(e,"binary").toString("utf8")}var uge="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",hge=kfe&&(cge(uge)==oge(uge)&&cge||lge(uge)==oge(uge)&&lge)||oge,dge=kfe?function(e){return Sfe(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,s=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,s=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},pge=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var fge=/(^\s|\s$|\n)/;function mge(e,t){return"<"+e+(t.match(fge)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function gge(e){return _me(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function yge(e,t,n){return"<"+e+(null!=n?gge(n):"")+(null!=t?(t.match(fge)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function vge(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(jEe){if(t)throw jEe}return""}var bge="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",wge="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",xge="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",kge="http://schemas.openxmlformats.org/package/2006/content-types",Sge="http://schemas.openxmlformats.org/package/2006/relationships",Tge="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Ege="http://purl.org/dc/elements/1.1/",Nge="http://purl.org/dc/terms/",Cge="http://purl.org/dc/dcmitype/",Ige="http://schemas.openxmlformats.org/officeDocument/2006/relationships",_ge="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",Age="http://www.w3.org/2001/XMLSchema-instance",Rge="http://www.w3.org/2001/XMLSchema",Dge=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Oge="urn:schemas-microsoft-com:office:office",Mge="urn:schemas-microsoft-com:office:excel",Pge="urn:schemas-microsoft-com:office:spreadsheet",Lge="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Fge="http://macVmlSchemaUri",$ge="urn:schemas-microsoft-com:vml",zge="http://www.w3.org/TR/REC-html40";var jge=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,s=e[0][n].length;r<s;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},Uge=kfe?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:Sfe(e)}))):jge(e)}:jge,Bge=function(e,t,n){for(var r=[],s=t;s<n;s+=2)r.push(String.fromCharCode(cye(e,s)));return r.join("").replace(Afe,"")},Vge=kfe?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(Afe,""):Bge(e,t,n)}:Bge,Wge=function(e,t,n){for(var r=[],s=t;s<t+n;++s)r.push(("0"+e[s].toString(16)).slice(-2));return r.join("")},Hge=kfe?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):Wge(e,t,n)}:Wge,Gge=function(e,t,n){for(var r=[],s=t;s<n;s++)r.push(String.fromCharCode(lye(e,s)));return r.join("")},qge=kfe?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):Gge(e,t,n)}:Gge,Kge=function(e,t){var n=hye(e,t);return n>0?qge(e,t+4,t+4+n-1):""},Yge=Kge,Xge=function(e,t){var n=hye(e,t);return n>0?qge(e,t+4,t+4+n-1):""},Qge=Xge,Jge=function(e,t){var n=2*hye(e,t);return n>0?qge(e,t+4,t+4+n-1):""},Zge=Jge,eye=function(e,t){var n=hye(e,t);return n>0?Vge(e,t+4,t+4+n):""},tye=eye,nye=function(e,t){var n=hye(e,t);return n>0?qge(e,t+4,t+4+n):""},rye=nye,sye=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),s=15&e[t+6],a=5;a>=0;--a)s=256*s+e[t+a];return 2047==r?0==s?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}(e,t)},aye=sye,iye=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function oye(){Vge=function(e,t,n){return gfe.utils.decode(1200,e.slice(t,n)).replace(Afe,"")},qge=function(e,t,n){return gfe.utils.decode(65001,e.slice(t,n))},Yge=function(e,t){var n=hye(e,t);return n>0?gfe.utils.decode(cfe,e.slice(t+4,t+4+n-1)):""},Qge=function(e,t){var n=hye(e,t);return n>0?gfe.utils.decode(lfe,e.slice(t+4,t+4+n-1)):""},Zge=function(e,t){var n=2*hye(e,t);return n>0?gfe.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},tye=function(e,t){var n=hye(e,t);return n>0?gfe.utils.decode(1200,e.slice(t+4,t+4+n)):""},rye=function(e,t){var n=hye(e,t);return n>0?gfe.utils.decode(65001,e.slice(t+4,t+4+n)):""}}kfe&&(Yge=function(e,t){if(!Buffer.isBuffer(e))return Kge(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Qge=function(e,t){if(!Buffer.isBuffer(e))return Xge(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Zge=function(e,t){if(!Buffer.isBuffer(e))return Jge(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},tye=function(e,t){if(!Buffer.isBuffer(e))return eye(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},rye=function(e,t){if(!Buffer.isBuffer(e))return nye(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},aye=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):sye(e,t)},iye=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof gfe&&oye();var lye=function(e,t){return e[t]},cye=function(e,t){return 256*e[t+1]+e[t]},uye=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},hye=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},dye=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},pye=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function fye(e,t){var n,r,s,a,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,kfe&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(cye(this,o)),o+=2;e*=2;break;case"utf8":l=qge(this,this.l,this.l+e);break;case"utf16le":e*=2,l=Vge(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof gfe)return fye.call(this,e,"dbcs");l=gfe.utils.decode(lfe,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=Yge(this,this.l),e=4+hye(this,this.l);break;case"lpstr-cp":l=Qge(this,this.l),e=4+hye(this,this.l);break;case"lpwstr":l=Zge(this,this.l),e=4+2*hye(this,this.l);break;case"lpp4":e=4+hye(this,this.l),l=tye(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+hye(this,this.l),l=rye(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(s=lye(this,this.l+e++));)c.push(yfe(s));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(s=cye(this,this.l+e));)c.push(yfe(s)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return s=lye(this,o),this.l=o+1,a=fye.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(yfe(cye(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof gfe){l=gfe.utils.decode(lfe,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return s=lye(this,o),this.l=o+1,a=fye.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(yfe(lye(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=lye(this,this.l),this.l++,n;case 2:return n=("i"===t?uye:cye)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?dye:pye)(this,this.l),this.l+=4,n):(r=hye(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?aye(this,this.l):aye([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=Hge(this,this.l,e)}}return this.l+=e,l}var mye=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},gye=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},yye=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function vye(e,t,n){var r=0,s=0;if("dbcs"===n){for(s=0;s!=t.length;++s)yye(this,t.charCodeAt(s),this.l+2*s);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof gfe&&874==cfe)for(s=0;s!=t.length;++s){var a=gfe.utils.encode(cfe,t.charAt(s));this[this.l+s]=a[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);r=t.length}else{if("hex"===n){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===n){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,mye(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=r?-t:t;isFinite(i)?0==i?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[n+o]=255&a;e[n+6]=(15&s)<<4|15&a,e[n+7]=s>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,gye(this,t,this.l)}}return this.l+=r,this}function bye(e,t){var n=Hge(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function wye(e,t){e.l=t,e.read_shift=fye,e.chk=bye,e.write_shift=vye}function xye(e,t){e.l+=t}function kye(e){var t=Tfe(e);return wye(t,0),t}function Sye(){var e=[],t=kfe?256:2048,n=function(e){var t=kye(e);return wye(t,0),t},r=n(t),s=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},a=function(e){return r&&e<r.length-r.l?r:(s(),r=n(Math.max(e+1,t)))};return{next:a,push:function(e){s(),null==(r=e).l&&(r.l=r.length),a(t)},end:function(){return s(),_fe(e)},_bufs:e}}function Tye(e,t,n,r){var s,a=+t;if(!isNaN(a)){r||(r=Lxe[a].p||(n||[]).length||0),s=1+(a>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,128+(127&a)),i.write_shift(1,a>>7));for(var o=0;4!=o;++o){if(!(r>=128)){i.write_shift(1,r);break}i.write_shift(1,128+(127&r)),r>>=7}r>0&&iye(n)&&e.push(n)}}function Eye(e,t,n){var r=Wme(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Nye(e,t,n){var r=Wme(e);return r.s=Eye(r.s,t.s,n),r.e=Eye(r.e,t.s,n),r}function Cye(e,t){if(e.cRel&&e.c<0)for(e=Wme(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Wme(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Mye(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function Iye(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?Cye(e.s,t.biff)+":"+Cye(e.e,t.biff):(e.s.rRel?"":"$")+Aye(e.s.r)+":"+(e.e.rRel?"":"$")+Aye(e.e.r):(e.s.cRel?"":"$")+Dye(e.s.c)+":"+(e.e.cRel?"":"$")+Dye(e.e.c)}function _ye(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function Aye(e){return""+(e+1)}function Rye(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function Dye(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Oye(e){for(var t=0,n=0,r=0;r<e.length;++r){var s=e.charCodeAt(r);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:t-1}}function Mye(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function Pye(e){var t=e.indexOf(":");return-1==t?{s:Oye(e),e:Oye(e)}:{s:Oye(e.slice(0,t)),e:Oye(e.slice(t+1))}}function Lye(e,t){return"undefined"===typeof t||"number"===typeof t?Lye(e.s,e.e):("string"!==typeof e&&(e=Mye(e)),"string"!==typeof t&&(t=Mye(t)),e==t?e:e+":"+t)}function Fye(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=e.length;for(n=0;r<a&&!((s=e.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(t.s.c=--n,n=0;r<a&&!((s=e.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(t.s.r=--n,r===a||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=a&&!((s=e.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(t.e.c=--n,n=0;r!=a&&!((s=e.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return t.e.r=--n,t}function $ye(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=bme(e.z,n?Mme(t):t)}catch(jEe){}try{return e.w=bme((e.XF||{}).numFmtId||(n?14:0),n?Mme(t):t)}catch(jEe){return""+t}}function zye(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?wve[e.v]||e.v:$ye(e,void 0==t?e.v:t))}function jye(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function Uye(e,t,n){var r=n||{},s=e?Array.isArray(e):r.dense;var a=e||(s?[]:{}),i=0,o=0;if(a&&null!=r.origin){if("number"==typeof r.origin)i=r.origin;else{var l="string"==typeof r.origin?Oye(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var u=Fye(a["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==i&&(c.e.r=i=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[h].length;++d)if("undefined"!==typeof t[h][d]){var p={v:t[h][d]},f=i+h,m=o+d;if(c.s.r>f&&(c.s.r=f),c.s.c>m&&(c.s.c=m),c.e.r<f&&(c.e.r=f),c.e.c<m&&(c.e.c=m),!t[h][d]||"object"!==typeof t[h][d]||Array.isArray(t[h][d])||t[h][d]instanceof Date)if(Array.isArray(p.v)&&(p.f=t[h][d][1],p.v=p.v[0]),null===p.v)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else{if(!r.sheetStubs)continue;p.t="z"}else"number"===typeof p.v?p.t="n":"boolean"===typeof p.v?p.t="b":p.v instanceof Date?(p.z=r.dateNF||Ufe[14],r.cellDates?(p.t="d",p.w=bme(p.z,Mme(p.v))):(p.t="n",p.v=Mme(p.v),p.w=bme(p.z,p.v))):p.t="s";else p=t[h][d];if(s)a[f]||(a[f]=[]),a[f][m]&&a[f][m].z&&(p.z=a[f][m].z),a[f][m]=p;else{var g=Mye({c:m,r:f});a[g]&&a[g].z&&(p.z=a[g].z),a[g]=p}}}return c.s.c<1e7&&(a["!ref"]=Lye(c)),a}function Bye(e,t){return Uye(null,e,t)}function Vye(e,t){return t||(t=kye(4)),t.write_shift(4,e),t}function Wye(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Hye(e,t){var n=!1;return null==t&&(n=!0,t=kye(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function Gye(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function qye(e,t){var n=e.l,r=e.read_shift(1),s=Wye(e),a=[],i={t:s,h:s};if(0!==(1&r)){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(Gye(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=n+t,i}var Kye=qye;function Yye(e,t){var n=!1;return null==t&&(n=!0,t=kye(23+4*e.t.length)),t.write_shift(1,1),Hye(e.t,t),t.write_shift(4,1),function(e,t){t||(t=kye(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function Xye(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Qye(e,t){return null==t&&(t=kye(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Jye(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Zye(e,t){return null==t&&(t=kye(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var eve=Wye,tve=Hye;function nve(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function rve(e,t){var n=!1;return null==t&&(n=!0,t=kye(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var sve=Wye,ave=nve,ive=rve;function ove(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var s=0===r?aye([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):dye(t,0)>>2;return n?s/100:s}function lve(e,t){null==t&&(t=kye(4));var n=0,r=0,s=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:s==(0|s)&&s>=-(1<<29)&&s<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?s:e)<<2)+(n+2))}function cve(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var uve=cve,hve=function(e,t){return t||(t=kye(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function dve(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function pve(e,t){return(t||kye(8)).write_shift(8,e,"f")}function fve(e,t){if(t||(t=kye(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var mve=80,gve={1:{n:"CodePage",t:2},2:{n:"Category",t:mve},3:{n:"PresentationFormat",t:mve},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:mve},15:{n:"Company",t:mve},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:mve},27:{n:"ContentStatus",t:mve},28:{n:"Language",t:mve},29:{n:"Version",t:mve},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},yve={1:{n:"CodePage",t:2},2:{n:"Title",t:mve},3:{n:"Subject",t:mve},4:{n:"Author",t:mve},5:{n:"Keywords",t:mve},6:{n:"Comments",t:mve},7:{n:"Template",t:mve},8:{n:"LastAuthor",t:mve},9:{n:"RevNumber",t:mve},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:mve},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function vve(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var bve=Wme(vve([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),wve={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},xve={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},kve={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Sve(e,t){var n,r=function(e){for(var t=[],n=_me(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(xve),s=[];s[s.length]=Qme,s[s.length]=yge("Types",null,{xmlns:kge,"xmlns:xsd":Rge,"xmlns:xsi":Age}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(e){return yge("Default",null,{Extension:e[0],ContentType:e[1]})})));var a=function(r){e[r]&&e[r].length>0&&(n=e[r][0],s[s.length]=yge("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:kve[r][t.bookType]||kve[r].xlsx}))},i=function(n){(e[n]||[]).forEach((function(e){s[s.length]=yge("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:kve[n][t.bookType]||kve[n].xlsx})}))},o=function(t){(e[t]||[]).forEach((function(e){s[s.length]=yge("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})}))};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var Tve={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Eve(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Nve(e){var t=[Qme,yge("Relationships",null,{xmlns:Sge})];return _me(e["!id"]).forEach((function(n){t[t.length]=yge("Relationship",null,e["!id"][n])})),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Cve(e,t,n,r,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=r,s.Target=n,a?s.TargetMode=a:[Tve.HLINK,Tve.XPATH,Tve.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}function Ive(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function _ve(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ofe.version+"</meta:generator></office:meta></office:document-meta>"}var Ave=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Rve(e,t,n,r,s){null==s[e]&&null!=t&&""!==t&&(s[e]=t,t=nge(t),r[r.length]=n?yge(e,t,n):mge(e,t))}function Dve(e,t){var n=t||{},r=[Qme,yge("cp:coreProperties",null,{"xmlns:cp":bge,"xmlns:dc":Ege,"xmlns:dcterms":Nge,"xmlns:dcmitype":Cge,"xmlns:xsi":Age})],s={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&Rve("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:vge(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),null!=e.ModifiedDate&&Rve("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:vge(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=Ave.length;++a){var i=Ave[a],o=n.Props&&null!=n.Props[i[1]]?n.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&Rve(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Ove=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Mve=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Pve(e){var t=[],n=yge;return e||(e={}),e.Application="SheetJS",t[t.length]=Qme,t[t.length]=yge("Properties",null,{xmlns:xge,"xmlns:vt":_ge}),Ove.forEach((function(r){if(void 0!==e[r[1]]){var s;switch(r[2]){case"string":s=nge(String(e[r[1]]));break;case"bool":s=e[r[1]]?"true":"false"}void 0!==s&&(t[t.length]=n(r[0],s))}})),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map((function(e){return"<vt:lpstr>"+nge(e)+"</vt:lpstr>"})).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Lve(e){var t=[Qme,yge("Properties",null,{xmlns:wge,"xmlns:vt":_ge})];if(!e)return t.join("");var n=1;return _me(e).forEach((function(r){++n,t[t.length]=yge("property",function(e,t){switch(typeof e){case"string":var n=yge("vt:lpwstr",nge(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return yge((0|e)==e?"vt:i4":"vt:r8",nge(String(e)));case"boolean":return yge("vt:bool",e?"true":"false")}if(e instanceof Date)return yge("vt:filetime",vge(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:nge(r)})})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Fve={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function $ve(e,t){var n=kye(4),r=kye(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=kye(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var s=(n*=1e7)/Math.pow(2,32)|0;s>0&&(n%=Math.pow(2,32),r+=s);var a=kye(8);return a.write_shift(4,n),a.write_shift(4,r),a}(t);break;case 31:case 80:for((r=kye(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return _fe([n,r])}var zve=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jve(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Uve(e,t,n){var r=kye(8),s=[],a=[],i=8,o=0,l=kye(8),c=kye(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),s.push(c),i+=8+l.length,!t){(c=kye(8)).write_shift(4,0),s.unshift(c);var u=[kye(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var h=e[o][0];for((l=kye(8+2*(h.length+1)+(h.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=_fe(u),a.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(zve.indexOf(e[o][0])>-1||Mve.indexOf(e[o][0])>-1)&&null!=e[o][1]){var d=e[o][1],p=0;if(t){var f=n[p=+t[e[o][0]]];if("version"==f.p&&"string"==typeof d){var m=d.split(".");d=(+m[0]<<16)+(+m[1]||0)}l=$ve(f.t,d)}else{var g=jve(d);-1==g&&(g=31,d=String(d)),l=$ve(g,d)}a.push(l),(c=kye(8)).write_shift(4,t?p:2+o),s.push(c),i+=8+l.length}var y=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,y),y+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),_fe([r].concat(s).concat(a))}function Bve(e,t,n,r,s,a){var i=kye(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Eme.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var l=Uve(e,n,r);if(o.push(l),s){var c=Uve(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(c)}return _fe(o)}function Vve(e,t){return 1===e.read_shift(t)}function Wve(e,t){return t||(t=kye(2)),t.write_shift(2,+!!e),t}function Hve(e){return e.read_shift(2,"u")}function Gve(e,t){return t||(t=kye(2)),t.write_shift(2,e),t}function qve(e,t,n){return n||(n=kye(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function Kve(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont",a=lfe;(n&&n.biff>=8&&(lfe=1200),n&&8!=n.biff)?12==n.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?e.read_shift(r,s):"";return lfe=a,i}function Yve(e){var t=e.t||"",n=kye(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=kye(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),_fe([n,r])}function Xve(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Qve(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):Xve(e,r,n)}function Jve(e,t,n){if(n.biff>5)return Qve(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Zve(e,t,n){return n||(n=kye(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function ebe(e,t){t||(t=kye(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function tbe(e){var t=kye(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)t.write_shift(4,i[n]);if(28==a)ebe(r=r.slice(1),t);else if(2&a){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&a&&ebe(s>-1?r.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function nbe(e,t,n,r){return r||(r=kye(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function rbe(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function sbe(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function abe(e,t){return t||(t=kye(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function ibe(e,t,n){var r=1536,s=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;default:throw new Error("unsupported BIFF version")}var a=kye(s);return a.write_shift(2,r),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function obe(e,t){var n=!t||t.biff>=8?2:1,r=kye(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function lbe(e,t,n,r){var s=n&&5==n.biff;r||(r=kye(s?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(s?1:2,t.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return null==a.l&&(a.l=a.length),a}function cbe(e,t,n,r){var s=n&&5==n.biff;r||(r=kye(s?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function ube(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=Kve(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],s=e.l+t,a=e.read_shift(n.biff>8?4:2);0!==a--;)r.push(rbe(e,n.biff,n));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return r}function hbe(e){var t=kye(24),n=Oye(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(r[s],16));return _fe([t,tbe(e[1])])}function dbe(e){var t=e[1].Tooltip,n=kye(10+2*(t.length+1));n.write_shift(2,2048);var r=Oye(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<t.length;++s)n.write_shift(2,t.charCodeAt(s));return n.write_shift(2,0),n}function pbe(e,t,n){if(!n.cellStyles)return xye(e,t);var r=n&&n.biff>=12?4:2,s=e.read_shift(r),a=e.read_shift(r),i=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var fbe=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Rme({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var s=Bye(function(t,n){var r=[],s=Tfe(1);switch(n.type){case"base64":s=Nfe(xfe(t));break;case"binary":s=Nfe(t);break;case"buffer":case"array":s=t}wye(s,0);var a=s.read_shift(1),i=!!(136&a),o=!1,l=!1;switch(a){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+a.toString(16))}var c=0,u=521;2==a&&(c=s.read_shift(2)),s.l+=3,2!=a&&(c=s.read_shift(4)),c>1048576&&(c=1e6),2!=a&&(u=s.read_shift(2));var h=s.read_shift(2),d=n.codepage||1252;2!=a&&(s.l+=16,s.read_shift(1),0!==s[s.l]&&(d=e[s[s.l]]),s.l+=1,s.l+=2),l&&(s.l+=36);for(var p=[],f={},m=Math.min(s.length,2==a?521:u-10-(o?264:0)),g=l?32:11;s.l<m&&13!=s[s.l];)switch((f={}).name=gfe.utils.decode(d,s.slice(s.l,s.l+g)).replace(/[\u0000\r\n].*$/g,""),s.l+=g,f.type=String.fromCharCode(s.read_shift(1)),2==a||l||(f.offset=s.read_shift(4)),f.len=s.read_shift(1),2==a&&(f.offset=s.read_shift(2)),f.dec=s.read_shift(1),f.name.length&&p.push(f),2!=a&&(s.l+=l?13:14),f.type){case"B":o&&8==f.len||!n.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==s[s.l]&&(s.l=u-1),13!==s.read_shift(1))throw new Error("DBF Terminator not found "+s.l+" "+s[s.l]);s.l=u;var y=0,v=0;for(r[0]=[],v=0;v!=p.length;++v)r[0][v]=p[v].name;for(;c-- >0;)if(42!==s[s.l])for(++s.l,r[++y]=[],v=0,v=0;v!=p.length;++v){var b=s.slice(s.l,s.l+p[v].len);s.l+=p[v].len,wye(b,0);var w=gfe.utils.decode(d,b);switch(p[v].type){case"C":w.trim().length&&(r[y][v]=w.replace(/\s+$/,""));break;case"D":8===w.length?r[y][v]=new Date(+w.slice(0,4),+w.slice(4,6)-1,+w.slice(6,8)):r[y][v]=w;break;case"F":r[y][v]=parseFloat(w.trim());break;case"+":case"I":r[y][v]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(w.trim().toUpperCase()){case"Y":case"T":r[y][v]=!0;break;case"N":case"F":r[y][v]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+w+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+a.toString(16));r[y][v]="##MEMO##"+(l?parseInt(w.trim(),10):b.read_shift(4));break;case"N":(w=w.replace(/\u0000/g,"").trim())&&"."!=w&&(r[y][v]=+w||0);break;case"@":r[y][v]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":r[y][v]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":r[y][v]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[y][v]=-b.read_shift(-8,"f");break;case"B":if(o&&8==p[v].len){r[y][v]=b.read_shift(8,"f");break}case"G":case"P":b.l+=p[v].len;break;case"0":if("_NullFlags"===p[v].name)break;default:throw new Error("DBF Unsupported data type "+p[v].type)}}else s.l+=h;if(2!=a&&s.l<s.length&&26!=s[s.l++])throw new Error("DBF EOF Marker missing "+(s.l-1)+" of "+s.length+" "+s[s.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=p,r}(t,r),r);return s["!cols"]=r.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete r.DBF,s}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return jye(n(e,t),t)}catch(jEe){if(t&&t.WTF)throw jEe}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var s=n||{};if(+s.codepage>=0&&pfe(+s.codepage),"string"==s.type)throw new Error("Cannot write DBF to JS string");var a=Sye(),i=Dke(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],u=0,h=0,d=0,p=1;for(u=0;u<o.length;++u)if(((c[u]||{}).DBF||{}).name)o[u]=c[u].DBF.name,++d;else if(null!=o[u]){if(++d,"number"===typeof o[u]&&(o[u]=o[u].toString(10)),"string"!==typeof o[u])throw new Error("DBF Invalid column name "+o[u]+" |"+typeof o[u]+"|");if(o.indexOf(o[u])!==u)for(h=0;h<1024;++h)if(-1==o.indexOf(o[u]+"_"+h)){o[u]+="_"+h;break}}var f=Fye(e["!ref"]),m=[],g=[],y=[];for(u=0;u<=f.e.c-f.s.c;++u){var v="",b="",w=0,x=[];for(h=0;h<l.length;++h)null!=l[h][u]&&x.push(l[h][u]);if(0!=x.length&&null!=o[u]){for(h=0;h<x.length;++h){switch(typeof x[h]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=x[h]instanceof Date?"D":"C"}w=Math.max(w,String(x[h]).length),v=v&&v!=b?"C":b}w>250&&(w=250),"C"==(b=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>w&&(w=c[u].DBF.len),"B"==v&&"N"==b&&(v="N",y[u]=c[u].DBF.dec,w=c[u].DBF.len),g[u]="C"==v||"N"==b?w:r[v]||0,p+=g[u],m[u]=v}else m[u]="?"}var k=a.next(32);for(k.write_shift(4,318902576),k.write_shift(4,l.length),k.write_shift(2,296+32*d),k.write_shift(2,p),u=0;u<4;++u)k.write_shift(4,0);for(k.write_shift(4,(+t[cfe]||3)<<8),u=0,h=0;u<o.length;++u)if(null!=o[u]){var S=a.next(32),T=(o[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,T,"sbcs"),S.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),S.write_shift(4,h),S.write_shift(1,g[u]||r[m[u]]||0),S.write_shift(1,y[u]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),h+=g[u]||r[m[u]]||0}var E=a.next(264);for(E.write_shift(4,13),u=0;u<65;++u)E.write_shift(4,0);for(u=0;u<l.length;++u){var N=a.next(p);for(N.write_shift(1,0),h=0;h<o.length;++h)if(null!=o[h])switch(m[h]){case"L":N.write_shift(1,null==l[u][h]?63:l[u][h]?84:70);break;case"B":N.write_shift(8,l[u][h]||0,"f");break;case"N":var C="0";for("number"==typeof l[u][h]&&(C=l[u][h].toFixed(y[h]||0)),d=0;d<g[h]-C.length;++d)N.write_shift(1,32);N.write_shift(1,C,"sbcs");break;case"D":l[u][h]?(N.write_shift(4,("0000"+l[u][h].getFullYear()).slice(-4),"sbcs"),N.write_shift(2,("00"+(l[u][h].getMonth()+1)).slice(-2),"sbcs"),N.write_shift(2,("00"+l[u][h].getDate()).slice(-2),"sbcs")):N.write_shift(8,"00000000","sbcs");break;case"C":var I=String(null!=l[u][h]?l[u][h]:"").slice(0,g[h]);for(N.write_shift(1,I,"sbcs"),d=0;d<g[h]-I.length;++d)N.write_shift(1,32)}}return a.next(1).write_shift(1,26),a.end()}}}(),mbe=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+_me(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?vfe(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:vfe(r)};function s(e,s){var a,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,u=0,h=[],d=[],p=null,f={},m=[],g=[],y=[],v=0;for(+s.codepage>=0&&pfe(+s.codepage);c!==i.length;++c){v=0;var b,w=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),x=w.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),k=x[0];if(w.length>0)switch(k){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==x[1].charAt(0)&&d.push(w.slice(3).replace(/;;/g,";"));break;case"C":var S=!1,T=!1,E=!1,N=!1,C=-1,I=-1;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(x[u].slice(1))-1,T=!0;break;case"Y":for(o=parseInt(x[u].slice(1))-1,T||(l=0),a=h.length;a<=o;++a)h[a]=[];break;case"K":'"'===(b=x[u].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(Gme(b))?isNaN(Kme(b).getDate())||(b=Bme(b)):(b=Gme(b),null!==p&&mme(p)&&(b=$me(b))),"undefined"!==typeof gfe&&"string"==typeof b&&"string"!=(s||{}).type&&(s||{}).codepage&&(b=gfe.utils.decode(s.codepage,b)),S=!0;break;case"E":N=!0;var _=iwe(x[u].slice(1),{r:o,c:l});h[o][l]=[h[o][l],_];break;case"S":E=!0,h[o][l]=[h[o][l],"S5S"];break;case"R":C=parseInt(x[u].slice(1))-1;break;case"C":I=parseInt(x[u].slice(1))-1;break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+w)}if(S&&(h[o][l]&&2==h[o][l].length?h[o][l][0]=b:h[o][l]=b,p=null),E){if(N)throw new Error("SYLK shared formula cannot have own formula");var A=C>-1&&h[C][I];if(!A||!A[1])throw new Error("SYLK shared formula cannot find base");h[o][l][1]=cwe(A[1],{r:o-C,c:l-I})}break;case"F":var R=0;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"X":l=parseInt(x[u].slice(1))-1,++R;break;case"Y":for(o=parseInt(x[u].slice(1))-1,a=h.length;a<=o;++a)h[a]=[];break;case"M":v=parseInt(x[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":p=d[parseInt(x[u].slice(1))];break;case"W":for(y=x[u].slice(1).split(" "),a=parseInt(y[0],10);a<=parseInt(y[1],10);++a)v=parseInt(y[2],10),g[a-1]=0===v?{hidden:!0}:{wch:v},Dbe(g[a-1]);break;case"C":g[l=parseInt(x[u].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(x[u].slice(1))-1]||(m[o]={}),v>0?(m[o].hpt=v,m[o].hpx=Pbe(v)):0===v&&(m[o].hidden=!0);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+w)}R<1&&(p=null);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+w)}}return m.length>0&&(f["!rows"]=m),g.length>0&&(f["!cols"]=g),s&&s.sheetRows&&(h=h.slice(0,s.sheetRows)),[h,f]}function a(e,t){var n=function(e,t){switch(t.type){case"base64":return s(xfe(e),t);case"binary":return s(e,t);case"buffer":return s(kfe&&Buffer.isBuffer(e)?e.toString("binary"):Ife(e),t);case"array":return s(Vme(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],a=n[1],i=Bye(r,t);return _me(a).forEach((function(e){i[e]=a[e]})),i}function i(e,t,n,r){var s="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":s+=e.v||0,e.f&&!e.F&&(s+=";E"+lwe(e.f,{r:n,c:r}));break;case"b":s+=e.v?"TRUE":"FALSE";break;case"e":s+=e.w||e.v;break;case"d":s+='"'+(e.w||e.v)+'"';break;case"s":s+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return s}return e["|"]=254,{to_workbook:function(e,t){return jye(a(e,t),t)},to_sheet:a,from_sheet:function(e,t){var n,r,s=["ID;PWXL;N;E"],a=[],o=Fye(e["!ref"]),l=Array.isArray(e),c="\r\n";s.push("P;PGeneral"),s.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=s,e["!cols"].forEach((function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=_be(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Abe(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)}))),e["!rows"]&&function(e,t){t.forEach((function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*Mbe(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))}))}(s,e["!rows"]),s.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var u=o.s.r;u<=o.e.r;++u)for(var h=o.s.c;h<=o.e.c;++h){var d=Mye({r:u,c:h});(n=l?(e[u]||[])[h]:e[d])&&(null!=n.v||n.f&&!n.F)&&a.push(i(n,0,u,h))}return s.join(c)+c+a.join(c)+c+"E"+c}}}(),gbe=function(){function e(e,t){for(var n=e.split("\n"),r=-1,s=-1,a=0,i=[];a!==n.length;++a)if("BOT"!==n[a].trim()){if(!(r<0)){for(var o=n[a].trim().split(","),l=o[0],c=o[1],u=n[++a]||"";1&(u.match(/["]/g)||[]).length&&a<n.length-1;)u+="\n"+n[++a];switch(u=u.trim(),+l){case-1:if("BOT"===u){i[++r]=[],s=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?i[r][s]=!0:"FALSE"===u?i[r][s]=!1:isNaN(Gme(c))?isNaN(Kme(c).getDate())?i[r][s]=c:i[r][s]=Bme(c):i[r][s]=Gme(c),++s;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),i[r][s++]=""!==u?u:null}if("EOD"===u)break}}else i[++r]=[],s=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,n){return Bye(function(t,n){switch(n.type){case"base64":return e(xfe(t),n);case"binary":return e(t,n);case"buffer":return e(kfe&&Buffer.isBuffer(t)?t.toString("binary"):Ife(t),n);case"array":return e(Vme(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,s){e.push(t),e.push(n+","+r),e.push('"'+s.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,s=[],a=Fye(n["!ref"]),i=Array.isArray(n);e(s,"TABLE",0,1,"sheetjs"),e(s,"VECTORS",0,a.e.r-a.s.r+1,""),e(s,"TUPLES",0,a.e.c-a.s.c+1,""),e(s,"DATA",0,0,"");for(var o=a.s.r;o<=a.e.r;++o){t(s,-1,0,"BOT");for(var l=a.s.c;l<=a.e.c;++l){var c=Mye({r:o,c:l});if(r=i?(n[o]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(s,1,0,"="+r.f):t(s,1,0,""):t(s,0,u,"V");break;case"b":t(s,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(s,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=bme(r.z||Ufe[14],Mme(Bme(r.v)))),t(s,0,r.w,"V");break;default:t(s,1,0,"")}else t(s,1,0,"")}}t(s,-1,0,"EOD");return s.join("\r\n")}}();return{to_workbook:function(e,n){return jye(t(e,n),n)},to_sheet:t,from_sheet:n}}(),ybe=function(){function e(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(e,t){return Bye(function(e,t){for(var n=e.split("\n"),r=-1,s=-1,a=0,i=[];a!==n.length;++a){var o=n[a].trim().split(":");if("cell"===o[0]){var l=Oye(o[1]);if(i.length<=l.r)for(r=i.length;r<=l.r;++r)i[r]||(i[r]=[]);switch(r=l.r,s=l.c,o[2]){case"t":i[r][s]=o[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":i[r][s]=+o[3];break;case"vtf":var c=o[o.length-1];case"vtc":"nl"===o[3]?i[r][s]=!!+o[4]:i[r][s]=+o[4],"vtf"==o[2]&&(i[r][s]=[i[r][s],c])}}}return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}(e,t),t)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),r=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),a="--SocialCalcSpreadsheetControlSave--";function i(t){if(!t||!t["!ref"])return"";for(var n,r=[],s=[],a="",i=Pye(t["!ref"]),o=Array.isArray(t),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(a=Mye({r:l,c:c}),(n=o?(t[l]||[])[c]:t[a])&&null!=n.v&&"z"!==n.t){switch(s=["cell",a,"t"],n.t){case"s":case"str":s.push(e(n.v));break;case"n":n.f?(s[2]="vtf",s[3]="n",s[4]=n.v,s[5]=e(n.f)):(s[2]="v",s[3]=n.v);break;case"b":s[2]="vt"+(n.f?"f":"c"),s[3]="nl",s[4]=n.v?"1":"0",s[5]=e(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=Mme(Bme(n.v));s[2]="vtc",s[3]="nd",s[4]=""+u,s[5]=n.w||bme(n.z||Ufe[14],u);break;case"e":continue}r.push(s.join(":"))}return r.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,n){return jye(t(e,n),n)},to_sheet:t,from_sheet:function(e){return[n,r,s,r,i(e),a].join("\n")}}}(),vbe=function(){function e(e,t,n,r,s){s.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(Gme(e))?isNaN(Kme(e).getDate())?t[n][r]=e:t[n][r]=Bme(e):t[n][r]=Gme(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},s=!1,a=0,i=0;a<e.length;++a)34==(i=e.charCodeAt(a))?s=!s:!s&&i in t&&(r[i]=(r[i]||0)+1);for(a in i=[],r)Object.prototype.hasOwnProperty.call(r,a)&&i.push([r[a],a]);if(!i.length)for(a in r=n)Object.prototype.hasOwnProperty.call(r,a)&&i.push([r[a],a]);return i.sort((function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]})),t[i.pop()[1]]||44}function s(e,t){var n=t||{},s="";var a=n.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(s=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(s=e.charAt(4),e=e.slice(6)):s=r(e.slice(0,1024)):s=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,u=0,h=0,d=s.charCodeAt(0),p=!1,f=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=n.dateNF?function(e){var t="number"==typeof e?Ufe[e]:e;return t=t.replace(Sme,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function y(){var t=e.slice(u,h),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=Gme(t)))if(!isNaN(Kme(t).getDate())||g&&t.match(g)){r.z=n.dateNF||Ufe[14];var s=0;g&&t.match(g)&&(t=function(e,t,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(Sme)||[]).forEach((function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":a=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:s=c}})),l>=0&&-1==o&&s>=0&&(o=s,s=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==r&&-1==s&&-1==a?u:c+"T"+u}(0,n.dateNF,t.match(g)||[]),s=1),n.cellDates?(r.t="d",r.v=Bme(t,s)):(r.t="n",r.v=Mme(Bme(t,s))),!1!==n.cellText&&(r.w=bme(r.z,r.v instanceof Date?Mme(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(a[o]||(a[o]=[]),a[o][l]=r):a[Mye({c:l,r:o})]=r),u=h+1,m=e.charCodeAt(u),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),f==d)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;h<e.length;++h)switch(f=e.charCodeAt(h)){case 34:34===m&&(p=!p);break;case d:case 10:case 13:if(!p&&y())break e}return h-u>0&&y(),a["!ref"]=Lye(i),a}function a(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?s(t,n):Bye(function(t,n){var r=n||{},s=[];if(!t||0===t.length)return s;for(var a=t.split(/[\r\n]/),i=a.length-1;i>=0&&0===a[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=a[c].indexOf(" "))?l=a[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){s[c]=[];var u=0;for(e(a[c].slice(0,o).trim(),s,c,u,r),u=1;u<=(a[c].length-o)/10+1;++u)e(a[c].slice(o+10*(u-1),o+10*u).trim(),s,c,u,r)}return r.sheetRows&&(s=s.slice(0,r.sheetRows)),s}(t,n),n):s(t,n)}function i(e,t){var n="",r="string"==t.type?[0,0,0,0]:Eke(e,t);switch(t.type){case"base64":n=xfe(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof gfe?gfe.utils.decode(t.codepage,e):kfe&&Buffer.isBuffer(e)?e.toString("binary"):Ife(e);break;case"array":n=Vme(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=hge(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=hge(n):"binary"==t.type&&"undefined"!==typeof gfe&&t.codepage&&(n=gfe.utils.decode(t.codepage,gfe.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?ybe.to_sheet("string"==t.type?n:hge(n),t):a(n,t)}return{to_workbook:function(e,t){return jye(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,n=[],r=Fye(e["!ref"]),s=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){for(var i=[],o=r.s.c;o<=r.e.c;++o){var l=Mye({r:a,c:o});if((t=s?(e[a]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(zye(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}n.push(i.join(""))}return n.join("\n")}}}();var bbe=function(){function e(e,t,n){if(e){wye(e,e.l||0);for(var r=n.Enum||y;e.l<e.length;){var s=e.read_shift(2),a=r[s]||r[65535],i=e.read_shift(2),o=e.l+i,l=a.f&&a.f(e,i,n);if(e.l=o,t(l,a,s))return}}}function t(t,n){if(!t)return t;var r=n||{};var s=r.dense?[]:{},a="Sheet1",i="",o=0,l={},c=[],u=[],h={s:{r:0,c:0},e:{r:0,c:0}},d=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=y,e(t,(function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:h=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||Ufe[14],r.cellDates&&(e[1].t="d",e[1].v=$me(e[1].v))),r.qpro&&e[3]>o&&(s["!ref"]=Lye(h),l[a]=s,c.push(a),s=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a=i||"Sheet"+(o+1),i="");var u=r.dense?(s[e[0].r]||[])[e[0].c]:s[Mye(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[Mye(e[0])]=e[1]}}),r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=v,14==t[2]&&(r.qpro=!0,t.l=0),e(t,(function(e,t,n){switch(n){case 204:a=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(s["!ref"]=Lye(h),l[a]=s,c.push(a),s=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a="Sheet"+(o+1)),d>0&&e[0].r>=d)break;r.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[Mye(e[0])]=e[1],h.e.c<e[0].c&&(h.e.c=e[0].c),h.e.r<e[0].r&&(h.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==o&&(a=e[1])}}),r)}if(s["!ref"]=Lye(h),l[i||a]=s,c.push(i||a),!u.length)return{SheetNames:c,Sheets:l};for(var p={},f=[],m=0;m<u.length;++m)l[c[m]]?(f.push(u[m]||c[m]),p[u[m]]=l[u[m]]||l[c[m]]):(f.push(u[m]),p[u[m]]={"!ref":"A1"});return{SheetNames:f,Sheets:p}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var s=e.l+t,a=n(e,0,r);if(a[1].t="s",20768==r.vers){e.l++;var i=e.read_shift(1);return a[1].v=e.read_shift(i,"utf8"),a}return r.qpro&&e.l++,a[1].v=e.read_shift(s-e.l,"cstr"),a}function s(e,t,n){var r=kye(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var s=0;s<r.length;++s){var a=n.charCodeAt(s);r.write_shift(1,a>=128?95:a)}return r.write_shift(1,0),r}function a(e,t,n){var r=kye(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function i(e,t,n){var r=kye(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?Dye(t):Aye(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function h(e,t,n,r){var s=kye(6+r.length);s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),s.write_shift(1,39);for(var a=0;a<r.length;++a){var i=r.charCodeAt(a);s.write_shift(1,i>=128?95:i)}return s.write_shift(1,0),s}function d(e,t){var n=u(e),r=e.read_shift(4),s=e.read_shift(4),a=e.read_shift(2);if(65535==a)return 0===r&&3221225472===s?(n[1].t="e",n[1].v=15):0===r&&3489660928===s?(n[1].t="e",n[1].v=42):n[1].v=0,n;var i=32768&a;return a=(32767&a)-16446,n[1].v=(1-2*i)*(s*Math.pow(2,a+32)+r*Math.pow(2,a)),n}function p(e,t,n,r){var s=kye(14);if(s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),0==r)return s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,65535),s;var a,i=0,o=0,l=0;return r<0&&(i=1,r=-r),o=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,o-31))>>>0))&&(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,a=(r*=Math.pow(2,32))>>>0,s.write_shift(4,a),s.write_shift(4,l),o+=16383+(i?32768:0),s.write_shift(2,o),s}function f(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var n=kye(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var s=e.charCodeAt(r);n[n.l++]=s>127?95:s}return n[n.l++]=0,n}var y={0:{n:"BOF",f:Hve},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var s=n(e,0,r);return s[1].v=e.read_shift(2,"i"),s}},14:{n:"NUMBER",f:function(e,t,r){var s=n(e,0,r);return s[1].v=e.read_shift(8,"f"),s}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var s=e.l+t,a=n(e,0,r);if(a[1].v=e.read_shift(8,"f"),r.qpro)e.l=s;else{var i=e.read_shift(2);!function(e,t){wye(e,0);var n=[],r=0,s="",a="",i="",u="";for(;e.l<e.length;){var h=e[e.l++];switch(h){case 0:n.push(e.read_shift(8,"f"));break;case 1:a=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(a+s);break;case 2:var d=o(t[0].c,e.read_shift(2),!0),p=o(t[0].r,e.read_shift(2),!1);a=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(d+p+":"+a+s);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var f="";h=e[e.l++];)f+=String.fromCharCode(h);n.push('"'+f.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),i=n.pop(),n.push(["AND","OR"][h-20]+"("+i+","+u+")");break;default:if(h<32&&c[h])u=n.pop(),i=n.pop(),n.push(i+c[h]+u);else{if(!l[h])return h<=7?console.error("WK1 invalid opcode "+h.toString(16)):h<=24?console.error("WK1 unsupported op "+h.toString(16)):h<=30?console.error("WK1 invalid opcode "+h.toString(16)):h<=115?console.error("WK1 unsupported function opcode "+h.toString(16)):console.error("WK1 unrecognized opcode "+h.toString(16));if(69==(r=l[h][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+h.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[h][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+i),a),e.l+=i}return a}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},v={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:d},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=d(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var s=e.read_shift(2);if(14e3==s){for(n[s]=[0,""],n[s][0]=e.read_shift(2);e[e.l];)n[s][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var n=f(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&pfe(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=Sye(),o=Fye(e["!ref"]),l=Array.isArray(e),c=[];Fxe(r,0,function(e){var t=kye(2);return t.write_shift(2,e),t}(1030)),Fxe(r,6,function(e){var t=kye(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var u=Math.min(o.e.r,8191),h=o.s.r;h<=u;++h)for(var d=Aye(h),p=o.s.c;p<=o.e.c;++p){h===o.s.r&&(c[p]=Dye(p));var f=c[p]+d,m=l?(e[h]||[])[p]:e[f];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?Fxe(r,13,a(h,p,m.v)):Fxe(r,14,i(h,p,m.v));else Fxe(r,15,s(h,p,zye(m).slice(0,239)))}return Fxe(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&pfe(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=Sye();Fxe(r,0,function(e){var t=kye(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,s=0,a=0;a<e.SheetNames.length;++a){var i=e.SheetNames[a],o=e.Sheets[i];if(o&&o["!ref"]){++s;var l=Pye(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,s),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var s=0,a=0;s<e.SheetNames.length;++s)(e.Sheets[e.SheetNames[s]]||{})["!ref"]&&Fxe(r,27,g(e.SheetNames[s],a++));var i=0;for(s=0;s<e.SheetNames.length;++s){var o=e.Sheets[e.SheetNames[s]];if(o&&o["!ref"]){for(var l=Fye(o["!ref"]),c=Array.isArray(o),u=[],d=Math.min(l.e.r,8191),f=l.s.r;f<=d;++f)for(var m=Aye(f),y=l.s.c;y<=l.e.c;++y){f===l.s.r&&(u[y]=Dye(y));var v=u[y]+m,b=c?(o[f]||[])[y]:o[v];if(b&&"z"!=b.t)if("n"==b.t)Fxe(r,23,p(f,y,i,b.v));else Fxe(r,22,h(f,y,i,zye(b).slice(0,239)))}++i}}return Fxe(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(Nfe(xfe(e)),n);case"binary":return t(Nfe(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var wbe=/^\s|\s$|[\t\n\r]/;function xbe(e,t){if(!t.bookSST)return"";var n=[Qme];n[n.length]=yge("sst",null,{xmlns:Dge[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var s=e[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(wbe)&&(a+=' xml:space="preserve"'),a+=">"+nge(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var kbe=function(e,t){var n=!1;return null==t&&(n=!0,t=kye(15+4*e.t.length)),t.write_shift(1,0),Hye(e.t,t),n?t.slice(0,t.l):t};function Sbe(e){var t=Sye();Tye(t,159,function(e,t){return t||(t=kye(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)Tye(t,19,kbe(e[n]));return Tye(t,160),t.end()}function Tbe(e){if("undefined"!==typeof gfe)return gfe.utils.encode(cfe,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function Ebe(e){var t,n,r=0,s=Tbe(e),a=s.length+1;for((t=Tfe(a))[0]=s.length,n=1;n!=a;++n)t[n]=s[n-1];for(n=a-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var Nbe=function(){function e(e,n){switch(n.type){case"base64":return t(xfe(e),n);case"binary":return t(e,n);case"buffer":return t(kfe&&Buffer.isBuffer(e)?e.toString("binary"):Ife(e),n);case"array":return t(Vme(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var s={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach((function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,a=/\\\w+\b/g,i=0,o=-1;r=a.exec(e);){if("\\cell"===r[0]){var l=e.slice(i,a.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[Mye({r:t,c:o})]=c}}i=a.lastIndex}o>s.e.c&&(s.e.c=o)})),n["!ref"]=Lye(s),n}return{to_workbook:function(t,n){return jye(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=Fye(e["!ref"]),s=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){n.push("\\trowd\\trautofit1");for(var i=r.s.c;i<=r.e.c;++i)n.push("\\cellx"+(i+1));for(n.push("\\pard\\intbl"),i=r.s.c;i<=r.e.c;++i){var o=Mye({r:a,c:i});(t=s?(e[a]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(zye(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Cbe(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var Ibe=6;function _be(e){return Math.floor((e+Math.round(128/Ibe)/256)*Ibe)}function Abe(e){return Math.floor((e-5)/Ibe*100+.5)/100}function Rbe(e){return Math.round((e*Ibe+5)/Ibe*256)/256}function Dbe(e){e.width?(e.wpx=_be(e.width),e.wch=Abe(e.wpx),e.MDW=Ibe):e.wpx?(e.wch=Abe(e.wpx),e.width=Rbe(e.wch),e.MDW=Ibe):"number"==typeof e.wch&&(e.width=Rbe(e.wch),e.wpx=_be(e.width),e.MDW=Ibe),e.customWidth&&delete e.customWidth}var Obe=96;function Mbe(e){return 96*e/Obe}function Pbe(e){return e*Obe/96}function Lbe(e,t){var n,r=[Qme,yge("styleSheet",null,{xmlns:Dge[0],"xmlns:vt":_ge})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=yge("numFmt",null,{numFmtId:r,formatCode:nge(e[r])}))})),1===t.length?"":(t[t.length]="</numFmts>",t[0]=yge("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=yge("cellXfs",null),e.forEach((function(e){t[t.length]=yge("xf",null,e)})),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=yge("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Fbe(e,t,n){n||(n=kye(6+4*t.length)),n.write_shift(2,e),Hye(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function $be(e,t){t||(t=kye(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=kye(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),fve(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),Hye(e.name,t),t.length>t.l?t.slice(0,t.l):t}var zbe,jbe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ube=xye;function Bbe(e,t){t||(t=kye(84)),zbe||(zbe=Rme(jbe));var n=zbe[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(fve({auto:1},t),fve({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Vbe(e,t,n){n||(n=kye(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Wbe(e,t){return t||(t=kye(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Hbe=xye;function Gbe(e){var t;Tye(e,613,Vye(1)),Tye(e,46,(t||(t=kye(51)),t.write_shift(1,0),Wbe(0,t),Wbe(0,t),Wbe(0,t),Wbe(0,t),Wbe(0,t),t.length>t.l?t.slice(0,t.l):t)),Tye(e,614)}function qbe(e){Tye(e,619,Vye(1)),Tye(e,48,function(e,t){return t||(t=kye(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),rve(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),Tye(e,620)}function Kbe(e){Tye(e,508,function(e,t,n){var r=kye(2052);return r.write_shift(4,e),rve(t,r),rve(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),Tye(e,509)}function Ybe(e,t){var n=Sye();return Tye(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n})),0!=n&&(Tye(e,615,Vye(n)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&Tye(e,44,Fbe(r,t[r]))})),Tye(e,616))}}(n,e.SSF),function(e){Tye(e,611,Vye(1)),Tye(e,43,$be({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Tye(e,612)}(n),function(e){Tye(e,603,Vye(2)),Tye(e,45,Bbe({patternType:"none"})),Tye(e,45,Bbe({patternType:"gray125"})),Tye(e,604)}(n),Gbe(n),function(e){Tye(e,626,Vye(1)),Tye(e,47,Vbe({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Tye(e,627)}(n),function(e,t){Tye(e,617,Vye(t.length)),t.forEach((function(t){Tye(e,47,Vbe(t,0))})),Tye(e,618)}(n,t.cellXfs),qbe(n),function(e){Tye(e,505,Vye(0)),Tye(e,506)}(n),Kbe(n),Tye(n,279),n.end()}function Xbe(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Qme];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Qbe(){var e=Sye();return Tye(e,332),Tye(e,334,Vye(1)),Tye(e,335,function(e){var t=kye(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Hye(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),Tye(e,336),Tye(e,339,function(e,t){var n=kye(8+2*t.length);return n.write_shift(4,e),Hye(t,n),n.slice(0,n.l)}(1,"XLDAPR")),Tye(e,52),Tye(e,35,Vye(514)),Tye(e,4096,Vye(0)),Tye(e,4097,Gve(1)),Tye(e,36),Tye(e,53),Tye(e,340),Tye(e,337,function(e,t){var n=kye(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),Tye(e,51,function(e){var t=kye(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),Tye(e,338),Tye(e,333),e.end()}function Jbe(){var e=[Qme];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var Zbe=1024;function ewe(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[yge("xml",null,{"xmlns:v":$ge,"xmlns:o":Oge,"xmlns:x":Mge,"xmlns:mv":Fge}).replace(/\/>/,">"),yge("o:shapelayout",yge("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),yge("v:shapetype",[yge("v:stroke",null,{joinstyle:"miter"}),yge("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Zbe<1e3*e;)Zbe+=1e3;return t.forEach((function(e){var t=Oye(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?yge("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,a=yge("v:fill",r,n);++Zbe,s=s.concat(["<v:shape"+gge({id:"_x0000_s"+Zbe,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",a,yge("v:shadow",null,{on:"t",obscured:"t"}),yge("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",mge("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),mge("x:AutoFill","False"),mge("x:Row",String(t.r)),mge("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),s.push("</xml>"),s.join("")}function twe(e){var t=[Qme,yge("comments",null,{xmlns:Dge[0]})],n=[];return t.push("<authors>"),e.forEach((function(e){e[1].forEach((function(e){var r=nge(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))}))})),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach((function(e){var r=0,s=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach((function(e){e.a&&(r=n.indexOf(nge(e.a))),s.push(e.t||"")})),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),s.length<=1)t.push(mge("t",nge(s[0]||"")));else{for(var a="Comment:\n    "+s[0]+"\n",i=1;i<s.length;++i)a+="Reply:\n    "+s[i]+"\n";t.push(mge("t",nge(a)))}t.push("</text></comment>")})),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function nwe(e,t,n){var r=[Qme,yge("ThreadedComments",null,{xmlns:Tge}).replace(/[\/]>/,">")];return e.forEach((function(e){var s="";(e[1]||[]).forEach((function(a,i){if(a.T){a.a&&-1==t.indexOf(a.a)&&t.push(a.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==i?s=o.id:o.parentId=s,a.ID=o.id,a.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),r.push(yge("threadedComment",mge("text",a.t||""),o))}else delete a.ID}))})),r.push("</ThreadedComments>"),r.join("")}var rwe=Wye;function swe(e){var t=Sye(),n=[];return Tye(t,628),Tye(t,630),e.forEach((function(e){e[1].forEach((function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),Tye(t,632,function(e){return Hye(e.slice(0,54))}(e.a)))}))})),Tye(t,631),Tye(t,633),e.forEach((function(e){e[1].forEach((function(r){r.iauthor=n.indexOf(r.a);var s={s:Oye(e[0]),e:Oye(e[0])};Tye(t,635,function(e,t){return null==t&&(t=kye(36)),t.write_shift(4,e[1].iauthor),hve(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([s,r])),r.t&&r.t.length>0&&Tye(t,637,Yye(r)),Tye(t,636),delete r.iauthor}))})),Tye(t,634),Tye(t,629),t.end()}var awe=["xlsb","xlsm","xlam","biff8","xla"];var iwe=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,s){var a=!1,i=!1;0==r.length?i=!0:"["==r.charAt(0)&&(i=!0,r=r.slice(1,-1)),0==s.length?a=!0:"["==s.charAt(0)&&(a=!0,s=s.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=s.length>0?0|parseInt(s,10):0;return a?l+=t.c:--l,i?o+=t.r:--o,n+(a?"":"$")+Dye(l)+(i?"":"$")+Aye(o)}return function(r,s){return t=s,r.replace(e,n)}}(),owe=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,lwe=function(){return function(e,t){return e.replace(owe,(function(e,n,r,s,a,i){var o=Rye(s)-(r?0:t.c),l=_ye(i)-(a?0:t.r);return n+"R"+(0==l?"":a?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")}))}}();function cwe(e,t){return e.replace(owe,(function(e,n,r,s,a,i){return n+("$"==r?r+s:Dye(Rye(s)+t.c))+("$"==a?a+i:Aye(_ye(i)+t.r))}))}function uwe(e){e.l+=1}function hwe(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function dwe(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return pwe(e);12==n.biff&&(r=4)}var s=e.read_shift(r),a=e.read_shift(r),i=hwe(e,2),o=hwe(e,2);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function pwe(e){var t=hwe(e,2),n=hwe(e,2),r=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function fwe(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=hwe(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),s=hwe(e,2);return{r:r,c:s[0],cRel:s[1],rRel:s[2]}}function mwe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function gwe(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function ywe(e){return[e.read_shift(1),e.read_shift(1)]}function vwe(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=Vve(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=wve[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=dve(e);break;case 2:n[1]=Jve(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function bwe(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),s=[],a=0;a!=r;++a)s.push((12==n.biff?uve:sbe)(e,8));return s}function wwe(e,t,n){var r=0,s=0;12==n.biff?(r=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--s&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=vwe(e,n.biff);return i}function xwe(e,t,n){return e.l+=2,[mwe(e)]}function kwe(e){return e.l+=6,[]}function Swe(e){return e.l+=2,[Hve(e),1&e.read_shift(2)]}var Twe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var Ewe={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:xye},3:{n:"PtgAdd",f:uwe},4:{n:"PtgSub",f:uwe},5:{n:"PtgMul",f:uwe},6:{n:"PtgDiv",f:uwe},7:{n:"PtgPower",f:uwe},8:{n:"PtgConcat",f:uwe},9:{n:"PtgLt",f:uwe},10:{n:"PtgLe",f:uwe},11:{n:"PtgEq",f:uwe},12:{n:"PtgGe",f:uwe},13:{n:"PtgGt",f:uwe},14:{n:"PtgNe",f:uwe},15:{n:"PtgIsect",f:uwe},16:{n:"PtgUnion",f:uwe},17:{n:"PtgRange",f:uwe},18:{n:"PtgUplus",f:uwe},19:{n:"PtgUminus",f:uwe},20:{n:"PtgPercent",f:uwe},21:{n:"PtgParen",f:uwe},22:{n:"PtgMissArg",f:uwe},23:{n:"PtgStr",f:function(e,t,n){return e.l++,Kve(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,wve[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,dve(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(n&&n.biff<=3?1:2);return[Wwe[s],Vwe[s],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],s=e.read_shift(1),a=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[s,(0===a[0]?Vwe:Bwe)[a[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=e.read_shift(s);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,a]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,fwe(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,dwe(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:xye},40:{n:"PtgMemNoMem",f:xye},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==s&&n>=128&&(n-=256),{r:t,c:n,cRel:s,rRel:r}}(e);var s=e.read_shift(r>=12?4:2),a=e.read_shift(2),i=(16384&a)>>14,o=(32768&a)>>15;if(a&=16383,1==o)for(;s>524287;)s-=1048576;if(1==i)for(;a>8191;)a-=16384;return{r:s,c:a,cRel:i,rRel:o}}(e,0,n);return[r,s]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=function(e,t,n){if(n.biff<8)return pwe(e);var r=e.read_shift(12==n.biff?4:2),s=e.read_shift(12==n.biff?4:2),a=hwe(e,2),i=hwe(e,2);return{s:{r:r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,n);return[r,s]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,s,fwe(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,s,dwe(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6}return e.l+=a,[r,s]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2),a=8;if(n)switch(n.biff){case 5:e.l+=12,a=6;break;case 12:a=12}return e.l+=a,[r,s]}},255:{}},Nwe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Cwe={1:{n:"PtgElfLel",f:Swe},2:{n:"PtgElfRw",f:xwe},3:{n:"PtgElfCol",f:xwe},6:{n:"PtgElfRwV",f:xwe},7:{n:"PtgElfColV",f:xwe},10:{n:"PtgElfRadical",f:xwe},11:{n:"PtgElfRadicalS",f:kwe},13:{n:"PtgElfColS",f:kwe},15:{n:"PtgElfColSV",f:kwe},16:{n:"PtgElfRadicalLel",f:Swe},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2);return{ixti:t,coltype:3&n,rt:Twe[n>>2&31],idx:r,c:s,C:a}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Iwe={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),s=[],a=0;a<=r;++a)s.push(e.read_shift(n&&2==n.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:gwe},33:{n:"PtgAttrBaxcel",f:gwe},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),ywe(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),ywe(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function _we(e,t,n,r){if(r.biff<8)return xye(e,t);for(var s=e.l+t,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=wwe(e,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=bwe(e,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&12==r.biff&&(n[i][1][1]=e.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return 0!==(t=s-e.l)&&a.push(xye(e,t)),a}function Awe(e,t,n){for(var r,s,a=e.l+t,i=[];a!=e.l;)t=a-e.l,s=e[e.l],r=Ewe[s]||Ewe[Nwe[s]],24!==s&&25!==s||(r=(24===s?Cwe:Iwe)[e[e.l+1]]),r&&r.f?i.push([r.n,r.f(e,t,n)]):xye(e,t);return i}function Rwe(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)if(2===i[0])s.push('"'+i[1].replace(/"/g,'""')+'"');else s.push(i[1]);else s.push("")}t.push(s.join(","))}return t.join(";")}var Dwe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Owe(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(e[r[0]][0]){case 357:return s=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?s:s+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return s=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[r[0]][0][3]?(s=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Mwe(e,t,n){var r=Owe(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function Pwe(e,t,n,r,s){var a,i,o,l,c=s&&s.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},h=[],d=0,p=0,f="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",y=0,v=e[0].length;y<v;++y){var b=e[0][y];switch(b[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(a=h.pop(),i=h.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=Hme(" ",e[0][m][1][1]);break;case 1:g=Hme("\r",e[0][m][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}i+=g,m=-1}h.push(i+Dwe[b[0]]+a);break;case"PtgIsect":a=h.pop(),i=h.pop(),h.push(i+" "+a);break;case"PtgUnion":a=h.pop(),i=h.pop(),h.push(i+","+a);break;case"PtgRange":a=h.pop(),i=h.pop(),h.push(i+":"+a);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=Eye(b[1][1],u,s),h.push(Cye(o,c));break;case"PtgRefN":o=n?Eye(b[1][1],n,s):b[1][1],h.push(Cye(o,c));break;case"PtgRef3d":d=b[1][1],o=Eye(b[1][2],u,s);f=Mwe(r,d,s);h.push(f+"!"+Cye(o,c));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],x=b[1][1];w||(w=0);var k=0==(w&=127)?[]:h.slice(-w);h.length-=w,"User"===x&&(x=k.shift()),h.push(x+"("+k.join(",")+")");break;case"PtgBool":h.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":h.push(b[1]);break;case"PtgNum":h.push(String(b[1]));break;case"PtgStr":h.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=Nye(b[1][1],n?{s:n}:u,s),h.push(Iye(l,s));break;case"PtgArea":l=Nye(b[1][1],u,s),h.push(Iye(l,s));break;case"PtgArea3d":d=b[1][1],l=b[1][2],f=Mwe(r,d,s),h.push(f+"!"+Iye(l,s));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgName":p=b[1][2];var S=(r.names||[])[p-1]||(r[0]||[])[p],T=S?S.Name:"SH33TJSNAME"+String(p);T&&"_xlfn."==T.slice(0,6)&&!s.xlfn&&(T=T.slice(6)),h.push(T);break;case"PtgNameX":var E,N=b[1][1];if(p=b[1][2],!(s.biff<=5)){var C="";if(14849==((r[N]||[])[0]||[])[0]||(1025==((r[N]||[])[0]||[])[0]?r[N][p]&&r[N][p].itab>0&&(C=r.SheetNames[r[N][p].itab-1]+"!"):C=r.SheetNames[p-1]+"!"),r[N]&&r[N][p])C+=r[N][p].Name;else if(r[0]&&r[0][p])C+=r[0][p].Name;else{var I=(Owe(r,N,s)||"").split(";;");I[p-1]?C=I[p-1]:C+="SH33TJSERRX"}h.push(C);break}N<0&&(N=-N),r[N]&&(E=r[N][p]),E||(E={Name:"SH33TJSERRY"}),h.push(E.Name);break;case"PtgParen":var _="(",A=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:_=Hme(" ",e[0][m][1][1])+_;break;case 3:_=Hme("\r",e[0][m][1][1])+_;break;case 4:A=Hme(" ",e[0][m][1][1])+A;break;case 5:A=Hme("\r",e[0][m][1][1])+A;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}h.push(_+h.pop()+A);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":h.push("#REF!");break;case"PtgExp":o={c:b[1][1],r:b[1][0]};var R={c:n.c,r:n.r};if(r.sharedf[Mye(o)]){var D=r.sharedf[Mye(o)];h.push(Pwe(D,u,R,r,s))}else{var O=!1;for(a=0;a!=r.arrayf.length;++a)if(i=r.arrayf[a],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){h.push(Pwe(i[1],u,R,r,s)),O=!0;break}O||h.push(b[1])}break;case"PtgArray":h.push("{"+Rwe(b[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=y;break;case"PtgMissArg":h.push("");break;case"PtgList":h.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(b))}if(3!=s.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][y][0])){var M=!0;switch((b=e[0][m])[1][0]){case 4:M=!1;case 0:g=Hme(" ",b[1][1]);break;case 5:M=!1;case 1:g=Hme("\r",b[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}h.push((M?g:"")+h.pop()+(M?"":g)),m=-1}}if(h.length>1&&s.WTF)throw new Error("bad formula stack");return h[0]}function Lwe(e,t,n,r,s){var a=nbe(t,n,s),i=function(e){if(null==e){var t=kye(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return pve("number"==typeof e?e:0)}(e.v),o=kye(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=kye(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return _fe([a,i,o,l])}function Fwe(e,t,n){var r=e.read_shift(4),s=Awe(e,r,n),a=e.read_shift(4);return[s,a>0?_we(e,a,s,n):null]}var $we=Fwe,zwe=Fwe,jwe=Fwe,Uwe=Fwe,Bwe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Vwe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Wwe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};var Hwe="undefined"!==typeof Map;function Gwe(e,t,n){var r=0,s=e.length;if(n){if(Hwe?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var a=Hwe?n.get(t):n[t];r<a.length;++r)if(e[a[r]].t===t)return e.Count++,a[r]}else for(;r<s;++r)if(e[r].t===t)return e.Count++,r;return e[s]={t:t},e.Count++,e.Unique++,n&&(Hwe?(n.has(t)||n.set(t,[]),n.get(t).push(s)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(s))),s}function qwe(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(Ibe=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=Abe(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=Rbe(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function Kwe(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function Ywe(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],s=60,a=e.length;if(null==r&&n.ssf)for(;s<392;++s)if(null==n.ssf[s]){wme(t.z,s),n.ssf[s]=t.z,n.revssf[t.z]=r=s;break}for(s=0;s!=a;++s)if(e[s].numFmtId===r)return s;return e[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function Xwe(e,t,n){if(e&&e["!ref"]){var r=Fye(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var Qwe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Jwe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Zwe(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var s="",a=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=wve[e.v];break;case"d":r&&r.cellDates?s=Bme(e.v,-1).toISOString():((e=Wme(e)).t="n",s=""+(e.v=Mme(Bme(e.v)))),"undefined"===typeof e.z&&(e.z=Ufe[14]);break;default:s=e.v}var o=mge("v",nge(s)),l={r:t},c=Ywe(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=mge("v",""+Gwe(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=a&&(e.t=a,e.v=i),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=yge("f",nge(e.f),u)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),yge("c",o,l)}function exe(e,t,n,r){var s,a=[Qme,yge("worksheet",null,{xmlns:Dge[0],"xmlns:r":Ige})],i=n.SheetNames[e],o="",l=n.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",u=Fye(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Lye(u)}r||(r={}),l["!comments"]=[];var h=[];!function(e,t,n,r,s){var a=!1,i={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(jEe){}a=!0,i.codeName=dge(nge(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+yge("outlinePr",null,c)}(a||o)&&(s[s.length]=yge("sheetPr",o,i))}(l,n,e,t,a),a[a.length]=yge("dimension",null,{ref:c}),a[a.length]=function(e,t,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),yge("sheetViews",yge("sheetView",null,s),{})}(0,0,0,n),t.sheetFormat&&(a[a.length]=yge("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(a[a.length]=function(e,t){for(var n,r=["<cols>"],s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=yge("col",null,qwe(s,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),a[s=a.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var n,r,s=[],a=[],i=Fye(e["!ref"]),o="",l="",c=[],u=0,h=0,d=e["!rows"],p=Array.isArray(e),f={r:l},m=-1;for(h=i.s.c;h<=i.e.c;++h)c[h]=Dye(h);for(u=i.s.r;u<=i.e.r;++u){for(a=[],l=Aye(u),h=i.s.c;h<=i.e.c;++h){n=c[h]+l;var g=p?(e[u]||[])[h]:e[n];void 0!==g&&null!=(o=Zwe(g,n,e,t))&&a.push(o)}(a.length>0||d&&d[u])&&(f={r:l},d&&d[u]&&((r=d[u]).hidden&&(f.hidden=1),m=-1,r.hpx?m=Mbe(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(f.ht=m,f.customHeight=1),r.level&&(f.outlineLevel=r.level)),s[s.length]=yge("row",a.join(""),f))}if(d)for(;u<d.length;++u)d&&d[u]&&(f={r:u+1},(r=d[u]).hidden&&(f.hidden=1),m=-1,r.hpx?m=Mbe(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(f.ht=m,f.customHeight=1),r.level&&(f.outlineLevel=r.level),s[s.length]=yge("row","",f));return s.join("")}(l,t,0,0),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),l["!protect"]&&(a[a.length]=function(e){var t={sheet:1};return Qwe.forEach((function(n){null!=e[n]&&e[n]&&(t[n]="1")})),Jwe.forEach((function(n){null==e[n]||e[n]||(t[n]="0")})),e.password&&(t.password=Ebe(e.password).toString(16).toUpperCase()),yge("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(a[a.length]=function(e,t,n,r){var s="string"==typeof e.ref?e.ref:Lye(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=Pye(s);i.s.r==i.e.r&&(i.e.r=Pye(t["!ref"]).e.r,s=Lye(i));for(var o=0;o<a.length;++o){var l=a[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),yge("autoFilter",null,{ref:s})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(a[a.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+Lye(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var d,p,f=-1,m=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach((function(e){e[1].Target&&(d={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=Cve(r,-1,nge(e[1].Target).replace(/#.*$/,""),Tve.HLINK),d["r:id"]="rId"+m),(f=e[1].Target.indexOf("#"))>-1&&(d.location=nge(e[1].Target.slice(f+1))),e[1].Tooltip&&(d.tooltip=nge(e[1].Tooltip)),a[a.length]=yge("hyperlink",null,d))})),a[a.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(a[a.length]=(Kwe(p=l["!margins"]),yge("pageMargins",null,p))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(a[a.length]=mge("ignoredErrors",yge("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(m=Cve(r,-1,"../drawings/drawing"+(e+1)+".xml",Tve.DRAW),a[a.length]=yge("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=h),l["!comments"].length>0&&(m=Cve(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Tve.VML),a[a.length]=yge("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function txe(e,t,n,r){var s=function(e,t,n){var r=kye(145),s=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var a=320;s.hpx?a=20*Mbe(s.hpx):s.hpt&&(a=20*s.hpt),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,d=-1,p=u<<10;p<u+1<<10;++p)c.c=p,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[Mye(c)])&&(h<0&&(h=p),d=p);h<0||(++o,r.write_shift(4,h),r.write_shift(4,d))}var f=r.l;return r.l=l,r.write_shift(4,o),r.l=f,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(s.length>17||(t["!rows"]||[])[r])&&Tye(e,0,s)}var nxe=uve,rxe=hve;function sxe(e){return[Jye(e),dve(e),"n"]}var axe=uve,ixe=hve;var oxe=["left","right","top","bottom","header","footer"];function lxe(e,t,n,r,s,a,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=Wme(t)).z=t.z||Ufe[14],t.v=Mme(Bme(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:n,c:r};switch(l.s=Ywe(s.cellXfs,t,s),t.l&&a["!links"].push([Mye(l),t.l]),t.c&&a["!comments"].push([Mye(l),t.c]),t.t){case"s":case"str":return s.bookSST?(o=Gwe(s.Strings,t.v,s.revStrings),l.t="s",l.v=o,i?Tye(e,18,function(e,t,n){return null==n&&(n=kye(8)),Zye(t,n),n.write_shift(4,t.v),n}(0,l)):Tye(e,7,function(e,t,n){return null==n&&(n=kye(12)),Qye(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",i?Tye(e,17,function(e,t,n){return null==n&&(n=kye(8+4*e.v.length)),Zye(t,n),Hye(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):Tye(e,6,function(e,t,n){return null==n&&(n=kye(12+4*e.v.length)),Qye(t,n),Hye(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?Tye(e,13,function(e,t,n){return null==n&&(n=kye(8)),Zye(t,n),lve(e.v,n),n}(t,l)):Tye(e,2,function(e,t,n){return null==n&&(n=kye(12)),Qye(t,n),lve(e.v,n),n}(t,l)):i?Tye(e,16,function(e,t,n){return null==n&&(n=kye(12)),Zye(t,n),pve(e.v,n),n}(t,l)):Tye(e,5,function(e,t,n){return null==n&&(n=kye(16)),Qye(t,n),pve(e.v,n),n}(t,l)),!0;case"b":return l.t="b",i?Tye(e,15,function(e,t,n){return null==n&&(n=kye(5)),Zye(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):Tye(e,4,function(e,t,n){return null==n&&(n=kye(9)),Qye(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",i?Tye(e,14,function(e,t,n){return null==n&&(n=kye(8)),Zye(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):Tye(e,3,function(e,t,n){return null==n&&(n=kye(9)),Qye(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return i?Tye(e,12,function(e,t,n){return null==n&&(n=kye(4)),Zye(t,n)}(0,l)):Tye(e,1,function(e,t,n){return null==n&&(n=kye(8)),Qye(t,n)}(0,l)),!0}function cxe(e,t){var n,r;t&&t["!merges"]&&(Tye(e,177,(n=t["!merges"].length,null==r&&(r=kye(4)),r.write_shift(4,n),r)),t["!merges"].forEach((function(t){Tye(e,176,ixe(t))})),Tye(e,178))}function uxe(e,t){t&&t["!cols"]&&(Tye(e,390),t["!cols"].forEach((function(t,n){t&&Tye(e,60,function(e,t,n){null==n&&(n=kye(18));var r=qwe(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var s=0;return t.hidden&&(s|=1),"number"==typeof r.width&&(s|=2),t.level&&(s|=t.level<<8),n.write_shift(2,s),n}(n,t))})),Tye(e,391))}function hxe(e,t){t&&t["!ref"]&&(Tye(e,648),Tye(e,649,function(e){var t=kye(24);return t.write_shift(4,4),t.write_shift(4,1),hve(e,t),t}(Fye(t["!ref"]))),Tye(e,650))}function dxe(e,t,n){t["!links"].forEach((function(t){if(t[1].Target){var r=Cve(n,-1,t[1].Target.replace(/#.*$/,""),Tve.HLINK);Tye(e,494,function(e,t){var n=kye(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));hve({s:Oye(e[0]),e:Oye(e[0])},n),ive("rId"+t,n);var r=e[1].Target.indexOf("#");return Hye((-1==r?"":e[1].Target.slice(r+1))||"",n),Hye(e[1].Tooltip||"",n),Hye("",n),n.slice(0,n.l)}(t,r))}})),delete t["!links"]}function pxe(e,t,n){Tye(e,133),Tye(e,137,function(e,t,n){null==n&&(n=kye(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),Tye(e,138),Tye(e,134)}function fxe(e,t){var n,r;t["!protect"]&&Tye(e,535,(n=t["!protect"],null==r&&(r=kye(66)),r.write_shift(2,n.password?Ebe(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)})),r))}function mxe(e,t,n,r){var s=Sye(),a=n.SheetNames[e],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(jEe){}var l,c,u=Fye(i["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Tye(s,129),(n.vbaraw||i["!outline"])&&Tye(s,147,function(e,t,n){null==n&&(n=kye(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return fve({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),tve(e,n),n.slice(0,n.l)}(o,i["!outline"])),Tye(s,148,rxe(u)),pxe(s,0,n.Workbook),uxe(s,i),function(e,t,n,r){var s,a=Fye(t["!ref"]||"A1"),i="",o=[];Tye(e,145);var l=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=c;++u){i=Aye(u),txe(e,t,a,u);var h=!1;if(u<=a.e.r)for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(o[d]=Dye(d)),s=o[d]+i;var p=l?(t[u]||[])[d]:t[s];h=!!p&&lxe(e,p,u,d,r,t,h)}}Tye(e,146)}(s,i,0,t),fxe(s,i),function(e,t,n,r){if(t["!autofilter"]){var s=t["!autofilter"],a="string"===typeof s.ref?s.ref:Lye(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=Pye(a);o.s.r==o.e.r&&(o.e.r=Pye(t["!ref"]).e.r,a=Lye(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Tye(e,161,hve(Fye(a))),Tye(e,162)}}(s,i,n,e),cxe(s,i),dxe(s,i,r),i["!margins"]&&Tye(s,476,(l=i["!margins"],null==c&&(c=kye(48)),Kwe(l),oxe.forEach((function(e){pve(l[e],c)})),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||hxe(s,i),function(e,t,n,r){if(t["!comments"].length>0){var s=Cve(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Tve.VML);Tye(e,551,ive("rId"+s)),t["!legacy"]=s}}(s,i,e,r),Tye(s,130),s.end()}var gxe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var yxe="][*?/\\".split("");function vxe(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return yxe.forEach((function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}})),n}function bxe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,n){e.forEach((function(r,s){vxe(r);for(var a=0;a<s;++a)if(r==e[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=t&&t[s]&&t[s].CodeName||r;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}}))}(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)Xwe(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}function wxe(e){var t=[Qme];t[t.length]=yge("workbook",null,{xmlns:Dge[0],"xmlns:r":Ige});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(gxe.forEach((function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])})),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=yge("workbookPr",null,r);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&s[a]&&s[a].Hidden;++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:nge(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=yge("sheet",null,i)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach((function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=yge("definedName",nge(e.Ref),n))})),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function xxe(e,t){return t||(t=kye(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),ive(e.strRelID,t),Hye(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function kxe(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,s=t.Workbook.Sheets,a=0,i=-1,o=-1;a<s.length;++a)!s[a]||!s[a].Hidden&&-1==i?i=a:1==s[a].Hidden&&-1==o&&(o=a);if(!(o>i))Tye(e,135),Tye(e,158,(n=i,r||(r=kye(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),Tye(e,136)}}function Sxe(e,t){var n=Sye();return Tye(n,131),Tye(n,128,function(e,t){t||(t=kye(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return Hye("SheetJS",t),Hye(ofe.version,t),Hye(ofe.version,t),Hye("7262",t),t.length>t.l?t.slice(0,t.l):t}()),Tye(n,153,function(e,t){t||(t=kye(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),tve(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),kxe(n,e),function(e,t){Tye(e,143);for(var n=0;n!=t.SheetNames.length;++n)Tye(e,156,xxe({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));Tye(e,144)}(n,e),Tye(n,132),n.end()}function Txe(e,t,n,r,s){return(".bin"===t.slice(-4)?mxe:exe)(e,n,r,s)}function Exe(e,t,n){return(".bin"===t.slice(-4)?swe:twe)(e,n)}function Nxe(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return _me(Fve).map((function(e){for(var t=0;t<Ave.length;++t)if(Ave[t][1]==e)return Ave[t];for(t=0;t<Ove.length;++t)if(Ove[t][1]==e)return Ove[t];throw e})).forEach((function(r){if(null!=e[r[1]]){var s=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof s?s=String(s):!0===s||!1===s?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(mge(Fve[r[1]]||r[1],s))}})),yge("DocumentProperties",n.join(""),{xmlns:Oge})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return e&&_me(e).forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<Ave.length;++r)if(t==Ave[r][1])return;for(r=0;r<Ove.length;++r)if(t==Ove[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var a=e[t],i="string";"number"==typeof a?(i="float",a=String(a)):!0===a||!1===a?(i="boolean",a=a?"1":"0"):a=String(a),s.push(yge(rge(t),a,{"dt:dt":i}))}})),t&&_me(t).forEach((function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],a="string";"number"==typeof r?(a="float",r=String(r)):!0===r||!1===r?(a="boolean",r=r?"1":"0"):r instanceof Date?(a="dateTime.tz",r=r.toISOString()):r=String(r),s.push(yge(rge(n),r,{"dt:dt":a}))}})),"<"+r+' xmlns="'+Oge+'">'+s.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function Cxe(e){return yge("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+lwe(e.Ref,{r:0,c:0})})}function Ixe(e,t,n,r,s,a,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+nge(lwe(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=Oye(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=nge(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=nge(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==i.c&&c[u].s.r==i.r&&(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",d="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",d=String(e.v);break;case"b":h="Boolean",d=e.v?"1":"0";break;case"e":h="Error",d=wve[e.v];break;case"d":h="DateTime",d=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||Ufe[14]);break;case"s":h="String",d=((e.v||"")+"").replace(ege,(function(e){return Zme[e]})).replace(sge,(function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}))}var p=Ywe(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var f=null!=e.v?d:"",m="z"==e.t?"":'<Data ss:Type="'+h+'">'+f+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map((function(e){var t=yge("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return yge("Comment",t,{"ss:Author":e.a})})).join("")),yge("Cell",m,o)}function _xe(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Pbe(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Axe(e,t,n){var r=[],s=n.SheetNames[e],a=n.Sheets[s],i=a?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(Cxe(o)))}return a.join("")}(a,0,e,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?function(e,t){if(!e["!ref"])return"";var n=Fye(e["!ref"]),r=e["!merges"]||[],s=0,a=[];e["!cols"]&&e["!cols"].forEach((function(e,t){Dbe(e);var n=!!e.width,r=qwe(t,e),s={"ss:Index":t+1};n&&(s["ss:Width"]=_be(r.width)),e.hidden&&(s["ss:Hidden"]="1"),a.push(yge("Column",null,s))}));for(var i=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var l=[_xe(o,(e["!rows"]||[])[o])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(s=0;s!=r.length;++s)if(!(r[s].s.c>c)&&!(r[s].s.r>o)&&!(r[s].e.c<c)&&!(r[s].e.r<o)){r[s].s.c==c&&r[s].s.r==o||(u=!0);break}if(!u){var h={r:o,c:c},d=Mye(h),p=i?(e[o]||[])[c]:e[d];l.push(Ixe(p,d,e,t,0,0,h))}}l.push("</Row>"),l.length>2&&a.push(l.join(""))}return a.join("")}(a,t):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(yge("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(yge("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(yge("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(yge("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&(!r.Workbook.Sheets[a]||r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(mge("ProtectContents","True")),e["!protect"].objects&&s.push(mge("ProtectObjects","True")),e["!protect"].scenarios&&s.push(mge("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||s.push(mge("EnableSelection","UnlockedCells")):s.push(mge("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(t){e["!protect"][t[0]]&&s.push("<"+t[1]+"/>")}))),0==s.length?"":yge("WorksheetOptions",s.join(""),{xmlns:Mge})}(a,0,e,n)),r.join("")}function Rxe(e,t){t||(t={}),e.SSF||(e.SSF=Wme(Ufe)),e.SSF&&(kme(),xme(e.SSF),t.revssf=Dme(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Ywe(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Nxe(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(yge("Worksheet",Axe(r,t,e),{"ss:Name":nge(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach((function(e,t){var r=[];r.push(yge("NumberFormat",null,{"ss:Format":nge(Ufe[e.numFmtId])}));var s={"ss:ID":"s"+(21+t)};n.push(yge("Style",r.join(""),s))})),yge("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var s=t[r];null==s.Sheet&&(s.Name.match(/^_xlfn\./)||n.push(Cxe(s)))}return yge("Names",n.join(""))}(e),Qme+yge("Workbook",n.join(""),{xmlns:Pge,"xmlns:o":Oge,"xmlns:x":Mge,"xmlns:ss":Pge,"xmlns:dt":Lge,"xmlns:html":zge})}var Dxe="e0859ff2f94f6810ab9108002b27b3d9",Oxe="02d5cdd59c2e1b10939708002b2cf9ae",Mxe="05d5cdd59c2e1b10939708002b2cf9ae";function Pxe(e,t){var n=t||{},r=Eme.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Eme.utils.cfb_add(r,s,Gxe(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],s=[],a=[],i=0,o=Ame(gve,"n"),l=Ame(yve,"n");if(e.Props)for(n=_me(e.Props),i=0;i<n.length;++i)(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?s:a).push([n[i],e.Props[n[i]]]);if(e.Custprops)for(n=_me(e.Custprops),i=0;i<n.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},n[i])||(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?s:a).push([n[i],e.Custprops[n[i]]]);var c=[];for(i=0;i<a.length;++i)zve.indexOf(a[i][0])>-1||Mve.indexOf(a[i][0])>-1||null!=a[i][1]&&c.push(a[i]);s.length&&Eme.utils.cfb_add(t,"/\x05SummaryInformation",Bve(s,Dxe,l,yve)),(r.length||c.length)&&Eme.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Bve(r,Oxe,o,gve,c.length?c:null,Mxe))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach((function(n,r){if(0!=r){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==s.slice(-1)&&Eme.utils.cfb_add(e,s,t.FileIndex[r].content)}}))}(r,Eme.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var Lxe={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=r,7&a&&(n.level=7&a),16&a&&(n.hidden=!0),32&a&&(n.hpt=s/20),n}},1:{f:function(e){return[Xye(e)]}},2:{f:function(e){return[Xye(e),ove(e),"n"]}},3:{f:function(e){return[Xye(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Xye(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Xye(e),dve(e),"n"]}},6:{f:function(e){return[Xye(e),Wye(e),"str"]}},7:{f:function(e){return[Xye(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,s=Xye(e);s.r=n["!row"];var a=[s,Wye(e),"str"];if(n.cellFormula){e.l+=2;var i=zwe(e,r-e.l,n);a[3]=Pwe(i,0,s,n.supbooks,n)}else e.l=r;return a}},9:{f:function(e,t,n){var r=e.l+t,s=Xye(e);s.r=n["!row"];var a=[s,dve(e),"n"];if(n.cellFormula){e.l+=2;var i=zwe(e,r-e.l,n);a[3]=Pwe(i,0,s,n.supbooks,n)}else e.l=r;return a}},10:{f:function(e,t,n){var r=e.l+t,s=Xye(e);s.r=n["!row"];var a=[s,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var i=zwe(e,r-e.l,n);a[3]=Pwe(i,0,s,n.supbooks,n)}else e.l=r;return a}},11:{f:function(e,t,n){var r=e.l+t,s=Xye(e);s.r=n["!row"];var a=[s,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var i=zwe(e,r-e.l,n);a[3]=Pwe(i,0,s,n.supbooks,n)}else e.l=r;return a}},12:{f:function(e){return[Jye(e)]}},13:{f:function(e){return[Jye(e),ove(e),"n"]}},14:{f:function(e){return[Jye(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Jye(e),e.read_shift(1),"b"]}},16:{f:sxe},17:{f:function(e){return[Jye(e),Wye(e),"str"]}},18:{f:function(e){return[Jye(e),e.read_shift(4),"s"]}},19:{f:qye},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=sve(e),i=jwe(e,0,n),o=nve(e);e.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var s=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(r.underline=a);var i=e.read_shift(1);i>0&&(r.family=i);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=bve[r];l&&(t.rgb=Cbe(l));break;case 2:t.rgb=Cbe([a,i,o]);break;case 3:t.theme=r}return 0!=s&&(t.tint=s>0?s/32767:s/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=Wye(e),r}},44:{f:function(e,t){return[e.read_shift(2),Wye(e)]}},45:{f:Ube},46:{f:Hbe},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),s=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:s}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:pbe},62:{f:function(e){return[Xye(e),qye(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Mye(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xye,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=eve(e,t-19),n}},148:{f:nxe,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var s=t>8?Wye(e):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=ave(e,t-8),n.name=Wye(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:uve},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:axe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Wye(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ave},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ube},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,s=cve(e),a=e.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=$we(e,r-e.l,n);i[1]=o}else e.l=r;return i}},427:{f:function(e,t,n){var r=e.l+t,s=[uve(e,16)];if(n.cellFormula){var a=Uwe(e,r-e.l,n);s[1]=a,e.l=r}else e.l=r;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return oxe.forEach((function(n){t[n]=dve(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=uve(e,16),s=nve(e),a=Wye(e),i=Wye(e),o=Wye(e);e.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ave},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:rwe},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=uve(e,16);return t.rfx=n.s,t.ref=Mye(n.s),e.l+=16,t}},636:{T:-1},637:{f:Kye},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:Wye(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Fxe(e,t,n,r){var s=t;if(!isNaN(s)){var a=r||(n||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&iye(n)&&e.push(n)}}function $xe(e,t,n){return e||(e=kye(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function zxe(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var s="d"==t.t?Mme(Bme(t.v)):t.v;return void(s==(0|s)&&s>=0&&s<65536?Fxe(e,2,function(e,t,n){var r=kye(9);return $xe(r,e,t),r.write_shift(2,n),r}(n,r,s)):Fxe(e,3,function(e,t,n){var r=kye(15);return $xe(r,e,t),r.write_shift(8,n,"f"),r}(n,r,s)));case"b":case"e":return void Fxe(e,5,function(e,t,n,r){var s=kye(9);return $xe(s,e,t),qve(n,r||"b",s),s}(n,r,t.v,t.t));case"s":case"str":return void Fxe(e,4,function(e,t,n){var r=kye(8+2*n.length);return $xe(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}Fxe(e,1,$xe(null,n,r))}function jxe(e,t){var n=t||{};for(var r=Sye(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==n.sheet&&(s=a);if(0==s&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Fxe(r,4==n.biff?1033:3==n.biff?521:9,ibe(0,16,n)),function(e,t,n,r){var s,a=Array.isArray(t),i=Fye(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=Lye(i)}for(var c=i.s.r;c<=i.e.r;++c){o=Aye(c);for(var u=i.s.c;u<=i.e.c;++u){c===i.s.r&&(l[u]=Dye(u)),s=l[u]+o;var h=a?(t[c]||[])[u]:t[s];h&&zxe(e,h,c,u)}}}(r,e.Sheets[e.SheetNames[s]],0,n),Fxe(r,10),r.end()}function Uxe(e,t,n){Fxe(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,s=kye(r?15+n.length:16+2*n.length);return s.write_shift(2,20*(e.sz||12)),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function Bxe(e,t){if(t){var n=0;t.forEach((function(t,r){++n<=256&&t&&Fxe(e,125,function(e,t){var n=kye(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(qwe(r,t),r))}))}}function Vxe(e,t,n,r,s){var a=16+Ywe(s.cellXfs,t,s);if(null!=t.v||t.bf)if(t.bf)Fxe(e,6,Lwe(t,n,r,0,a));else switch(t.t){case"d":case"n":Fxe(e,515,function(e,t,n,r){var s=kye(14);return nbe(e,t,r,s),pve(n,s),s}(n,r,"d"==t.t?Mme(Bme(t.v)):t.v,a));break;case"b":case"e":Fxe(e,517,function(e,t,n,r,s,a){var i=kye(8);return nbe(e,t,r,i),qve(n,a,i),i}(n,r,t.v,a,0,t.t));break;case"s":case"str":if(s.bookSST)Fxe(e,253,function(e,t,n,r){var s=kye(10);return nbe(e,t,r,s),s.write_shift(4,n),s}(n,r,Gwe(s.Strings,t.v,s.revStrings),a));else Fxe(e,516,function(e,t,n,r,s){var a=!s||8==s.biff,i=kye(+a+8+(1+a)*n.length);return nbe(e,t,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}(n,r,(t.v||"").slice(0,255),a,s));break;default:Fxe(e,513,nbe(n,r,a))}else Fxe(e,513,nbe(n,r,a))}function Wxe(e,t,n){var r,s=Sye(),a=n.SheetNames[e],i=n.Sheets[a]||{},o=(n||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=8==t.biff,h="",d=[],p=Fye(i["!ref"]||"A1"),f=u?65536:16384;if(p.e.c>255||p.e.r>=f){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,f-1)}Fxe(s,2057,ibe(0,16,t)),Fxe(s,13,Gve(1)),Fxe(s,12,Gve(100)),Fxe(s,15,Wve(!0)),Fxe(s,17,Wve(!1)),Fxe(s,16,pve(.001)),Fxe(s,95,Wve(!0)),Fxe(s,42,Wve(!1)),Fxe(s,43,Wve(!1)),Fxe(s,130,Gve(1)),Fxe(s,128,function(e){var t=kye(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),Fxe(s,131,Wve(!1)),Fxe(s,132,Wve(!1)),u&&Bxe(s,i["!cols"]),Fxe(s,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=kye(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(p,t)),u&&(i["!links"]=[]);for(var m=p.s.r;m<=p.e.r;++m){h=Aye(m);for(var g=p.s.c;g<=p.e.c;++g){m===p.s.r&&(d[g]=Dye(g)),r=d[g]+h;var y=c?(i[m]||[])[g]:i[r];y&&(Vxe(s,y,m,g,t),u&&y.l&&i["!links"].push([r,y.l]))}}var v=l.CodeName||l.name||a;return u&&Fxe(s,574,function(e){var t=kye(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&Fxe(s,229,function(e){var t=kye(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)abe(e[n],t);return t}(i["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];Fxe(e,440,hbe(r)),r[1].Tooltip&&Fxe(e,2048,dbe(r))}delete t["!links"]}(s,i),Fxe(s,442,Zve(v)),u&&function(e,t){var n=kye(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Fxe(e,2151,n),(n=kye(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),abe(Fye(t["!ref"]||"A1"),n),n.write_shift(4,4),Fxe(e,2152,n)}(s,i),Fxe(s,10),s.end()}function Hxe(e,t,n){var r=Sye(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=8==n.biff,l=5==n.biff;(Fxe(r,2057,ibe(0,5,n)),"xla"==n.bookType&&Fxe(r,135),Fxe(r,225,o?Gve(1200):null),Fxe(r,193,function(e,t){t||(t=kye(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&Fxe(r,191),l&&Fxe(r,192),Fxe(r,226),Fxe(r,92,function(e,t){var n=!t||8==t.biff,r=kye(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),Fxe(r,66,Gve(o?1200:1252)),o&&Fxe(r,353,Gve(0)),o&&Fxe(r,448),Fxe(r,317,function(e){for(var t=kye(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&Fxe(r,211),o&&e.vbaraw)&&Fxe(r,442,Zve(i.CodeName||"ThisWorkbook"));Fxe(r,156,Gve(17)),Fxe(r,25,Wve(!1)),Fxe(r,18,Wve(!1)),Fxe(r,19,Gve(0)),o&&Fxe(r,431,Wve(!1)),o&&Fxe(r,444,Gve(0)),Fxe(r,61,function(){var e=kye(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),Fxe(r,64,Wve(!1)),Fxe(r,141,Gve(0)),Fxe(r,34,Wve("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&ige(e.Workbook.WBProps.date1904)?"true":"false"}(e))),Fxe(r,14,Wve(!0)),o&&Fxe(r,439,Wve(!1)),Fxe(r,218,Gve(0)),Uxe(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var s=r[0];s<=r[1];++s)null!=t[s]&&Fxe(e,1054,lbe(s,t[s],n))}))}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)Fxe(e,224,cbe({numFmtId:0,style:!0},0,t));t.cellXfs.forEach((function(n){Fxe(e,224,cbe(n,0,t))}))}(r,n),o&&Fxe(r,352,Wve(!1));var c,u=r.end(),h=Sye();o&&Fxe(h,140,(c||(c=kye(4)),c.write_shift(2,1),c.write_shift(2,1),c)),o&&n.Strings&&function(e,t,n,r){var s=r||(n||[]).length||0;if(s<=8224)return Fxe(e,t,n,s);var a=t;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,a),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<s;){for((u=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(h,252,function(e){var t=kye(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=Yve(e[r]);var s=_fe([t].concat(n));return s.parts=[t.length].concat(n.map((function(e){return e.length}))),s}(n.Strings)),Fxe(h,10);var d=h.end(),p=Sye(),f=0,m=0;for(m=0;m<e.SheetNames.length;++m)f+=(o?12:11)+(o?2:1)*e.SheetNames[m].length;var g=u.length+f+d.length;for(m=0;m<e.SheetNames.length;++m){Fxe(p,133,obe({pos:g,hs:(a[m]||{}).Hidden||0,dt:0,name:e.SheetNames[m]},n)),g+=t[m].length}var y=p.end();if(f!=y.length)throw new Error("BS8 "+f+" != "+y.length);var v=[];return u.length&&v.push(u),y.length&&v.push(y),d.length&&v.push(d),_fe(v)}function Gxe(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])Pye(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var s=t||{};switch(s.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=Wme(Ufe)),e&&e.SSF&&(kme(),xme(e.SSF),n.revssf=Dme(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,kke(n),n.cellXfs=[],Ywe(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)r[r.length]=Wxe(s,n,e);return r.unshift(Hxe(e,r,n)),_fe(r)}(e,t);case 4:case 3:case 2:return jxe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function qxe(e,t,n,r){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>n||s[c].s.c>i)&&!(s[c].e.r<n||s[c].e.c<i)){if(s[c].s.r<n||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Mye({r:n,c:i}),h=r.dense?(e[n]||[])[i]:e[u],d=h&&null!=h.v&&(h.h||age(h.w||(zye(h),h.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?d='<span contenteditable="true">'+d+"</span>":h&&(p["data-t"]=h&&h.t||"z",null!=h.v&&(p["data-v"]=h.v),null!=h.z&&(p["data-z"]=h.z),h.l&&"#"!=(h.l.Target||"#").charAt(0)&&(d='<a href="'+h.l.Target+'">'+d+"</a>")),p.id=(r.id||"sjs")+"-"+u,a.push(yge("td",d,p))}}return"<tr>"+a.join("")+"</tr>"}var Kxe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Yxe="</body></html>";function Xxe(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function Qxe(e,t){var n=t||{},r=null!=n.header?n.header:Kxe,s=null!=n.footer?n.footer:Yxe,a=[r],i=Pye(e["!ref"]);n.dense=Array.isArray(e),a.push(Xxe(0,0,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(qxe(e,i,o,n));return a.push("</table>"+s),a.join("")}function Jxe(e,t,n){var r=n||{};var s=0,a=0;if(null!=r.origin)if("number"==typeof r.origin)s=r.origin;else{var i="string"==typeof r.origin?Oye(r.origin):r.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var u=Pye(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==s&&(c.e.r=s=u.e.r+1)}var h=[],d=0,p=e["!rows"]||(e["!rows"]=[]),f=0,m=0,g=0,y=0,v=0,b=0;for(e["!cols"]||(e["!cols"]=[]);f<o.length&&m<l;++f){var w=o[f];if(eke(w)){if(r.display)continue;p[m]={hidden:!0}}var x=w.children;for(g=y=0;g<x.length;++g){var k=x[g];if(!r.display||!eke(k)){var S=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):pge(k.innerHTML),T=k.getAttribute("data-z")||k.getAttribute("z");for(d=0;d<h.length;++d){var E=h[d];E.s.c==y+a&&E.s.r<m+s&&m+s<=E.e.r&&(y=E.e.c+1-a,d=-1)}b=+k.getAttribute("colspan")||1,((v=+k.getAttribute("rowspan")||1)>1||b>1)&&h.push({s:{r:m+s,c:y+a},e:{r:m+s+(v||1)-1,c:y+a+(b||1)-1}});var N={t:"s",v:S},C=k.getAttribute("data-t")||k.getAttribute("t")||"";null!=S&&(0==S.length?N.t=C||"z":r.raw||0==S.trim().length||"s"==C||("TRUE"===S?N={t:"b",v:!0}:"FALSE"===S?N={t:"b",v:!1}:isNaN(Gme(S))?isNaN(Kme(S).getDate())||(N={t:"d",v:Bme(S)},r.cellDates||(N={t:"n",v:Mme(N.v)}),N.z=r.dateNF||Ufe[14]):N={t:"n",v:Gme(S)})),void 0===N.z&&null!=T&&(N.z=T);var I="",_=k.getElementsByTagName("A");if(_&&_.length)for(var A=0;A<_.length&&(!_[A].hasAttribute("href")||"#"==(I=_[A].getAttribute("href")).charAt(0));++A);I&&"#"!=I.charAt(0)&&(N.l={Target:I}),r.dense?(e[m+s]||(e[m+s]=[]),e[m+s][y+a]=N):e[Mye({c:y+a,r:m+s})]=N,c.e.c<y+a&&(c.e.c=y+a),y+=b}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,m-1+s),e["!ref"]=Lye(c),m>=l&&(e["!fullref"]=Lye((c.e.r=o.length-f+m-1+s,c))),e}function Zxe(e,t){return Jxe((t||{}).dense?[]:{},e,t)}function eke(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var tke=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+gge({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Qme+t}}(),nke=function(){var e="          <table:table-cell />\n",t=function(t,n,r){var s=[];s.push('      <table:table table:name="'+nge(n.SheetNames[r])+'" table:style-name="ta1">\n');var a=0,i=0,o=Pye(t["!ref"]||"A1"),l=t["!merges"]||[],c=0,u=Array.isArray(t);if(t["!cols"])for(i=0;i<=o.e.c;++i)s.push("        <table:table-column"+(t["!cols"][i]?' table:style-name="co'+t["!cols"][i].ods+'"':"")+"></table:table-column>\n");var h="",d=t["!rows"]||[];for(a=0;a<o.s.r;++a)h=d[a]?' table:style-name="ro'+d[a].ods+'"':"",s.push("        <table:table-row"+h+"></table:table-row>\n");for(;a<=o.e.r;++a){for(h=d[a]?' table:style-name="ro'+d[a].ods+'"':"",s.push("        <table:table-row"+h+">\n"),i=0;i<o.s.c;++i)s.push(e);for(;i<=o.e.c;++i){var p=!1,f={},m="";for(c=0;c!=l.length;++c)if(!(l[c].s.c>i)&&!(l[c].s.r>a)&&!(l[c].e.c<i)&&!(l[c].e.r<a)){l[c].s.c==i&&l[c].s.r==a||(p=!0),f["table:number-columns-spanned"]=l[c].e.c-l[c].s.c+1,f["table:number-rows-spanned"]=l[c].e.r-l[c].s.r+1;break}if(p)s.push("          <table:covered-table-cell/>\n");else{var g=Mye({r:a,c:i}),y=u?(t[a]||[])[i]:t[g];if(y&&y.f&&(f["table:formula"]=nge(("of:="+y.f.replace(owe,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")),y.F&&y.F.slice(0,g.length)==g)){var v=Pye(y.F);f["table:number-matrix-columns-spanned"]=v.e.c-v.s.c+1,f["table:number-matrix-rows-spanned"]=v.e.r-v.s.r+1}if(y){switch(y.t){case"b":m=y.v?"TRUE":"FALSE",f["office:value-type"]="boolean",f["office:boolean-value"]=y.v?"true":"false";break;case"n":m=y.w||String(y.v||0),f["office:value-type"]="float",f["office:value"]=y.v||0;break;case"s":case"str":m=null==y.v?"":y.v,f["office:value-type"]="string";break;case"d":m=y.w||Bme(y.v).toISOString(),f["office:value-type"]="date",f["office:date-value"]=Bme(y.v).toISOString(),f["table:style-name"]="ce1";break;default:s.push(e);continue}var b=nge(m).replace(/  +/g,(function(e){return'<text:s text:c="'+e.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(y.l&&y.l.Target){var w=y.l.Target;"#"==(w="#"==w.charAt(0)?"#"+w.slice(1).replace(/\./,"!"):w).charAt(0)||w.match(/^\w+:/)||(w="../"+w),b=yge("text:a",b,{"xlink:href":w.replace(/&/g,"&amp;")})}s.push("          "+yge("table:table-cell",yge("text:p",b,{}),f)+"\n")}else s.push(e)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,n){var r=[Qme],s=gge({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),a=gge({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==n.bookType?(r.push("<office:document"+s+a+">\n"),r.push(_ve().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+s+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var s=t["!cols"][r];if(null==s.width&&null==s.wpx&&null==s.wch)continue;Dbe(s),s.ods=n;var a=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}}));var r=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var s=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}})),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)r.push(t(e.Sheets[e.SheetNames[i]],e,i));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==n.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function rke(e,t){if("fods"==t.bookType)return nke(e,t);var n=Xme(),r="",s=[],a=[];return Yme(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Yme(n,r="content.xml",nke(e,t)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),Yme(n,r="styles.xml",tke(e,t)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),Yme(n,r="meta.xml",Qme+_ve()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),Yme(n,r="manifest.rdf",function(e){var t,n,r=[Qme];r.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var s=0;s!=e.length;++s)r.push(Ive(e[s][0],e[s][1])),r.push((t="",n=e[s][0],['  <rdf:Description rdf:about="'+t+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+'"/>\n',"  </rdf:Description>\n"].join("")));return r.push(Ive("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}(a)),s.push([r,"application/rdf+xml"]),Yme(n,r="META-INF/manifest.xml",function(e){var t=[Qme];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(s)),n}function ske(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ake(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):Nfe(dge(e))}function ike(e){var t=e.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(e,r),r+=e.length})),n}function oke(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function lke(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function cke(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function uke(e){for(var t=[],n=[0];n[0]<e.length;){var r,s=n[0],a=oke(e,n),i=7&a,o=0;if(0==(a=Math.floor(a/8)))break;switch(i){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=oke(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var c={data:r,type:i};null==t[a]?t[a]=[c]:t[a].push(c)}return t}function hke(e){var t=[];return e.forEach((function(e,n){e.forEach((function(e){e.data&&(t.push(lke(8*n+e.type)),2==e.type&&t.push(lke(e.data.length)),t.push(e.data))}))})),ike(t)}function dke(e){for(var t,n=[],r=[0];r[0]<e.length;){var s=oke(e,r),a=uke(e.slice(r[0],r[0]+s));r[0]+=s;var i={id:cke(a[1][0].data),messages:[]};a[2].forEach((function(t){var n=uke(t.data),s=cke(n[3][0].data);i.messages.push({meta:n,data:e.slice(r[0],r[0]+s)}),r[0]+=s})),(null==(t=a[3])?void 0:t[0])&&(i.merge=cke(a[3][0].data)>>>0>0),n.push(i)}return n}function pke(e){var t=[];return e.forEach((function(e){var n=[];n[1]=[{data:lke(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:lke(+!!e.merge),type:0}]);var r=[];e.messages.forEach((function(e){r.push(e.data),e.meta[3]=[{type:0,data:lke(e.data.length)}],n[2].push({data:hke(e.meta),type:2})}));var s=hke(n);t.push(lke(s.length)),t.push(s),r.forEach((function(e){return t.push(e)}))})),ike(t)}function fke(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=oke(t,n),s=[];n[0]<t.length;){var a=3&t[n[0]];if(0!=a){var i=0,o=0;if(1==a?(o=4+(t[n[0]]>>2&7),i=(224&t[n[0]++])<<3,i|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==a?(i=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(i=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),s=[ike(s)],0==i)throw new Error("Invalid offset 0");if(i>s[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(s.push(s[0].slice(-i)),o-=i;o>=s[s.length-1].length;)s.push(s[s.length-1]),o-=s[s.length-1].length;s.push(s[0].slice(-i,-i+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}s.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=ike(s);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function mke(e){for(var t=[],n=0;n<e.length;){var r=e[n++],s=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(fke(r,e.slice(n,n+s))),n+=s}if(n!==e.length)throw new Error("data is not a valid framed stream!");return ike(t)}function gke(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),s=new Uint8Array(4);t.push(s);var a=lke(r),i=a.length;t.push(a),r<=60?(i++,t.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),i+=r,s[0]=0,s[1]=255&i,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return ike(t)}function yke(e,t){var n=new Uint8Array(32),r=ske(n),s=12,a=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=255&s;e[t+15]|=n>=0?0:128}(n,s,e.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,a,!0),n.slice(0,s)}function vke(e,t){var n=new Uint8Array(32),r=ske(n),s=12,a=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,a,!0),n.slice(0,s)}function bke(e){return oke(uke(e)[1][0].data)}function wke(e,t,n){var r,s,a,i;if(!(null==(r=e[6])?void 0:r[0])||!(null==(s=e[7])?void 0:s[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(a=e[8])?void 0:a[0])?void 0:i.data)&&cke(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=ske(e[7][0].data),c=0,u=[],h=ske(e[4][0].data),d=0,p=[],f=0;f<t.length;++f)if(null!=t[f]){var m,g;switch(l.setUint16(2*f,c,!0),h.setUint16(2*f,d,!0),typeof t[f]){case"string":m=yke({t:"s",v:t[f]},n),g=vke({t:"s",v:t[f]},n);break;case"number":m=yke({t:"n",v:t[f]},n),g=vke({t:"n",v:t[f]},n);break;case"boolean":m=yke({t:"b",v:t[f]},n),g=vke({t:"b",v:t[f]},n);break;default:throw new Error("Unsupported value "+t[f])}u.push(m),c+=m.length,p.push(g),d+=g.length,++o}else l.setUint16(2*f,65535,!0),h.setUint16(2*f,65535);for(e[2][0].data=lke(o);f<e[7][0].data.length/2;++f)l.setUint16(2*f,65535,!0),h.setUint16(2*f,65535,!0);return e[6][0].data=ike(u),e[3][0].data=ike(p),o}function xke(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function kke(e){xke([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Ske(e,t){return"ods"==t.bookType?rke(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Pye(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Lye(r)));var a=Dke(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach((function(e){return e.forEach((function(e){"string"==typeof e&&i.push(e)}))}));var o={},l=[],c=Eme.read(t.numbers,{type:"base64"});c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&dke(mke(t.content)).forEach((function(e){l.push(e.id),o[e.id]={deps:[],location:n,type:cke(e.messages[0].meta[1][0].data)}}))})),l.sort((function(e,t){return e-t}));var u=l.filter((function(e){return e>1})).map((function(e){return[e,lke(e)]}));c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&dke(mke(t.content)).forEach((function(e){e.messages.forEach((function(t){u.forEach((function(t){e.messages.some((function(e){return 11006!=cke(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])}))&&o[t[0]].deps.push(e.id)}))}))}))}));for(var h,d=Eme.find(c,o[1].location),p=dke(mke(d.content)),f=0;f<p.length;++f){var m=p[f];1==m.id&&(h=m)}var g=bke(uke(h.messages[0].data)[1][0].data);for(p=dke(mke((d=Eme.find(c,o[g].location)).content)),f=0;f<p.length;++f)(m=p[f]).id==g&&(h=m);for(g=bke(uke(h.messages[0].data)[2][0].data),p=dke(mke((d=Eme.find(c,o[g].location)).content)),f=0;f<p.length;++f)(m=p[f]).id==g&&(h=m);for(g=bke(uke(h.messages[0].data)[2][0].data),p=dke(mke((d=Eme.find(c,o[g].location)).content)),f=0;f<p.length;++f)(m=p[f]).id==g&&(h=m);var y=uke(h.messages[0].data);y[6][0].data=lke(r.e.r+1),y[7][0].data=lke(r.e.c+1);for(var v=bke(y[46][0].data),b=Eme.find(c,o[v].location),w=dke(mke(b.content)),x=0;x<w.length&&w[x].id!=v;++x);if(w[x].id!=v)throw"Bad ColumnRowUIDMapArchive";var k=uke(w[x].messages[0].data);k[1]=[],k[2]=[],k[3]=[];for(var S=0;S<=r.e.c;++S){var T=[];T[1]=T[2]=[{type:0,data:lke(S+420690)}],k[1].push({type:2,data:hke(T)}),k[2].push({type:0,data:lke(S)}),k[3].push({type:0,data:lke(S)})}k[4]=[],k[5]=[],k[6]=[];for(var E=0;E<=r.e.r;++E)(T=[])[1]=T[2]=[{type:0,data:lke(E+726270)}],k[4].push({type:2,data:hke(T)}),k[5].push({type:0,data:lke(E)}),k[6].push({type:0,data:lke(E)});w[x].messages[0].data=hke(k),b.content=gke(pke(w)),b.size=b.content.length,delete y[46];var N=uke(y[4][0].data);N[7][0].data=lke(r.e.r+1);var C=bke(uke(N[1][0].data)[2][0].data);if((w=dke(mke((b=Eme.find(c,o[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";var I=uke(w[0].messages[0].data);for(E=0;E<a.length;++E){var _=uke(I[2][0].data);_[1][0].data=lke(E),_[4][0].data=lke(a[E].length),I[2][E]={type:I[2][0].type,data:hke(_)}}w[0].messages[0].data=hke(I),b.content=gke(pke(w)),b.size=b.content.length;var A=bke(N[2][0].data);if((w=dke(mke((b=Eme.find(c,o[A].location)).content)))[0].id!=A)throw"Bad HeaderStorageBucket";for(I=uke(w[0].messages[0].data),S=0;S<=r.e.c;++S)(_=uke(I[2][0].data))[1][0].data=lke(S),_[4][0].data=lke(r.e.r+1),I[2][S]={type:I[2][0].type,data:hke(_)};w[0].messages[0].data=hke(I),b.content=gke(pke(w)),b.size=b.content.length;var R=bke(N[4][0].data);!function(){for(var e,t=Eme.find(c,o[R].location),n=dke(mke(t.content)),r=0;r<n.length;++r){var s=n[r];s.id==R&&(e=s)}var a=uke(e.messages[0].data);a[3]=[];var l=[];i.forEach((function(e,t){l[1]=[{type:0,data:lke(t)}],l[2]=[{type:0,data:lke(1)}],l[3]=[{type:2,data:ake(e)}],a[3].push({type:2,data:hke(l)})})),e.messages[0].data=hke(a);var u=gke(pke(n));t.content=u,t.size=t.content.length}();var D=uke(N[3][0].data),O=D[1][0];delete D[2];var M=uke(O.data),P=bke(M[2][0].data);!function(){for(var e,t=Eme.find(c,o[P].location),n=dke(mke(t.content)),s=0;s<n.length;++s){var l=n[s];l.id==P&&(e=l)}var u=uke(e.messages[0].data);delete u[6],delete D[7];var h=new Uint8Array(u[5][0].data);u[5]=[];for(var d=0,p=0;p<=r.e.r;++p){var f=uke(h);d+=wke(f,a[p],i),f[1][0].data=lke(p),u[5].push({data:hke(f),type:2})}u[1]=[{type:0,data:lke(r.e.c+1)}],u[2]=[{type:0,data:lke(r.e.r+1)}],u[3]=[{type:0,data:lke(d)}],u[4]=[{type:0,data:lke(r.e.r+1)}],e.messages[0].data=hke(u);var m=gke(pke(n));t.content=m,t.size=t.content.length}(),O.data=hke(M),N[3][0].data=hke(D),y[4][0].data=hke(N),h.messages[0].data=hke(y);var L=gke(pke(p));return d.content=L,d.size=d.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){Zbe=1024,e&&!e.SSF&&(e.SSF=Wme(Ufe));e&&e.SSF&&(kme(),xme(e.SSF),t.revssf=Dme(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Hwe?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=awe.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};kke(t=t||{});var a=Xme(),i="",o=0;t.cellXfs=[],Ywe(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(Yme(a,i="docProps/core.xml",Dve(e.Props,t)),s.coreprops.push(i),Cve(t.rels,2,i,Tve.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Yme(a,i,Pve(e.Props)),s.extprops.push(i),Cve(t.rels,3,i,Tve.EXT_PROPS),e.Custprops!==e.Props&&_me(e.Custprops||{}).length>0&&(Yme(a,i="docProps/custom.xml",Lve(e.Custprops)),s.custprops.push(i),Cve(t.rels,4,i,Tve.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(Yme(a,i="xl/worksheets/sheet"+o+"."+n,Txe(o-1,i,t,e,u)),s.sheets.push(i),Cve(t.wbrels,-1,"worksheets/sheet"+o+"."+n,Tve.WS[0]),h){var d=h["!comments"],p=!1,f="";d&&d.length>0&&(Yme(a,f="xl/comments"+o+"."+n,Exe(d,f,t)),s.comments.push(f),Cve(u,-1,"../comments"+o+"."+n,Tve.CMNT),p=!0),h["!legacy"]&&p&&Yme(a,"xl/drawings/vmlDrawing"+o+".vml",ewe(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Yme(a,Eve(i),Nve(u))}null!=t.Strings&&t.Strings.length>0&&(Yme(a,i="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?Sbe:xbe)(e,n)}(t.Strings,i,t)),s.strs.push(i),Cve(t.wbrels,-1,"sharedStrings."+n,Tve.SST));Yme(a,i="xl/workbook."+n,function(e,t,n){return(".bin"===t.slice(-4)?Sxe:wxe)(e,n)}(e,i,t)),s.workbooks.push(i),Cve(t.rels,1,i,Tve.WB),Yme(a,i="xl/theme/theme1.xml",Xbe(e.Themes,t)),s.themes.push(i),Cve(t.wbrels,-1,"theme/theme1.xml",Tve.THEME),Yme(a,i="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?Ybe:Lbe)(e,n)}(e,i,t)),s.styles.push(i),Cve(t.wbrels,-1,"styles."+n,Tve.STY),e.vbaraw&&r&&(Yme(a,i="xl/vbaProject.bin",e.vbaraw),s.vba.push(i),Cve(t.wbrels,-1,"vbaProject.bin",Tve.VBA));return Yme(a,i="xl/metadata."+n,function(e){return(".bin"===e.slice(-4)?Qbe:Jbe)()}(i)),s.metadata.push(i),Cve(t.wbrels,-1,"metadata."+n,Tve.XLMETA),Yme(a,"[Content_Types].xml",Sve(s,t)),Yme(a,"_rels/.rels",Nve(t.rels)),Yme(a,"xl/_rels/workbook."+n+".rels",Nve(t.wbrels)),delete t.revssf,delete t.ssf,a}(e,t):Tke(e,t)}function Tke(e,t){Zbe=1024,e&&!e.SSF&&(e.SSF=Wme(Ufe)),e&&e.SSF&&(kme(),xme(e.SSF),t.revssf=Dme(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Hwe?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=awe.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};kke(t=t||{});var a=Xme(),i="",o=0;if(t.cellXfs=[],Ywe(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Yme(a,i="docProps/core.xml",Dve(e.Props,t)),s.coreprops.push(i),Cve(t.rels,2,i,Tve.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Yme(a,i,Pve(e.Props)),s.extprops.push(i),Cve(t.rels,3,i,Tve.EXT_PROPS),e.Custprops!==e.Props&&_me(e.Custprops||{}).length>0&&(Yme(a,i="docProps/custom.xml",Lve(e.Custprops)),s.custprops.push(i),Cve(t.rels,4,i,Tve.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var h={"!id":{}},d=e.Sheets[e.SheetNames[o-1]];(d||{})["!type"];if(Yme(a,i="xl/worksheets/sheet"+o+"."+n,exe(o-1,t,e,h)),s.sheets.push(i),Cve(t.wbrels,-1,"worksheets/sheet"+o+"."+n,Tve.WS[0]),d){var p=d["!comments"],f=!1,m="";if(p&&p.length>0){var g=!1;p.forEach((function(e){e[1].forEach((function(e){1==e.T&&(g=!0)}))})),g&&(Yme(a,m="xl/threadedComments/threadedComment"+o+"."+n,nwe(p,u,t)),s.threadedcomments.push(m),Cve(h,-1,"../threadedComments/threadedComment"+o+"."+n,Tve.TCMNT)),Yme(a,m="xl/comments"+o+"."+n,twe(p)),s.comments.push(m),Cve(h,-1,"../comments"+o+"."+n,Tve.CMNT),f=!0}d["!legacy"]&&f&&Yme(a,"xl/drawings/vmlDrawing"+o+".vml",ewe(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&Yme(a,Eve(i),Nve(h))}return null!=t.Strings&&t.Strings.length>0&&(Yme(a,i="xl/sharedStrings."+n,xbe(t.Strings,t)),s.strs.push(i),Cve(t.wbrels,-1,"sharedStrings."+n,Tve.SST)),Yme(a,i="xl/workbook."+n,wxe(e)),s.workbooks.push(i),Cve(t.rels,1,i,Tve.WB),Yme(a,i="xl/theme/theme1.xml",Xbe(e.Themes,t)),s.themes.push(i),Cve(t.wbrels,-1,"theme/theme1.xml",Tve.THEME),Yme(a,i="xl/styles."+n,Lbe(e,t)),s.styles.push(i),Cve(t.wbrels,-1,"styles."+n,Tve.STY),e.vbaraw&&r&&(Yme(a,i="xl/vbaProject.bin",e.vbaraw),s.vba.push(i),Cve(t.wbrels,-1,"vbaProject.bin",Tve.VBA)),Yme(a,i="xl/metadata."+n,Jbe()),s.metadata.push(i),Cve(t.wbrels,-1,"metadata."+n,Tve.XLMETA),u.length>1&&(Yme(a,i="xl/persons/person.xml",function(e){var t=[Qme,yge("personList",null,{xmlns:Tge,"xmlns:x":Dge[0]}).replace(/[\/]>/,">")];return e.forEach((function(e,n){t.push(yge("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))})),t.push("</personList>"),t.join("")}(u)),s.people.push(i),Cve(t.wbrels,-1,"persons/person.xml",Tve.PEOPLE)),Yme(a,"[Content_Types].xml",Sve(s,t)),Yme(a,"_rels/.rels",Nve(t.rels)),Yme(a,"xl/_rels/workbook.xml.rels",Nve(t.wbrels)),delete t.revssf,delete t.ssf,a}function Eke(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=xfe(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function Nke(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Ime(t.file,Eme.write(e,{type:kfe?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Eme.write(e,t)}function Cke(e,t){var n={},r=kfe?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Eme.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof s){if("binary"==t.type||"base64"==t.type)return s;s=new Uint8Array(Cfe(s))}return t.password&&"undefined"!==typeof encrypt_agile?Nke(encrypt_agile(s,t.password),t):"file"===t.type?Ime(t.file,s):"string"==t.type?hge(s):s}function Ike(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return wfe(dge(r));case"binary":return dge(r);case"string":return e;case"file":return Ime(t.file,r,"utf8");case"buffer":return kfe?Sfe(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):Ike(r,{type:"binary"}).split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}function _ke(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?wfe(n):"string"==t.type?hge(n):n;case"file":return Ime(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Ake(e,t){ffe(),bxe(e);var n=Wme(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=Ake(e,n);return n.type="array",Cfe(r)}var s=0;if(n.sheet&&(s="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Ike(Rxe(e,n),n);case"slk":case"sylk":return Ike(mbe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"htm":case"html":return Ike(Qxe(e.Sheets[e.SheetNames[s]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return wfe(e);case"binary":case"string":return e;case"file":return Ime(t.file,e,"binary");case"buffer":return kfe?Sfe(e,"binary"):e.split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}(Lke(e.Sheets[e.SheetNames[s]],n),n);case"csv":return Ike(Pke(e.Sheets[e.SheetNames[s]],n),n,"\ufeff");case"dif":return Ike(gbe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"dbf":return _ke(fbe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"prn":return Ike(vbe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"rtf":return Ike(Nbe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"eth":return Ike(ybe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"fods":return Ike(rke(e,n),n);case"wk1":return _ke(bbe.sheet_to_wk1(e.Sheets[e.SheetNames[s]],n),n);case"wk3":return _ke(bbe.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),_ke(Gxe(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return Nke(Pxe(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=Wme(t||{});return Cke(Ske(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Rke(e,t,n,r,s,a,i,o){var l=Aye(n),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,d=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(jEe){d.__rowNum__=n}else d.__rowNum__=n;if(!i||e[n])for(var p=t.s.c;p<=t.e.c;++p){var f=i?e[n][p]:e[r[p]+l];if(void 0!==f&&void 0!==f.t){var m=f.v;switch(f.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=a[p]){if(null==m)if("e"==f.t&&null===m)d[a[p]]=null;else if(void 0!==c)d[a[p]]=c;else{if(!u||null!==m)continue;d[a[p]]=null}else d[a[p]]=u&&("n"!==f.t||"n"===f.t&&!1!==o.rawNumbers)?m:zye(f,m,o);null!=m&&(h=!1)}}else{if(void 0===c)continue;null!=a[p]&&(d[a[p]]=c)}}return{row:d,isempty:h}}function Dke(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=Fye(u);break;case"number":(l=Fye(e["!ref"])).s.r=u;break;default:l=u}r>0&&(s=0);var h=Aye(l.s.r),d=[],p=[],f=0,m=0,g=Array.isArray(e),y=l.s.r,v=0,b={};g&&!e[y]&&(e[y]=[]);var w=c.skipHidden&&e["!cols"]||[],x=c.skipHidden&&e["!rows"]||[];for(v=l.s.c;v<=l.e.c;++v)if(!(w[v]||{}).hidden)switch(d[v]=Dye(v),n=g?e[y][v]:e[d[v]+h],r){case 1:a[v]=v-l.s.c;break;case 2:a[v]=d[v];break;case 3:a[v]=c.header[v-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=i=zye(n,null,c),m=b[i]||0){do{o=i+"_"+m++}while(b[o]);b[i]=m,b[o]=1}else b[i]=1;a[v]=o}for(y=l.s.r+s;y<=l.e.r;++y)if(!(x[y]||{}).hidden){var k=Rke(e,l,y,d,r,a,g,c);(!1===k.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(p[f++]=k.row)}return p.length=f,p}var Oke=/"/g;function Mke(e,t,n,r,s,a,i,o){for(var l=!0,c=[],u="",h=Aye(n),d=t.s.c;d<=t.e.c;++d)if(r[d]){var p=o.dense?(e[n]||[])[d]:e[r[d]+h];if(null==p)u="";else if(null!=p.v){l=!1,u=""+(o.rawNumbers&&"n"==p.t?p.v:zye(p,null,o));for(var f=0,m=0;f!==u.length;++f)if((m=u.charCodeAt(f))===s||m===a||34===m||o.forceQuotes){u='"'+u.replace(Oke,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==p.f||p.F?u="":(l=!1,(u="="+p.f).indexOf(",")>=0&&(u='"'+u.replace(Oke,'""')+'"'));c.push(u)}return!1===o.blankrows&&l?null:c.join(i)}function Pke(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var s=Fye(e["!ref"]),a=void 0!==r.FS?r.FS:",",i=a.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==a?"\\|":a)+"+$"),u="",h=[];r.dense=Array.isArray(e);for(var d=r.skipHidden&&e["!cols"]||[],p=r.skipHidden&&e["!rows"]||[],f=s.s.c;f<=s.e.c;++f)(d[f]||{}).hidden||(h[f]=Dye(f));for(var m=0,g=s.s.r;g<=s.e.r;++g)(p[g]||{}).hidden||null!=(u=Mke(e,s,g,h,i,l,a,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((m++?o:"")+u));return delete r.dense,n.join("")}function Lke(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=Pke(e,t);if("undefined"==typeof gfe||"string"==t.type)return n;var r=gfe.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function Fke(e,t,n){var r,s=n||{},a=+!s.skipHeader,i=e||{},o=0,l=0;if(i&&null!=s.origin)if("number"==typeof s.origin)o=s.origin;else{var c="string"==typeof s.origin?Oye(s.origin):s.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var h=Fye(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),-1==o&&(o=h.e.r+1,u.e.r=o+t.length-1+a)}else-1==o&&(o=0,u.e.r=t.length-1+a);var d=s.header||[],p=0;t.forEach((function(e,t){_me(e).forEach((function(n){-1==(p=d.indexOf(n))&&(d[p=d.length]=n);var c=e[n],u="z",h="",f=Mye({c:l+p,r:o+t+a});r=$ke(i,f),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",s.cellDates||(u="n",c=Mme(c)),h=s.dateNF||Ufe[14]):null===c&&s.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,h&&(r.z=h)):i[f]=r={t:u,v:c},h&&(r.z=h)):i[f]=c}))})),u.e.c=Math.max(u.e.c,l+d.length-1);var f=Aye(o);if(a)for(p=0;p<d.length;++p)i[Dye(p+l)+f]={t:"s",v:d[p]};return i["!ref"]=Lye(u),i}function $ke(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=Oye(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return $ke(e,Mye("number"!=typeof t?t:{r:t,c:n||0}))}function zke(){return{SheetNames:[],Sheets:{}}}function jke(e,t,n,r){var s=1;if(!n)for(;s<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+s);++s,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&-1!=e.SheetNames.indexOf(n=i+s);++s);}if(vxe(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function Uke(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var Bke={encode_col:Dye,encode_row:Aye,encode_cell:Mye,encode_range:Lye,decode_col:Rye,decode_row:_ye,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Oye,decode_range:Pye,format_cell:zye,sheet_add_aoa:Uye,sheet_add_json:Fke,sheet_add_dom:Jxe,aoa_to_sheet:Bye,json_to_sheet:function(e,t){return Fke(null,e,t)},table_to_sheet:Zxe,table_to_book:function(e,t){return jye(Zxe(e,t),t)},sheet_to_csv:Pke,sheet_to_txt:Lke,sheet_to_json:Dke,sheet_to_html:Qxe,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var s,a=Fye(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(s=a.s.c;s<=a.e.c;++s)o[s]=Dye(s);for(var u=a.s.r;u<=a.e.r;++u)for(i=Aye(u),s=a.s.c;s<=a.e.c;++s)if(n=o[s]+i,r="",void 0!==(t=c?(e[u]||[])[s]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:Dke,sheet_get_cell:$ke,book_new:zke,book_append_sheet:jke,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:Uke,cell_set_internal_link:function(e,t,n){return Uke(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var s="string"!=typeof t?t:Fye(t),a="string"==typeof t?t:Lye(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=$ke(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};ofe.version;var Vke=n(2450);const Wke=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return await sfe(e)}catch(t){throw console.error("Error fetching transactions:",t),t}},Hke=async e=>{try{return await(async e=>{try{const t=rfe(e);return{id:(await rb(Xy(YS,tfe),t)).id,...e}}catch(t){throw console.error("Error adding transaction:",t),t}})(e)}catch(t){throw console.error("Error adding transaction:",t),t}},Gke=async(e,t)=>{try{return await(async(e,t)=>{try{const n=rfe(t),r=Qy(YS,tfe,e),{userId:s,...a}=n;return await tb(r,a),{id:e,...t}}catch(n){throw console.error("Error updating transaction:",n),n}})(e,t)}catch(n){throw console.error("Error updating transaction:",n),n}},qke=async e=>{try{return await(async e=>{try{const t=Qy(YS,tfe,e);return await nb(t),{id:e}}catch(t){throw console.error("Error deleting transaction:",t),t}})(e)}catch(t){throw console.error("Error deleting transaction:",t),t}},Kke=async(e,t)=>{try{return await(async(e,t)=>{try{const n=Qy(YS,iT,e);return await tb(n,t),{id:e,...t}}catch(n){throw console.error("Error updating user profile:",n),n}})(e,t)}catch(n){throw console.error("Error updating user profile:",n),n}},Yke=async(e,t)=>{try{return await(async(e,t)=>{try{const n=XS.currentUser?XS.currentUser.uid:null;if(!n)throw new Error("User must be authenticated to update a category");const r=Qy(YS,cT,e),s=await Jv(r);if(!s.exists()||s.data().userId!==n)throw new Error("Category not found or you do not have permission to update it");const a={...t,updatedAt:(new Date).toISOString()};return await tb(r,a),{id:e,...a}}catch(n){throw console.error("Error updating category:",n),n}})(e,t)}catch(n){throw console.error("Error updating category:",n),n}},Xke=async e=>{try{return await(async e=>{try{const t=XS.currentUser?XS.currentUser.uid:null;if(!t)throw new Error("User must be authenticated to delete a category");const n=Qy(YS,cT,e),r=await Jv(n);if(!r.exists()||r.data().userId!==t)throw new Error("Category not found or you do not have permission to delete it");return await nb(n),{id:e}}catch(t){throw console.error("Error deleting category:",t),t}})(e)}catch(t){throw console.error("Error deleting category:",t),t}},Qke=()=>{const[e,t]=(0,X.useState)([]),[n,r]=(0,X.useState)(!0),[s,a]=(0,X.useState)(null),[i,o]=(0,X.useState)(""),{darkMode:l}=Jae();(0,X.useEffect)((()=>{const e=(new Date).getHours();let t="";t=e<12?"Good Morning":e<18?"Good Afternoon":"Good Evening",o(t)}),[]);const c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{r(!0);const n=await Wke(e);t(n),a(null)}catch(UEe){a("Error loading transactions. Please try again."),console.error(UEe)}finally{r(!1)}};(0,X.useEffect)((()=>{const e=new Date,t={start_date:new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};c(t)}),[]);const u=()=>(0,Nt.jsxs)("div",{className:"credit-card",children:[(0,Nt.jsx)("div",{className:"credit-card-brand",children:"VISA"}),(0,Nt.jsx)("div",{className:"credit-card-chip",children:"\ud83d\udcb3"}),(0,Nt.jsx)("div",{className:"credit-card-number",children:"**** **** **** 4389"}),(0,Nt.jsx)("div",{className:"credit-card-holder",children:"PANEKKATT OIL MILL"}),(0,Nt.jsx)("div",{className:"credit-card-exp",children:"EXP: 06/25"})]});return(0,Nt.jsxs)(Ft,{fluid:!0,children:[(0,Nt.jsxs)("div",{className:"welcome-banner mt-3",children:[(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("h2",{children:["Hi, ",i,"! \ud83d\udc4b"]}),(0,Nt.jsx)("p",{children:"Welcome to your financial dashboard"})]}),(0,Nt.jsx)("div",{className:"money-icon-container d-none d-md-flex",children:(0,Nt.jsx)(Ei,{className:"money-icon"})})]}),e.length>0&&(0,Nt.jsxs)("div",{className:"mobile-notification mt-3",children:[(0,Nt.jsx)("div",{className:"mobile-notification-icon",children:(0,Nt.jsx)(io,{})}),(0,Nt.jsx)("div",{className:"mobile-notification-content",children:(0,Nt.jsxs)("p",{className:"mobile-notification-text",children:["You have ",e.filter((e=>"expense"===e.type)).length," expenses and ",e.filter((e=>"income"===e.type)).length," income transactions this month."]})})]})]}),(()=>{const e=[{title:"Transactions",description:"Add or view your recent income and expenses",icon:(0,Nt.jsx)(Di,{size:20}),iconClass:"icon-primary",link:"/transactions"},{title:"Reports",description:"Export and analyze your financial data",icon:(0,Nt.jsx)(Mi,{size:20}),iconClass:"icon-report",link:"/reports"},{title:"Payment Cards",description:"Manage your credit and debit cards",icon:(0,Nt.jsx)(_i,{size:20}),iconClass:"icon-income",link:"/transactions"}];return(0,Nt.jsx)(nie,{className:"row-cols-1 row-cols-md-3 g-3 mb-4",children:e.map(((e,t)=>(0,Nt.jsx)(sie,{children:(0,Nt.jsx)(xt,{to:e.link,className:"text-decoration-none",children:(0,Nt.jsxs)("div",{className:"feature-card",children:[(0,Nt.jsx)("div",{className:`feature-card-icon ${e.iconClass}`,children:e.icon}),(0,Nt.jsx)("h4",{children:e.title}),(0,Nt.jsx)("p",{children:e.description})]})})},t)))})})(),(0,Nt.jsx)("div",{className:"d-md-none mb-4",children:u()}),(0,Nt.jsxs)(Nie,{className:"mb-4 card-3d",children:[(0,Nt.jsx)(Nie.Header,{children:(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Nt.jsx)("h5",{className:"mb-0",children:"Transaction Period"}),(0,Nt.jsx)("small",{className:"text-muted",children:"Filter by date range"})]})}),(0,Nt.jsx)(Nie.Body,{children:(0,Nt.jsx)(efe,{onFilterChange:e=>{c(e)}})})]}),n?(0,Nt.jsxs)("div",{className:"text-center p-4",children:[(0,Nt.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("p",{className:"mt-2",children:"Loading dashboard data..."})]}):s?(0,Nt.jsx)("div",{className:"alert alert-danger",children:s}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(Aie,{transactions:e}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,Nt.jsx)("h4",{className:"mb-0",children:"Insights & Charts"}),(0,Nt.jsx)(Ws,{variant:"outline-primary",size:"sm",className:"rounded-pill",children:"View All"})]}),(0,Nt.jsx)(bpe,{transactions:e}),(0,Nt.jsxs)("div",{className:"d-none d-md-block",children:[(0,Nt.jsx)("h4",{className:"mb-3",children:"Your Payment Cards"}),(0,Nt.jsx)(nie,{children:(0,Nt.jsx)(sie,{md:6,children:u()})})]})]})]})},Jke=Hr("h4");Jke.displayName="DivStyledAsH4";const Zke=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s=Jke,...a}=e;return r=Dt(r,"alert-heading"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));Zke.displayName="AlertHeading";const eSe=Zke,tSe=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s=$s,...a}=e;return r=Dt(r,"alert-link"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));tSe.displayName="AlertLink";const nSe=tSe,rSe=X.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:s="Close alert",closeVariant:a,className:i,children:o,variant:l="primary",onClose:c,dismissible:u,transition:h=_r,...d}=Wt(e,{show:"onClose"}),p=Dt(n,"alert"),f=Bn((e=>{c&&c(!1,e)})),m=!0===h?_r:h,g=(0,Nt.jsxs)("div",{role:"alert",...m?void 0:d,ref:t,className:Et()(i,p,l&&`${p}-${l}`,u&&`${p}-dismissible`),children:[u&&(0,Nt.jsx)(jr,{onClick:f,"aria-label":s,variant:a}),o]});return m?(0,Nt.jsx)(m,{unmountOnExit:!0,...d,ref:void 0,in:r,children:g}):r?g:null}));rSe.displayName="Alert";const sSe=Object.assign(rSe,{Link:nSe,Heading:eSe});var aSe;function iSe(e){if((!aSe&&0!==aSe||e)&&gn){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),aSe=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return aSe}function oSe(e){const t=function(e){const t=(0,X.useRef)(e);return t.current=e,t}(e);(0,X.useEffect)((()=>()=>t.current()),[])}const lSe=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"modal-body"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));lSe.displayName="ModalBody";const cSe=lSe,uSe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:s,centered:a,size:i,fullscreen:o,children:l,scrollable:c,...u}=e;n=Dt(n,"modal");const h=`${n}-dialog`,d="string"===typeof o?`${n}-fullscreen-${o}`:`${n}-fullscreen`;return(0,Nt.jsx)("div",{...u,ref:t,className:Et()(h,r,i&&`${n}-${i}`,a&&`${h}-centered`,c&&`${h}-scrollable`,o&&d),children:(0,Nt.jsx)("div",{className:Et()(`${n}-content`,s),children:l})})}));uSe.displayName="ModalDialog";const hSe=uSe,dSe=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"modal-footer"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));dSe.displayName="ModalFooter";const pSe=dSe,fSe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:s="Close",closeButton:a=!1,...i}=e;return n=Dt(n,"modal-header"),(0,Nt.jsx)(Br,{ref:t,...i,className:Et()(r,n),closeLabel:s,closeButton:a})}));fSe.displayName="ModalHeader";const mSe=fSe,gSe=Hr("h4"),ySe=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s=gSe,...a}=e;return r=Dt(r,"modal-title"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));ySe.displayName="ModalTitle";const vSe=ySe;function bSe(e){return(0,Nt.jsx)(_r,{...e,timeout:null})}function wSe(e){return(0,Nt.jsx)(_r,{...e,timeout:null})}const xSe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,style:s,dialogClassName:a,contentClassName:i,children:o,dialogAs:l=hSe,"data-bs-theme":c,"aria-labelledby":u,"aria-describedby":h,"aria-label":d,show:p=!1,animation:f=!0,backdrop:m=!0,keyboard:g=!0,onEscapeKeyDown:y,onShow:v,onHide:b,container:w,autoFocus:x=!0,enforceFocus:k=!0,restoreFocus:S=!0,restoreFocusOptions:T,onEntered:E,onExit:N,onExiting:C,onEnter:I,onEntering:_,onExited:A,backdropClassName:R,manager:D,...O}=e;const[M,P]=(0,X.useState)({}),[L,F]=(0,X.useState)(!1),$=(0,X.useRef)(!1),z=(0,X.useRef)(!1),j=(0,X.useRef)(null),[U,B]=(0,X.useState)(null),V=An(t,B),W=Bn(b),H=Pt();n=Dt(n,"modal");const G=(0,X.useMemo)((()=>({onHide:W})),[W]);function q(){return D||rs({isRTL:H})}function K(e){if(!gn)return;const t=q().getScrollbarWidth()>0,n=e.scrollHeight>Xt(e).documentElement.clientHeight;P({paddingRight:t&&!n?iSe():void 0,paddingLeft:!t&&n?iSe():void 0})}const Y=Bn((()=>{U&&K(U.dialog)}));oSe((()=>{xn(window,"resize",Y),null==j.current||j.current()}));const Q=()=>{$.current=!0},J=e=>{$.current&&U&&e.target===U.dialog&&(z.current=!0),$.current=!1},Z=()=>{F(!0),j.current=Tn(U.dialog,(()=>{F(!1)}))},ee=e=>{"static"!==m?z.current||e.target!==e.currentTarget?z.current=!1:null==b||b():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,X.useCallback)((e=>(0,Nt.jsx)("div",{...e,className:Et()(`${n}-backdrop`,R,!f&&"show")})),[f,R,n]),ne={...s,...M};ne.display="block";return(0,Nt.jsx)(Pr.Provider,{value:G,children:(0,Nt.jsx)(Nr,{show:p,ref:V,backdrop:m,container:w,keyboard:!0,autoFocus:x,enforceFocus:k,restoreFocus:S,restoreFocusOptions:T,onEscapeKeyDown:e=>{g?null==y||y(e):(e.preventDefault(),"static"===m&&Z())},onShow:v,onHide:b,onEnter:(e,t)=>{e&&K(e),null==I||I(e,t)},onEntering:(e,t)=>{null==_||_(e,t),wn(window,"resize",Y)},onEntered:E,onExit:e=>{null==j.current||j.current(),null==N||N(e)},onExiting:C,onExited:e=>{e&&(e.style.display=""),null==A||A(e),xn(window,"resize",Y)},manager:q(),transition:f?bSe:void 0,backdropTransition:f?wSe:void 0,renderBackdrop:te,renderDialog:e=>(0,Nt.jsx)("div",{role:"dialog",...e,style:ne,className:Et()(r,n,L&&`${n}-static`,!f&&"show"),onClick:m?ee:void 0,onMouseUp:J,"data-bs-theme":c,"aria-label":d,"aria-labelledby":u,"aria-describedby":h,children:(0,Nt.jsx)(l,{...O,onMouseDown:Q,className:a,contentClassName:i,children:o})})})})}));xSe.displayName="Modal";const kSe=Object.assign(xSe,{Body:cSe,Header:mSe,Title:vSe,Footer:pSe,Dialog:hSe,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),SSe=X.forwardRef(((e,t)=>{let{bsPrefix:n,bg:r="primary",pill:s=!1,text:a,className:i,as:o="span",...l}=e;const c=Dt(n,"badge");return(0,Nt.jsx)(o,{ref:t,...l,className:Et()(i,c,s&&"rounded-pill",a&&`text-${a}`,r&&`bg-${r}`)})}));SSe.displayName="Badge";const TSe=SSe,ESe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,striped:s,bordered:a,borderless:i,hover:o,size:l,variant:c,responsive:u,...h}=e;const d=Dt(n,"table"),p=Et()(r,d,c&&`${d}-${c}`,l&&`${d}-${l}`,s&&`${d}-${"string"===typeof s?`striped-${s}`:"striped"}`,a&&`${d}-bordered`,i&&`${d}-borderless`,o&&`${d}-hover`),f=(0,Nt.jsx)("table",{...h,className:p,ref:t});if(u){let e=`${d}-responsive`;return"string"===typeof u&&(e=`${e}-${u}`),(0,Nt.jsx)("div",{className:e,children:f})}return f})),NSe=ESe,CSe=e=>{let{transactions:t,onEdit:n,onDelete:r}=e;const[s,a]=(0,X.useState)(null);if(!t||0===t.length)return(0,Nt.jsx)(Nie,{className:"text-center p-4",children:(0,Nt.jsx)("p",{className:"text-muted mb-0",children:"No transactions found."})});const i=e=>new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"});return(0,Nt.jsxs)(Nie,{className:"mb-4",children:[(0,Nt.jsx)(Nie.Header,{children:(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Nt.jsx)("h5",{className:"mb-0",children:"Transactions"}),(0,Nt.jsxs)(TSe,{bg:"primary",pill:!0,children:[t.length," items"]})]})}),(0,Nt.jsxs)(Nie.Body,{className:"p-0 p-md-3",children:[(0,Nt.jsx)("div",{className:"d-md-none",children:t.map((e=>(0,Nt.jsxs)(Nie,{className:"mb-3 mobile-card",children:[(0,Nt.jsxs)("div",{className:"mobile-card-header",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Nt.jsx)("div",{className:"stat-card-icon "+("income"===e.type?"icon-income":"icon-expense"),children:"income"===e.type?(0,Nt.jsx)(xi,{}):(0,Nt.jsx)(wi,{})}),(0,Nt.jsxs)("div",{className:"ms-2",children:[(0,Nt.jsx)("h6",{className:"mb-0",children:e.category}),(0,Nt.jsx)("small",{className:"text-muted",children:i(e.date)})]})]}),(0,Nt.jsxs)("div",{className:"text-end",children:[(0,Nt.jsxs)("div",{className:"mobile-card-amount "+("income"===e.type?"text-income":"text-expense"),children:["\u20b9",e.amount.toFixed(2)]}),(0,Nt.jsx)(TSe,{className:"income"===e.type?"badge-income":"badge-expense",children:"income"===e.type?"Income":"Expense"})]})]}),s===e.id&&(0,Nt.jsxs)("div",{className:"pt-2 mt-2 border-top",children:[e.description&&(0,Nt.jsx)("p",{className:"text-muted small mb-2",children:e.description}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,Nt.jsxs)(Ws,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>n(e),children:[(0,Nt.jsx)(Ri,{})," Edit"]}),(0,Nt.jsxs)(Ws,{variant:"outline-danger",size:"sm",onClick:()=>r(e.id),children:[(0,Nt.jsx)(no,{})," Delete"]})]})]}),(0,Nt.jsx)(Ws,{variant:"link",className:"p-0 mt-2 text-decoration-none",onClick:()=>{return t=e.id,void a(s===t?null:t);var t},children:s===e.id?(0,Nt.jsxs)("small",{className:"text-muted",children:["Hide Details ",(0,Nt.jsx)(Ii,{size:10})]}):(0,Nt.jsxs)("small",{className:"text-muted",children:["Show Details ",(0,Nt.jsx)(Ci,{size:10})]})})]},e.id)))}),(0,Nt.jsx)("div",{className:"d-none d-md-block table-responsive",children:(0,Nt.jsxs)(NSe,{hover:!0,className:"transaction-table",children:[(0,Nt.jsx)("thead",{children:(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("th",{children:"Date"}),(0,Nt.jsx)("th",{children:"Type"}),(0,Nt.jsx)("th",{children:"Category"}),(0,Nt.jsx)("th",{children:"Amount (\u20b9)"}),(0,Nt.jsx)("th",{children:"Description"}),(0,Nt.jsx)("th",{className:"text-end",children:"Actions"})]})}),(0,Nt.jsx)("tbody",{children:t.map((e=>(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("td",{children:i(e.date)}),(0,Nt.jsx)("td",{children:(0,Nt.jsx)(TSe,{className:"income"===e.type?"badge-income":"badge-expense",children:"income"===e.type?"Income":"Expense"})}),(0,Nt.jsx)("td",{children:e.category}),(0,Nt.jsxs)("td",{className:"income"===e.type?"text-income":"text-expense",children:["\u20b9",e.amount.toFixed(2)]}),(0,Nt.jsx)("td",{children:e.description?e.description.length>30?`${e.description.slice(0,30)}...`:e.description:"-"}),(0,Nt.jsxs)("td",{className:"text-end",children:[(0,Nt.jsx)(Ws,{variant:"outline-primary",size:"sm",className:"me-1",onClick:()=>n(e),children:(0,Nt.jsx)(Ri,{})}),(0,Nt.jsx)(Ws,{variant:"outline-danger",size:"sm",onClick:()=>r(e.id),children:(0,Nt.jsx)(no,{})})]})]},e.id)))})]})})]})]})},ISe={income:["Oil Sales","Flour Mill Service","Other Income","Sales"],expense:["Raw Materials","Wages","Transport","Packaging","Utilities","Maintenance","Other Expense"]},_Se=e=>{let{onSubmit:t,initialData:n=null,isEditing:r=!1}=e;const[s,a]=(0,X.useState)({type:"income",amount:"",category:"",date:new Date,description:""});(0,X.useEffect)((()=>{n&&a({...n,date:new Date(n.date)})}),[n]);const i=e=>{const{name:t,value:n}=e.target;a((e=>({...e,[t]:n})))};return(0,Nt.jsxs)(Nie,{className:"mb-4",children:[(0,Nt.jsx)(Nie.Header,{children:(0,Nt.jsxs)("div",{className:"d-flex align-items-center",children:[r?(0,Nt.jsx)(Ri,{className:"me-2"}):(0,Nt.jsx)(Ki,{className:"me-2"}),(0,Nt.jsx)("div",{children:r?"Edit Transaction":"Add Transaction"})]})}),(0,Nt.jsx)(Nie.Body,{children:(0,Nt.jsxs)(Qpe,{onSubmit:e=>{e.preventDefault();const n={...s,date:s.date.toISOString().split("T")[0],amount:parseFloat(s.amount)};t(n),r||a({type:"income",amount:"",category:"",date:new Date,description:""})},children:[(0,Nt.jsx)("div",{className:"form-group mb-4",children:(0,Nt.jsxs)("div",{className:"d-flex mb-2",children:[(0,Nt.jsx)("button",{type:"button",className:"btn flex-grow-1 py-2 me-2 "+("income"===s.type?"btn-success":"btn-outline-secondary text-muted"),onClick:()=>a((e=>({...e,type:"income"}))),children:"Income"}),(0,Nt.jsx)("button",{type:"button",className:"btn flex-grow-1 py-2 "+("expense"===s.type?"btn-danger":"btn-outline-secondary text-muted"),onClick:()=>a((e=>({...e,type:"expense"}))),children:"Expense"})]})}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3 position-relative",children:[(0,Nt.jsx)(Qpe.Label,{children:"Amount"}),(0,Nt.jsxs)("div",{className:"input-group",children:[(0,Nt.jsx)("span",{className:"input-group-text",children:(0,Nt.jsx)(Ki,{})}),(0,Nt.jsx)(Qpe.Control,{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",name:"amount",value:s.amount,onChange:i,placeholder:"0.00",required:!0,className:"form-control-lg"})]})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsxs)(Qpe.Label,{className:"d-flex align-items-center",children:[(0,Nt.jsx)(eo,{className:"me-2"})," Category"]}),(0,Nt.jsxs)(Qpe.Select,{name:"category",value:s.category,onChange:i,required:!0,className:"form-select-lg",children:[(0,Nt.jsx)("option",{value:"",children:"Select a category"}),ISe[s.type].map((e=>(0,Nt.jsx)("option",{value:e,children:e},e))),(0,Nt.jsx)("option",{value:"custom",children:"Custom Category..."})]})]}),"custom"===s.category&&(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Custom Category"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"category",value:"custom"===s.category?"":s.category,onChange:i,placeholder:"Enter custom category",required:!0,className:"form-control-lg"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsxs)(Qpe.Label,{className:"d-flex align-items-center",children:[(0,Nt.jsx)(Si,{className:"me-2"})," Date"]}),(0,Nt.jsx)(Zpe(),{selected:s.date,onChange:e=>{a((t=>({...t,date:e})))},className:"form-control form-control-lg",dateFormat:"dd/MM/yyyy",required:!0,customInput:(0,Nt.jsx)("div",{className:"position-relative",children:(0,Nt.jsx)(Qpe.Control,{type:"text",readOnly:!0,value:s.date.toLocaleDateString(),className:"form-control-lg"})})})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-4",children:[(0,Nt.jsx)(Qpe.Label,{children:"Description (Optional)"}),(0,Nt.jsx)(Qpe.Control,{as:"textarea",rows:2,name:"description",value:s.description,onChange:i,placeholder:"Add notes about this transaction",className:"form-control-lg"})]}),(0,Nt.jsxs)("div",{className:"d-grid gap-2",children:[(0,Nt.jsxs)(Ws,{variant:r?"primary":"income"===s.type?"success":"danger",type:"submit",size:"lg",className:"py-3",children:[r?"Update":"Save"," Transaction"]}),r&&(0,Nt.jsx)(Ws,{variant:"outline-secondary",onClick:()=>t(null),size:"lg",children:"Cancel"})]})]})})]})};function ASe(e,t,n,r,s,a,i){try{var o=e[a](i),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function RSe(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){ASe(a,r,s,i,o,"next",e)}function o(e){ASe(a,r,s,i,o,"throw",e)}i(void 0)}))}}var DSe=n(446);const OSe="undefined"!==typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition);var MSe=()=>/(android)/i.test("undefined"!==typeof navigator?navigator.userAgent:"");const PSe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>e.trim())).join(" ").trim()},LSe=/\s*\((.*?)\)\s*/g,FSe=/(\(\?:[^)]+\))\?/g,$Se=/(\(\?)?:\w+/g,zSe=/\*/g,jSe=/[-{}[\]+?.,\\^$|#]/g,USe=()=>"undefined"!==typeof window&&void 0!==window.navigator&&void 0!==window.navigator.mediaDevices&&void 0!==window.navigator.mediaDevices.getUserMedia&&(void 0!==window.AudioContext||void 0!==window.webkitAudioContext);class BSe{setSpeechRecognition(e){const t=!!e&&((e=>e===OSe)(e)||USe());t&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(t)}subscribe(e,t){this.subscribers[e]=t}unsubscribe(e){delete this.subscribers[e]}emitListeningChange(e){this.listening=e,Object.keys(this.subscribers).forEach((t=>{const{onListeningChange:n}=this.subscribers[t];n(e)}))}emitMicrophoneAvailabilityChange(e){this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach((t=>{const{onMicrophoneAvailabilityChange:n}=this.subscribers[t];n(e)}))}emitTranscriptChange(e,t){Object.keys(this.subscribers).forEach((n=>{const{onTranscriptChange:r}=this.subscribers[n];r(e,t)}))}emitClearTranscript(){Object.keys(this.subscribers).forEach((e=>{const{onClearTranscript:t}=this.subscribers[e];t()}))}emitBrowserSupportsSpeechRecognitionChange(e){Object.keys(this.subscribers).forEach((t=>{const{onBrowserSupportsSpeechRecognitionChange:n,onBrowserSupportsContinuousListeningChange:r}=this.subscribers[t];n(e),r(e)}))}disconnect(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(e){e&&e.error&&"not-allowed"===e.error&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript(e){let{results:t,resultIndex:n}=e;const r=void 0===n?t.length-1:n;this.interimTranscript="",this.finalTranscript="";for(let a=r;a<t.length;++a)t[a].isFinal&&(!MSe()||t[a][0].confidence>0)?this.updateFinalTranscript(t[a][0].transcript):this.interimTranscript=PSe(this.interimTranscript,t[a][0].transcript);let s=!1;""===this.interimTranscript&&""!==this.finalTranscript?(this.previousResultWasFinalOnly&&(s=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,s||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(e){this.finalTranscript=PSe(this.finalTranscript,e)}resetTranscript(){this.disconnect("RESET")}startListening(){return RSe((function(){var e=this;let{continuous:t=!1,language:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){if(!e.recognition)return;const r=t!==e.recognition.continuous,s=n&&n!==e.recognition.lang;if((r||s)&&(e.listening&&(yield e.stopListening()),e.recognition.continuous=r?t:e.recognition.continuous,e.recognition.lang=s?n:e.recognition.lang),!e.listening){e.recognition.continuous||(e.resetTranscript(),e.emitClearTranscript());try{yield e.start(),e.emitListeningChange(!0)}catch(jEe){jEe instanceof DOMException||e.emitMicrophoneAvailabilityChange(!1)}}}()})).apply(this,arguments)}abortListening(){return RSe((function*(){this.disconnect("ABORT"),this.emitListeningChange(!1),yield new Promise((e=>{this.onStopListening=e}))})).call(this)}stopListening(){return RSe((function*(){this.disconnect("STOP"),this.emitListeningChange(!1),yield new Promise((e=>{this.onStopListening=e}))})).call(this)}getRecognition(){return this.recognition}start(){return RSe((function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)})).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(e){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(e),MSe()&&(this.updateFinalTranscript=DSe(this.updateFinalTranscript,250,{leading:!0}))}}const VSe="CLEAR_TRANSCRIPT",WSe="APPEND_TRANSCRIPT",HSe=(e,t)=>{switch(t.type){case VSe:return{interimTranscript:"",finalTranscript:""};case WSe:return{interimTranscript:t.payload.interimTranscript,finalTranscript:PSe(e.finalTranscript,t.payload.finalTranscript)};default:throw new Error}};let GSe,qSe=!!OSe,KSe=qSe&&!MSe();const YSe=function(){let{transcribing:e=!0,clearTranscriptOnListen:t=!0,commands:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[r]=(0,X.useState)(XSe.getRecognitionManager()),[s,a]=(0,X.useState)(qSe),[i,o]=(0,X.useState)(KSe),[{interimTranscript:l,finalTranscript:c},u]=(0,X.useReducer)(HSe,{interimTranscript:r.interimTranscript,finalTranscript:""}),[h,d]=(0,X.useState)(r.listening),[p,f]=(0,X.useState)(r.isMicrophoneAvailable),m=(0,X.useRef)(n);m.current=n;const g=()=>{u({type:VSe})},y=(0,X.useCallback)((()=>{r.resetTranscript(),g()}),[r]),v=(e,t,n)=>{const r=("object"===typeof e?e.toString():e).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),s=((e,t)=>{if(e=e.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e===t)return 1;if(1===e.length&&1===t.length)return 0;if(e.length<2||t.length<2)return 0;const n=new Map;for(let s=0;s<e.length-1;s++){const t=e.substring(s,s+2),r=n.has(t)?n.get(t)+1:1;n.set(t,r)}let r=0;for(let s=0;s<t.length-1;s++){const e=t.substring(s,s+2),a=n.has(e)?n.get(e):0;a>0&&(n.set(e,a-1),r++)}return 2*r/(e.length+t.length-2)})(r,t);return s>=n?{command:e,commandWithoutSpecials:r,howSimilar:s,isFuzzyMatch:!0}:null},b=(e,t)=>{const n=(e=>e instanceof RegExp?new RegExp(e.source,"i"):(e=e.replace(jSe,"\\$&").replace(LSe,"(?:$1)?").replace($Se,((e,t)=>t?e:"([^\\s]+)")).replace(zSe,"(.*?)").replace(FSe,"\\s*$1?\\s*"),new RegExp("^"+e+"$","i")))(e),r=n.exec(t);return r?{command:e,parameters:r.slice(1)}:null},w=(0,X.useCallback)(((e,t)=>{m.current.forEach((n=>{let{command:r,callback:s,matchInterim:a=!1,isFuzzyMatch:i=!1,fuzzyMatchingThreshold:o=.8,bestMatchOnly:l=!1}=n;const c=!t&&a?e.trim():t.trim(),u=(Array.isArray(r)?r:[r]).map((e=>i?v(e,c,o):b(e,c))).filter((e=>e));if(i&&l&&u.length>=2){u.sort(((e,t)=>t.howSimilar-e.howSimilar));const{command:e,commandWithoutSpecials:t,howSimilar:n}=u[0];s(t,c,n,{command:e,resetTranscript:y})}else u.forEach((e=>{if(e.isFuzzyMatch){const{command:t,commandWithoutSpecials:n,howSimilar:r}=e;s(n,c,r,{command:t,resetTranscript:y})}else{const{command:t,parameters:n}=e;s(...n,{command:t,resetTranscript:y})}}))}))}),[y]),x=(0,X.useCallback)(((t,n)=>{e&&u(((e,t)=>({type:WSe,payload:{interimTranscript:e,finalTranscript:t}}))(t,n)),w(t,n)}),[w,e]),k=(0,X.useCallback)((()=>{t&&g()}),[t]);(0,X.useEffect)((()=>{const e=XSe.counter;XSe.counter+=1;const t={onListeningChange:d,onMicrophoneAvailabilityChange:f,onTranscriptChange:x,onClearTranscript:k,onBrowserSupportsSpeechRecognitionChange:a,onBrowserSupportsContinuousListeningChange:o};return r.subscribe(e,t),()=>{r.unsubscribe(e)}}),[e,t,r,x,k]);return{transcript:PSe(c,l),interimTranscript:l,finalTranscript:c,listening:h,isMicrophoneAvailable:p,resetTranscript:y,browserSupportsSpeechRecognition:s,browserSupportsContinuousListening:i}},XSe={counter:0,applyPolyfill:e=>{GSe?GSe.setSpeechRecognition(e):GSe=new BSe(e);const t=!!e&&USe();qSe=t,KSe=t},removePolyfill:()=>{GSe?GSe.setSpeechRecognition(OSe):GSe=new BSe(OSe),qSe=!!OSe,KSe=qSe&&!MSe()},getRecognitionManager:()=>(GSe||(GSe=new BSe(OSe)),GSe),getRecognition:()=>XSe.getRecognitionManager().getRecognition(),startListening:function(){let{continuous:e,language:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return RSe((function*(){const n=XSe.getRecognitionManager();yield n.startListening({continuous:e,language:t})}))()},stopListening:()=>RSe((function*(){const e=XSe.getRecognitionManager();yield e.stopListening()}))(),abortListening:()=>RSe((function*(){const e=XSe.getRecognitionManager();yield e.abortListening()}))(),browserSupportsSpeechRecognition:()=>qSe,browserSupportsContinuousListening:()=>KSe},QSe=X.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:s="border",size:a,as:i="div",className:o,...l}=e;n=Dt(n,"spinner");const c=`${n}-${s}`;return(0,Nt.jsx)(i,{ref:t,...l,className:Et()(o,c,a&&`${c}-${a}`,r&&`text-${r}`)})}));QSe.displayName="Spinner";const JSe=QSe;var ZSe,eTe,tTe,nTe=n(5403);!function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"}(ZSe||(ZSe={})),function(e){e.Rear="REAR",e.Front="FRONT"}(eTe||(eTe={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(tTe||(tTe={}));class rTe extends nTe.E_{async getPhoto(e){return new Promise((async(t,n)=>{if(e.webUseInput||e.source===ZSe.Photos)this.fileInputExperience(e,t,n);else if(e.source===ZSe.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=e.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",(async r=>{0===r.detail?this.fileInputExperience(e,t,n):this.cameraExperience(e,t,n)}))}else this.cameraExperience(e,t,n)}))}async pickImages(e){return new Promise((async(e,t)=>{this.multipleFileInputExperience(e,t)}))}async cameraExperience(e,t,n){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===eTe.Front?"user":"environment",document.body.appendChild(r);try{await r.componentOnReady(),r.addEventListener("onPhoto",(async s=>{const a=s.detail;null===a?n(new nTe.I9("User cancelled photos app")):a instanceof Error?n(a):t(await this._getCameraPhoto(a,e)),r.dismiss(),document.body.removeChild(r)})),r.present()}catch(jEe){this.fileInputExperience(e,t,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,n)}fileInputExperience(e,t,n){let r=document.querySelector("#_capacitor-camera-input");const s=()=>{var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",(n=>{const a=r.files[0];let i="jpeg";if("image/png"===a.type?i="png":"image/gif"===a.type&&(i="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const n=new FileReader;n.addEventListener("load",(()=>{if("dataUrl"===e.resultType)t({dataUrl:n.result,format:i});else if("base64"===e.resultType){const e=n.result.split(",")[1];t({base64String:e,format:i})}s()})),n.readAsDataURL(a)}else t({webPath:URL.createObjectURL(a),format:i}),s()})),r.addEventListener("cancel",(e=>{n(new nTe.I9("User cancelled photos app")),s()}))),r.accept="image/*",r.capture=!0,e.source===ZSe.Photos||e.source===ZSe.Prompt?r.removeAttribute("capture"):e.direction===eTe.Front?r.capture="user":e.direction===eTe.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(e,t){let n=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var e;null===(e=n.parentNode)||void 0===e||e.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",(t=>{const s=[];for(let e=0;e<n.files.length;e++){const t=n.files[e];let r="jpeg";"image/png"===t.type?r="png":"image/gif"===t.type&&(r="gif"),s.push({webPath:URL.createObjectURL(t),format:r})}e({photos:s}),r()})),n.addEventListener("cancel",(e=>{t(new nTe.I9("User cancelled photos app")),r()}))),n.accept="image/*",n.click()}_getCameraPhoto(e,t){return new Promise(((n,r)=>{const s=new FileReader,a=e.type.split("/")[1];"uri"===t.resultType?n({webPath:URL.createObjectURL(e),format:a,saved:!1}):(s.readAsDataURL(e),s.onloadend=()=>{const e=s.result;"dataUrl"===t.resultType?n({dataUrl:e,format:a,saved:!1}):n({base64String:e.split(",")[1],format:a,saved:!1})},s.onerror=e=>{r(e)})}))}async checkPermissions(){if("undefined"===typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new rTe;const sTe=(0,nTe.F3)("Camera",{web:()=>new rTe});class aTe extends nTe.E_{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}async checkPermissions(){throw this.unimplemented("Not implemented on web.")}async convertHeicToJpeg(e){throw this.unimplemented("Not implemented on web.")}async pickFiles(e){const t=await this.openFilePicker(e);if(!t)throw new Error(this.ERROR_PICK_FILE_CANCELED);const n={files:[]};for(const r of t){const t={blob:r,modifiedAt:r.lastModified,mimeType:this.getMimeTypeFromUrl(r),name:this.getNameFromUrl(r),path:void 0,size:this.getSizeFromUrl(r)};(null===e||void 0===e?void 0:e.readData)&&(t.data=await this.getDataFromFile(r)),n.files.push(t)}return n}async pickDirectory(){throw this.unimplemented("Not implemented on web.")}async pickImages(e){return this.pickFiles(Object.assign({types:["image/*"]},e))}async pickMedia(e){return this.pickFiles(Object.assign({types:["image/*","video/*"]},e))}async pickVideos(e){return this.pickFiles(Object.assign({types:["video/*"]},e))}async requestPermissions(e){throw this.unimplemented("Not implemented on web.")}async openFilePicker(e){var t;const n=(null===(t=null===e||void 0===e?void 0:e.types)||void 0===t?void 0:t.join(","))||"",r=void 0===(null===e||void 0===e?void 0:e.limit)?0:e.limit;return new Promise((e=>{let t=!1;const s=document.createElement("input");s.type="file",s.accept=n,s.multiple=0===r,s.addEventListener("change",(()=>{t=!0;const n=Array.from(s.files||[]);e(n)}),{once:!0}),window.addEventListener("focus",(async()=>{await this.wait(1e3),t||e(void 0)}),{once:!0}),s.click()}))}async getDataFromFile(e){return new Promise(((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=("string"===typeof r.result?r.result:"").split("base64,")[1]||"";t(e)},r.onerror=e=>{n(e)}}))}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}async wait(e){return new Promise((t=>setTimeout(t,e)))}}(0,nTe.F3)("FilePicker",{web:()=>new aTe});const iTe=(0,nTe.F3)("SpeechRecognition",{web:()=>n.e(940).then(n.bind(n,9940)).then((e=>new e.SpeechRecognitionWeb))});var oTe=n(3825);const lTe=(0,nTe.F3)("Filesystem",{web:()=>n.e(457).then(n.bind(n,457)).then((e=>new e.FilesystemWeb))}),cTe=nTe.Ii.isNativePlatform();if(cTe)try{iTe.available()}catch(BEe){console.error("Error initializing speech recognition:",BEe)}const uTe=e=>new Promise(((t,n)=>{const r=new FileReader;r.onerror=n,r.onload=()=>{const e=r.result.split(",")[1];t(e)},r.readAsDataURL(e)})),hTe=/(\d+(?:\.\d+)?)/g,dTe={"raw materials":/raw materials|raw material|rawmaterials|rawmaterial/i,utilities:/utility|utilities|electric|electricity|water|power/i,salaries:/salary|salaries|wage|wages|pay|payment to staff|staff payment/i,maintenance:/maintenance|repair|repairs|fix|fixing/i,transport:/transport|transportation|shipping|logistics|delivery/i,"office supplies":/office|supplies|stationery|paper|pen|ink/i,marketing:/marketing|advertisement|promotion|ad|ads/i,miscellaneous:/misc|miscellaneous|other|others/i},pTe={sales:/sales|sold|sale|selling/i,wholesale:/wholesale|bulk sale|distributor/i,retail:/retail|shop sale|direct sale/i,online:/online|internet|website|web/i,"other income":/other income|misc income|miscellaneous income/i},fTe=/([0-9]{1,2})[\/\-]([0-9]{1,2})(?:[\/\-]([0-9]{2,4}))?/,mTe=/today|to-day/i,gTe=/yesterday|yester-day/i,yTe=e=>{let{onTransactionCapture:t,defaultType:n}=e;const[r,s]=(0,X.useState)(!1),[a,i]=(0,X.useState)(!1),[o,l]=(0,X.useState)(null),[c,u]=(0,X.useState)(null),[h,d]=(0,X.useState)(!1),[p,f]=(0,X.useState)(""),[m,g]=(0,X.useState)(null),{transcript:y,listening:v,resetTranscript:b,browserSupportsSpeechRecognition:w}=YSe(),x=cTe?p:y;(0,X.useEffect)((()=>()=>{cTe&&r&&T().catch((e=>console.error("Error stopping recognition on unmount:",e)))}),[r]),(0,X.useEffect)((()=>{cTe||s(v)}),[v]);const k=(0,X.useCallback)((e=>{console.log("Received speech recognition result:",e),f(e)}),[]),S=async()=>{try{console.log("Starting native speech recognition"),s(!0),f(""),u(null),(e=>{if(!cTe)throw new Error("Not supported in browser");try{iTe.addListener("partialResults",(t=>{console.log("Partial speech results:",t),t&&t.matches&&t.matches.length>0&&e(t.matches[0])})),iTe.addListener("results",(t=>{console.log("Final speech results:",t),t&&t.matches&&t.matches.length>0&&e(t.matches[0])}))}catch(c){console.error("Error adding speech recognition listener:",c)}})(k),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US";if(!cTe)throw new Error("Not supported in browser");try{console.log("Checking speech recognition availability");const t=await iTe.available();if(console.log("Speech recognition available:",t),!t.available)throw new Error("Speech recognition not available on this device");console.log("Checking speech recognition permission");const n=await iTe.requestPermission();if(console.log("Speech recognition permission:",n),!n.permission)throw new Error("Permission denied for speech recognition");return console.log("Starting speech recognition"),await iTe.start({language:e,maxResults:2,prompt:"Speak now...",partialResults:!0,popup:!1}),console.log("Speech recognition started successfully"),!0}catch(c){throw console.error("Error starting speech recognition:",c),alert(`Speech recognition error: ${c.message}`),c}}("en-IN"),console.log("Native speech recognition started successfully"),g("granted")}catch(UEe){console.error("Error in startNativeSpeechRecognition:",UEe),u(`Speech recognition error: ${UEe.message}`),s(!1),UEe.message.includes("Permission denied")&&g("denied")}},T=async()=>{try{console.log("Stopping native speech recognition"),r&&(await(async()=>{if(!cTe)throw new Error("Not supported in browser");try{return await iTe.stop(),!0}catch(c){throw console.error("Error stopping speech recognition:",c),c}})(),await(async()=>{if(!cTe)throw new Error("Not supported in browser");try{await iTe.removeAllListeners()}catch(c){console.error("Error removing speech recognition listeners:",c)}})(),s(!1),p&&p.trim().length>0&&E())}catch(UEe){console.error("Error stopping speech recognition:",UEe),u(`Error stopping speech: ${UEe.message}`),s(!1)}};if(!(cTe||w))return(0,Nt.jsxs)(Ws,{variant:"outline-secondary",disabled:!0,className:"voice-input-btn",title:"Your device doesn't support speech recognition",children:[(0,Nt.jsx)(ji,{})," Voice Input Not Supported"]});const E=()=>{d(!0),u(null);try{if(console.log("Interpreting voice input:",x),!x||0===x.trim().length)throw new Error("No speech detected. Please try again and speak clearly.");let e=n||"expense";/income|received|earned|revenue|sales/i.test(x)&&(e="income"),/expense|spent|paid|payment|buy|bought|purchased/i.test(x)&&(e="expense");const t=x.match(hTe),r=t?parseFloat(t[0]):null;if(!r)throw new Error("Could not identify an amount in your voice input");let s="miscellaneous";const a="income"===e?pTe:dTe;for(const[n,i]of Object.entries(a))if(i.test(x)){s=n;break}let o=new Date;if(mTe.test(x));else if(gTe.test(x))o.setDate(o.getDate()-1);else{const e=x.match(fTe);if(e){const t=parseInt(e[1]),n=parseInt(e[2])-1,r=e[3]?2===e[3].length?2e3+parseInt(e[3]):parseInt(e[3]):o.getFullYear();o=new Date(r,n,t)}}const c=o.toISOString().split("T")[0],u=x.match(/for\s+(.*?)(?:\s+on|\s+at|\s+in|\s+to|\s+from|\s+by|\s+with|\s+and|\s+$)/i),h=u?u[1]:s,d={type:e,amount:r,category:s,date:c,description:h.charAt(0).toUpperCase()+h.slice(1)};console.log("Interpreted transaction:",d),l(d),i(!0)}catch(UEe){console.error("Error interpreting voice input:",UEe),u(UEe.message||"Couldn't interpret voice input properly"),l(null)}finally{d(!1)}},N=()=>{cTe?f(""):b(),l(null),i(!1)};return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)(Ws,{variant:r?"danger":"outline-primary",onClick:()=>{console.log("handleListen called, isListening:",r),cTe?r?T():S():r?(XSe.stopListening(),E()):(b(),XSe.startListening({continuous:!0,language:"en-IN"}))},className:"voice-input-btn",children:[r?(0,Nt.jsx)(ji,{}):(0,Nt.jsx)(Ui,{})," ",r?"Stop Listening":"Voice Input"]}),h&&(0,Nt.jsx)(kSe,{show:!0,centered:!0,backdrop:"static",children:(0,Nt.jsxs)(kSe.Body,{className:"text-center p-4",children:[(0,Nt.jsx)(JSe,{animation:"border",variant:"primary"}),(0,Nt.jsx)("p",{className:"mt-3",children:"Processing your voice input..."})]})}),"denied"===m&&cTe&&(0,Nt.jsxs)(kSe,{show:!0,onHide:()=>g(null),centered:!0,children:[(0,Nt.jsx)(kSe.Header,{closeButton:!0,children:(0,Nt.jsx)(kSe.Title,{children:"Permission Required"})}),(0,Nt.jsx)(kSe.Body,{children:(0,Nt.jsxs)(sSe,{variant:"warning",children:[(0,Nt.jsx)("p",{children:"Microphone permission is required for voice input."}),(0,Nt.jsx)("p",{children:"Please go to your device settings and enable microphone permission for this app."})]})}),(0,Nt.jsx)(kSe.Footer,{children:(0,Nt.jsx)(Ws,{variant:"secondary",onClick:()=>g(null),children:"Close"})})]}),(0,Nt.jsxs)(kSe,{show:a,onHide:N,centered:!0,children:[(0,Nt.jsx)(kSe.Header,{closeButton:!0,children:(0,Nt.jsx)(kSe.Title,{children:"Confirm Transaction"})}),(0,Nt.jsxs)(kSe.Body,{children:[c?(0,Nt.jsxs)(sSe,{variant:"danger",children:[c,(0,Nt.jsx)("hr",{}),(0,Nt.jsxs)("p",{className:"mb-0",children:['Speech transcript: "',x,'"']})]}):o&&(0,Nt.jsx)(Nie,{children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsx)(Nie.Title,{children:"income"===o.type?"Income":"Expense"}),(0,Nt.jsxs)(Nie.Text,{as:"div",children:[(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Amount:"})," \u20b9",o.amount]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Category:"})," ",o.category]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Description:"})," ",o.description]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Date:"})," ",o.date]})]})]})}),(0,Nt.jsx)("div",{className:"mt-3",children:(0,Nt.jsxs)("p",{className:"text-muted small",children:['I heard: "',x,'"']})})]}),(0,Nt.jsxs)(kSe.Footer,{children:[(0,Nt.jsxs)(Ws,{variant:"secondary",onClick:N,children:[(0,Nt.jsx)(to,{})," Cancel"]}),(0,Nt.jsxs)(Ws,{variant:"primary",onClick:()=>{o&&(t(o),cTe?f(""):b(),l(null),i(!1))},disabled:!o,children:[(0,Nt.jsx)(Ni,{})," Confirm"]})]})]})]})};var vTe=n(1257);const bTe=/(?:total|amount|amt|sum|rs|inr|\u20b9)[\s:]*(\d+(?:\.\d+)?)/i,wTe=/(\d{1,2})[\/\-\.\\](\d{1,2})[\/\-\.\\](\d{2,4})/,xTe=/GST\s*(?:No|Number|#)?[\s:]*([0-9A-Z]+)/i,kTe=e=>{let{onTransactionCapture:t,defaultType:n="expense"}=e;const[r,s]=(0,X.useState)(!1),[a,i]=(0,X.useState)(null),[o,l]=(0,X.useState)(!1),[c,u]=(0,X.useState)(null),[h,d]=(0,X.useState)(null),[p,f]=(0,X.useState)(null),[m,g]=(0,X.useState)(0),[y,v]=(0,X.useState)(""),b=(0,X.useRef)(null),w=(0,X.useRef)(null),x=(0,X.useRef)(null),k=(0,X.useRef)(null),S=()=>{if(!cTe&&k.current){k.current.getTracks().forEach((e=>e.stop())),k.current=null}},T=async e=>{try{if(cTe){const e=await(async()=>{if(!cTe)throw new Error("Not supported in browser");try{const e=await sTe.pickImages({quality:90,limit:1});if(e.photos.length>0){const t=e.photos[0];return`data:image/jpeg;base64,${(await lTe.readFile({path:t.path})).data}`}return null}catch(h){throw console.error("Error picking image:",h),h}})();e&&i(e)}else{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{i(e.target.result)},e.readAsDataURL(t)}}}catch(UEe){d(`Couldn't select image: ${UEe.message}`)}},E=(e,t)=>{try{const t=(new Date).toISOString().split("T")[0],r={type:n,amount:null,category:"miscellaneous",date:t,description:"Scanned receipt"},s=e.match(bTe);s&&s[1]&&(r.amount=parseFloat(s[1]));const a=e.match(wTe);if(a){const e=parseInt(a[1]),t=parseInt(a[2])-1;let n=parseInt(a[3]);n<100&&(n=n<50?2e3+n:1900+n);const s=new Date(n,t,e);isNaN(s.getTime())||(r.date=s.toISOString().split("T")[0])}const i=e.match(/(store|mart|shop|super|market|restaurant|hotel):?\s*([A-Za-z0-9\s]+)/i);i&&i[2]&&(r.description=i[2].trim());const o=e.match(xTe);if(o&&o[1]&&(r.gstNumber=o[1],r.description+=` (GST: ${o[1]})`),/food|meal|restaurant|cafe|grocery|groceries/i.test(e)?r.category="raw materials":/electric|electricity|power|water|gas|utility|utilities/i.test(e)?r.category="utilities":/petrol|diesel|fuel|transport|travel|taxi|cab|uber|ola/i.test(e)?r.category="transport":/office|stationery|paper|pen|printer|ink/i.test(e)&&(r.category="office supplies"),!r.amount)throw new Error("Couldn't detect an amount on the receipt");f(r)}catch(UEe){d(UEe.message||"Couldn't interpret the receipt properly"),f(null)}};return X.useEffect((()=>{!r||a||cTe||(async()=>{if(!cTe)try{const e={video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}},t=await navigator.mediaDevices.getUserMedia(e);w.current&&(w.current.srcObject=t,k.current=t)}catch(UEe){d("Couldn't access camera: "+UEe.message)}})()}),[r]),(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)(Ws,{variant:"outline-primary",onClick:()=>{s(!0),i(null),u(null),d(null),f(null)},className:"ocr-scanner-btn",children:[(0,Nt.jsx)(Ti,{})," Scan Receipt"]}),(0,Nt.jsxs)(kSe,{show:r,onHide:()=>{s(!1),cTe||S()},centered:!0,size:"lg",backdrop:"static",children:[(0,Nt.jsx)(kSe.Header,{closeButton:!0,children:(0,Nt.jsx)(kSe.Title,{children:"Scan Receipt"})}),(0,Nt.jsx)(kSe.Body,{children:a?(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"mb-3",children:(0,Nt.jsx)("img",{src:a,alt:"Receipt",style:{maxWidth:"100%",maxHeight:"50vh",objectFit:"contain"}})}),!o&&!c&&!h&&(0,Nt.jsxs)(Ws,{variant:"primary",onClick:async()=>{if(a){l(!0),u(null),d(null);try{const e=await(0,vTe.createWorker)("eng"),t=await e.recognize(a);if(await e.terminate(),!t||!t.data)throw new Error("Couldn't extract text from the image");v(t.data.text),g(t.data.confidence),u(t.data),E(t.data.text,t.data.confidence)}catch(UEe){d(`OCR processing failed: ${UEe.message}`),u(null)}finally{l(!1)}}else d("No image to process")},className:"mb-3",children:[(0,Nt.jsx)(Xi,{})," Scan for Text"]}),o&&(0,Nt.jsxs)("div",{className:"text-center p-4",children:[(0,Nt.jsx)(JSe,{animation:"border",variant:"primary"}),(0,Nt.jsx)("p",{className:"mt-2",children:"Processing image..."})]}),h&&(0,Nt.jsx)(sSe,{variant:"danger",className:"mb-3",children:h}),c&&(0,Nt.jsxs)("div",{className:"mt-3",children:[p?(0,Nt.jsxs)(Nie,{className:"mb-3",children:[(0,Nt.jsx)(Nie.Header,{children:"Detected Transaction"}),(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Type:"})," ","income"===p.type?"Income":"Expense"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Amount:"})," \u20b9",p.amount]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Category:"})," ",p.category]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Date:"})," ",p.date]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Description:"})," ",p.description]})]}),(0,Nt.jsxs)(Nie.Footer,{className:"d-flex justify-content-between",children:[(0,Nt.jsxs)(Ws,{variant:"secondary",onClick:()=>i(null),children:[(0,Nt.jsx)(to,{})," Cancel"]}),(0,Nt.jsxs)(Ws,{variant:"primary",onClick:()=>{p&&(t(p),s(!1),i(null),u(null),f(null))},children:[(0,Nt.jsx)(Ni,{})," Save Transaction"]})]})]}):(0,Nt.jsxs)("div",{className:"mb-3",children:[(0,Nt.jsx)(sSe,{variant:"warning",children:"No transaction details could be extracted. Try taking a clearer photo or manually enter the details."}),(0,Nt.jsxs)(Ws,{variant:"secondary",onClick:()=>i(null),children:[(0,Nt.jsx)(to,{})," Try Again"]})]}),(0,Nt.jsx)("div",{className:"mt-4",children:(0,Nt.jsxs)(Qpe.Group,{children:[(0,Nt.jsxs)(Qpe.Label,{children:["Raw Text (Confidence: ",m.toFixed(2),"%)"]}),(0,Nt.jsx)(Qpe.Control,{as:"textarea",rows:5,value:y,readOnly:!0})]})})]})]}):(0,Nt.jsxs)("div",{className:"text-center",children:[!cTe&&(0,Nt.jsxs)("div",{className:"camera-container mb-3",children:[(0,Nt.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,style:{width:"100%",maxHeight:"50vh",objectFit:"contain"}}),(0,Nt.jsx)("canvas",{ref:x,style:{display:"none"}})]}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-center gap-3",children:[(0,Nt.jsxs)(Ws,{variant:"primary",onClick:async()=>{try{if(cTe){const e=await(async()=>{if(!cTe)throw new Error("Not supported in browser");try{return(await sTe.getPhoto({quality:90,allowEditing:!1,resultType:tTe.DataUrl,source:ZSe.Camera})).dataUrl}catch(h){throw console.error("Error taking picture:",h),h}})();i(e)}else if(w.current&&x.current){const e=w.current,t=x.current;t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0,t.width,t.height);const n=t.toDataURL("image/jpeg");S(),i(n)}}catch(UEe){d(`Couldn't capture image: ${UEe.message}`)}},children:[(0,Nt.jsx)(Ti,{})," ",cTe?"Take Photo":"Capture"]}),(0,Nt.jsxs)(Ws,{variant:"secondary",onClick:cTe?T:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.click()},children:[(0,Nt.jsx)(ro,{})," Upload Image"]}),!cTe&&(0,Nt.jsx)("input",{type:"file",ref:b,accept:"image/*",onChange:T,style:{display:"none"}})]})]})})]})]})},STe=()=>{const{isOnline:e}=Yae(),[t,n]=(0,X.useState)([]),[r,s]=(0,X.useState)(!0),[a,i]=(0,X.useState)(null),[o,l]=(0,X.useState)(null),[c,u]=(0,X.useState)(null),[h,d]=(0,X.useState)(!1),[p,f]=(0,X.useState)(null),[m,g]=(0,X.useState)(!1),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{s(!0);const t=await Wke(e);n(t),i(null)}catch(UEe){i("Error loading transactions. Please try again."),console.error(UEe)}finally{s(!1)}};(0,X.useEffect)((()=>{const e=new Date,t={start_date:new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};y(t)}),[]);return(0,X.useEffect)((()=>{if(o){const e=setTimeout((()=>{l(null)}),3e3);return()=>clearTimeout(e)}}),[o]),(0,Nt.jsxs)(Ft,{fluid:!0,children:[(0,Nt.jsx)("h2",{className:"section-header mt-3",children:"Manage Transactions"}),o&&(0,Nt.jsx)(sSe,{variant:"success",dismissible:!0,onClose:()=>l(null),children:o}),a&&(0,Nt.jsx)(sSe,{variant:"danger",dismissible:!0,onClose:()=>i(null),children:a}),(0,Nt.jsxs)(nie,{children:[(0,Nt.jsxs)(sie,{lg:4,md:12,children:[(0,Nt.jsxs)(Nie,{className:"mb-4 shadow-sm",children:[(0,Nt.jsx)(Nie.Header,{children:(0,Nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Nt.jsx)("h5",{className:"mb-0",children:"Add Transaction"}),(0,Nt.jsx)("div",{children:(0,Nt.jsxs)(Ws,{variant:"outline-primary",size:"sm",onClick:()=>{g(!m),c&&!m&&u(null)},className:"me-2",children:[(0,Nt.jsx)(Gi,{})," ",m?"Hide Form":"Show Form"]})})]})}),(0,Nt.jsxs)(Nie.Body,{children:[m&&(0,Nt.jsx)(_Se,{onSubmit:async e=>{try{if(c){if(!e)return void u(null);await Gke(c.id,e),l("Transaction updated successfully!"),u(null)}else await Hke(e),l("Transaction added successfully!");y()}catch(UEe){i("Error saving transaction. Please try again."),console.error(UEe)}},initialData:c,isEditing:!!c}),(0,Nt.jsxs)("div",{className:"smart-input-options mt-3",children:[(0,Nt.jsx)("h6",{className:"text-muted mb-3",children:"Quick Input Options:"}),(0,Nt.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,Nt.jsx)(yTe,{onTransactionCapture:async e=>{try{await Hke(e),l("Voice transaction added successfully!"),y()}catch(UEe){i("Error saving voice transaction. Please try again."),console.error(UEe)}},defaultType:"expense",disabled:!e}),(0,Nt.jsx)(kTe,{onTransactionCapture:async e=>{try{await Hke(e),l("Scanned transaction added successfully!"),y()}catch(UEe){i("Error saving scanned transaction. Please try again."),console.error(UEe)}},defaultType:"expense",disabled:!e})]}),!e&&(0,Nt.jsx)(sSe,{variant:"warning",className:"mt-3 mb-0",children:(0,Nt.jsx)("small",{children:"Voice and OCR features require an internet connection."})})]})]})]}),(0,Nt.jsxs)(Nie,{className:"shadow-sm",children:[(0,Nt.jsx)(Nie.Header,{children:(0,Nt.jsx)("h5",{className:"mb-0",children:"How to Use"})}),(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsxs)("h6",{children:[(0,Nt.jsx)(Ui,{className:"me-2"}),"Voice Input"]}),(0,Nt.jsxs)("p",{className:"small text-muted mb-3",children:["Say amounts and categories naturally. Examples:",(0,Nt.jsxs)("ul",{className:"mb-0 ps-3",children:[(0,Nt.jsx)("li",{children:'"Spent 500 rupees on raw materials today"'}),(0,Nt.jsx)("li",{children:'"Income of 2000 from sales yesterday"'}),(0,Nt.jsx)("li",{children:'"Paid 350 for electricity on 15/05"'})]})]}),(0,Nt.jsxs)("h6",{children:[(0,Nt.jsx)(Ti,{className:"me-2"}),"Receipt Scanner"]}),(0,Nt.jsxs)("p",{className:"small text-muted mb-0",children:["Use your camera to scan receipts and bills. The system will try to detect:",(0,Nt.jsxs)("ul",{className:"mb-0 ps-3",children:[(0,Nt.jsx)("li",{children:"Total amount"}),(0,Nt.jsx)("li",{children:"Date of purchase"}),(0,Nt.jsx)("li",{children:"Vendor information"}),(0,Nt.jsx)("li",{children:"GST information (if available)"})]})]})]})]})]}),(0,Nt.jsxs)(sie,{lg:8,md:12,children:[(0,Nt.jsx)(efe,{onFilterChange:e=>{y(e)}}),r?(0,Nt.jsx)("div",{className:"text-center p-5",children:"Loading transactions..."}):(0,Nt.jsx)(CSe,{transactions:t,onEdit:e=>{u(e)},onDelete:e=>{f(e),d(!0)}})]})]}),(0,Nt.jsxs)(kSe,{show:h,onHide:()=>d(!1),children:[(0,Nt.jsx)(kSe.Header,{closeButton:!0,children:(0,Nt.jsx)(kSe.Title,{children:"Confirm Delete"})}),(0,Nt.jsx)(kSe.Body,{children:"Are you sure you want to delete this transaction? This action cannot be undone."}),(0,Nt.jsxs)(kSe.Footer,{children:[(0,Nt.jsx)(Ws,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),(0,Nt.jsx)(Ws,{variant:"danger",onClick:async()=>{try{await qke(p),l("Transaction deleted successfully!"),d(!1),f(null),y()}catch(UEe){i("Error deleting transaction. Please try again."),console.error(UEe)}},children:"Delete"})]})]})]})},TTe=()=>{const[e,t]=(0,X.useState)(!1),[n,r]=(0,X.useState)(null),[s,a]=(0,X.useState)(null),[i,o]=(0,X.useState)("transactions"),[l,c]=(0,X.useState)({});return X.useEffect((()=>{if(s){const e=setTimeout((()=>{a(null)}),3e3);return()=>clearTimeout(e)}}),[s]),(0,Nt.jsxs)(Ft,{children:[(0,Nt.jsx)("h2",{className:"my-4",children:"Reports & Exports"}),n&&(0,Nt.jsx)(sSe,{variant:"danger",dismissible:!0,onClose:()=>r(null),children:n}),s&&(0,Nt.jsx)(sSe,{variant:"success",dismissible:!0,onClose:()=>a(null),children:s}),(0,Nt.jsxs)(nie,{className:"g-4",children:[(0,Nt.jsx)(sie,{lg:4,md:12,children:(0,Nt.jsxs)(Nie,{children:[(0,Nt.jsx)(Nie.Header,{children:(0,Nt.jsx)("h5",{className:"mb-0",children:"Generate Reports"})}),(0,Nt.jsx)(Nie.Body,{children:(0,Nt.jsxs)(Qpe,{children:[(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Report Type"}),(0,Nt.jsxs)(Qpe.Select,{value:i,onChange:e=>o(e.target.value),children:[(0,Nt.jsx)("option",{value:"transactions",children:"All Transactions"}),(0,Nt.jsx)("option",{value:"income",children:"Income Only"}),(0,Nt.jsx)("option",{value:"expense",children:"Expenses Only"}),(0,Nt.jsx)("option",{value:"summary",children:"Monthly Summary"}),(0,Nt.jsx)("option",{value:"categories",children:"Category Analysis"})]})]}),(0,Nt.jsx)(efe,{onFilterChange:e=>{c(e)},minimal:!0,showResetButton:!1}),(0,Nt.jsxs)("div",{className:"mt-3",children:[(0,Nt.jsxs)(Ws,{variant:"success",className:"me-2 mb-2",onClick:async()=>{try{t(!0),r(null);const e=await(async()=>{try{const e=await sfe({}),t=Bke.book_new(),n=e.map((e=>({Date:e.date,Type:"income"===e.type?"Income":"Expense",Category:e.category,Amount:e.amount,Description:e.description||""}))),r=Bke.json_to_sheet(n);Bke.book_append_sheet(t,r,"Transactions");const s=Ake(t,{bookType:"xlsx",type:"array"});return new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}catch(n){throw console.error("Error exporting to Excel:",n),n}})();cTe?(await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"panekkatt_finance.xlsx";try{if(cTe){const n=await uTe(e),r=await lTe.writeFile({path:t,data:n,directory:oTe.__.Documents,recursive:!0});return alert(`File saved to Documents/${t}`),r}throw new Error("Use browser method instead")}catch(n){throw console.error("Error saving excel file:",n),n}}(e,"panekkatt_finance.xlsx"),a("Excel report saved to your Documents folder")):((0,Vke.saveAs)(e,"panekkatt_finance.xlsx"),a("Excel report generated successfully!"))}catch(UEe){r("Error generating Excel report: "+UEe.message),console.error(UEe)}finally{t(!1)}},disabled:e,children:[(0,Nt.jsx)(Pi,{className:"me-1"})," Export to Excel"]}),(0,Nt.jsxs)(Ws,{variant:"danger",className:"mb-2",onClick:()=>{r("PDF export will be available in the next update.")},disabled:e,children:[(0,Nt.jsx)(Li,{className:"me-1"})," Export to PDF"]})]})]})})]})}),(0,Nt.jsx)(sie,{lg:8,md:12,children:(0,Nt.jsxs)(Nie,{children:[(0,Nt.jsx)(Nie.Header,{children:"Report Preview"}),(0,Nt.jsx)(Nie.Body,{className:"p-4",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)(Ei,{size:50,className:"text-muted mb-3"}),(0,Nt.jsx)("h4",{children:"Your Report Will Appear Here"}),(0,Nt.jsx)("p",{className:"text-muted",children:"Select report type and date range, then click Export to generate your report."}),(0,Nt.jsx)("p",{className:"text-muted",children:"In Phase 2, AI-powered insights and forecasting will be available here!"})]})})]})})]})]})},ETe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],NTe=["activeKey","getControlledId","getControllerId"],CTe=["as"];function ITe(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _Te(e){let{active:t,eventKey:n,mountOnEnter:r,transition:s,unmountOnExit:a,role:i="tabpanel",onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:h,onExited:d}=e,p=ITe(e,ETe);const f=(0,X.useContext)(vs);if(!f)return[Object.assign({},p,{role:i}),{eventKey:n,isActive:t,mountOnEnter:r,transition:s,unmountOnExit:a,onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:h,onExited:d}];const{activeKey:m,getControlledId:g,getControllerId:y}=f,v=ITe(f,NTe),b=$t(n);return[Object.assign({},p,{role:i,id:g(n),"aria-labelledby":y(n)}),{eventKey:n,isActive:null==t&&null!=b?$t(m)===b:t,transition:s||v.transition,mountOnEnter:null!=r?r:v.mountOnEnter,unmountOnExit:null!=a?a:v.unmountOnExit,onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:h,onExited:d}]}const ATe=X.forwardRef(((e,t)=>{let{as:n="div"}=e,r=ITe(e,CTe);const[s,{isActive:a,onEnter:i,onEntering:o,onEntered:l,onExit:c,onExiting:u,onExited:h,mountOnEnter:d,unmountOnExit:p,transition:f=mr}]=_Te(r);return(0,Nt.jsx)(vs.Provider,{value:null,children:(0,Nt.jsx)(zt.Provider,{value:null,children:(0,Nt.jsx)(f,{in:a,onEnter:i,onEntering:o,onEntered:l,onExit:c,onExiting:u,onExited:h,mountOnEnter:d,unmountOnExit:p,children:(0,Nt.jsx)(n,Object.assign({},s,{ref:t,hidden:!a,"aria-hidden":!a}))})})})}));ATe.displayName="TabPanel";const RTe=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:s,defaultActiveKey:a,transition:i,mountOnEnter:o,unmountOnExit:l,children:c}=e,[u,h]=Hs(s,a,r),d=_a(t),p=(0,X.useMemo)((()=>n||((e,t)=>d?`${d}-${t}-${e}`:null)),[d,n]),f=(0,X.useMemo)((()=>({onSelect:h,activeKey:u,transition:i,mountOnEnter:o||!1,unmountOnExit:l||!1,getControlledId:e=>p(e,"tabpane"),getControllerId:e=>p(e,"tab")})),[h,u,i,o,l,p]);return(0,Nt.jsx)(vs.Provider,{value:f,children:(0,Nt.jsx)(zt.Provider,{value:h||null,children:c})})};RTe.Panel=ATe;const DTe=RTe;function OTe(e){return"boolean"===typeof e?e?_r:mr:e}const MTe=e=>{let{transition:t,...n}=e;return(0,Nt.jsx)(DTe,{...n,transition:OTe(t)})};MTe.displayName="TabContainer";const PTe=MTe,LTe=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"tab-content"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));LTe.displayName="TabContent";const FTe=LTe,$Te=X.forwardRef(((e,t)=>{let{bsPrefix:n,transition:r,...s}=e;const[{className:a,as:i="div",...o},{isActive:l,onEnter:c,onEntering:u,onEntered:h,onExit:d,onExiting:p,onExited:f,mountOnEnter:m,unmountOnExit:g,transition:y=_r}]=_Te({...s,transition:OTe(r)}),v=Dt(n,"tab-pane");return(0,Nt.jsx)(vs.Provider,{value:null,children:(0,Nt.jsx)(zt.Provider,{value:null,children:(0,Nt.jsx)(y,{in:l,onEnter:c,onEntering:u,onEntered:h,onExit:d,onExiting:p,onExited:f,mountOnEnter:m,unmountOnExit:g,children:(0,Nt.jsx)(i,{...o,ref:t,className:Et()(a,v,l&&"active")})})})})}));$Te.displayName="TabPane";const zTe=$Te,jTe={eventKey:Fr().oneOfType([Fr().string,Fr().number]),title:Fr().node.isRequired,disabled:Fr().bool,tabClassName:Fr().string,tabAttrs:Fr().object},UTe=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};UTe.propTypes=jTe;const BTe=Object.assign(UTe,{Container:PTe,Content:FTe,Pane:zTe}),VTe=()=>{const{currentUser:e,userProfile:t,logout:n,refreshProfile:r}=Yae(),{darkMode:s,toggleTheme:a}=Jae(),[i,o]=(0,X.useState)(!1),[l,c]=(0,X.useState)(""),[u,h]=(0,X.useState)(""),[d,p]=(0,X.useState)({displayName:"",email:"",phoneNumber:"",role:"",companyName:"Panekkatt Oil Mill"});(0,X.useEffect)((()=>{t&&p({displayName:t.displayName||"",email:t.email||"",phoneNumber:t.phoneNumber||"",role:t.role||"",companyName:t.companyName||"Panekkatt Oil Mill"})}),[t]);const f=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))};return(0,Nt.jsx)(Ft,{className:"my-4",children:(0,Nt.jsx)(nie,{className:"justify-content-center",children:(0,Nt.jsx)(sie,{lg:8,children:(0,Nt.jsxs)(Nie,{className:"card-3d shadow",children:[(0,Nt.jsx)(Nie.Header,{className:"bg-primary text-white",children:(0,Nt.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Nt.jsx)(ao,{className:"me-2",size:24}),(0,Nt.jsx)("h4",{className:"mb-0",children:"User Profile"})]}),(0,Nt.jsx)(Zae,{})]})}),(0,Nt.jsx)(Nie.Body,{className:"p-0",children:(0,Nt.jsx)(BTe.Container,{defaultActiveKey:"profile",children:(0,Nt.jsxs)(nie,{className:"g-0",children:[(0,Nt.jsx)(sie,{md:3,children:(0,Nt.jsxs)(Bs,{variant:"pills",className:"flex-column p-3 h-100",children:[(0,Nt.jsx)(Bs.Item,{children:(0,Nt.jsxs)(Bs.Link,{eventKey:"profile",className:"mb-2",children:[(0,Nt.jsx)(ao,{className:"me-2"})," Profile"]})}),(0,Nt.jsx)(Bs.Item,{children:(0,Nt.jsxs)(Bs.Link,{eventKey:"appearance",className:"mb-2",children:[(0,Nt.jsx)(Wi,{className:"me-2"})," Appearance"]})})]})}),(0,Nt.jsx)(sie,{md:9,children:(0,Nt.jsxs)(BTe.Content,{className:"p-4",children:[(0,Nt.jsxs)(BTe.Pane,{eventKey:"profile",children:[l&&(0,Nt.jsx)(sSe,{variant:"danger",children:l}),u&&(0,Nt.jsx)(sSe,{variant:"success",children:u}),(0,Nt.jsxs)(Qpe,{onSubmit:async t=>{t.preventDefault(),c(""),h(""),o(!0);try{await Kke(e.uid,{displayName:d.displayName,phoneNumber:d.phoneNumber,role:d.role,companyName:d.companyName,updatedAt:(new Date).toISOString()}),await r(),h("Profile updated successfully")}catch(UEe){c("Failed to update profile: "+UEe.message),console.error(UEe)}finally{o(!1)}},children:[(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Name"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"displayName",value:d.displayName,onChange:f,required:!0})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Email"}),(0,Nt.jsx)(Qpe.Control,{type:"email",name:"email",value:d.email,disabled:!0}),(0,Nt.jsx)(Qpe.Text,{className:"text-muted",children:"Email cannot be changed"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Phone Number"}),(0,Nt.jsx)(Qpe.Control,{type:"tel",name:"phoneNumber",value:d.phoneNumber,onChange:f})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Role"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"role",value:d.role,onChange:f,placeholder:"e.g., Manager, Accountant, Owner"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-4",children:[(0,Nt.jsx)(Qpe.Label,{children:"Company"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"companyName",value:d.companyName,onChange:f})]}),(0,Nt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Nt.jsxs)(Ws,{variant:"primary",type:"submit",disabled:i,className:"px-4",children:[(0,Nt.jsx)(Yi,{className:"me-2"}),i?"Saving...":"Save Changes"]}),(0,Nt.jsxs)(Ws,{variant:"outline-danger",onClick:async()=>{try{await n()}catch(UEe){c("Failed to log out: "+UEe.message)}},children:[(0,Nt.jsx)(Ji,{className:"me-2"}),"Sign Out"]})]})]})]}),(0,Nt.jsxs)(BTe.Pane,{eventKey:"appearance",children:[(0,Nt.jsx)("h5",{className:"mb-4",children:"Theme Settings"}),(0,Nt.jsxs)("div",{className:"appearance-option mb-4",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h6",{className:"mb-1",children:"Dark Mode"}),(0,Nt.jsx)("p",{className:"text-muted mb-0 small",children:"Switch between light and dark themes"})]}),(0,Nt.jsx)(Zae,{})]}),(0,Nt.jsxs)("div",{className:"theme-preview-container d-flex justify-content-between mt-4",children:[(0,Nt.jsxs)("div",{className:"theme-preview p-3 rounded "+(s?"border":"border border-primary"),onClick:()=>s&&a(),children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,Nt.jsx)(Zi,{className:"me-2 text-warning"}),(0,Nt.jsx)("span",{children:"Light Mode"})]}),(0,Nt.jsxs)("div",{style:{width:"100%",height:"80px",backgroundColor:"#f5f5f7",borderRadius:"8px",padding:"10px",position:"relative"},children:[(0,Nt.jsx)("div",{style:{position:"absolute",top:"10px",left:"10px",right:"10px",height:"20px",backgroundColor:"#fff",borderRadius:"4px"}}),(0,Nt.jsx)("div",{style:{position:"absolute",bottom:"10px",left:"10px",width:"60%",height:"30px",backgroundColor:"#5e5ce6",borderRadius:"4px"}})]})]}),(0,Nt.jsxs)("div",{className:"theme-preview p-3 rounded "+(s?"border border-primary":"border"),onClick:()=>!s&&a(),children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,Nt.jsx)(Vi,{className:"me-2 text-secondary"}),(0,Nt.jsx)("span",{children:"Dark Mode"})]}),(0,Nt.jsxs)("div",{style:{width:"100%",height:"80px",backgroundColor:"#111111",borderRadius:"8px",padding:"10px",position:"relative"},children:[(0,Nt.jsx)("div",{style:{position:"absolute",top:"10px",left:"10px",right:"10px",height:"20px",backgroundColor:"#1c1c1e",borderRadius:"4px"}}),(0,Nt.jsx)("div",{style:{position:"absolute",bottom:"10px",left:"10px",width:"60%",height:"30px",backgroundColor:"#6e6df0",borderRadius:"4px"}})]})]})]})]})]})]})})]})})})]})})})})},WTe=X.forwardRef(((e,t)=>{let{bsPrefix:n,active:r,disabled:s,eventKey:a,className:i,variant:o,action:l,as:c,...u}=e;n=Dt(n,"list-group-item");const[h,d]=Ts({key:$t(a,u.href),active:r,...u}),p=Bn((e=>{if(s)return e.preventDefault(),void e.stopPropagation();h.onClick(e)}));s&&void 0===u.tabIndex&&(u.tabIndex=-1,u["aria-disabled"]=!0);const f=c||(l?u.href?"a":"button":"div");return(0,Nt.jsx)(f,{ref:t,...u,...h,onClick:p,className:Et()(i,n,d.isActive&&"active",s&&"disabled",o&&`${n}-${o}`,l&&`${n}-action`)})}));WTe.displayName="ListGroupItem";const HTe=WTe,GTe=X.forwardRef(((e,t)=>{const{className:n,bsPrefix:r,variant:s,horizontal:a,numbered:i,as:o="div",...l}=Wt(e,{activeKey:"onSelect"}),c=Dt(r,"list-group");let u;return a&&(u=!0===a?"horizontal":`horizontal-${a}`),(0,Nt.jsx)(Rs,{ref:t,...l,as:o,className:Et()(n,c,s&&`${c}-${s}`,u&&`${c}-${u}`,i&&`${c}-numbered`)})}));GTe.displayName="ListGroup";const qTe=Object.assign(GTe,{Item:HTe}),KTe=()=>{const{isOnline:e}=Yae(),[t,n]=(0,X.useState)([]),[r,s]=(0,X.useState)(!0),[a,i]=(0,X.useState)(""),[o,l]=(0,X.useState)(""),[c,u]=(0,X.useState)("income"),[h,d]=(0,X.useState)(!1),[p,f]=(0,X.useState)(!1),[m,g]=(0,X.useState)(null),[y,v]=(0,X.useState)({name:"",type:"income",icon:"\ud83d\udcb0"});(0,X.useEffect)((()=>{b()}),[c]);const b=async()=>{s(!0),i("");try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{return await uT(e)}catch(a){throw console.error("Error fetching categories:",a),a}}(c);n(e)}catch(UEe){i("Failed to load categories. "+UEe.message),console.error(UEe)}finally{s(!1)}},w=e=>{const{name:t,value:n}=e.target;v((e=>({...e,[t]:n})))};return(0,Nt.jsxs)(Ft,{className:"my-4",children:[(0,Nt.jsx)(nie,{children:(0,Nt.jsx)(sie,{children:(0,Nt.jsxs)(Nie,{className:"shadow-sm",children:[(0,Nt.jsxs)(Nie.Header,{className:"bg-white d-flex justify-content-between align-items-center",children:[(0,Nt.jsx)("h4",{className:"mb-0",children:"Categories"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)(Ws,{variant:"income"===c?"primary":"outline-primary",className:"me-2",onClick:()=>u("income"),children:"Income"}),(0,Nt.jsx)(Ws,{variant:"expense"===c?"primary":"outline-primary",onClick:()=>u("expense"),children:"Expense"})]})]}),(0,Nt.jsxs)(Nie.Body,{children:[a&&(0,Nt.jsx)(sSe,{variant:"danger",children:a}),o&&(0,Nt.jsx)(sSe,{variant:"success",children:o}),!e&&(0,Nt.jsx)(sSe,{variant:"warning",children:"You are currently offline. Category management is limited in offline mode."}),(0,Nt.jsx)("div",{className:"d-flex justify-content-end mb-3",children:(0,Nt.jsxs)(Ws,{variant:"primary",onClick:()=>{f(!1),g(null),v({name:"",type:c,icon:"\ud83d\udcb0"}),d(!0)},disabled:!e,children:[(0,Nt.jsx)(Gi,{className:"me-1"})," Add Category"]})}),(0,Nt.jsx)(qTe,{children:r?(0,Nt.jsx)("p",{className:"text-center my-3",children:"Loading categories..."}):0===t.length?(0,Nt.jsxs)("p",{className:"text-center my-3",children:["No ",c," categories found"]}):t.map((t=>(0,Nt.jsxs)(qTe.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,Nt.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Nt.jsx)("span",{className:"me-3 fs-4",children:t.icon||"\ud83d\udcb0"}),(0,Nt.jsx)("span",{children:t.name})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)(Ws,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>(e=>{f(!0),g(e),v({name:e.name,type:e.type,icon:e.icon||"\ud83d\udcb0"}),d(!0)})(t),disabled:!e,children:(0,Nt.jsx)(Hi,{})}),(0,Nt.jsx)(Ws,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm(`Are you sure you want to delete "${e.name}"?`)){i("");try{await Xke(e.id),l(`Category "${e.name}" deleted successfully`),b()}catch(UEe){i("Failed to delete category. "+UEe.message),console.error(UEe)}}})(t),disabled:!e,children:(0,Nt.jsx)(no,{})})]})]},t.id)))})]})]})})}),(0,Nt.jsxs)(kSe,{show:h,onHide:()=>d(!1),children:[(0,Nt.jsx)(kSe.Header,{closeButton:!0,children:(0,Nt.jsx)(kSe.Title,{children:p?"Edit Category":"Add New Category"})}),(0,Nt.jsx)(kSe.Body,{children:(0,Nt.jsxs)(Qpe,{children:[(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Category Name"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"name",value:y.name,onChange:w,placeholder:"Enter category name",required:!0})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Type"}),(0,Nt.jsxs)(Qpe.Select,{name:"type",value:y.type,onChange:w,children:[(0,Nt.jsx)("option",{value:"income",children:"Income"}),(0,Nt.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Icon"}),(0,Nt.jsxs)("div",{className:"p-2 border rounded",children:[(0,Nt.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[(0,Nt.jsx)("span",{className:"fs-4 me-2",children:y.icon}),(0,Nt.jsx)("span",{children:"Selected Icon"})]}),(0,Nt.jsx)("div",{className:"d-flex flex-wrap",children:["\ud83d\udcb0","\ud83d\udcb5","\ud83d\udcb8","\ud83d\udcb3","\ud83c\udfe6","\ud83c\udfe2","\ud83c\udfe0","\ud83d\ude97","\ud83c\udf54","\ud83d\udecd\ufe0f","\ud83c\udf93","\ud83d\udcda","\u2695\ufe0f","\u2708\ufe0f","\ud83c\udfad","\ud83c\udfac","\ud83c\udfe5","\ud83d\udcf1","\ud83d\udcbb","\ud83d\udc55","\ud83d\uded2","\ud83c\udfed","\ud83d\udcdd","\ud83d\udd27","\ud83d\udebf","\ud83d\udca1","\ud83d\udcfa","\ud83d\udcc8","\ud83d\udcc9","\u2728"].map(((e,t)=>(0,Nt.jsx)("div",{className:"icon-option p-2 border rounded m-1 cursor-pointer "+(y.icon===e?"bg-light":""),onClick:()=>(e=>{v((t=>({...t,icon:e})))})(e),children:(0,Nt.jsx)("span",{className:"fs-4",children:e})},t)))})]})]})]})}),(0,Nt.jsxs)(kSe.Footer,{children:[(0,Nt.jsxs)(Ws,{variant:"secondary",onClick:()=>d(!1),children:[(0,Nt.jsx)(to,{className:"me-1"})," Cancel"]}),(0,Nt.jsxs)(Ws,{variant:"primary",onClick:async()=>{if(i(""),l(""),y.name)try{p&&m?(await Yke(m.id,y),l(`Category "${y.name}" updated successfully`)):(await(async e=>{try{return await hT(e)}catch(a){throw console.error("Error adding category:",a),a}})(y),l(`Category "${y.name}" created successfully`)),d(!1),b()}catch(UEe){i("Failed to save category. "+UEe.message),console.error(UEe)}else i("Category name is required")},children:[(0,Nt.jsx)(Yi,{className:"me-1"})," ",p?"Update":"Save"]})]})]})]})};function YTe(e){let t;return function(e,t){let n=0;X.Children.forEach(e,(e=>{X.isValidElement(e)&&t(e,n++)}))}(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function XTe(e){const{title:t,eventKey:n,disabled:r,tabClassName:s,tabAttrs:a,id:i}=e.props;return null==t?null:(0,Nt.jsx)(Ps,{as:"li",role:"presentation",children:(0,Nt.jsx)(js,{as:"button",type:"button",eventKey:n,disabled:r,id:i,className:s,...a,children:t})})}const QTe=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:s=!1,unmountOnExit:a=!1,variant:i="tabs",children:o,activeKey:l=YTe(o),...c}=Wt(e,{activeKey:"onSelect"});return(0,Nt.jsxs)(DTe,{id:t,activeKey:l,onSelect:n,transition:OTe(r),mountOnEnter:s,unmountOnExit:a,children:[(0,Nt.jsx)(Bs,{id:t,...c,role:"tablist",as:"ul",variant:i,children:Ipe(o,XTe)}),(0,Nt.jsx)(FTe,{children:Ipe(o,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,Nt.jsx)(zTe,{...t})}))})]})};QTe.displayName="Tabs";const JTe=QTe,ZTe=async()=>{try{SF([1,2,3]).dispose();const e="undefined"!==typeof window&&void 0!==window.TensorFlowAndroid;let t=!0;if(e)try{t=window.TensorFlowAndroid.isTensorFlowSupported()}catch(jEe){console.warn("Error checking Android TensorFlow support:",jEe),t=!1}return{available:!0,isAndroid:e,androidSupport:t}}catch(BEe){return console.warn("TensorFlow.js is not available or not working correctly:",BEe),{available:!1,error:BEe.message,isAndroid:"undefined"!==typeof window&&void 0!==window.TensorFlowAndroid,androidSupport:!1}}},eEe=(e,t,n)=>{try{if(!e||!Array.isArray(e))throw new Error("Invalid input: values must be an array");const r=t.reduce(((e,t)=>e*t),1),s=Array.isArray(e[0])&&Array.isArray(e[0][0])?e.length*e[0].length*e[0][0].length:e.length;if(r!==s)throw new Error(`Shape mismatch: expected ${r} elements, got ${s}`);if(Array.isArray(e[0])&&Array.isArray(e[0][0]))return tO(e,t,n);if(Array.isArray(e)&&!Array.isArray(e[0]))return SF(e,n).reshape(t);throw new Error("Unsupported data format for tensor3d")}catch(BEe){if(console.error("Error creating tensor3d:",BEe),"undefined"!==typeof window&&window.TensorFlowAndroid)try{window.TensorFlowAndroid.logError(BEe.message)}catch(jEe){console.warn("Failed to log to Android:",jEe)}throw BEe}},tEe=!window.location.hostname.includes("localhost");let nEe=!1;const rEe=e=>new Date(e).toISOString().split("T")[0],sEe=(e,t,n)=>{if(!e||e.length<3)return console.log(`Not enough ${n} data for even simple predictions`),[];const r=e.slice(-Math.min(7,e.length)),s=r.reduce(((e,t)=>e+t.amount),0)/r.length;let a=0;if(r.length>=3){const e=Math.floor(r.length/2),t=r.slice(0,e),n=r.slice(e),s=t.reduce(((e,t)=>e+t.amount),0)/t.length,i=n.reduce(((e,t)=>e+t.amount),0)/n.length;a=(i-s)/e}return Array.from({length:t},((e,t)=>{const n=new Date;return n.setDate(n.getDate()+t+1),rEe(n)})).map(((e,t)=>{const r=Math.max(0,s+a*(t+1));return{date:e,amount:Math.round(100*r)/100,type:n,isSimpleEstimate:!0}}))},aEe=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const r=await ZTe();try{const a=rEe(new Date),i=rEe(new Date((new Date).setFullYear((new Date).getFullYear()-10)));console.log(`Fetching all transactions from ${i} to ${a}`);const o=(await ife(e,i,a)).filter((e=>e.type===t));if(console.log(`Found ${o.length} ${t} transactions in total`),0===o.length)return console.log(`No ${t} transactions found. Not generating predictions.`),[];const l={};o.forEach((e=>{const t=e.date.split("T")[0];l[t]||(l[t]=0),l[t]+=e.amount}));let c=Object.entries(l).map((e=>{let[t,n]=e;return{date:t,amount:n}})).sort(((e,t)=>new Date(e.date)-new Date(t.date)));if(console.log(`Aggregated data: ${c.length} days with ${t} transactions`),c.length<14)return console.log(`Not enough historical data for ${t} (only ${c.length} days)`),c.length>=3?sEe(c,n,t):[];if(!r.available||r.isAndroid&&!r.androidSupport||tEe&&Math.random()>.7)return console.warn("Using simple predictions due to TensorFlow compatibility or stability concerns"),sEe(c,n,t);try{const{normalizedData:e,mean:r,std:a}=(e=>{const t=e.map((e=>e.amount)),n=t.reduce(((e,t)=>e+t),0)/t.length,r=Math.sqrt(t.reduce(((e,t)=>e+Math.pow(t-n,2)),0)/t.length)||1;return{normalizedData:t.map((e=>(e-n)/r)),mean:n,std:r}})(c);console.log(`Normalized data length: ${e.length}`);const i=Math.min(Math.max(7,Math.floor(e.length/4)),21);console.log(`Using window size of ${i} for time series prediction`);const{X:o,y:l}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;const n=[],r=[];if(e.length<=t)return{X:n,y:r};for(let s=0;s<e.length-t;s++)n.push(e.slice(s,s+t)),r.push(e[s+t]);return{X:n,y:r}}(e,i);if(o.length<5||l.length<5)return console.log(`Not enough processed data for ${t} (${o.length} windows). Using simple predictions.`),sEe(c,n,t);if(!K||!YH)return console.error("TensorFlow.js is not properly loaded"),sEe(c,n,t);try{const s=await(async(e,t)=>{if(tEe&&!(await ZTe()).available)throw new Error("TensorFlow.js not available");if(!Array.isArray(e)||0===e.length||!Array.isArray(t)||0===t.length)throw new Error("Invalid input data for model training");console.log("Training data size:",`X: ${e.length}, Y: ${t.length}`);try{await AA();const r=YH();r.add(gY({units:32,returnSequences:!0,inputShape:[e[0].length,1]})),r.add(PK({rate:.2})),r.add(gY({units:16,returnSequences:!1})),r.add(MK({units:1})),r.compile({optimizer:oz.adam(.01),loss:"meanAbsoluteError"});const s=[];for(let t=0;t<e.length;t++){const n=[];for(let r=0;r<e[t].length;r++){const s=Number(e[t][r]);if(isNaN(s))throw new Error("Invalid numeric value in training data");n.push([s])}s.push(n)}if(0===s.length)throw new Error("Empty training data array");let a,i;try{const n=[s.length,e[0].length,1];if(a=eEe(s,n),!a)throw new Error("Failed to create tensor3d");i=TF(t.map((e=>[Number(e)])))}catch(n){if(console.error("Error creating tensor:",n),"undefined"!==typeof window&&window.TensorFlowAndroid)try{window.TensorFlowAndroid.logError(n.message)}catch(jEe){console.warn("Failed to log to Android:",jEe)}throw new Error(`Unable to create tensor: ${n.message}`)}return await r.fit(a,i,{epochs:150,batchSize:16,verbose:0,validationSplit:.2}),a.dispose(),i.dispose(),r}catch(BEe){throw console.error("Error building/training model:",BEe),new Error(`Error in TensorFlow model training: ${BEe.message}`)}})(o,l),c=e.slice(-i);if(c.length<i)throw new Error(`Not enough data for last window (need ${i})`);const u=[c.map((e=>[e]))];if(!eEe(u))throw new Error("Failed to create prediction tensor");const h=Array.from({length:n},((e,t)=>{const n=new Date;return n.setDate(n.getDate()+t+1),rEe(n)})),d=[];let p=[...c];for(let e=0;e<n;e++){const t=[p.map((e=>[e]))],n=eEe(t);if(!n)throw new Error(`Failed to create tensor on iteration ${e}`);const r=s.predict(n),a=r.dataSync()[0];d.push(a),p.shift(),p.push(a),n.dispose(),r.dispose()}const f=d.map((e=>Math.max(0,e*a+r))),m=h.map(((e,n)=>({date:e,amount:Math.round(100*f[n])/100,type:t})));return s.dispose(),m}catch(s){return console.error("Error in TensorFlow operations:",s),tEe&&(nEe=!0,console.warn("TensorFlow has been disabled for this session due to errors")),sEe(c,n,t)}}catch(BEe){if(console.error(`Error in ${t} prediction:`,BEe),"undefined"!==typeof window&&window.TensorFlowAndroid)try{window.TensorFlowAndroid.logError(`${t} prediction error: ${BEe.message}`)}catch(jEe){console.warn("Failed to log to Android:",jEe)}return console.log("Falling back to simple predictions after error"),sEe(c,n,t)}}catch(BEe){return console.error(`Error fetching/processing ${t} data:`,BEe),[]}},iEe=function(e){try{if(e.length<10)return[];const t=e.filter((e=>"income"===e.type)),n=e.filter((e=>"expense"===e.type));if(t.length<5||n.length<5)return[];const r={};t.forEach((e=>{const t=new Date(e.date).getDay();r[t]||(r[t]={income:0,expense:0}),r[t].income+=e.amount})),n.forEach((e=>{const t=new Date(e.date).getDay();r[t]||(r[t]={income:0,expense:0}),r[t].expense+=e.amount})),Object.keys(r).forEach((e=>{r[e].net=r[e].income-r[e].expense}));const s=Object.entries(r).map((e=>{let[t,n]=e;return{day:parseInt(t),...n}})).filter((e=>e.net>0)).sort(((e,t)=>t.net-e.net)).slice(0,3);if(0===s.length)return[];const a=new Date;return s.map((e=>{let t=e.day-a.getDay();t<=0&&(t+=7);const n=new Date;return n.setDate(a.getDate()+t),{date:rEe(n),cashFlow:e.net,reason:"Historically good day for cash flow based on past transactions (simple recommendation)"}}))}catch(BEe){return console.error("Error generating simple recommendations:",BEe),[]}},oEe=e=>new Date(e).toISOString().split("T")[0],lEe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),n=t.getDay(),r=t.getDate()-n;return new Date(t.setDate(r))},cEe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),n=t.getDay(),r=t.getDate()+(6-n);return new Date(t.setDate(r))},uEe=(e,t)=>0===t?e>0?100:0:(e-t)/t*100,hEe=async e=>{try{const t={start:oEe(lEe()),end:oEe(cEe())},n=(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7);return{start:oEe(lEe(t)),end:oEe(cEe(t))}})(),r=await ife(e,t.start,t.end),s=await ife(e,n.start,n.end);if(0===r.length&&0===s.length)return console.log("No transaction data found for weekly summary"),null;const a=dEe(r),i=dEe(s),o={income:{amount:a.income,change:uEe(a.income,i.income),direction:a.income>=i.income?"up":"down"},expense:{amount:a.expense,change:uEe(a.expense,i.expense),direction:a.expense<=i.expense?"up":"down"},profit:{amount:a.profit,change:uEe(a.profit,i.profit),direction:a.profit>=i.profit?"up":"down"}},l=pEe(r,"income",3),c=pEe(r,"expense",3),u=fEe(r),h=mEe(a,i,l,c,u);return{period:{start:t.start,end:t.end},summary:a,previousSummary:i,trends:o,topIncomeCategories:l,topExpenseCategories:c,notableTransactions:u,insights:h,isSampleData:!1}}catch(BEe){return console.error("Error generating weekly summary:",BEe),null}},dEe=e=>{const t=e.filter((e=>"income"===e.type)).reduce(((e,t)=>e+t.amount),0),n=e.filter((e=>"expense"===e.type)).reduce(((e,t)=>e+t.amount),0);return{income:t,expense:n,profit:t-n,transactionCount:e.length}},pEe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=e.filter((e=>e.type===t));if(0===r.length)return[];const s={};r.forEach((e=>{s[e.category]||(s[e.category]=0),s[e.category]+=e.amount}));return Object.entries(s).map((e=>{let[t,n]=e;return{name:t,amount:n}})).sort(((e,t)=>t.amount-e.amount)).slice(0,n)},fEe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;if(0===e.length)return[];const n=e.filter((e=>"income"===e.type)),r=e.filter((e=>"expense"===e.type)),s=n.length>0?n.reduce(((e,t)=>e+t.amount),0)/n.length:0,a=r.length>0?r.reduce(((e,t)=>e+t.amount),0)/r.length:0;return[...n.filter((e=>e.amount>s*(1+t))).sort(((e,t)=>t.amount-e.amount)),...r.filter((e=>e.amount>a*(1+t))).sort(((e,t)=>t.amount-e.amount))].sort(((e,t)=>t.amount-e.amount)).slice(0,5)},mEe=(e,t,n,r,s)=>{const a=[];if(0===e.transactionCount)return a.push({type:"informative",text:"No transactions found for this week. Add transactions to see insights."}),a;if(e.income>0&&t.income>0){const n=uEe(e.income,t.income);n>15?a.push({type:"positive",text:`Great job! Your income increased by ${n.toFixed(1)}% compared to last week.`}):n<-15&&a.push({type:"negative",text:`Your income decreased by ${Math.abs(n).toFixed(1)}% compared to last week.`})}if(e.expense>0&&t.expense>0){const n=uEe(e.expense,t.expense);n<-10?a.push({type:"positive",text:`Your expenses decreased by ${Math.abs(n).toFixed(1)}% compared to last week.`}):n>20&&a.push({type:"warning",text:`Your expenses increased by ${n.toFixed(1)}% compared to last week.`})}if(e.profit>0&&t.profit>0){const n=uEe(e.profit,t.profit);n>20?a.push({type:"positive",text:`Your profit increased significantly by ${n.toFixed(1)}% compared to last week.`}):n<-20&&a.push({type:"negative",text:`Your profit decreased by ${Math.abs(n).toFixed(1)}% compared to last week.`})}else e.profit<0&&a.push({type:"warning",text:`You're operating at a loss this week. Your expenses (${Cie(e.expense)}) exceed your income (${Cie(e.income)}).`});if(n.length>0&&a.push({type:"informative",text:`Your top income source this week was ${n[0].name} (${Cie(n[0].amount)}).`}),r.length>0&&a.push({type:"informative",text:`Your largest expense category this week was ${r[0].name} (${Cie(r[0].amount)}).`}),s.length>0){const e=s[0];a.push({type:"income"===e.type?"positive":"informative",text:`Notable ${e.type}: ${Cie(e.amount)} on ${oEe(e.date)} (${e.category}).`})}return a},gEe=async e=>{try{const[n,r,s]=await Promise.all([afe(e),dT(e),lT(e)]),a={createdAt:(new Date).toISOString(),userId:e,profile:s,transactions:n,categories:r,metadata:{transactionCount:n.length,categoryCount:r.length,version:"2.0"}},i=JSON.stringify(a,null,2),o=new Blob([i],{type:"application/json"}),l=(e=>`${e}/backups/backup_${(new Date).toISOString().replace(/[:.]/g,"-")}.json`)(e),c=(t=l,jS(Po(QS),t));await function(e,t,n){return LS(e=Po(e),t,n)}(c,o);return{success:!0,backupName:l,downloadURL:await function(e){return FS(e=Po(e))}(c),createdAt:a.createdAt,size:o.size,metadata:a.metadata}}catch(BEe){throw console.error("Error creating backup:",BEe),new Error(`Backup failed: ${BEe.message}`)}var t},yEe=()=>{const{currentUser:e,isOnline:t,aiFeatureEnabled:n}=Yae(),[r,s]=(0,X.useState)(null),[a,i]=(0,X.useState)(null),[o,l]=(0,X.useState)(null),[c,u]=(0,X.useState)(null),[h,d]=(0,X.useState)(null),[p,f]=(0,X.useState)({}),[m,g]=(0,X.useState)({}),[y,v]=(0,X.useState)("predictions");(0,X.useEffect)((()=>{e&&t&&(b(),w(),x(),k(),S())}),[e,t]);const b=async()=>{f((e=>({...e,income:!0}))),g((e=>({...e,income:null})));try{const t=await aEe(e.uid,"income",14);!t||0===t.length||t.every((e=>e.isMock||e.isFallback))?(s([]),g((e=>({...e,income:"Not enough real transaction data for income predictions. Please add more transactions over several days."})))):s(t)}catch(UEe){console.error("Error fetching income predictions:",UEe),g((t=>({...t,income:UEe.message}))),s([])}finally{f((e=>({...e,income:!1})))}},w=async()=>{f((e=>({...e,expense:!0}))),g((e=>({...e,expense:null})));try{const t=await aEe(e.uid,"expense",14);!t||0===t.length||t.every((e=>e.isMock||e.isFallback))?(i([]),g((e=>({...e,expense:"Not enough real transaction data for expense predictions. Please add more transactions over several days."})))):i(t)}catch(UEe){console.error("Error fetching expense predictions:",UEe),g((t=>({...t,expense:UEe.message}))),i([])}finally{f((e=>({...e,expense:!1})))}},x=async()=>{f((e=>({...e,anomalies:!0}))),g((e=>({...e,anomalies:null})));try{const t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{const n=rEe(new Date),r=rEe(new Date((new Date).setFullYear((new Date).getFullYear()-10))),s=await ife(e,r,n);if(s.length<10)return[];const a={};s.forEach((e=>{const t=`${e.category}_${e.type}`;a[t]||(a[t]=[]),a[t].push(e)}));const i=[];for(const e of Object.values(a)){if(e.length<5)continue;const n=e.map((e=>e.amount)),r=n.reduce(((e,t)=>e+t),0)/n.length,s=Math.sqrt(n.reduce(((e,t)=>e+Math.pow(t-r,2)),0)/n.length),a=s*t;e.forEach((e=>{Math.abs(e.amount-r)>a&&i.push({...e,expected:r,deviation:(e.amount-r)/r*100})}))}return i.sort(((e,t)=>Math.abs(t.deviation)-Math.abs(e.deviation)))}catch(m){return console.error("Error detecting anomalies:",m),[]}}(e.uid);t&&0!==t.length?l(t):(l([]),g((e=>({...e,anomalies:"No transaction anomalies detected or insufficient data for anomaly detection."}))))}catch(UEe){console.error("Error detecting anomalies:",UEe),g((t=>({...t,anomalies:UEe.message}))),l([])}finally{f((e=>({...e,anomalies:!1})))}},k=async()=>{f((e=>({...e,recommendations:!0}))),g((e=>({...e,recommendations:null})));try{const t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;try{const n=await ZTe(),r=rEe(new Date),s=rEe(new Date((new Date).setFullYear((new Date).getFullYear()-10))),a=await ife(e,s,r);if(a.length<14)return[];if(!n.available)return console.log("TensorFlow not available, using simple recommendations"),iEe(a,t);try{const n=await aEe(e,"income",t),r=await aEe(e,"expense",t);if(0===n.length||0===r.length)return iEe(a,t);const s={};n.forEach((e=>{s[e.date]={date:e.date,income:e.amount,expense:0,cashFlow:e.amount}})),r.forEach((e=>{s[e.date]?(s[e.date].expense=e.amount,s[e.date].cashFlow-=e.amount):s[e.date]={date:e.date,income:0,expense:e.amount,cashFlow:-e.amount}}));const i=Object.values(s).sort(((e,t)=>t.cashFlow-e.cashFlow));if(0===i.length||i[0].cashFlow<=0)return[];const o=i.filter((e=>e.cashFlow>0)).slice(0,3).map((e=>{const t=n.some((t=>t.date===e.date&&t.isSimpleEstimate))||r.some((t=>t.date===e.date&&t.isSimpleEstimate));return{date:e.date,cashFlow:e.cashFlow,reason:t?"Projected positive cash flow based on historical patterns (estimate)":`Projected high positive cash flow: Income \u20b9${e.income.toFixed(2)} - Expenses \u20b9${e.expense.toFixed(2)}`}}));return o}catch(m){return console.error("Error in stock purchase recommendations:",m),iEe(a,t)}}catch(m){return console.error("Error recommending stock purchase days:",m),[]}}(e.uid);!t||0===t.length||t.every((e=>e.isMock||e.reason.includes("sample")))?(u([]),g((e=>({...e,recommendations:"Insufficient real transaction data for meaningful recommendations."})))):u(t)}catch(UEe){console.error("Error getting recommendations:",UEe),g((t=>({...t,recommendations:UEe.message}))),u([])}finally{f((e=>({...e,recommendations:!1})))}},S=async()=>{f((e=>({...e,summary:!0}))),g((e=>({...e,summary:null})));try{const t=await hEe(e.uid);!t||t.isSampleData?(d(null),g((e=>({...e,summary:"Not enough real transaction data for a weekly summary. Please add more transactions."})))):d(t)}catch(UEe){console.error("Error generating weekly summary:",UEe),g((t=>({...t,summary:UEe.message}))),d(null)}finally{f((e=>({...e,summary:!1})))}},T=async()=>{f((e=>({...e,backup:!0}))),g((e=>({...e,backup:null})));try{const t=await gEe(e.uid);alert(`Backup created successfully! File size: ${(t.size/1024).toFixed(1)} KB`)}catch(UEe){console.error("Error creating backup:",UEe),g((t=>({...t,backup:UEe.message})))}finally{f((e=>({...e,backup:!1})))}},E=e=>p[e]?(0,Nt.jsxs)("div",{className:"text-center p-4",children:[(0,Nt.jsx)(JSe,{animation:"border",variant:"primary"}),(0,Nt.jsx)("p",{className:"mt-2",children:"Loading..."})]}):null,N=e=>{if(m[e]){let t=m[e],n="info";return t.includes("tensor3d()")||t.includes("Unable to create tensor")||t.includes("TensorFlow")?(t="Unable to run AI predictions. This is likely due to insufficient or incompatible data.",n="warning"):t.includes("historical data")&&(t=m[e],n="info"),(0,Nt.jsxs)(sSe,{variant:n,children:[(0,Nt.jsx)("p",{children:t}),"warning"===n&&(0,Nt.jsx)("p",{className:"mb-0 mt-2 small",children:"Try adding more varied transaction data (at least 14 days) or using the app in a different browser."}),"info"===n&&(0,Nt.jsx)("p",{className:"mb-0 mt-2 small",children:"Add real transactions over a period of time to enable AI predictions. We only use real data for accuracy."})]})}return null};return(0,Nt.jsxs)(Ft,{className:"ai-insights-page py-4",children:[(0,Nt.jsxs)("h2",{className:"mb-4",children:[(0,Nt.jsx)(qi,{className:"mr-2"})," AI Insights & Predictions"]}),(0,Nt.jsxs)(sSe,{variant:"info",className:"mb-4",children:[(0,Nt.jsx)("strong",{children:"Privacy Note:"})," All AI features run directly in your browser using TensorFlow.js. No external API keys or cloud services are needed, and your data never leaves your device for AI processing."]}),!t&&(0,Nt.jsx)(sSe,{variant:"warning",children:"You are currently offline. AI features require an internet connection."}),!n&&t&&(0,Nt.jsxs)(sSe,{variant:"warning",children:[(0,Nt.jsx)("strong",{children:"Compatibility Notice:"})," Advanced AI features may not be fully supported in your current environment. Showing simplified predictions instead."]}),(0,Nt.jsxs)(JTe,{activeKey:y,onSelect:e=>v(e),id:"ai-insights-tabs",className:"mb-3",children:[(0,Nt.jsx)(BTe,{eventKey:"predictions",title:"Predictions",children:(()=>{const e=!r||0===r.length,t=!a||0===a.length;return(0,Nt.jsxs)("div",{className:"predictions-container",children:[(0,Nt.jsx)("h4",{className:"mt-3 mb-4",children:"14-Day Financial Forecast"}),(0,Nt.jsxs)(nie,{children:[(0,Nt.jsx)(sie,{md:6,className:"mb-4",children:(0,Nt.jsxs)(Nie,{className:"h-100 shadow-sm",children:[(0,Nt.jsxs)(Nie.Header,{className:"bg-primary text-white d-flex align-items-center",children:[(0,Nt.jsx)(Ei,{className:"me-2"})," Income Predictions"]}),(0,Nt.jsxs)(Nie.Body,{children:[E("income"),N("income"),!p.income&&!m.income&&e&&(0,Nt.jsx)(sSe,{variant:"info",children:"No income predictions available. Add more transaction data over time."}),!p.income&&!m.income&&!e&&(0,Nt.jsx)("div",{className:"predictions-list",children:r.map(((e,t)=>(0,Nt.jsxs)("div",{className:"prediction-item d-flex justify-content-between align-items-center mb-2",children:[(0,Nt.jsx)("div",{children:Iie(e.date)}),(0,Nt.jsxs)("div",{className:"prediction-amount "+(e.isMock||e.isSimpleEstimate||e.isFallback?"text-muted":"text-success fw-bold"),children:[Cie(e.amount),e.isMock&&(0,Nt.jsx)("span",{className:"ms-2 badge bg-warning text-dark",children:"Sample"}),e.isSimpleEstimate&&(0,Nt.jsx)("span",{className:"ms-2 badge bg-info text-dark",children:"Estimate"}),e.isFallback&&(0,Nt.jsx)("span",{className:"ms-2 badge bg-secondary",children:"Fallback"})]})]},`income-${t}`)))})]})]})}),(0,Nt.jsx)(sie,{md:6,className:"mb-4",children:(0,Nt.jsxs)(Nie,{className:"h-100 shadow-sm",children:[(0,Nt.jsxs)(Nie.Header,{className:"bg-danger text-white d-flex align-items-center",children:[(0,Nt.jsx)(Ei,{className:"me-2"})," Expense Predictions"]}),(0,Nt.jsxs)(Nie.Body,{children:[E("expense"),N("expense"),!p.expense&&!m.expense&&t&&(0,Nt.jsx)(sSe,{variant:"info",children:"No expense predictions available. Add more transaction data over time."}),!p.expense&&!m.expense&&!t&&(0,Nt.jsx)("div",{className:"predictions-list",children:a.map(((e,t)=>(0,Nt.jsxs)("div",{className:"prediction-item d-flex justify-content-between align-items-center mb-2",children:[(0,Nt.jsx)("div",{children:Iie(e.date)}),(0,Nt.jsxs)("div",{className:"prediction-amount "+(e.isMock||e.isSimpleEstimate||e.isFallback?"text-muted":"text-danger fw-bold"),children:[Cie(e.amount),e.isMock&&(0,Nt.jsx)("span",{className:"ms-2 badge bg-warning text-dark",children:"Sample"}),e.isSimpleEstimate&&(0,Nt.jsx)("span",{className:"ms-2 badge bg-info text-dark",children:"Estimate"}),e.isFallback&&(0,Nt.jsx)("span",{className:"ms-2 badge bg-secondary",children:"Fallback"})]})]},`expense-${t}`)))})]})]})})]}),(0,Nt.jsxs)("div",{className:"text-muted small mb-3",children:[(0,Nt.jsx)(Oi,{className:"me-1"}),"Predictions become more accurate with more transaction data. We use real data only - no mock data."]})]})})()}),(0,Nt.jsx)(BTe,{eventKey:"anomalies",title:"Anomalies",children:(0,Nt.jsxs)("div",{className:"anomalies-container",children:[(0,Nt.jsx)("h4",{className:"mt-3 mb-4",children:"Transaction Anomalies"}),(0,Nt.jsxs)(Nie,{className:"mb-4",children:[(0,Nt.jsxs)(Nie.Header,{className:"bg-warning text-dark",children:[(0,Nt.jsx)(Oi,{className:"mr-2"})," Unusual Transactions"]}),(0,Nt.jsxs)(Nie.Body,{children:[E("anomalies"),N("anomalies"),!p.anomalies&&!m.anomalies&&o&&(0,Nt.jsx)(Nt.Fragment,{children:0===o.length?(0,Nt.jsx)(sSe,{variant:"success",children:"No unusual transactions detected. Your spending patterns appear normal."}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("p",{className:"text-muted mb-3",children:[o.length," unusual transaction",1!==o.length?"s":""," detected"]}),(0,Nt.jsx)("div",{className:"anomaly-list",children:o.map(((e,t)=>(0,Nt.jsx)(Nie,{className:"mb-3 anomaly-card",children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h5",{children:e.description||e.category}),(0,Nt.jsx)("p",{className:"text-muted",children:Iie(e.date)})]}),(0,Nt.jsxs)("div",{className:"text-right",children:[(0,Nt.jsx)("h5",{className:"income"===e.type?"text-success":"text-danger",children:Cie(e.amount)}),(0,Nt.jsxs)("p",{className:"text-muted",children:[e.deviation>0?"+":"",e.deviation.toFixed(1),"% from average"]})]})]}),(0,Nt.jsx)("p",{className:"mb-0 mt-2",children:(0,Nt.jsxs)("small",{children:["This ",e.type," is ",Math.abs(e.deviation).toFixed(1),"%",e.deviation>0?" higher":" lower"," than your average for ",e.category,"."]})})]})},t)))})]})})]})]})]})}),(0,Nt.jsx)(BTe,{eventKey:"recommendations",title:"Recommendations",children:(0,Nt.jsxs)("div",{className:"recommendations-container",children:[(0,Nt.jsx)("h4",{className:"mt-3 mb-4",children:"Business Recommendations"}),(0,Nt.jsxs)(Nie,{className:"mb-4",children:[(0,Nt.jsxs)(Nie.Header,{className:"bg-primary text-white",children:[(0,Nt.jsx)(Si,{className:"mr-2"})," Recommended Stock Purchase Days"]}),(0,Nt.jsxs)(Nie.Body,{children:[E("recommendations"),N("recommendations"),!p.recommendations&&!m.recommendations&&c&&(0,Nt.jsx)(Nt.Fragment,{children:0===c.length?(0,Nt.jsx)(sSe,{variant:"info",children:"Not enough data to make recommendations. Add more transactions."}):(0,Nt.jsxs)(Nt.Fragment,{children:[c.some((e=>e.reason&&e.reason.includes("Insufficient historical data")))&&(0,Nt.jsxs)(sSe,{variant:"warning",className:"mb-3",children:[(0,Nt.jsx)("strong",{children:"Limited Data:"})," Not enough historical data for accurate AI recommendations.",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("small",{children:"Please add more transactions for better results."})]}),c.some((e=>e.reason&&e.reason.includes("simple recommendation")))&&(0,Nt.jsxs)(sSe,{variant:"info",className:"mb-3",children:[(0,Nt.jsx)("strong",{children:"Simple Recommendations:"})," Using basic analysis of historical patterns rather than AI predictions.",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("small",{children:"Add more varied transaction data for advanced AI recommendations."})]}),(0,Nt.jsx)("p",{className:"text-muted mb-3",children:"Based on your projected cash flow, these are the optimal days for purchasing stock:"}),(0,Nt.jsx)("div",{className:"recommendation-list",children:c.map(((e,t)=>(0,Nt.jsx)(Nie,{className:"mb-3 recommendation-card",children:(0,Nt.jsxs)(Nie.Body,{children:[(0,Nt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Nt.jsx)("div",{children:(0,Nt.jsxs)("h5",{children:[0===t?"\ud83e\udd47 ":1===t?"\ud83e\udd48 ":"\ud83e\udd49 ",Iie(e.date),e.reason&&e.reason.includes("simple")&&(0,Nt.jsx)("span",{className:"ml-2 badge badge-info",children:"Simple"}),e.reason&&e.reason.includes("Insufficient")&&(0,Nt.jsx)("span",{className:"ml-2 badge badge-warning",children:"Limited Data"})]})}),(0,Nt.jsxs)("div",{className:"text-right",children:[(0,Nt.jsx)("h5",{className:"text-success",children:Cie(e.cashFlow)}),(0,Nt.jsx)("p",{className:"text-muted",children:"Projected Cash Flow"})]})]}),(0,Nt.jsx)("p",{className:"mb-0 mt-2",children:(0,Nt.jsx)("small",{children:e.reason})})]})},t)))})]})})]})]})]})}),(0,Nt.jsx)(BTe,{eventKey:"summary",title:"Weekly Summary",children:(0,Nt.jsxs)("div",{className:"summary-container",children:[(0,Nt.jsx)("h4",{className:"mt-3 mb-4",children:"Weekly Business Summary"}),(0,Nt.jsxs)(Nie,{className:"mb-4",children:[(0,Nt.jsxs)(Nie.Header,{className:"bg-info text-white",children:[(0,Nt.jsx)(qi,{className:"mr-2"})," AI-Generated Report"]}),(0,Nt.jsxs)(Nie.Body,{children:[E("summary"),N("summary"),!p.summary&&!m.summary&&h&&(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("div",{className:"summary-header",children:[(0,Nt.jsxs)("h5",{children:["Weekly Report: ",_ie(h.period.start,h.period.end)]}),(0,Nt.jsxs)(Ws,{variant:"outline-primary",size:"sm",className:"float-right",onClick:T,children:[(0,Nt.jsx)(Ai,{className:"mr-1"})," Backup Data"]})]}),h.isSampleData&&(0,Nt.jsx)(sSe,{variant:"info",className:"mt-3 mb-3",children:"This is a sample report. Add more transactions to see actual insights."}),(0,Nt.jsxs)(nie,{className:"mt-4",children:[(0,Nt.jsx)(sie,{md:4,children:(0,Nt.jsxs)("div",{className:"summary-metric",children:[(0,Nt.jsx)("h5",{children:"Income"}),(0,Nt.jsx)("div",{className:"value text-success",children:Cie(h.summary.income)}),!h.isSampleData&&(0,Nt.jsxs)("div",{className:"trend "+("up"===h.trends.income.direction?"positive":"negative"),children:["up"===h.trends.income.direction?"\u2191":"\u2193"," ",Math.abs(h.trends.income.change).toFixed(1),"%"]})]})}),(0,Nt.jsx)(sie,{md:4,children:(0,Nt.jsxs)("div",{className:"summary-metric",children:[(0,Nt.jsx)("h5",{children:"Expenses"}),(0,Nt.jsx)("div",{className:"value text-danger",children:Cie(h.summary.expense)}),!h.isSampleData&&(0,Nt.jsxs)("div",{className:"trend "+("up"===h.trends.expense.direction?"positive":"negative"),children:["up"===h.trends.expense.direction?"\u2191":"\u2193"," ",Math.abs(h.trends.expense.change).toFixed(1),"%"]})]})}),(0,Nt.jsx)(sie,{md:4,children:(0,Nt.jsxs)("div",{className:"summary-metric",children:[(0,Nt.jsx)("h5",{children:"Profit"}),(0,Nt.jsx)("div",{className:"value text-primary",children:Cie(h.summary.profit)}),!h.isSampleData&&(0,Nt.jsxs)("div",{className:"trend "+("up"===h.trends.profit.direction?"positive":"negative"),children:["up"===h.trends.profit.direction?"\u2191":"\u2193"," ",Math.abs(h.trends.profit.change).toFixed(1),"%"]})]})})]}),(0,Nt.jsx)("hr",{}),(0,Nt.jsxs)("div",{className:"insights-container mt-4",children:[(0,Nt.jsx)("h5",{children:"Insights"}),(0,Nt.jsx)("div",{className:"insights-list",children:h.insights.map(((e,t)=>(0,Nt.jsx)("div",{className:`insight-item ${e.type}`,children:e.text},t)))})]}),(0,Nt.jsx)("hr",{}),(0,Nt.jsxs)(nie,{className:"mt-4",children:[(0,Nt.jsxs)(sie,{md:6,children:[(0,Nt.jsx)("h5",{children:"Top Income Sources"}),h.topIncomeCategories.length>0?(0,Nt.jsx)("div",{className:"top-categories",children:h.topIncomeCategories.map(((e,t)=>(0,Nt.jsxs)("div",{className:"category-item",children:[(0,Nt.jsx)("div",{className:"name",children:e.name}),(0,Nt.jsx)("div",{className:"amount text-success",children:Cie(e.amount)})]},t)))}):(0,Nt.jsx)("p",{className:"text-muted",children:"No income transactions recorded"})]}),(0,Nt.jsxs)(sie,{md:6,children:[(0,Nt.jsx)("h5",{children:"Top Expense Categories"}),h.topExpenseCategories.length>0?(0,Nt.jsx)("div",{className:"top-categories",children:h.topExpenseCategories.map(((e,t)=>(0,Nt.jsxs)("div",{className:"category-item",children:[(0,Nt.jsx)("div",{className:"name",children:e.name}),(0,Nt.jsx)("div",{className:"amount text-danger",children:Cie(e.amount)})]},t)))}):(0,Nt.jsx)("p",{className:"text-muted",children:"No expense transactions recorded"})]})]})]})]})]})]})})]})]})},vEe=()=>{const[e,t]=(0,X.useState)(""),[n,r]=(0,X.useState)(""),[s,a]=(0,X.useState)(""),[i,o]=(0,X.useState)(!1),{signIn:l}=Yae(),c=Ge();return(0,Nt.jsx)(Ft,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"85vh"},children:(0,Nt.jsx)("div",{style:{maxWidth:"400px",width:"100%"},children:(0,Nt.jsx)(Nie,{className:"shadow-sm",children:(0,Nt.jsxs)(Nie.Body,{className:"p-4",children:[(0,Nt.jsxs)("div",{className:"text-center mb-4",children:[(0,Nt.jsx)("div",{className:"money-icon-container mx-auto",children:(0,Nt.jsx)(zi,{className:"money-icon"})}),(0,Nt.jsx)("h2",{className:"fw-bold",children:"Sign In"}),(0,Nt.jsx)("p",{className:"text-muted",children:"Access your Panekkatt Oil Mill account"})]}),s&&(0,Nt.jsx)(sSe,{variant:"danger",children:s}),(0,Nt.jsxs)(Qpe,{onSubmit:async t=>{t.preventDefault();try{a(""),o(!0),await l(e,n),c("/")}catch(UEe){a("Failed to sign in. Please check your credentials."),console.error(UEe)}finally{o(!1)}},children:[(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Email Address"}),(0,Nt.jsx)(Qpe.Control,{type:"email",required:!0,value:e,onChange:e=>t(e.target.value),placeholder:"Enter your email",className:"form-control-lg"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-4",children:[(0,Nt.jsx)(Qpe.Label,{children:"Password"}),(0,Nt.jsx)(Qpe.Control,{type:"password",required:!0,value:n,onChange:e=>r(e.target.value),placeholder:"Enter your password",className:"form-control-lg"})]}),(0,Nt.jsx)("div",{className:"d-grid gap-2",children:(0,Nt.jsxs)(Ws,{variant:"primary",type:"submit",size:"lg",className:"py-3",disabled:i,children:[(0,Nt.jsx)(Qi,{className:"me-2"}),i?"Signing In...":"Sign In"]})})]}),(0,Nt.jsx)("div",{className:"text-center mt-4",children:(0,Nt.jsxs)("p",{children:["Don't have an account? ",(0,Nt.jsx)(xt,{to:"/signup",className:"text-decoration-none",children:"Sign Up"})]})})]})})})})},bEe=()=>{const[e,t]=(0,X.useState)({displayName:"",email:"",password:"",confirmPassword:""}),[n,r]=(0,X.useState)(""),[s,a]=(0,X.useState)(!1),{signUp:i}=Yae(),o=Ge(),l=e=>{const{name:n,value:r}=e.target;t((e=>({...e,[n]:r})))};return(0,Nt.jsx)(Ft,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"85vh"},children:(0,Nt.jsx)("div",{style:{maxWidth:"400px",width:"100%"},children:(0,Nt.jsx)(Nie,{className:"shadow-sm",children:(0,Nt.jsxs)(Nie.Body,{className:"p-4",children:[(0,Nt.jsxs)("div",{className:"text-center mb-4",children:[(0,Nt.jsx)("div",{className:"money-icon-container mx-auto",children:(0,Nt.jsx)(ao,{className:"money-icon"})}),(0,Nt.jsx)("h2",{className:"fw-bold",children:"Create Account"}),(0,Nt.jsx)("p",{className:"text-muted",children:"Join Panekkatt Oil Mill Money Tracker"})]}),n&&(0,Nt.jsx)(sSe,{variant:"danger",children:n}),(0,Nt.jsxs)(Qpe,{onSubmit:async t=>{if(t.preventDefault(),e.password!==e.confirmPassword)return r("Passwords do not match");if(e.password.length<6)return r("Password must be at least 6 characters");try{r(""),a(!0),await i(e.email,e.password,e.displayName),o("/")}catch(UEe){r("Failed to create an account. "+UEe.message),console.error(UEe)}finally{a(!1)}},children:[(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Name"}),(0,Nt.jsx)(Qpe.Control,{type:"text",name:"displayName",required:!0,value:e.displayName,onChange:l,placeholder:"Enter your name",className:"form-control-lg"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Email Address"}),(0,Nt.jsx)(Qpe.Control,{type:"email",name:"email",required:!0,value:e.email,onChange:l,placeholder:"Enter your email",className:"form-control-lg"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-3",children:[(0,Nt.jsx)(Qpe.Label,{children:"Password"}),(0,Nt.jsx)(Qpe.Control,{type:"password",name:"password",required:!0,value:e.password,onChange:l,placeholder:"Create a password",className:"form-control-lg"})]}),(0,Nt.jsxs)(Qpe.Group,{className:"mb-4",children:[(0,Nt.jsx)(Qpe.Label,{children:"Confirm Password"}),(0,Nt.jsx)(Qpe.Control,{type:"password",name:"confirmPassword",required:!0,value:e.confirmPassword,onChange:l,placeholder:"Confirm your password",className:"form-control-lg"})]}),(0,Nt.jsx)("div",{className:"d-grid gap-2",children:(0,Nt.jsxs)(Ws,{variant:"primary",type:"submit",size:"lg",className:"py-3",disabled:s,children:[(0,Nt.jsx)(so,{className:"me-2"}),s?"Creating Account...":"Create Account"]})})]}),(0,Nt.jsx)("div",{className:"text-center mt-4",children:(0,Nt.jsxs)("p",{children:["Already have an account? ",(0,Nt.jsx)(xt,{to:"/login",className:"text-decoration-none",children:"Sign In"})]})})]})})})})},wEe=e=>{let{children:t}=e;const{currentUser:n,loading:r}=Yae();return r?(0,Nt.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,Nt.jsx)(JSe,{animation:"border",variant:"primary"})}):n?t:(0,Nt.jsx)(ot,{to:"/login"})},xEe={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},kEe=X.forwardRef(((e,t)=>{let{bsPrefix:n,position:r,containerPosition:s,className:a,as:i="div",...o}=e;return n=Dt(n,"toast-container"),(0,Nt.jsx)(i,{ref:t,...o,className:Et()(n,r&&xEe[r],s&&`position-${s}`,a)})}));kEe.displayName="ToastContainer";const SEe=kEe;const TEe=2**31-1;function EEe(e,t,n){const r=n-Date.now();e.current=r<=TEe?setTimeout(t,r):setTimeout((()=>EEe(e,t,n)),TEe)}function NEe(){const e=function(){const e=(0,X.useRef)(!0),t=(0,X.useRef)((()=>e.current));return(0,X.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}(),t=(0,X.useRef)();return oSe((()=>clearTimeout(t.current))),(0,X.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),s<=TEe?t.current=setTimeout(r,s):EEe(t,r,Date.now()+s))},clear:n,handleRef:t}}),[])}const CEe={[cn]:"showing",[hn]:"showing show"},IEe=X.forwardRef(((e,t)=>(0,Nt.jsx)(_r,{...e,ref:t,transitionClasses:CEe})));IEe.displayName="ToastFade";const _Ee=IEe,AEe=X.createContext({onClose(){}}),REe=X.forwardRef(((e,t)=>{let{bsPrefix:n,closeLabel:r="Close",closeVariant:s,closeButton:a=!0,className:i,children:o,...l}=e;n=Dt(n,"toast-header");const c=(0,X.useContext)(AEe),u=Bn((e=>{null==c||null==c.onClose||c.onClose(e)}));return(0,Nt.jsxs)("div",{ref:t,...l,className:Et()(n,i),children:[o,a&&(0,Nt.jsx)(jr,{"aria-label":r,variant:s,onClick:u,"data-dismiss":"toast"})]})}));REe.displayName="ToastHeader";const DEe=REe,OEe=X.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:s="div",...a}=e;return r=Dt(r,"toast-body"),(0,Nt.jsx)(s,{ref:t,className:Et()(n,r),...a})}));OEe.displayName="ToastBody";const MEe=OEe,PEe=X.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,transition:s=_Ee,show:a=!0,animation:i=!0,delay:o=5e3,autohide:l=!1,onClose:c,onEntered:u,onExit:h,onExiting:d,onEnter:p,onEntering:f,onExited:m,bg:g,...y}=e;n=Dt(n,"toast");const v=(0,X.useRef)(o),b=(0,X.useRef)(c);(0,X.useEffect)((()=>{v.current=o,b.current=c}),[o,c]);const w=NEe(),x=!(!l||!a),k=(0,X.useCallback)((()=>{x&&(null==b.current||b.current())}),[x]);(0,X.useEffect)((()=>{w.set(k,v.current)}),[w,k]);const S=(0,X.useMemo)((()=>({onClose:c})),[c]),T=!(!s||!i),E=(0,Nt.jsx)("div",{...y,ref:t,className:Et()(n,r,g&&`bg-${g}`,!T&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,Nt.jsx)(AEe.Provider,{value:S,children:T&&s?(0,Nt.jsx)(s,{in:a,onEnter:p,onEntering:f,onEntered:u,onExit:h,onExiting:d,onExited:m,unmountOnExit:!0,children:E}):E})}));PEe.displayName="Toast";const LEe=Object.assign(PEe,{Body:MEe,Header:DEe}),FEe=()=>{const{isOnline:e}=Yae();return e?null:(0,Nt.jsx)(SEe,{position:"top-center",className:"p-3",style:{zIndex:1070},children:(0,Nt.jsx)(LEe,{show:!e,bg:"warning",children:(0,Nt.jsxs)(LEe.Body,{className:"d-flex align-items-center text-dark",children:[(0,Nt.jsx)(Oi,{className:"me-2"}),(0,Nt.jsx)("span",{children:"You are currently offline. Some features may be limited."})]})})})},$Ee=()=>{const e=We();return(0,Nt.jsx)("div",{className:"d-md-none fixed-bottom mobile-navigation",children:(0,Nt.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,Nt.jsxs)(xt,{to:"/",className:"/"===e.pathname?"active":"",children:[(0,Nt.jsx)($i,{size:20}),(0,Nt.jsx)("span",{children:"Home"})]}),(0,Nt.jsxs)(xt,{to:"/transactions",className:"/transactions"===e.pathname?"active":"",children:[(0,Nt.jsx)(Di,{size:20}),(0,Nt.jsx)("span",{children:"Trans"})]}),(0,Nt.jsxs)(xt,{to:"/categories",className:"/categories"===e.pathname?"active":"",children:[(0,Nt.jsx)(eo,{size:20}),(0,Nt.jsx)("span",{children:"Categ"})]}),(0,Nt.jsxs)(xt,{to:"/ai-insights",className:"/ai-insights"===e.pathname?"active":"",children:[(0,Nt.jsx)(qi,{size:20}),(0,Nt.jsx)("span",{children:"AI"})]}),(0,Nt.jsxs)(xt,{to:"/profile",className:"/profile"===e.pathname?"active":"",children:[(0,Nt.jsx)(ao,{size:20}),(0,Nt.jsx)("span",{children:"Profile"})]})]})})};if(cTe)try{iTe.available().then((e=>{console.log("Speech recognition availability checked:",e)})).catch((e=>{console.error("Error checking speech recognition:",e)}))}catch(BEe){console.error("Error initializing speech recognition:",BEe)}const zEe=function(){const e=()=>"/login"===window.location.pathname||"/signup"===window.location.pathname;return(0,Nt.jsx)(Kae,{children:(0,Nt.jsx)(Qae,{children:(0,Nt.jsx)(vt,{children:(0,Nt.jsxs)("div",{className:"app-container",children:[!e()&&(0,Nt.jsx)(eie,{}),(0,Nt.jsx)(FEe,{}),(0,Nt.jsx)(Ft,{fluid:!0,className:"main-content",children:(0,Nt.jsxs)(ut,{children:[(0,Nt.jsx)(lt,{path:"/login",element:(0,Nt.jsx)(vEe,{})}),(0,Nt.jsx)(lt,{path:"/signup",element:(0,Nt.jsx)(bEe,{})}),(0,Nt.jsx)(lt,{path:"/",element:(0,Nt.jsx)(wEe,{children:(0,Nt.jsx)(Qke,{})})}),(0,Nt.jsx)(lt,{path:"/transactions",element:(0,Nt.jsx)(wEe,{children:(0,Nt.jsx)(STe,{})})}),(0,Nt.jsx)(lt,{path:"/reports",element:(0,Nt.jsx)(wEe,{children:(0,Nt.jsx)(TTe,{})})}),(0,Nt.jsx)(lt,{path:"/categories",element:(0,Nt.jsx)(wEe,{children:(0,Nt.jsx)(KTe,{})})}),(0,Nt.jsx)(lt,{path:"/ai-insights",element:(0,Nt.jsx)(wEe,{children:(0,Nt.jsx)(yEe,{})})}),(0,Nt.jsx)(lt,{path:"/profile",element:(0,Nt.jsx)(wEe,{children:(0,Nt.jsx)(VTe,{})})}),(0,Nt.jsx)(lt,{path:"*",element:(0,Nt.jsx)(ot,{to:"/"})})]})}),!e()&&(0,Nt.jsx)("footer",{className:"d-none d-md-block text-center py-3 mt-4",children:(0,Nt.jsx)(Ft,{children:(0,Nt.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Panekkatt Oil Mill | Money Tracker"]})})}),!e()&&(0,Nt.jsx)($Ee,{})]})})})})};console.log("Firebase initialized:",!!YS&&!!XS),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)})).catch((e=>{console.log("ServiceWorker registration failed, but app will still work: ",e)})),"localhost"!==window.location.hostname&&window.addEventListener("error",(function(e){e.message&&e.message.includes("chrome-extension")&&navigator.serviceWorker.getRegistrations().then((e=>{for(let t of e)t.unregister(),console.log("Unregistered problematic service worker")}))}))}));J.createRoot(document.getElementById("root")).render((0,Nt.jsx)(X.StrictMode,{children:(0,Nt.jsx)(zEe,{})}))})()})();
//# sourceMappingURL=main.624f9e68.js.map